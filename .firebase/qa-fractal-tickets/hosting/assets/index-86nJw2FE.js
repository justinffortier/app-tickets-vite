function B3(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function $o(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nO(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var rO={exports:{}},vv={},iO={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nf=Symbol.for("react.element"),z3=Symbol.for("react.portal"),q3=Symbol.for("react.fragment"),W3=Symbol.for("react.strict_mode"),H3=Symbol.for("react.profiler"),G3=Symbol.for("react.provider"),K3=Symbol.for("react.context"),Q3=Symbol.for("react.forward_ref"),Y3=Symbol.for("react.suspense"),J3=Symbol.for("react.memo"),X3=Symbol.for("react.lazy"),_x=Symbol.iterator;function Z3(t){return t===null||typeof t!="object"?null:(t=_x&&t[_x]||t["@@iterator"],typeof t=="function"?t:null)}var sO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oO=Object.assign,aO={};function bu(t,e,n){this.props=t,this.context=e,this.refs=aO,this.updater=n||sO}bu.prototype.isReactComponent={};bu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lO(){}lO.prototype=bu.prototype;function SE(t,e,n){this.props=t,this.context=e,this.refs=aO,this.updater=n||sO}var xE=SE.prototype=new lO;xE.constructor=SE;oO(xE,bu.prototype);xE.isPureReactComponent=!0;var wx=Array.isArray,cO=Object.prototype.hasOwnProperty,kE={current:null},uO={key:!0,ref:!0,__self:!0,__source:!0};function dO(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)cO.call(e,r)&&!uO.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Nf,type:t,key:s,ref:o,props:i,_owner:kE.current}}function e6(t,e){return{$$typeof:Nf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function AE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nf}function t6(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bx=/\/+/g;function d_(t,e){return typeof t=="object"&&t!==null&&t.key!=null?t6(""+t.key):e.toString(36)}function Im(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nf:case z3:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+d_(o,0):r,wx(i)?(n="",t!=null&&(n=t.replace(bx,"$&/")+"/"),Im(i,e,n,"",function(c){return c})):i!=null&&(AE(i)&&(i=e6(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bx,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",wx(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+d_(s,a);o+=Im(s,e,n,l,i)}else if(l=Z3(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+d_(s,a++),o+=Im(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Op(t,e,n){if(t==null)return t;var r=[],i=0;return Im(t,r,"","",function(s){return e.call(n,s,i++)}),r}function n6(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $n={current:null},Sm={transition:null},r6={ReactCurrentDispatcher:$n,ReactCurrentBatchConfig:Sm,ReactCurrentOwner:kE};Oe.Children={map:Op,forEach:function(t,e,n){Op(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Op(t,function(){e++}),e},toArray:function(t){return Op(t,function(e){return e})||[]},only:function(t){if(!AE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=bu;Oe.Fragment=q3;Oe.Profiler=H3;Oe.PureComponent=SE;Oe.StrictMode=W3;Oe.Suspense=Y3;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=r6;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=oO({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=kE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)cO.call(e,l)&&!uO.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Nf,type:t.type,key:i,ref:s,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:K3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G3,_context:t},t.Consumer=t};Oe.createElement=dO;Oe.createFactory=function(t){var e=dO.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:Q3,render:t}};Oe.isValidElement=AE;Oe.lazy=function(t){return{$$typeof:X3,_payload:{_status:-1,_result:t},_init:n6}};Oe.memo=function(t,e){return{$$typeof:J3,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Sm.transition;Sm.transition={};try{t()}finally{Sm.transition=e}};Oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Oe.useCallback=function(t,e){return $n.current.useCallback(t,e)};Oe.useContext=function(t){return $n.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return $n.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return $n.current.useEffect(t,e)};Oe.useId=function(){return $n.current.useId()};Oe.useImperativeHandle=function(t,e,n){return $n.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return $n.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return $n.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return $n.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return $n.current.useReducer(t,e,n)};Oe.useRef=function(t){return $n.current.useRef(t)};Oe.useState=function(t){return $n.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return $n.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return $n.current.useTransition()};Oe.version="18.2.0";iO.exports=Oe;var I=iO.exports;const mt=$o(I),i6=B3({__proto__:null,default:mt},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s6=I,o6=Symbol.for("react.element"),a6=Symbol.for("react.fragment"),l6=Object.prototype.hasOwnProperty,c6=s6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u6={key:!0,ref:!0,__self:!0,__source:!0};function hO(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)l6.call(e,r)&&!u6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:o6,type:t,key:s,ref:o,props:i,_owner:c6.current}}vv.Fragment=a6;vv.jsx=hO;vv.jsxs=hO;rO.exports=vv;var h=rO.exports;const d6=$o(h);var Vw={},fO={exports:{}},_r={},pO={exports:{}},mO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Z){var te=z.length;z.push(Z);e:for(;0<te;){var Ee=te-1>>>1,ye=z[Ee];if(0<i(ye,Z))z[Ee]=Z,z[te]=ye,te=Ee;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Z=z[0],te=z.pop();if(te!==Z){z[0]=te;e:for(var Ee=0,ye=z.length,Te=ye>>>1;Ee<Te;){var Ge=2*(Ee+1)-1,Ne=z[Ge],ht=Ge+1,Lt=z[ht];if(0>i(Ne,te))ht<ye&&0>i(Lt,Ne)?(z[Ee]=Lt,z[ht]=te,Ee=ht):(z[Ee]=Ne,z[Ge]=te,Ee=Ge);else if(ht<ye&&0>i(Lt,te))z[Ee]=Lt,z[ht]=te,Ee=ht;else break e}}return Z}function i(z,Z){var te=z.sortIndex-Z.sortIndex;return te!==0?te:z.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,p=3,m=!1,y=!1,_=!1,v=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var Z=n(c);Z!==null;){if(Z.callback===null)r(c);else if(Z.startTime<=z)r(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=n(c)}}function R(z){if(_=!1,T(z),!y)if(n(l)!==null)y=!0,Ae(D);else{var Z=n(c);Z!==null&&Re(R,Z.startTime-z)}}function D(z,Z){y=!1,_&&(_=!1,E(S),S=-1),m=!0;var te=p;try{for(T(Z),f=n(l);f!==null&&(!(f.expirationTime>Z)||z&&!N());){var Ee=f.callback;if(typeof Ee=="function"){f.callback=null,p=f.priorityLevel;var ye=Ee(f.expirationTime<=Z);Z=t.unstable_now(),typeof ye=="function"?f.callback=ye:f===n(l)&&r(l),T(Z)}else r(l);f=n(l)}if(f!==null)var Te=!0;else{var Ge=n(c);Ge!==null&&Re(R,Ge.startTime-Z),Te=!1}return Te}finally{f=null,p=te,m=!1}}var O=!1,x=null,S=-1,A=5,P=-1;function N(){return!(t.unstable_now()-P<A)}function j(){if(x!==null){var z=t.unstable_now();P=z;var Z=!0;try{Z=x(!0,z)}finally{Z?C():(O=!1,x=null)}}else O=!1}var C;if(typeof w=="function")C=function(){w(j)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,fe=ue.port2;ue.port1.onmessage=j,C=function(){fe.postMessage(null)}}else C=function(){v(j,0)};function Ae(z){x=z,O||(O=!0,C())}function Re(z,Z){S=v(function(){z(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){y||m||(y=!0,Ae(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(z){switch(p){case 1:case 2:case 3:var Z=3;break;default:Z=p}var te=p;p=Z;try{return z()}finally{p=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Z){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=p;p=z;try{return Z()}finally{p=te}},t.unstable_scheduleCallback=function(z,Z,te){var Ee=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?Ee+te:Ee):te=Ee,z){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=te+ye,z={id:u++,callback:Z,priorityLevel:z,startTime:te,expirationTime:ye,sortIndex:-1},te>Ee?(z.sortIndex=te,e(c,z),n(l)===null&&z===n(c)&&(_?(E(S),S=-1):_=!0,Re(R,te-Ee))):(z.sortIndex=ye,e(l,z),y||m||(y=!0,Ae(D))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var Z=p;return function(){var te=p;p=Z;try{return z.apply(this,arguments)}finally{p=te}}}})(mO);pO.exports=mO;var h6=pO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gO=I,mr=h6;function W(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vO=new Set,jh={};function fl(t,e){Vc(t,e),Vc(t+"Capture",e)}function Vc(t,e){for(jh[t]=e,t=0;t<e.length;t++)vO.add(e[t])}var is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fw=Object.prototype.hasOwnProperty,f6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ex={},Tx={};function p6(t){return Fw.call(Tx,t)?!0:Fw.call(Ex,t)?!1:f6.test(t)?Tx[t]=!0:(Ex[t]=!0,!1)}function m6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g6(t,e,n,r){if(e===null||typeof e>"u"||m6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Un(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mn[t]=new Un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mn[e]=new Un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mn[t]=new Un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mn[t]=new Un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mn[t]=new Un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mn[t]=new Un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mn[t]=new Un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mn[t]=new Un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mn[t]=new Un(t,5,!1,t.toLowerCase(),null,!1,!1)});var RE=/[\-:]([a-z])/g;function CE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(RE,CE);mn[e]=new Un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(RE,CE);mn[e]=new Un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(RE,CE);mn[e]=new Un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mn[t]=new Un(t,1,!1,t.toLowerCase(),null,!1,!1)});mn.xlinkHref=new Un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mn[t]=new Un(t,1,!1,t.toLowerCase(),null,!0,!0)});function PE(t,e,n,r){var i=mn.hasOwnProperty(e)?mn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g6(e,n,i,r)&&(n=null),r||i===null?p6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Es=gO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Np=Symbol.for("react.element"),tc=Symbol.for("react.portal"),nc=Symbol.for("react.fragment"),OE=Symbol.for("react.strict_mode"),$w=Symbol.for("react.profiler"),yO=Symbol.for("react.provider"),_O=Symbol.for("react.context"),NE=Symbol.for("react.forward_ref"),Uw=Symbol.for("react.suspense"),Bw=Symbol.for("react.suspense_list"),DE=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),wO=Symbol.for("react.offscreen"),Ix=Symbol.iterator;function ud(t){return t===null||typeof t!="object"?null:(t=Ix&&t[Ix]||t["@@iterator"],typeof t=="function"?t:null)}var _t=Object.assign,h_;function Md(t){if(h_===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);h_=e&&e[1]||""}return`
`+h_+t}var f_=!1;function p_(t,e){if(!t||f_)return"";f_=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{f_=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Md(t):""}function v6(t){switch(t.tag){case 5:return Md(t.type);case 16:return Md("Lazy");case 13:return Md("Suspense");case 19:return Md("SuspenseList");case 0:case 2:case 15:return t=p_(t.type,!1),t;case 11:return t=p_(t.type.render,!1),t;case 1:return t=p_(t.type,!0),t;default:return""}}function zw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nc:return"Fragment";case tc:return"Portal";case $w:return"Profiler";case OE:return"StrictMode";case Uw:return"Suspense";case Bw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _O:return(t.displayName||"Context")+".Consumer";case yO:return(t._context.displayName||"Context")+".Provider";case NE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case DE:return e=t.displayName||null,e!==null?e:zw(t.type)||"Memo";case Qs:e=t._payload,t=t._init;try{return zw(t(e))}catch{}}return null}function y6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zw(e);case 8:return e===OE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Eo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bO(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function _6(t){var e=bO(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dp(t){t._valueTracker||(t._valueTracker=_6(t))}function EO(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bO(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function rg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function qw(t,e){var n=e.checked;return _t({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Sx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Eo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function TO(t,e){e=e.checked,e!=null&&PE(t,"checked",e,!1)}function Ww(t,e){TO(t,e);var n=Eo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hw(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hw(t,e.type,Eo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hw(t,e,n){(e!=="number"||rg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vd=Array.isArray;function wc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Eo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Gw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(W(91));return _t({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kx(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(W(92));if(Vd(n)){if(1<n.length)throw Error(W(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Eo(n)}}function IO(t,e){var n=Eo(e.value),r=Eo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ax(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function SO(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Kw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?SO(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jp,xO=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jp=jp||document.createElement("div"),jp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Lh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Zd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w6=["Webkit","ms","Moz","O"];Object.keys(Zd).forEach(function(t){w6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zd[e]=Zd[t]})});function kO(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Zd.hasOwnProperty(t)&&Zd[t]?(""+e).trim():e+"px"}function AO(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=kO(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var b6=_t({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qw(t,e){if(e){if(b6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(W(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(W(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(W(61))}if(e.style!=null&&typeof e.style!="object")throw Error(W(62))}}function Yw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jw=null;function jE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xw=null,bc=null,Ec=null;function Rx(t){if(t=Lf(t)){if(typeof Xw!="function")throw Error(W(280));var e=t.stateNode;e&&(e=Ev(e),Xw(t.stateNode,t.type,e))}}function RO(t){bc?Ec?Ec.push(t):Ec=[t]:bc=t}function CO(){if(bc){var t=bc,e=Ec;if(Ec=bc=null,Rx(t),e)for(t=0;t<e.length;t++)Rx(e[t])}}function PO(t,e){return t(e)}function OO(){}var m_=!1;function NO(t,e,n){if(m_)return t(e,n);m_=!0;try{return PO(t,e,n)}finally{m_=!1,(bc!==null||Ec!==null)&&(OO(),CO())}}function Mh(t,e){var n=t.stateNode;if(n===null)return null;var r=Ev(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(W(231,e,typeof n));return n}var Zw=!1;if(is)try{var dd={};Object.defineProperty(dd,"passive",{get:function(){Zw=!0}}),window.addEventListener("test",dd,dd),window.removeEventListener("test",dd,dd)}catch{Zw=!1}function E6(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var eh=!1,ig=null,sg=!1,e0=null,T6={onError:function(t){eh=!0,ig=t}};function I6(t,e,n,r,i,s,o,a,l){eh=!1,ig=null,E6.apply(T6,arguments)}function S6(t,e,n,r,i,s,o,a,l){if(I6.apply(this,arguments),eh){if(eh){var c=ig;eh=!1,ig=null}else throw Error(W(198));sg||(sg=!0,e0=c)}}function pl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function DO(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Cx(t){if(pl(t)!==t)throw Error(W(188))}function x6(t){var e=t.alternate;if(!e){if(e=pl(t),e===null)throw Error(W(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Cx(i),t;if(s===r)return Cx(i),e;s=s.sibling}throw Error(W(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(W(189))}}if(n.alternate!==r)throw Error(W(190))}if(n.tag!==3)throw Error(W(188));return n.stateNode.current===n?t:e}function jO(t){return t=x6(t),t!==null?LO(t):null}function LO(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LO(t);if(e!==null)return e;t=t.sibling}return null}var MO=mr.unstable_scheduleCallback,Px=mr.unstable_cancelCallback,k6=mr.unstable_shouldYield,A6=mr.unstable_requestPaint,Ct=mr.unstable_now,R6=mr.unstable_getCurrentPriorityLevel,LE=mr.unstable_ImmediatePriority,VO=mr.unstable_UserBlockingPriority,og=mr.unstable_NormalPriority,C6=mr.unstable_LowPriority,FO=mr.unstable_IdlePriority,yv=null,Ei=null;function P6(t){if(Ei&&typeof Ei.onCommitFiberRoot=="function")try{Ei.onCommitFiberRoot(yv,t,void 0,(t.current.flags&128)===128)}catch{}}var Zr=Math.clz32?Math.clz32:D6,O6=Math.log,N6=Math.LN2;function D6(t){return t>>>=0,t===0?32:31-(O6(t)/N6|0)|0}var Lp=64,Mp=4194304;function Fd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ag(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Fd(a):(s&=o,s!==0&&(r=Fd(s)))}else o=n&~i,o!==0?r=Fd(o):s!==0&&(r=Fd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Zr(e),i=1<<n,r|=t[n],e&=~i;return r}function j6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function L6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=j6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function t0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $O(){var t=Lp;return Lp<<=1,!(Lp&4194240)&&(Lp=64),t}function g_(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Df(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Zr(e),t[e]=n}function M6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ME(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var We=0;function UO(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BO,VE,zO,qO,WO,n0=!1,Vp=[],lo=null,co=null,uo=null,Vh=new Map,Fh=new Map,Xs=[],V6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ox(t,e){switch(t){case"focusin":case"focusout":lo=null;break;case"dragenter":case"dragleave":co=null;break;case"mouseover":case"mouseout":uo=null;break;case"pointerover":case"pointerout":Vh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fh.delete(e.pointerId)}}function hd(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Lf(e),e!==null&&VE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function F6(t,e,n,r,i){switch(e){case"focusin":return lo=hd(lo,t,e,n,r,i),!0;case"dragenter":return co=hd(co,t,e,n,r,i),!0;case"mouseover":return uo=hd(uo,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Vh.set(s,hd(Vh.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Fh.set(s,hd(Fh.get(s)||null,t,e,n,r,i)),!0}return!1}function HO(t){var e=Sa(t.target);if(e!==null){var n=pl(e);if(n!==null){if(e=n.tag,e===13){if(e=DO(n),e!==null){t.blockedOn=e,WO(t.priority,function(){zO(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=r0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jw=r,n.target.dispatchEvent(r),Jw=null}else return e=Lf(n),e!==null&&VE(e),t.blockedOn=n,!1;e.shift()}return!0}function Nx(t,e,n){xm(t)&&n.delete(e)}function $6(){n0=!1,lo!==null&&xm(lo)&&(lo=null),co!==null&&xm(co)&&(co=null),uo!==null&&xm(uo)&&(uo=null),Vh.forEach(Nx),Fh.forEach(Nx)}function fd(t,e){t.blockedOn===e&&(t.blockedOn=null,n0||(n0=!0,mr.unstable_scheduleCallback(mr.unstable_NormalPriority,$6)))}function $h(t){function e(i){return fd(i,t)}if(0<Vp.length){fd(Vp[0],t);for(var n=1;n<Vp.length;n++){var r=Vp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(lo!==null&&fd(lo,t),co!==null&&fd(co,t),uo!==null&&fd(uo,t),Vh.forEach(e),Fh.forEach(e),n=0;n<Xs.length;n++)r=Xs[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Xs.length&&(n=Xs[0],n.blockedOn===null);)HO(n),n.blockedOn===null&&Xs.shift()}var Tc=Es.ReactCurrentBatchConfig,lg=!0;function U6(t,e,n,r){var i=We,s=Tc.transition;Tc.transition=null;try{We=1,FE(t,e,n,r)}finally{We=i,Tc.transition=s}}function B6(t,e,n,r){var i=We,s=Tc.transition;Tc.transition=null;try{We=4,FE(t,e,n,r)}finally{We=i,Tc.transition=s}}function FE(t,e,n,r){if(lg){var i=r0(t,e,n,r);if(i===null)x_(t,e,r,cg,n),Ox(t,r);else if(F6(i,t,e,n,r))r.stopPropagation();else if(Ox(t,r),e&4&&-1<V6.indexOf(t)){for(;i!==null;){var s=Lf(i);if(s!==null&&BO(s),s=r0(t,e,n,r),s===null&&x_(t,e,r,cg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else x_(t,e,r,null,n)}}var cg=null;function r0(t,e,n,r){if(cg=null,t=jE(r),t=Sa(t),t!==null)if(e=pl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=DO(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return cg=t,null}function GO(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(R6()){case LE:return 1;case VO:return 4;case og:case C6:return 16;case FO:return 536870912;default:return 16}default:return 16}}var ro=null,$E=null,km=null;function KO(){if(km)return km;var t,e=$E,n=e.length,r,i="value"in ro?ro.value:ro.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return km=i.slice(t,1<r?1-r:void 0)}function Am(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fp(){return!0}function Dx(){return!1}function wr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Fp:Dx,this.isPropagationStopped=Dx,this}return _t(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Fp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Fp)},persist:function(){},isPersistent:Fp}),e}var Eu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},UE=wr(Eu),jf=_t({},Eu,{view:0,detail:0}),z6=wr(jf),v_,y_,pd,_v=_t({},jf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:BE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==pd&&(pd&&t.type==="mousemove"?(v_=t.screenX-pd.screenX,y_=t.screenY-pd.screenY):y_=v_=0,pd=t),v_)},movementY:function(t){return"movementY"in t?t.movementY:y_}}),jx=wr(_v),q6=_t({},_v,{dataTransfer:0}),W6=wr(q6),H6=_t({},jf,{relatedTarget:0}),__=wr(H6),G6=_t({},Eu,{animationName:0,elapsedTime:0,pseudoElement:0}),K6=wr(G6),Q6=_t({},Eu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y6=wr(Q6),J6=_t({},Eu,{data:0}),Lx=wr(J6),X6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tB(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eB[t])?!!e[t]:!1}function BE(){return tB}var nB=_t({},jf,{key:function(t){if(t.key){var e=X6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Am(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Z6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:BE,charCode:function(t){return t.type==="keypress"?Am(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Am(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rB=wr(nB),iB=_t({},_v,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Mx=wr(iB),sB=_t({},jf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:BE}),oB=wr(sB),aB=_t({},Eu,{propertyName:0,elapsedTime:0,pseudoElement:0}),lB=wr(aB),cB=_t({},_v,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uB=wr(cB),dB=[9,13,27,32],zE=is&&"CompositionEvent"in window,th=null;is&&"documentMode"in document&&(th=document.documentMode);var hB=is&&"TextEvent"in window&&!th,QO=is&&(!zE||th&&8<th&&11>=th),Vx=" ",Fx=!1;function YO(t,e){switch(t){case"keyup":return dB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JO(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rc=!1;function fB(t,e){switch(t){case"compositionend":return JO(e);case"keypress":return e.which!==32?null:(Fx=!0,Vx);case"textInput":return t=e.data,t===Vx&&Fx?null:t;default:return null}}function pB(t,e){if(rc)return t==="compositionend"||!zE&&YO(t,e)?(t=KO(),km=$E=ro=null,rc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QO&&e.locale!=="ko"?null:e.data;default:return null}}var mB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $x(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!mB[t.type]:e==="textarea"}function XO(t,e,n,r){RO(r),e=ug(e,"onChange"),0<e.length&&(n=new UE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var nh=null,Uh=null;function gB(t){cN(t,0)}function wv(t){var e=oc(t);if(EO(e))return t}function vB(t,e){if(t==="change")return e}var ZO=!1;if(is){var w_;if(is){var b_="oninput"in document;if(!b_){var Ux=document.createElement("div");Ux.setAttribute("oninput","return;"),b_=typeof Ux.oninput=="function"}w_=b_}else w_=!1;ZO=w_&&(!document.documentMode||9<document.documentMode)}function Bx(){nh&&(nh.detachEvent("onpropertychange",eN),Uh=nh=null)}function eN(t){if(t.propertyName==="value"&&wv(Uh)){var e=[];XO(e,Uh,t,jE(t)),NO(gB,e)}}function yB(t,e,n){t==="focusin"?(Bx(),nh=e,Uh=n,nh.attachEvent("onpropertychange",eN)):t==="focusout"&&Bx()}function _B(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return wv(Uh)}function wB(t,e){if(t==="click")return wv(e)}function bB(t,e){if(t==="input"||t==="change")return wv(e)}function EB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ti=typeof Object.is=="function"?Object.is:EB;function Bh(t,e){if(ti(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fw.call(e,i)||!ti(t[i],e[i]))return!1}return!0}function zx(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qx(t,e){var n=zx(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zx(n)}}function tN(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tN(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nN(){for(var t=window,e=rg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=rg(t.document)}return e}function qE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TB(t){var e=nN(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tN(n.ownerDocument.documentElement,n)){if(r!==null&&qE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=qx(n,s);var o=qx(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var IB=is&&"documentMode"in document&&11>=document.documentMode,ic=null,i0=null,rh=null,s0=!1;function Wx(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;s0||ic==null||ic!==rg(r)||(r=ic,"selectionStart"in r&&qE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),rh&&Bh(rh,r)||(rh=r,r=ug(i0,"onSelect"),0<r.length&&(e=new UE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ic)))}function $p(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var sc={animationend:$p("Animation","AnimationEnd"),animationiteration:$p("Animation","AnimationIteration"),animationstart:$p("Animation","AnimationStart"),transitionend:$p("Transition","TransitionEnd")},E_={},rN={};is&&(rN=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function bv(t){if(E_[t])return E_[t];if(!sc[t])return t;var e=sc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rN)return E_[t]=e[n];return t}var iN=bv("animationend"),sN=bv("animationiteration"),oN=bv("animationstart"),aN=bv("transitionend"),lN=new Map,Hx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uo(t,e){lN.set(t,e),fl(e,[t])}for(var T_=0;T_<Hx.length;T_++){var I_=Hx[T_],SB=I_.toLowerCase(),xB=I_[0].toUpperCase()+I_.slice(1);Uo(SB,"on"+xB)}Uo(iN,"onAnimationEnd");Uo(sN,"onAnimationIteration");Uo(oN,"onAnimationStart");Uo("dblclick","onDoubleClick");Uo("focusin","onFocus");Uo("focusout","onBlur");Uo(aN,"onTransitionEnd");Vc("onMouseEnter",["mouseout","mouseover"]);Vc("onMouseLeave",["mouseout","mouseover"]);Vc("onPointerEnter",["pointerout","pointerover"]);Vc("onPointerLeave",["pointerout","pointerover"]);fl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fl("onBeforeInput",["compositionend","keypress","textInput","paste"]);fl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $d="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kB=new Set("cancel close invalid load scroll toggle".split(" ").concat($d));function Gx(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,S6(r,e,void 0,t),t.currentTarget=null}function cN(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Gx(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Gx(i,a,c),s=l}}}if(sg)throw t=e0,sg=!1,e0=null,t}function tt(t,e){var n=e[u0];n===void 0&&(n=e[u0]=new Set);var r=t+"__bubble";n.has(r)||(uN(e,t,2,!1),n.add(r))}function S_(t,e,n){var r=0;e&&(r|=4),uN(n,t,r,e)}var Up="_reactListening"+Math.random().toString(36).slice(2);function zh(t){if(!t[Up]){t[Up]=!0,vO.forEach(function(n){n!=="selectionchange"&&(kB.has(n)||S_(n,!1,t),S_(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Up]||(e[Up]=!0,S_("selectionchange",!1,e))}}function uN(t,e,n,r){switch(GO(e)){case 1:var i=U6;break;case 4:i=B6;break;default:i=FE}n=i.bind(null,e,n,t),i=void 0,!Zw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function x_(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Sa(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}NO(function(){var c=s,u=jE(n),f=[];e:{var p=lN.get(t);if(p!==void 0){var m=UE,y=t;switch(t){case"keypress":if(Am(n)===0)break e;case"keydown":case"keyup":m=rB;break;case"focusin":y="focus",m=__;break;case"focusout":y="blur",m=__;break;case"beforeblur":case"afterblur":m=__;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=jx;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=W6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=oB;break;case iN:case sN:case oN:m=K6;break;case aN:m=lB;break;case"scroll":m=z6;break;case"wheel":m=uB;break;case"copy":case"cut":case"paste":m=Y6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Mx}var _=(e&4)!==0,v=!_&&t==="scroll",E=_?p!==null?p+"Capture":null:p;_=[];for(var w=c,T;w!==null;){T=w;var R=T.stateNode;if(T.tag===5&&R!==null&&(T=R,E!==null&&(R=Mh(w,E),R!=null&&_.push(qh(w,R,T)))),v)break;w=w.return}0<_.length&&(p=new m(p,y,null,n,u),f.push({event:p,listeners:_}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==Jw&&(y=n.relatedTarget||n.fromElement)&&(Sa(y)||y[ss]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(y=n.relatedTarget||n.toElement,m=c,y=y?Sa(y):null,y!==null&&(v=pl(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(m=null,y=c),m!==y)){if(_=jx,R="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(_=Mx,R="onPointerLeave",E="onPointerEnter",w="pointer"),v=m==null?p:oc(m),T=y==null?p:oc(y),p=new _(R,w+"leave",m,n,u),p.target=v,p.relatedTarget=T,R=null,Sa(u)===c&&(_=new _(E,w+"enter",y,n,u),_.target=T,_.relatedTarget=v,R=_),v=R,m&&y)t:{for(_=m,E=y,w=0,T=_;T;T=Cl(T))w++;for(T=0,R=E;R;R=Cl(R))T++;for(;0<w-T;)_=Cl(_),w--;for(;0<T-w;)E=Cl(E),T--;for(;w--;){if(_===E||E!==null&&_===E.alternate)break t;_=Cl(_),E=Cl(E)}_=null}else _=null;m!==null&&Kx(f,p,m,_,!1),y!==null&&v!==null&&Kx(f,v,y,_,!0)}}e:{if(p=c?oc(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var D=vB;else if($x(p))if(ZO)D=bB;else{D=_B;var O=yB}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=wB);if(D&&(D=D(t,c))){XO(f,D,n,u);break e}O&&O(t,p,c),t==="focusout"&&(O=p._wrapperState)&&O.controlled&&p.type==="number"&&Hw(p,"number",p.value)}switch(O=c?oc(c):window,t){case"focusin":($x(O)||O.contentEditable==="true")&&(ic=O,i0=c,rh=null);break;case"focusout":rh=i0=ic=null;break;case"mousedown":s0=!0;break;case"contextmenu":case"mouseup":case"dragend":s0=!1,Wx(f,n,u);break;case"selectionchange":if(IB)break;case"keydown":case"keyup":Wx(f,n,u)}var x;if(zE)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else rc?YO(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(QO&&n.locale!=="ko"&&(rc||S!=="onCompositionStart"?S==="onCompositionEnd"&&rc&&(x=KO()):(ro=u,$E="value"in ro?ro.value:ro.textContent,rc=!0)),O=ug(c,S),0<O.length&&(S=new Lx(S,t,null,n,u),f.push({event:S,listeners:O}),x?S.data=x:(x=JO(n),x!==null&&(S.data=x)))),(x=hB?fB(t,n):pB(t,n))&&(c=ug(c,"onBeforeInput"),0<c.length&&(u=new Lx("onBeforeInput","beforeinput",null,n,u),f.push({event:u,listeners:c}),u.data=x))}cN(f,e)})}function qh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ug(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Mh(t,n),s!=null&&r.unshift(qh(t,s,i)),s=Mh(t,e),s!=null&&r.push(qh(t,s,i))),t=t.return}return r}function Cl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kx(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=Mh(n,s),l!=null&&o.unshift(qh(n,l,a))):i||(l=Mh(n,s),l!=null&&o.push(qh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AB=/\r\n?/g,RB=/\u0000|\uFFFD/g;function Qx(t){return(typeof t=="string"?t:""+t).replace(AB,`
`).replace(RB,"")}function Bp(t,e,n){if(e=Qx(e),Qx(t)!==e&&n)throw Error(W(425))}function dg(){}var o0=null,a0=null;function l0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var c0=typeof setTimeout=="function"?setTimeout:void 0,CB=typeof clearTimeout=="function"?clearTimeout:void 0,Yx=typeof Promise=="function"?Promise:void 0,PB=typeof queueMicrotask=="function"?queueMicrotask:typeof Yx<"u"?function(t){return Yx.resolve(null).then(t).catch(OB)}:c0;function OB(t){setTimeout(function(){throw t})}function k_(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),$h(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);$h(e)}function ho(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Jx(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Tu=Math.random().toString(36).slice(2),hi="__reactFiber$"+Tu,Wh="__reactProps$"+Tu,ss="__reactContainer$"+Tu,u0="__reactEvents$"+Tu,NB="__reactListeners$"+Tu,DB="__reactHandles$"+Tu;function Sa(t){var e=t[hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ss]||n[hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Jx(t);t!==null;){if(n=t[hi])return n;t=Jx(t)}return e}t=n,n=t.parentNode}return null}function Lf(t){return t=t[hi]||t[ss],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(W(33))}function Ev(t){return t[Wh]||null}var d0=[],ac=-1;function Bo(t){return{current:t}}function rt(t){0>ac||(t.current=d0[ac],d0[ac]=null,ac--)}function Je(t,e){ac++,d0[ac]=t.current,t.current=e}var To={},Rn=Bo(To),Qn=Bo(!1),za=To;function Fc(t,e){var n=t.type.contextTypes;if(!n)return To;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yn(t){return t=t.childContextTypes,t!=null}function hg(){rt(Qn),rt(Rn)}function Xx(t,e,n){if(Rn.current!==To)throw Error(W(168));Je(Rn,e),Je(Qn,n)}function dN(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(W(108,y6(t)||"Unknown",i));return _t({},n,r)}function fg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||To,za=Rn.current,Je(Rn,t),Je(Qn,Qn.current),!0}function Zx(t,e,n){var r=t.stateNode;if(!r)throw Error(W(169));n?(t=dN(t,e,za),r.__reactInternalMemoizedMergedChildContext=t,rt(Qn),rt(Rn),Je(Rn,t)):rt(Qn),Je(Qn,n)}var Bi=null,Tv=!1,A_=!1;function hN(t){Bi===null?Bi=[t]:Bi.push(t)}function jB(t){Tv=!0,hN(t)}function zo(){if(!A_&&Bi!==null){A_=!0;var t=0,e=We;try{var n=Bi;for(We=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bi=null,Tv=!1}catch(i){throw Bi!==null&&(Bi=Bi.slice(t+1)),MO(LE,zo),i}finally{We=e,A_=!1}}return null}var lc=[],cc=0,pg=null,mg=0,kr=[],Ar=0,qa=null,Gi=1,Ki="";function ua(t,e){lc[cc++]=mg,lc[cc++]=pg,pg=t,mg=e}function fN(t,e,n){kr[Ar++]=Gi,kr[Ar++]=Ki,kr[Ar++]=qa,qa=t;var r=Gi;t=Ki;var i=32-Zr(r)-1;r&=~(1<<i),n+=1;var s=32-Zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gi=1<<32-Zr(e)+i|n<<i|r,Ki=s+t}else Gi=1<<s|n<<i|r,Ki=t}function WE(t){t.return!==null&&(ua(t,1),fN(t,1,0))}function HE(t){for(;t===pg;)pg=lc[--cc],lc[cc]=null,mg=lc[--cc],lc[cc]=null;for(;t===qa;)qa=kr[--Ar],kr[Ar]=null,Ki=kr[--Ar],kr[Ar]=null,Gi=kr[--Ar],kr[Ar]=null}var hr=null,ur=null,at=!1,Yr=null;function pN(t,e){var n=Pr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ek(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hr=t,ur=ho(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hr=t,ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=qa!==null?{id:Gi,overflow:Ki}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,hr=t,ur=null,!0):!1;default:return!1}}function h0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function f0(t){if(at){var e=ur;if(e){var n=e;if(!ek(t,e)){if(h0(t))throw Error(W(418));e=ho(n.nextSibling);var r=hr;e&&ek(t,e)?pN(r,n):(t.flags=t.flags&-4097|2,at=!1,hr=t)}}else{if(h0(t))throw Error(W(418));t.flags=t.flags&-4097|2,at=!1,hr=t}}}function tk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hr=t}function zp(t){if(t!==hr)return!1;if(!at)return tk(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!l0(t.type,t.memoizedProps)),e&&(e=ur)){if(h0(t))throw mN(),Error(W(418));for(;e;)pN(t,e),e=ho(e.nextSibling)}if(tk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(W(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ur=ho(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ur=null}}else ur=hr?ho(t.stateNode.nextSibling):null;return!0}function mN(){for(var t=ur;t;)t=ho(t.nextSibling)}function $c(){ur=hr=null,at=!1}function GE(t){Yr===null?Yr=[t]:Yr.push(t)}var LB=Es.ReactCurrentBatchConfig;function Hr(t,e){if(t&&t.defaultProps){e=_t({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var gg=Bo(null),vg=null,uc=null,KE=null;function QE(){KE=uc=vg=null}function YE(t){var e=gg.current;rt(gg),t._currentValue=e}function p0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ic(t,e){vg=t,KE=uc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Wn=!0),t.firstContext=null)}function Lr(t){var e=t._currentValue;if(KE!==t)if(t={context:t,memoizedValue:e,next:null},uc===null){if(vg===null)throw Error(W(308));uc=t,vg.dependencies={lanes:0,firstContext:t}}else uc=uc.next=t;return e}var xa=null;function JE(t){xa===null?xa=[t]:xa.push(t)}function gN(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,JE(e)):(n.next=i.next,i.next=n),e.interleaved=n,os(t,r)}function os(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ys=!1;function XE(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vN(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function fo(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Me&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,os(t,n)}return i=r.interleaved,i===null?(e.next=e,JE(r)):(e.next=i.next,i.next=e),r.interleaved=e,os(t,n)}function Rm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ME(t,n)}}function nk(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function yg(t,e,n,r){var i=t.updateQueue;Ys=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=t,_=a;switch(p=e,m=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){f=y.call(m,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,p=typeof y=="function"?y.call(m,f,p):y,p==null)break e;f=_t({},f,p);break e;case 2:Ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=f):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=f),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ha|=o,t.lanes=o,t.memoizedState=f}}function rk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(W(191,i));i.call(r)}}}var yN=new gO.Component().refs;function m0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:_t({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Iv={isMounted:function(t){return(t=t._reactInternals)?pl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=mo(t),s=Zi(r,i);s.payload=e,n!=null&&(s.callback=n),e=fo(t,s,i),e!==null&&(ei(e,t,i,r),Rm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Mn(),i=mo(t),s=Zi(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=fo(t,s,i),e!==null&&(ei(e,t,i,r),Rm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Mn(),r=mo(t),i=Zi(n,r);i.tag=2,e!=null&&(i.callback=e),e=fo(t,i,r),e!==null&&(ei(e,t,r,n),Rm(e,t,r))}};function ik(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Bh(n,r)||!Bh(i,s):!0}function _N(t,e,n){var r=!1,i=To,s=e.contextType;return typeof s=="object"&&s!==null?s=Lr(s):(i=Yn(e)?za:Rn.current,r=e.contextTypes,s=(r=r!=null)?Fc(t,i):To),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Iv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function sk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Iv.enqueueReplaceState(e,e.state,null)}function g0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=yN,XE(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Lr(s):(s=Yn(e)?za:Rn.current,i.context=Fc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(m0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Iv.enqueueReplaceState(i,i.state,null),yg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function md(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(W(309));var r=n.stateNode}if(!r)throw Error(W(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===yN&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(W(284));if(!n._owner)throw Error(W(290,t))}return t}function qp(t,e){throw t=Object.prototype.toString.call(e),Error(W(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ok(t){var e=t._init;return e(t._payload)}function wN(t){function e(E,w){if(t){var T=E.deletions;T===null?(E.deletions=[w],E.flags|=16):T.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=go(E,w),E.index=0,E.sibling=null,E}function s(E,w,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<w?(E.flags|=2,w):T):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,w,T,R){return w===null||w.tag!==6?(w=j_(T,E.mode,R),w.return=E,w):(w=i(w,T),w.return=E,w)}function l(E,w,T,R){var D=T.type;return D===nc?u(E,w,T.props.children,R,T.key):w!==null&&(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qs&&ok(D)===w.type)?(R=i(w,T.props),R.ref=md(E,w,T),R.return=E,R):(R=jm(T.type,T.key,T.props,null,E.mode,R),R.ref=md(E,w,T),R.return=E,R)}function c(E,w,T,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==T.containerInfo||w.stateNode.implementation!==T.implementation?(w=L_(T,E.mode,R),w.return=E,w):(w=i(w,T.children||[]),w.return=E,w)}function u(E,w,T,R,D){return w===null||w.tag!==7?(w=Ma(T,E.mode,R,D),w.return=E,w):(w=i(w,T),w.return=E,w)}function f(E,w,T){if(typeof w=="string"&&w!==""||typeof w=="number")return w=j_(""+w,E.mode,T),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Np:return T=jm(w.type,w.key,w.props,null,E.mode,T),T.ref=md(E,null,w),T.return=E,T;case tc:return w=L_(w,E.mode,T),w.return=E,w;case Qs:var R=w._init;return f(E,R(w._payload),T)}if(Vd(w)||ud(w))return w=Ma(w,E.mode,T,null),w.return=E,w;qp(E,w)}return null}function p(E,w,T,R){var D=w!==null?w.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return D!==null?null:a(E,w,""+T,R);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Np:return T.key===D?l(E,w,T,R):null;case tc:return T.key===D?c(E,w,T,R):null;case Qs:return D=T._init,p(E,w,D(T._payload),R)}if(Vd(T)||ud(T))return D!==null?null:u(E,w,T,R,null);qp(E,T)}return null}function m(E,w,T,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(T)||null,a(w,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Np:return E=E.get(R.key===null?T:R.key)||null,l(w,E,R,D);case tc:return E=E.get(R.key===null?T:R.key)||null,c(w,E,R,D);case Qs:var O=R._init;return m(E,w,T,O(R._payload),D)}if(Vd(R)||ud(R))return E=E.get(T)||null,u(w,E,R,D,null);qp(w,R)}return null}function y(E,w,T,R){for(var D=null,O=null,x=w,S=w=0,A=null;x!==null&&S<T.length;S++){x.index>S?(A=x,x=null):A=x.sibling;var P=p(E,x,T[S],R);if(P===null){x===null&&(x=A);break}t&&x&&P.alternate===null&&e(E,x),w=s(P,w,S),O===null?D=P:O.sibling=P,O=P,x=A}if(S===T.length)return n(E,x),at&&ua(E,S),D;if(x===null){for(;S<T.length;S++)x=f(E,T[S],R),x!==null&&(w=s(x,w,S),O===null?D=x:O.sibling=x,O=x);return at&&ua(E,S),D}for(x=r(E,x);S<T.length;S++)A=m(x,E,S,T[S],R),A!==null&&(t&&A.alternate!==null&&x.delete(A.key===null?S:A.key),w=s(A,w,S),O===null?D=A:O.sibling=A,O=A);return t&&x.forEach(function(N){return e(E,N)}),at&&ua(E,S),D}function _(E,w,T,R){var D=ud(T);if(typeof D!="function")throw Error(W(150));if(T=D.call(T),T==null)throw Error(W(151));for(var O=D=null,x=w,S=w=0,A=null,P=T.next();x!==null&&!P.done;S++,P=T.next()){x.index>S?(A=x,x=null):A=x.sibling;var N=p(E,x,P.value,R);if(N===null){x===null&&(x=A);break}t&&x&&N.alternate===null&&e(E,x),w=s(N,w,S),O===null?D=N:O.sibling=N,O=N,x=A}if(P.done)return n(E,x),at&&ua(E,S),D;if(x===null){for(;!P.done;S++,P=T.next())P=f(E,P.value,R),P!==null&&(w=s(P,w,S),O===null?D=P:O.sibling=P,O=P);return at&&ua(E,S),D}for(x=r(E,x);!P.done;S++,P=T.next())P=m(x,E,S,P.value,R),P!==null&&(t&&P.alternate!==null&&x.delete(P.key===null?S:P.key),w=s(P,w,S),O===null?D=P:O.sibling=P,O=P);return t&&x.forEach(function(j){return e(E,j)}),at&&ua(E,S),D}function v(E,w,T,R){if(typeof T=="object"&&T!==null&&T.type===nc&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Np:e:{for(var D=T.key,O=w;O!==null;){if(O.key===D){if(D=T.type,D===nc){if(O.tag===7){n(E,O.sibling),w=i(O,T.props.children),w.return=E,E=w;break e}}else if(O.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Qs&&ok(D)===O.type){n(E,O.sibling),w=i(O,T.props),w.ref=md(E,O,T),w.return=E,E=w;break e}n(E,O);break}else e(E,O);O=O.sibling}T.type===nc?(w=Ma(T.props.children,E.mode,R,T.key),w.return=E,E=w):(R=jm(T.type,T.key,T.props,null,E.mode,R),R.ref=md(E,w,T),R.return=E,E=R)}return o(E);case tc:e:{for(O=T.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===T.containerInfo&&w.stateNode.implementation===T.implementation){n(E,w.sibling),w=i(w,T.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=L_(T,E.mode,R),w.return=E,E=w}return o(E);case Qs:return O=T._init,v(E,w,O(T._payload),R)}if(Vd(T))return y(E,w,T,R);if(ud(T))return _(E,w,T,R);qp(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,T),w.return=E,E=w):(n(E,w),w=j_(T,E.mode,R),w.return=E,E=w),o(E)):n(E,w)}return v}var Uc=wN(!0),bN=wN(!1),Mf={},Ti=Bo(Mf),Hh=Bo(Mf),Gh=Bo(Mf);function ka(t){if(t===Mf)throw Error(W(174));return t}function ZE(t,e){switch(Je(Gh,e),Je(Hh,t),Je(Ti,Mf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Kw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Kw(e,t)}rt(Ti),Je(Ti,e)}function Bc(){rt(Ti),rt(Hh),rt(Gh)}function EN(t){ka(Gh.current);var e=ka(Ti.current),n=Kw(e,t.type);e!==n&&(Je(Hh,t),Je(Ti,n))}function eT(t){Hh.current===t&&(rt(Ti),rt(Hh))}var pt=Bo(0);function _g(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var R_=[];function tT(){for(var t=0;t<R_.length;t++)R_[t]._workInProgressVersionPrimary=null;R_.length=0}var Cm=Es.ReactCurrentDispatcher,C_=Es.ReactCurrentBatchConfig,Wa=0,vt=null,Wt=null,Xt=null,wg=!1,ih=!1,Kh=0,MB=0;function bn(){throw Error(W(321))}function nT(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ti(t[n],e[n]))return!1;return!0}function rT(t,e,n,r,i,s){if(Wa=s,vt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Cm.current=t===null||t.memoizedState===null?UB:BB,t=n(r,i),ih){s=0;do{if(ih=!1,Kh=0,25<=s)throw Error(W(301));s+=1,Xt=Wt=null,e.updateQueue=null,Cm.current=zB,t=n(r,i)}while(ih)}if(Cm.current=bg,e=Wt!==null&&Wt.next!==null,Wa=0,Xt=Wt=vt=null,wg=!1,e)throw Error(W(300));return t}function iT(){var t=Kh!==0;return Kh=0,t}function ci(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?vt.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Mr(){if(Wt===null){var t=vt.alternate;t=t!==null?t.memoizedState:null}else t=Wt.next;var e=Xt===null?vt.memoizedState:Xt.next;if(e!==null)Xt=e,Wt=t;else{if(t===null)throw Error(W(310));Wt=t,t={memoizedState:Wt.memoizedState,baseState:Wt.baseState,baseQueue:Wt.baseQueue,queue:Wt.queue,next:null},Xt===null?vt.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Qh(t,e){return typeof e=="function"?e(t):e}function P_(t){var e=Mr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=Wt,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Wa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=r):l=l.next=f,vt.lanes|=u,Ha|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,ti(r,e.memoizedState)||(Wn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,vt.lanes|=s,Ha|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function O_(t){var e=Mr(),n=e.queue;if(n===null)throw Error(W(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ti(s,e.memoizedState)||(Wn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function TN(){}function IN(t,e){var n=vt,r=Mr(),i=e(),s=!ti(r.memoizedState,i);if(s&&(r.memoizedState=i,Wn=!0),r=r.queue,sT(kN.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Xt!==null&&Xt.memoizedState.tag&1){if(n.flags|=2048,Yh(9,xN.bind(null,n,r,i,e),void 0,null),en===null)throw Error(W(349));Wa&30||SN(n,e,i)}return i}function SN(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function xN(t,e,n,r){e.value=n,e.getSnapshot=r,AN(e)&&RN(t)}function kN(t,e,n){return n(function(){AN(e)&&RN(t)})}function AN(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ti(t,n)}catch{return!0}}function RN(t){var e=os(t,1);e!==null&&ei(e,t,1,-1)}function ak(t){var e=ci();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qh,lastRenderedState:t},e.queue=t,t=t.dispatch=$B.bind(null,vt,t),[e.memoizedState,t]}function Yh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=vt.updateQueue,e===null?(e={lastEffect:null,stores:null},vt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function CN(){return Mr().memoizedState}function Pm(t,e,n,r){var i=ci();vt.flags|=t,i.memoizedState=Yh(1|e,n,void 0,r===void 0?null:r)}function Sv(t,e,n,r){var i=Mr();r=r===void 0?null:r;var s=void 0;if(Wt!==null){var o=Wt.memoizedState;if(s=o.destroy,r!==null&&nT(r,o.deps)){i.memoizedState=Yh(e,n,s,r);return}}vt.flags|=t,i.memoizedState=Yh(1|e,n,s,r)}function lk(t,e){return Pm(8390656,8,t,e)}function sT(t,e){return Sv(2048,8,t,e)}function PN(t,e){return Sv(4,2,t,e)}function ON(t,e){return Sv(4,4,t,e)}function NN(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DN(t,e,n){return n=n!=null?n.concat([t]):null,Sv(4,4,NN.bind(null,e,t),n)}function oT(){}function jN(t,e){var n=Mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nT(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function LN(t,e){var n=Mr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nT(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function MN(t,e,n){return Wa&21?(ti(n,e)||(n=$O(),vt.lanes|=n,Ha|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Wn=!0),t.memoizedState=n)}function VB(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var r=C_.transition;C_.transition={};try{t(!1),e()}finally{We=n,C_.transition=r}}function VN(){return Mr().memoizedState}function FB(t,e,n){var r=mo(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},FN(t))$N(e,n);else if(n=gN(t,e,n,r),n!==null){var i=Mn();ei(n,t,r,i),UN(n,e,r)}}function $B(t,e,n){var r=mo(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(FN(t))$N(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ti(a,o)){var l=e.interleaved;l===null?(i.next=i,JE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=gN(t,e,i,r),n!==null&&(i=Mn(),ei(n,t,r,i),UN(n,e,r))}}function FN(t){var e=t.alternate;return t===vt||e!==null&&e===vt}function $N(t,e){ih=wg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function UN(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ME(t,n)}}var bg={readContext:Lr,useCallback:bn,useContext:bn,useEffect:bn,useImperativeHandle:bn,useInsertionEffect:bn,useLayoutEffect:bn,useMemo:bn,useReducer:bn,useRef:bn,useState:bn,useDebugValue:bn,useDeferredValue:bn,useTransition:bn,useMutableSource:bn,useSyncExternalStore:bn,useId:bn,unstable_isNewReconciler:!1},UB={readContext:Lr,useCallback:function(t,e){return ci().memoizedState=[t,e===void 0?null:e],t},useContext:Lr,useEffect:lk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Pm(4194308,4,NN.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Pm(4194308,4,t,e)},useInsertionEffect:function(t,e){return Pm(4,2,t,e)},useMemo:function(t,e){var n=ci();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ci();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FB.bind(null,vt,t),[r.memoizedState,t]},useRef:function(t){var e=ci();return t={current:t},e.memoizedState=t},useState:ak,useDebugValue:oT,useDeferredValue:function(t){return ci().memoizedState=t},useTransition:function(){var t=ak(!1),e=t[0];return t=VB.bind(null,t[1]),ci().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=vt,i=ci();if(at){if(n===void 0)throw Error(W(407));n=n()}else{if(n=e(),en===null)throw Error(W(349));Wa&30||SN(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,lk(kN.bind(null,r,s,t),[t]),r.flags|=2048,Yh(9,xN.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ci(),e=en.identifierPrefix;if(at){var n=Ki,r=Gi;n=(r&~(1<<32-Zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Kh++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BB={readContext:Lr,useCallback:jN,useContext:Lr,useEffect:sT,useImperativeHandle:DN,useInsertionEffect:PN,useLayoutEffect:ON,useMemo:LN,useReducer:P_,useRef:CN,useState:function(){return P_(Qh)},useDebugValue:oT,useDeferredValue:function(t){var e=Mr();return MN(e,Wt.memoizedState,t)},useTransition:function(){var t=P_(Qh)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:TN,useSyncExternalStore:IN,useId:VN,unstable_isNewReconciler:!1},zB={readContext:Lr,useCallback:jN,useContext:Lr,useEffect:sT,useImperativeHandle:DN,useInsertionEffect:PN,useLayoutEffect:ON,useMemo:LN,useReducer:O_,useRef:CN,useState:function(){return O_(Qh)},useDebugValue:oT,useDeferredValue:function(t){var e=Mr();return Wt===null?e.memoizedState=t:MN(e,Wt.memoizedState,t)},useTransition:function(){var t=O_(Qh)[0],e=Mr().memoizedState;return[t,e]},useMutableSource:TN,useSyncExternalStore:IN,useId:VN,unstable_isNewReconciler:!1};function zc(t,e){try{var n="",r=e;do n+=v6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function N_(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function v0(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var qB=typeof WeakMap=="function"?WeakMap:Map;function BN(t,e,n){n=Zi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tg||(Tg=!0,k0=r),v0(t,e)},n}function zN(t,e,n){n=Zi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){v0(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){v0(t,e),typeof r!="function"&&(po===null?po=new Set([this]):po.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ck(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new qB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=i5.bind(null,t,e,n),e.then(t,t))}function uk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dk(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zi(-1,1),e.tag=2,fo(n,e,1))),n.lanes|=1),t)}var WB=Es.ReactCurrentOwner,Wn=!1;function Nn(t,e,n,r){e.child=t===null?bN(e,null,n,r):Uc(e,t.child,n,r)}function hk(t,e,n,r,i){n=n.render;var s=e.ref;return Ic(e,i),r=rT(t,e,n,r,s,i),n=iT(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,as(t,e,i)):(at&&n&&WE(e),e.flags|=1,Nn(t,e,r,i),e.child)}function fk(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!pT(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,qN(t,e,s,r,i)):(t=jm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Bh,n(o,r)&&t.ref===e.ref)return as(t,e,i)}return e.flags|=1,t=go(s,r),t.ref=e.ref,t.return=e,e.child=t}function qN(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Bh(s,r)&&t.ref===e.ref)if(Wn=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Wn=!0);else return e.lanes=t.lanes,as(t,e,i)}return y0(t,e,n,r,i)}function WN(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(hc,or),or|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Je(hc,or),or|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Je(hc,or),or|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Je(hc,or),or|=r;return Nn(t,e,i,n),e.child}function HN(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function y0(t,e,n,r,i){var s=Yn(n)?za:Rn.current;return s=Fc(e,s),Ic(e,i),n=rT(t,e,n,r,s,i),r=iT(),t!==null&&!Wn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,as(t,e,i)):(at&&r&&WE(e),e.flags|=1,Nn(t,e,n,i),e.child)}function pk(t,e,n,r,i){if(Yn(n)){var s=!0;fg(e)}else s=!1;if(Ic(e,i),e.stateNode===null)Om(t,e),_N(e,n,r),g0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Lr(c):(c=Yn(n)?za:Rn.current,c=Fc(e,c));var u=n.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&sk(e,o,r,c),Ys=!1;var p=e.memoizedState;o.state=p,yg(e,r,o,i),l=e.memoizedState,a!==r||p!==l||Qn.current||Ys?(typeof u=="function"&&(m0(e,n,u,r),l=e.memoizedState),(a=Ys||ik(e,n,a,r,p,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,vN(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Hr(e.type,a),o.props=c,f=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Lr(l):(l=Yn(n)?za:Rn.current,l=Fc(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||p!==l)&&sk(e,o,r,l),Ys=!1,p=e.memoizedState,o.state=p,yg(e,r,o,i);var y=e.memoizedState;a!==f||p!==y||Qn.current||Ys?(typeof m=="function"&&(m0(e,n,m,r),y=e.memoizedState),(c=Ys||ik(e,n,c,r,p,y,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return _0(t,e,n,r,s,i)}function _0(t,e,n,r,i,s){HN(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Zx(e,n,!1),as(t,e,s);r=e.stateNode,WB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Uc(e,t.child,null,s),e.child=Uc(e,null,a,s)):Nn(t,e,a,s),e.memoizedState=r.state,i&&Zx(e,n,!0),e.child}function GN(t){var e=t.stateNode;e.pendingContext?Xx(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xx(t,e.context,!1),ZE(t,e.containerInfo)}function mk(t,e,n,r,i){return $c(),GE(i),e.flags|=256,Nn(t,e,n,r),e.child}var w0={dehydrated:null,treeContext:null,retryLane:0};function b0(t){return{baseLanes:t,cachePool:null,transitions:null}}function KN(t,e,n){var r=e.pendingProps,i=pt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Je(pt,i&1),t===null)return f0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Av(o,r,0,null),t=Ma(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=b0(n),e.memoizedState=w0,t):aT(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return HB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=go(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=go(a,s):(s=Ma(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?b0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=w0,r}return s=t.child,t=s.sibling,r=go(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function aT(t,e){return e=Av({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wp(t,e,n,r){return r!==null&&GE(r),Uc(e,t.child,null,n),t=aT(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function HB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=N_(Error(W(422))),Wp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Av({mode:"visible",children:r.children},i,0,null),s=Ma(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Uc(e,t.child,null,o),e.child.memoizedState=b0(o),e.memoizedState=w0,s);if(!(e.mode&1))return Wp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(W(419)),r=N_(s,r,void 0),Wp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Wn||a){if(r=en,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,os(t,i),ei(r,t,i,-1))}return fT(),r=N_(Error(W(421))),Wp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=s5.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ur=ho(i.nextSibling),hr=e,at=!0,Yr=null,t!==null&&(kr[Ar++]=Gi,kr[Ar++]=Ki,kr[Ar++]=qa,Gi=t.id,Ki=t.overflow,qa=e),e=aT(e,r.children),e.flags|=4096,e)}function gk(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),p0(t.return,e,n)}function D_(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function QN(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Nn(t,e,r.children,n),r=pt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gk(t,n,e);else if(t.tag===19)gk(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Je(pt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&_g(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),D_(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&_g(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}D_(e,!0,n,null,s);break;case"together":D_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Om(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function as(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ha|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(W(153));if(e.child!==null){for(t=e.child,n=go(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=go(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GB(t,e,n){switch(e.tag){case 3:GN(e),$c();break;case 5:EN(e);break;case 1:Yn(e.type)&&fg(e);break;case 4:ZE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Je(gg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Je(pt,pt.current&1),e.flags|=128,null):n&e.child.childLanes?KN(t,e,n):(Je(pt,pt.current&1),t=as(t,e,n),t!==null?t.sibling:null);Je(pt,pt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return QN(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Je(pt,pt.current),r)break;return null;case 22:case 23:return e.lanes=0,WN(t,e,n)}return as(t,e,n)}var YN,E0,JN,XN;YN=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};E0=function(){};JN=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ka(Ti.current);var s=null;switch(n){case"input":i=qw(t,i),r=qw(t,r),s=[];break;case"select":i=_t({},i,{value:void 0}),r=_t({},r,{value:void 0}),s=[];break;case"textarea":i=Gw(t,i),r=Gw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=dg)}Qw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(jh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(jh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&tt("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};XN=function(t,e,n,r){n!==r&&(e.flags|=4)};function gd(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function En(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KB(t,e,n){var r=e.pendingProps;switch(HE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(e),null;case 1:return Yn(e.type)&&hg(),En(e),null;case 3:return r=e.stateNode,Bc(),rt(Qn),rt(Rn),tT(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(zp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yr!==null&&(C0(Yr),Yr=null))),E0(t,e),En(e),null;case 5:eT(e);var i=ka(Gh.current);if(n=e.type,t!==null&&e.stateNode!=null)JN(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(W(166));return En(e),null}if(t=ka(Ti.current),zp(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[hi]=e,r[Wh]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",r),tt("close",r);break;case"iframe":case"object":case"embed":tt("load",r);break;case"video":case"audio":for(i=0;i<$d.length;i++)tt($d[i],r);break;case"source":tt("error",r);break;case"img":case"image":case"link":tt("error",r),tt("load",r);break;case"details":tt("toggle",r);break;case"input":Sx(r,s),tt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},tt("invalid",r);break;case"textarea":kx(r,s),tt("invalid",r)}Qw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Bp(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Bp(r.textContent,a,t),i=["children",""+a]):jh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&tt("scroll",r)}switch(n){case"input":Dp(r),xx(r,s,!0);break;case"textarea":Dp(r),Ax(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=dg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=SO(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[hi]=e,t[Wh]=r,YN(t,e,!1,!1),e.stateNode=t;e:{switch(o=Yw(n,r),n){case"dialog":tt("cancel",t),tt("close",t),i=r;break;case"iframe":case"object":case"embed":tt("load",t),i=r;break;case"video":case"audio":for(i=0;i<$d.length;i++)tt($d[i],t);i=r;break;case"source":tt("error",t),i=r;break;case"img":case"image":case"link":tt("error",t),tt("load",t),i=r;break;case"details":tt("toggle",t),i=r;break;case"input":Sx(t,r),i=qw(t,r),tt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=_t({},r,{value:void 0}),tt("invalid",t);break;case"textarea":kx(t,r),i=Gw(t,r),tt("invalid",t);break;default:i=r}Qw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?AO(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xO(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Lh(t,l):typeof l=="number"&&Lh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(jh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&tt("scroll",t):l!=null&&PE(t,s,l,o))}switch(n){case"input":Dp(t),xx(t,r,!1);break;case"textarea":Dp(t),Ax(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Eo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?wc(t,!!r.multiple,s,!1):r.defaultValue!=null&&wc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return En(e),null;case 6:if(t&&e.stateNode!=null)XN(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(W(166));if(n=ka(Gh.current),ka(Ti.current),zp(e)){if(r=e.stateNode,n=e.memoizedProps,r[hi]=e,(s=r.nodeValue!==n)&&(t=hr,t!==null))switch(t.tag){case 3:Bp(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bp(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[hi]=e,e.stateNode=r}return En(e),null;case 13:if(rt(pt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&ur!==null&&e.mode&1&&!(e.flags&128))mN(),$c(),e.flags|=98560,s=!1;else if(s=zp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(W(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(W(317));s[hi]=e}else $c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;En(e),s=!1}else Yr!==null&&(C0(Yr),Yr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pt.current&1?Ht===0&&(Ht=3):fT())),e.updateQueue!==null&&(e.flags|=4),En(e),null);case 4:return Bc(),E0(t,e),t===null&&zh(e.stateNode.containerInfo),En(e),null;case 10:return YE(e.type._context),En(e),null;case 17:return Yn(e.type)&&hg(),En(e),null;case 19:if(rt(pt),s=e.memoizedState,s===null)return En(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)gd(s,!1);else{if(Ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=_g(t),o!==null){for(e.flags|=128,gd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Je(pt,pt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ct()>qc&&(e.flags|=128,r=!0,gd(s,!1),e.lanes=4194304)}else{if(!r)if(t=_g(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!at)return En(e),null}else 2*Ct()-s.renderingStartTime>qc&&n!==1073741824&&(e.flags|=128,r=!0,gd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ct(),e.sibling=null,n=pt.current,Je(pt,r?n&1|2:n&1),e):(En(e),null);case 22:case 23:return hT(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?or&1073741824&&(En(e),e.subtreeFlags&6&&(e.flags|=8192)):En(e),null;case 24:return null;case 25:return null}throw Error(W(156,e.tag))}function QB(t,e){switch(HE(e),e.tag){case 1:return Yn(e.type)&&hg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Bc(),rt(Qn),rt(Rn),tT(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eT(e),null;case 13:if(rt(pt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(W(340));$c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return rt(pt),null;case 4:return Bc(),null;case 10:return YE(e.type._context),null;case 22:case 23:return hT(),null;case 24:return null;default:return null}}var Hp=!1,xn=!1,YB=typeof WeakSet=="function"?WeakSet:Set,ee=null;function dc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){It(t,e,r)}else n.current=null}function T0(t,e,n){try{n()}catch(r){It(t,e,r)}}var vk=!1;function JB(t,e){if(o0=lg,t=nN(),qE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=t,p=null;t:for(;;){for(var m;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(a0={focusedElem:t,selectionRange:n},lg=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,v=y.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?_:Hr(e.type,_),v);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(W(163))}}catch(R){It(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return y=vk,vk=!1,y}function sh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&T0(e,n,s)}i=i.next}while(i!==r)}}function xv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function I0(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZN(t){var e=t.alternate;e!==null&&(t.alternate=null,ZN(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[hi],delete e[Wh],delete e[u0],delete e[NB],delete e[DB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eD(t){return t.tag===5||t.tag===3||t.tag===4}function yk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function S0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=dg));else if(r!==4&&(t=t.child,t!==null))for(S0(t,e,n),t=t.sibling;t!==null;)S0(t,e,n),t=t.sibling}function x0(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(x0(t,e,n),t=t.sibling;t!==null;)x0(t,e,n),t=t.sibling}var an=null,Kr=!1;function $s(t,e,n){for(n=n.child;n!==null;)tD(t,e,n),n=n.sibling}function tD(t,e,n){if(Ei&&typeof Ei.onCommitFiberUnmount=="function")try{Ei.onCommitFiberUnmount(yv,n)}catch{}switch(n.tag){case 5:xn||dc(n,e);case 6:var r=an,i=Kr;an=null,$s(t,e,n),an=r,Kr=i,an!==null&&(Kr?(t=an,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):an.removeChild(n.stateNode));break;case 18:an!==null&&(Kr?(t=an,n=n.stateNode,t.nodeType===8?k_(t.parentNode,n):t.nodeType===1&&k_(t,n),$h(t)):k_(an,n.stateNode));break;case 4:r=an,i=Kr,an=n.stateNode.containerInfo,Kr=!0,$s(t,e,n),an=r,Kr=i;break;case 0:case 11:case 14:case 15:if(!xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&T0(n,e,o),i=i.next}while(i!==r)}$s(t,e,n);break;case 1:if(!xn&&(dc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){It(n,e,a)}$s(t,e,n);break;case 21:$s(t,e,n);break;case 22:n.mode&1?(xn=(r=xn)||n.memoizedState!==null,$s(t,e,n),xn=r):$s(t,e,n);break;default:$s(t,e,n)}}function _k(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YB),e.forEach(function(r){var i=o5.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:an=a.stateNode,Kr=!1;break e;case 3:an=a.stateNode.containerInfo,Kr=!0;break e;case 4:an=a.stateNode.containerInfo,Kr=!0;break e}a=a.return}if(an===null)throw Error(W(160));tD(s,o,i),an=null,Kr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){It(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nD(e,t),e=e.sibling}function nD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qr(e,t),li(t),r&4){try{sh(3,t,t.return),xv(3,t)}catch(_){It(t,t.return,_)}try{sh(5,t,t.return)}catch(_){It(t,t.return,_)}}break;case 1:qr(e,t),li(t),r&512&&n!==null&&dc(n,n.return);break;case 5:if(qr(e,t),li(t),r&512&&n!==null&&dc(n,n.return),t.flags&32){var i=t.stateNode;try{Lh(i,"")}catch(_){It(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&TO(i,s),Yw(a,o);var c=Yw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?AO(i,f):u==="dangerouslySetInnerHTML"?xO(i,f):u==="children"?Lh(i,f):PE(i,u,f,c)}switch(a){case"input":Ww(i,s);break;case"textarea":IO(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?wc(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?wc(i,!!s.multiple,s.defaultValue,!0):wc(i,!!s.multiple,s.multiple?[]:"",!1))}i[Wh]=s}catch(_){It(t,t.return,_)}}break;case 6:if(qr(e,t),li(t),r&4){if(t.stateNode===null)throw Error(W(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){It(t,t.return,_)}}break;case 3:if(qr(e,t),li(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{$h(e.containerInfo)}catch(_){It(t,t.return,_)}break;case 4:qr(e,t),li(t);break;case 13:qr(e,t),li(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(uT=Ct())),r&4&&_k(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(xn=(c=xn)||u,qr(e,t),xn=c):qr(e,t),li(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(ee=t,u=t.child;u!==null;){for(f=ee=u;ee!==null;){switch(p=ee,m=p.child,p.tag){case 0:case 11:case 14:case 15:sh(4,p,p.return);break;case 1:dc(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){It(r,n,_)}}break;case 5:dc(p,p.return);break;case 22:if(p.memoizedState!==null){bk(f);continue}}m!==null?(m.return=p,ee=m):bk(f)}u=u.sibling}e:for(u=null,f=t;;){if(f.tag===5){if(u===null){u=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kO("display",o))}catch(_){It(t,t.return,_)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(_){It(t,t.return,_)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:qr(e,t),li(t),r&4&&_k(t);break;case 21:break;default:qr(e,t),li(t)}}function li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(eD(n)){var r=n;break e}n=n.return}throw Error(W(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Lh(i,""),r.flags&=-33);var s=yk(t);x0(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=yk(t);S0(t,a,o);break;default:throw Error(W(161))}}catch(l){It(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function XB(t,e,n){ee=t,rD(t)}function rD(t,e,n){for(var r=(t.mode&1)!==0;ee!==null;){var i=ee,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Hp;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||xn;a=Hp;var c=xn;if(Hp=o,(xn=l)&&!c)for(ee=i;ee!==null;)o=ee,l=o.child,o.tag===22&&o.memoizedState!==null?Ek(i):l!==null?(l.return=o,ee=l):Ek(i);for(;s!==null;)ee=s,rD(s),s=s.sibling;ee=i,Hp=a,xn=c}wk(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,ee=s):wk(t)}}function wk(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:xn||xv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!xn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Hr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rk(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}rk(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&$h(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(W(163))}xn||e.flags&512&&I0(e)}catch(p){It(e,e.return,p)}}if(e===t){ee=null;break}if(n=e.sibling,n!==null){n.return=e.return,ee=n;break}ee=e.return}}function bk(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ee=n;break}ee=e.return}}function Ek(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{xv(4,e)}catch(l){It(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){It(e,i,l)}}var s=e.return;try{I0(e)}catch(l){It(e,s,l)}break;case 5:var o=e.return;try{I0(e)}catch(l){It(e,o,l)}}}catch(l){It(e,e.return,l)}if(e===t){ee=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ee=a;break}ee=e.return}}var ZB=Math.ceil,Eg=Es.ReactCurrentDispatcher,lT=Es.ReactCurrentOwner,Dr=Es.ReactCurrentBatchConfig,Me=0,en=null,Bt=null,hn=0,or=0,hc=Bo(0),Ht=0,Jh=null,Ha=0,kv=0,cT=0,oh=null,zn=null,uT=0,qc=1/0,$i=null,Tg=!1,k0=null,po=null,Gp=!1,io=null,Ig=0,ah=0,A0=null,Nm=-1,Dm=0;function Mn(){return Me&6?Ct():Nm!==-1?Nm:Nm=Ct()}function mo(t){return t.mode&1?Me&2&&hn!==0?hn&-hn:LB.transition!==null?(Dm===0&&(Dm=$O()),Dm):(t=We,t!==0||(t=window.event,t=t===void 0?16:GO(t.type)),t):1}function ei(t,e,n,r){if(50<ah)throw ah=0,A0=null,Error(W(185));Df(t,n,r),(!(Me&2)||t!==en)&&(t===en&&(!(Me&2)&&(kv|=n),Ht===4&&Zs(t,hn)),Jn(t,r),n===1&&Me===0&&!(e.mode&1)&&(qc=Ct()+500,Tv&&zo()))}function Jn(t,e){var n=t.callbackNode;L6(t,e);var r=ag(t,t===en?hn:0);if(r===0)n!==null&&Px(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Px(n),e===1)t.tag===0?jB(Tk.bind(null,t)):hN(Tk.bind(null,t)),PB(function(){!(Me&6)&&zo()}),n=null;else{switch(UO(r)){case 1:n=LE;break;case 4:n=VO;break;case 16:n=og;break;case 536870912:n=FO;break;default:n=og}n=dD(n,iD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iD(t,e){if(Nm=-1,Dm=0,Me&6)throw Error(W(327));var n=t.callbackNode;if(Sc()&&t.callbackNode!==n)return null;var r=ag(t,t===en?hn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Sg(t,r);else{e=r;var i=Me;Me|=2;var s=oD();(en!==t||hn!==e)&&($i=null,qc=Ct()+500,La(t,e));do try{n5();break}catch(a){sD(t,a)}while(!0);QE(),Eg.current=s,Me=i,Bt!==null?e=0:(en=null,hn=0,e=Ht)}if(e!==0){if(e===2&&(i=t0(t),i!==0&&(r=i,e=R0(t,i))),e===1)throw n=Jh,La(t,0),Zs(t,r),Jn(t,Ct()),n;if(e===6)Zs(t,r);else{if(i=t.current.alternate,!(r&30)&&!e5(i)&&(e=Sg(t,r),e===2&&(s=t0(t),s!==0&&(r=s,e=R0(t,s))),e===1))throw n=Jh,La(t,0),Zs(t,r),Jn(t,Ct()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(W(345));case 2:da(t,zn,$i);break;case 3:if(Zs(t,r),(r&130023424)===r&&(e=uT+500-Ct(),10<e)){if(ag(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Mn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=c0(da.bind(null,t,zn,$i),e);break}da(t,zn,$i);break;case 4:if(Zs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZB(r/1960))-r,10<r){t.timeoutHandle=c0(da.bind(null,t,zn,$i),r);break}da(t,zn,$i);break;case 5:da(t,zn,$i);break;default:throw Error(W(329))}}}return Jn(t,Ct()),t.callbackNode===n?iD.bind(null,t):null}function R0(t,e){var n=oh;return t.current.memoizedState.isDehydrated&&(La(t,e).flags|=256),t=Sg(t,e),t!==2&&(e=zn,zn=n,e!==null&&C0(e)),t}function C0(t){zn===null?zn=t:zn.push.apply(zn,t)}function e5(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ti(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Zs(t,e){for(e&=~cT,e&=~kv,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Zr(e),r=1<<n;t[n]=-1,e&=~r}}function Tk(t){if(Me&6)throw Error(W(327));Sc();var e=ag(t,0);if(!(e&1))return Jn(t,Ct()),null;var n=Sg(t,e);if(t.tag!==0&&n===2){var r=t0(t);r!==0&&(e=r,n=R0(t,r))}if(n===1)throw n=Jh,La(t,0),Zs(t,e),Jn(t,Ct()),n;if(n===6)throw Error(W(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,da(t,zn,$i),Jn(t,Ct()),null}function dT(t,e){var n=Me;Me|=1;try{return t(e)}finally{Me=n,Me===0&&(qc=Ct()+500,Tv&&zo())}}function Ga(t){io!==null&&io.tag===0&&!(Me&6)&&Sc();var e=Me;Me|=1;var n=Dr.transition,r=We;try{if(Dr.transition=null,We=1,t)return t()}finally{We=r,Dr.transition=n,Me=e,!(Me&6)&&zo()}}function hT(){or=hc.current,rt(hc)}function La(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CB(n)),Bt!==null)for(n=Bt.return;n!==null;){var r=n;switch(HE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&hg();break;case 3:Bc(),rt(Qn),rt(Rn),tT();break;case 5:eT(r);break;case 4:Bc();break;case 13:rt(pt);break;case 19:rt(pt);break;case 10:YE(r.type._context);break;case 22:case 23:hT()}n=n.return}if(en=t,Bt=t=go(t.current,null),hn=or=e,Ht=0,Jh=null,cT=kv=Ha=0,zn=oh=null,xa!==null){for(e=0;e<xa.length;e++)if(n=xa[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}xa=null}return t}function sD(t,e){do{var n=Bt;try{if(QE(),Cm.current=bg,wg){for(var r=vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}wg=!1}if(Wa=0,Xt=Wt=vt=null,ih=!1,Kh=0,lT.current=null,n===null||n.return===null){Ht=1,Jh=e,Bt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=hn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=uk(o);if(m!==null){m.flags&=-257,dk(m,o,a,s,e),m.mode&1&&ck(s,c,e),e=m,l=c;var y=e.updateQueue;if(y===null){var _=new Set;_.add(l),e.updateQueue=_}else y.add(l);break e}else{if(!(e&1)){ck(s,c,e),fT();break e}l=Error(W(426))}}else if(at&&a.mode&1){var v=uk(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),dk(v,o,a,s,e),GE(zc(l,a));break e}}s=l=zc(l,a),Ht!==4&&(Ht=2),oh===null?oh=[s]:oh.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=BN(s,l,e);nk(s,E);break e;case 1:a=l;var w=s.type,T=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(po===null||!po.has(T)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=zN(s,a,e);nk(s,R);break e}}s=s.return}while(s!==null)}lD(n)}catch(D){e=D,Bt===n&&n!==null&&(Bt=n=n.return);continue}break}while(!0)}function oD(){var t=Eg.current;return Eg.current=bg,t===null?bg:t}function fT(){(Ht===0||Ht===3||Ht===2)&&(Ht=4),en===null||!(Ha&268435455)&&!(kv&268435455)||Zs(en,hn)}function Sg(t,e){var n=Me;Me|=2;var r=oD();(en!==t||hn!==e)&&($i=null,La(t,e));do try{t5();break}catch(i){sD(t,i)}while(!0);if(QE(),Me=n,Eg.current=r,Bt!==null)throw Error(W(261));return en=null,hn=0,Ht}function t5(){for(;Bt!==null;)aD(Bt)}function n5(){for(;Bt!==null&&!k6();)aD(Bt)}function aD(t){var e=uD(t.alternate,t,or);t.memoizedProps=t.pendingProps,e===null?lD(t):Bt=e,lT.current=null}function lD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QB(n,e),n!==null){n.flags&=32767,Bt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ht=6,Bt=null;return}}else if(n=KB(n,e,or),n!==null){Bt=n;return}if(e=e.sibling,e!==null){Bt=e;return}Bt=e=t}while(e!==null);Ht===0&&(Ht=5)}function da(t,e,n){var r=We,i=Dr.transition;try{Dr.transition=null,We=1,r5(t,e,n,r)}finally{Dr.transition=i,We=r}return null}function r5(t,e,n,r){do Sc();while(io!==null);if(Me&6)throw Error(W(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(W(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(M6(t,s),t===en&&(Bt=en=null,hn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Gp||(Gp=!0,dD(og,function(){return Sc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Dr.transition,Dr.transition=null;var o=We;We=1;var a=Me;Me|=4,lT.current=null,JB(t,n),nD(n,t),TB(a0),lg=!!o0,a0=o0=null,t.current=n,XB(n),A6(),Me=a,We=o,Dr.transition=s}else t.current=n;if(Gp&&(Gp=!1,io=t,Ig=i),s=t.pendingLanes,s===0&&(po=null),P6(n.stateNode),Jn(t,Ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Tg)throw Tg=!1,t=k0,k0=null,t;return Ig&1&&t.tag!==0&&Sc(),s=t.pendingLanes,s&1?t===A0?ah++:(ah=0,A0=t):ah=0,zo(),null}function Sc(){if(io!==null){var t=UO(Ig),e=Dr.transition,n=We;try{if(Dr.transition=null,We=16>t?16:t,io===null)var r=!1;else{if(t=io,io=null,Ig=0,Me&6)throw Error(W(331));var i=Me;for(Me|=4,ee=t.current;ee!==null;){var s=ee,o=s.child;if(ee.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ee=c;ee!==null;){var u=ee;switch(u.tag){case 0:case 11:case 15:sh(8,u,s)}var f=u.child;if(f!==null)f.return=u,ee=f;else for(;ee!==null;){u=ee;var p=u.sibling,m=u.return;if(ZN(u),u===c){ee=null;break}if(p!==null){p.return=m,ee=p;break}ee=m}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var v=_.sibling;_.sibling=null,_=v}while(_!==null)}}ee=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ee=o;else e:for(;ee!==null;){if(s=ee,s.flags&2048)switch(s.tag){case 0:case 11:case 15:sh(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,ee=E;break e}ee=s.return}}var w=t.current;for(ee=w;ee!==null;){o=ee;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,ee=T;else e:for(o=w;ee!==null;){if(a=ee,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:xv(9,a)}}catch(D){It(a,a.return,D)}if(a===o){ee=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,ee=R;break e}ee=a.return}}if(Me=i,zo(),Ei&&typeof Ei.onPostCommitFiberRoot=="function")try{Ei.onPostCommitFiberRoot(yv,t)}catch{}r=!0}return r}finally{We=n,Dr.transition=e}}return!1}function Ik(t,e,n){e=zc(n,e),e=BN(t,e,1),t=fo(t,e,1),e=Mn(),t!==null&&(Df(t,1,e),Jn(t,e))}function It(t,e,n){if(t.tag===3)Ik(t,t,n);else for(;e!==null;){if(e.tag===3){Ik(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(po===null||!po.has(r))){t=zc(n,t),t=zN(e,t,1),e=fo(e,t,1),t=Mn(),e!==null&&(Df(e,1,t),Jn(e,t));break}}e=e.return}}function i5(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Mn(),t.pingedLanes|=t.suspendedLanes&n,en===t&&(hn&n)===n&&(Ht===4||Ht===3&&(hn&130023424)===hn&&500>Ct()-uT?La(t,0):cT|=n),Jn(t,e)}function cD(t,e){e===0&&(t.mode&1?(e=Mp,Mp<<=1,!(Mp&130023424)&&(Mp=4194304)):e=1);var n=Mn();t=os(t,e),t!==null&&(Df(t,e,n),Jn(t,n))}function s5(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cD(t,n)}function o5(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(W(314))}r!==null&&r.delete(e),cD(t,n)}var uD;uD=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Qn.current)Wn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Wn=!1,GB(t,e,n);Wn=!!(t.flags&131072)}else Wn=!1,at&&e.flags&1048576&&fN(e,mg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Om(t,e),t=e.pendingProps;var i=Fc(e,Rn.current);Ic(e,n),i=rT(null,e,r,t,i,n);var s=iT();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yn(r)?(s=!0,fg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,XE(e),i.updater=Iv,e.stateNode=i,i._reactInternals=e,g0(e,r,t,n),e=_0(null,e,r,!0,s,n)):(e.tag=0,at&&s&&WE(e),Nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Om(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=l5(r),t=Hr(r,t),i){case 0:e=y0(null,e,r,t,n);break e;case 1:e=pk(null,e,r,t,n);break e;case 11:e=hk(null,e,r,t,n);break e;case 14:e=fk(null,e,r,Hr(r.type,t),n);break e}throw Error(W(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),y0(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),pk(t,e,r,i,n);case 3:e:{if(GN(e),t===null)throw Error(W(387));r=e.pendingProps,s=e.memoizedState,i=s.element,vN(t,e),yg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=zc(Error(W(423)),e),e=mk(t,e,r,n,i);break e}else if(r!==i){i=zc(Error(W(424)),e),e=mk(t,e,r,n,i);break e}else for(ur=ho(e.stateNode.containerInfo.firstChild),hr=e,at=!0,Yr=null,n=bN(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($c(),r===i){e=as(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return EN(e),t===null&&f0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,l0(r,i)?o=null:s!==null&&l0(r,s)&&(e.flags|=32),HN(t,e),Nn(t,e,o,n),e.child;case 6:return t===null&&f0(e),null;case 13:return KN(t,e,n);case 4:return ZE(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Uc(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),hk(t,e,r,i,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Je(gg,r._currentValue),r._currentValue=o,s!==null)if(ti(s.value,o)){if(s.children===i.children&&!Qn.current){e=as(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Zi(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),p0(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(W(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),p0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ic(e,n),i=Lr(i),r=r(i),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,i=Hr(r,e.pendingProps),i=Hr(r.type,i),fk(t,e,r,i,n);case 15:return qN(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Hr(r,i),Om(t,e),e.tag=1,Yn(r)?(t=!0,fg(e)):t=!1,Ic(e,n),_N(e,r,i),g0(e,r,i,n),_0(null,e,r,!0,t,n);case 19:return QN(t,e,n);case 22:return WN(t,e,n)}throw Error(W(156,e.tag))};function dD(t,e){return MO(t,e)}function a5(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(t,e,n,r){return new a5(t,e,n,r)}function pT(t){return t=t.prototype,!(!t||!t.isReactComponent)}function l5(t){if(typeof t=="function")return pT(t)?1:0;if(t!=null){if(t=t.$$typeof,t===NE)return 11;if(t===DE)return 14}return 2}function go(t,e){var n=t.alternate;return n===null?(n=Pr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function jm(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")pT(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case nc:return Ma(n.children,i,s,e);case OE:o=8,i|=8;break;case $w:return t=Pr(12,n,e,i|2),t.elementType=$w,t.lanes=s,t;case Uw:return t=Pr(13,n,e,i),t.elementType=Uw,t.lanes=s,t;case Bw:return t=Pr(19,n,e,i),t.elementType=Bw,t.lanes=s,t;case wO:return Av(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yO:o=10;break e;case _O:o=9;break e;case NE:o=11;break e;case DE:o=14;break e;case Qs:o=16,r=null;break e}throw Error(W(130,t==null?t:typeof t,""))}return e=Pr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Ma(t,e,n,r){return t=Pr(7,t,r,e),t.lanes=n,t}function Av(t,e,n,r){return t=Pr(22,t,r,e),t.elementType=wO,t.lanes=n,t.stateNode={isHidden:!1},t}function j_(t,e,n){return t=Pr(6,t,null,e),t.lanes=n,t}function L_(t,e,n){return e=Pr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function c5(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g_(0),this.expirationTimes=g_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g_(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function mT(t,e,n,r,i,s,o,a,l){return t=new c5(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Pr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},XE(s),t}function u5(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hD(t){if(!t)return To;t=t._reactInternals;e:{if(pl(t)!==t||t.tag!==1)throw Error(W(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(W(171))}if(t.tag===1){var n=t.type;if(Yn(n))return dN(t,n,e)}return e}function fD(t,e,n,r,i,s,o,a,l){return t=mT(n,r,!0,t,i,s,o,a,l),t.context=hD(null),n=t.current,r=Mn(),i=mo(n),s=Zi(r,i),s.callback=e??null,fo(n,s,i),t.current.lanes=i,Df(t,i,r),Jn(t,r),t}function Rv(t,e,n,r){var i=e.current,s=Mn(),o=mo(i);return n=hD(n),e.context===null?e.context=n:e.pendingContext=n,e=Zi(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=fo(i,e,o),t!==null&&(ei(t,i,o,s),Rm(t,i,o)),o}function xg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function gT(t,e){Sk(t,e),(t=t.alternate)&&Sk(t,e)}function d5(){return null}var pD=typeof reportError=="function"?reportError:function(t){console.error(t)};function vT(t){this._internalRoot=t}Cv.prototype.render=vT.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(W(409));Rv(t,e,null,null)};Cv.prototype.unmount=vT.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ga(function(){Rv(null,t,null,null)}),e[ss]=null}};function Cv(t){this._internalRoot=t}Cv.prototype.unstable_scheduleHydration=function(t){if(t){var e=qO();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Xs.length&&e!==0&&e<Xs[n].priority;n++);Xs.splice(n,0,t),n===0&&HO(t)}};function yT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xk(){}function h5(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=xg(o);s.call(c)}}var o=fD(e,r,t,0,null,!1,!1,"",xk);return t._reactRootContainer=o,t[ss]=o.current,zh(t.nodeType===8?t.parentNode:t),Ga(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=xg(l);a.call(c)}}var l=mT(t,0,!1,null,null,!1,!1,"",xk);return t._reactRootContainer=l,t[ss]=l.current,zh(t.nodeType===8?t.parentNode:t),Ga(function(){Rv(e,l,n,r)}),l}function Ov(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=xg(o);a.call(l)}}Rv(e,o,t,i)}else o=h5(n,e,t,i,r);return xg(o)}BO=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fd(e.pendingLanes);n!==0&&(ME(e,n|1),Jn(e,Ct()),!(Me&6)&&(qc=Ct()+500,zo()))}break;case 13:Ga(function(){var r=os(t,1);if(r!==null){var i=Mn();ei(r,t,1,i)}}),gT(t,1)}};VE=function(t){if(t.tag===13){var e=os(t,134217728);if(e!==null){var n=Mn();ei(e,t,134217728,n)}gT(t,134217728)}};zO=function(t){if(t.tag===13){var e=mo(t),n=os(t,e);if(n!==null){var r=Mn();ei(n,t,e,r)}gT(t,e)}};qO=function(){return We};WO=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};Xw=function(t,e,n){switch(e){case"input":if(Ww(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ev(r);if(!i)throw Error(W(90));EO(r),Ww(r,i)}}}break;case"textarea":IO(t,n);break;case"select":e=n.value,e!=null&&wc(t,!!n.multiple,e,!1)}};PO=dT;OO=Ga;var f5={usingClientEntryPoint:!1,Events:[Lf,oc,Ev,RO,CO,dT]},vd={findFiberByHostInstance:Sa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},p5={bundleType:vd.bundleType,version:vd.version,rendererPackageName:vd.rendererPackageName,rendererConfig:vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=jO(t),t===null?null:t.stateNode},findFiberByHostInstance:vd.findFiberByHostInstance||d5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kp.isDisabled&&Kp.supportsFiber)try{yv=Kp.inject(p5),Ei=Kp}catch{}}_r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f5;_r.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yT(e))throw Error(W(200));return u5(t,e,null,n)};_r.createRoot=function(t,e){if(!yT(t))throw Error(W(299));var n=!1,r="",i=pD;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=mT(t,1,!1,null,null,n,!1,r,i),t[ss]=e.current,zh(t.nodeType===8?t.parentNode:t),new vT(e)};_r.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(W(188)):(t=Object.keys(t).join(","),Error(W(268,t)));return t=jO(e),t=t===null?null:t.stateNode,t};_r.flushSync=function(t){return Ga(t)};_r.hydrate=function(t,e,n){if(!Pv(e))throw Error(W(200));return Ov(null,t,e,!0,n)};_r.hydrateRoot=function(t,e,n){if(!yT(t))throw Error(W(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=pD;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fD(e,null,t,1,n??null,i,!1,s,o),t[ss]=e.current,zh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Cv(e)};_r.render=function(t,e,n){if(!Pv(e))throw Error(W(200));return Ov(null,t,e,!1,n)};_r.unmountComponentAtNode=function(t){if(!Pv(t))throw Error(W(40));return t._reactRootContainer?(Ga(function(){Ov(null,null,t,!1,function(){t._reactRootContainer=null,t[ss]=null})}),!0):!1};_r.unstable_batchedUpdates=dT;_r.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pv(n))throw Error(W(200));if(t==null||t._reactInternals===void 0)throw Error(W(38));return Ov(t,e,n,!1,r)};_r.version="18.2.0-next-9e3b772b8-20220608";function mD(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mD)}catch(t){console.error(t)}}mD(),fO.exports=_r;var gD=fO.exports;const Aa=$o(gD);var kk=gD;Vw.createRoot=kk.createRoot,Vw.hydrateRoot=kk.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xh.apply(this,arguments)}var so;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(so||(so={}));const Ak="popstate";function m5(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return P0("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:kg(i)}return v5(e,n,null,t)}function Ot(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _T(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function g5(){return Math.random().toString(36).substr(2,8)}function Rk(t,e){return{usr:t.state,key:t.key,idx:e}}function P0(t,e,n,r){return n===void 0&&(n=null),Xh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Iu(e):e,{state:n,key:e&&e.key||r||g5()})}function kg(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Iu(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function v5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=so.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Xh({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=so.Pop;let v=u(),E=v==null?null:v-c;c=v,l&&l({action:a,location:_.location,delta:E})}function p(v,E){a=so.Push;let w=P0(_.location,v,E);n&&n(w,v),c=u()+1;let T=Rk(w,c),R=_.createHref(w);try{o.pushState(T,"",R)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(R)}s&&l&&l({action:a,location:_.location,delta:1})}function m(v,E){a=so.Replace;let w=P0(_.location,v,E);n&&n(w,v),c=u();let T=Rk(w,c),R=_.createHref(w);o.replaceState(T,"",R),s&&l&&l({action:a,location:_.location,delta:0})}function y(v){let E=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof v=="string"?v:kg(v);return Ot(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let _={get action(){return a},get location(){return t(i,o)},listen(v){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Ak,f),l=v,()=>{i.removeEventListener(Ak,f),l=null}},createHref(v){return e(i,v)},createURL:y,encodeLocation(v){let E=y(v);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:m,go(v){return o.go(v)}};return _}var Ck;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ck||(Ck={}));function y5(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Iu(e):e,i=wT(r.pathname||"/",n);if(i==null)return null;let s=vD(t);_5(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=A5(s[a],P5(i));return o}function vD(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ot(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=vo([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Ot(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),vD(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:x5(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of yD(s.path))i(s,o,l)}),e}function yD(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=yD(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function _5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:k5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const w5=/^:[\w-]+$/,b5=3,E5=2,T5=1,I5=10,S5=-2,Pk=t=>t==="*";function x5(t,e){let n=t.split("/"),r=n.length;return n.some(Pk)&&(r+=S5),e&&(r+=E5),n.filter(i=>!Pk(i)).reduce((i,s)=>i+(w5.test(s)?b5:s===""?T5:I5),r)}function k5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function A5(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=R5({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let f=a.route;s.push({params:r,pathname:vo([i,u.pathname]),pathnameBase:L5(vo([i,u.pathnameBase])),route:f}),u.pathnameBase!=="/"&&(i=vo([i,u.pathnameBase]))}return s}function R5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=C5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,f)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let _=a[f]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=a[f];return m&&!y?c[p]=void 0:c[p]=O5(y||"",p),c},{}),pathname:s,pathnameBase:o,pattern:t}}function C5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_T(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function P5(t){try{return decodeURI(t)}catch(e){return _T(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function O5(t,e){try{return decodeURIComponent(t)}catch(n){return _T(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function wT(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function N5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Iu(t):t;return{pathname:n?n.startsWith("/")?n:D5(n,e):e,search:M5(r),hash:V5(i)}}function D5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function M_(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function j5(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function bT(t,e){let n=j5(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function ET(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Iu(t):(i=Xh({},t),Ot(!i.pathname||!i.pathname.includes("?"),M_("?","pathname","search",i)),Ot(!i.pathname||!i.pathname.includes("#"),M_("#","pathname","hash",i)),Ot(!i.search||!i.search.includes("#"),M_("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;i.pathname=p.join("/")}a=f>=0?e[f]:"/"}let l=N5(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const vo=t=>t.join("/").replace(/\/\/+/g,"/"),L5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),M5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,V5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function F5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _D=["post","put","patch","delete"];new Set(_D);const $5=["get",..._D];new Set($5);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zh(){return Zh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zh.apply(this,arguments)}const TT=I.createContext(null),U5=I.createContext(null),qo=I.createContext(null),Nv=I.createContext(null),ji=I.createContext({outlet:null,matches:[],isDataRoute:!1}),wD=I.createContext(null);function B5(t,e){let{relative:n}=e===void 0?{}:e;Su()||Ot(!1);let{basename:r,navigator:i}=I.useContext(qo),{hash:s,pathname:o,search:a}=ED(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:vo([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Su(){return I.useContext(Nv)!=null}function xu(){return Su()||Ot(!1),I.useContext(Nv).location}function bD(t){I.useContext(qo).static||I.useLayoutEffect(t)}function Li(){let{isDataRoute:t}=I.useContext(ji);return t?r9():z5()}function z5(){Su()||Ot(!1);let t=I.useContext(TT),{basename:e,future:n,navigator:r}=I.useContext(qo),{matches:i}=I.useContext(ji),{pathname:s}=xu(),o=JSON.stringify(bT(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return bD(()=>{a.current=!0}),I.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=ET(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:vo([e,f.pathname])),(u.replace?r.replace:r.push)(f,u.state,u)},[e,r,o,s,t])}const q5=I.createContext(null);function W5(t){let e=I.useContext(ji).outlet;return e&&I.createElement(q5.Provider,{value:t},e)}function Vf(){let{matches:t}=I.useContext(ji),e=t[t.length-1];return e?e.params:{}}function ED(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(qo),{matches:i}=I.useContext(ji),{pathname:s}=xu(),o=JSON.stringify(bT(i,r.v7_relativeSplatPath));return I.useMemo(()=>ET(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function H5(t,e){return G5(t,e)}function G5(t,e,n,r){Su()||Ot(!1);let{navigator:i}=I.useContext(qo),{matches:s}=I.useContext(ji),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=xu(),u;if(e){var f;let v=typeof e=="string"?Iu(e):e;l==="/"||(f=v.pathname)!=null&&f.startsWith(l)||Ot(!1),u=v}else u=c;let p=u.pathname||"/",m=l==="/"?p:p.slice(l.length)||"/",y=y5(t,{pathname:m}),_=X5(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},a,v.params),pathname:vo([l,i.encodeLocation?i.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:vo([l,i.encodeLocation?i.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,n,r);return e&&_?I.createElement(Nv.Provider,{value:{location:Zh({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:so.Pop}},_):_}function K5(){let t=n9(),e=F5(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const Q5=I.createElement(K5,null);class Y5 extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(ji.Provider,{value:this.props.routeContext},I.createElement(wD.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function J5(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(TT);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(ji.Provider,{value:e},r)}function X5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id]));u>=0||Ot(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:p,errors:m}=n,y=f.route.loader&&p[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||y){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,p)=>{let m,y=!1,_=null,v=null;n&&(m=a&&f.route.id?a[f.route.id]:void 0,_=f.route.errorElement||Q5,l&&(c<0&&p===0?(i9("route-fallback",!1),y=!0,v=null):c===p&&(y=!0,v=f.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,p+1)),w=()=>{let T;return m?T=_:y?T=v:f.route.Component?T=I.createElement(f.route.Component,null):f.route.element?T=f.route.element:T=u,I.createElement(J5,{match:f,routeContext:{outlet:u,matches:E,isDataRoute:n!=null},children:T})};return n&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?I.createElement(Y5,{location:n.location,revalidation:n.revalidation,component:_,error:m,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var TD=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(TD||{}),Ag=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ag||{});function Z5(t){let e=I.useContext(TT);return e||Ot(!1),e}function e9(t){let e=I.useContext(U5);return e||Ot(!1),e}function t9(t){let e=I.useContext(ji);return e||Ot(!1),e}function ID(t){let e=t9(),n=e.matches[e.matches.length-1];return n.route.id||Ot(!1),n.route.id}function n9(){var t;let e=I.useContext(wD),n=e9(Ag.UseRouteError),r=ID(Ag.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function r9(){let{router:t}=Z5(TD.UseNavigateStable),e=ID(Ag.UseNavigateStable),n=I.useRef(!1);return bD(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Zh({fromRouteId:e},s)))},[t,e])}const Ok={};function i9(t,e,n){!e&&!Ok[t]&&(Ok[t]=!0)}function SD(t){let{to:e,replace:n,state:r,relative:i}=t;Su()||Ot(!1);let{future:s,static:o}=I.useContext(qo),{matches:a}=I.useContext(ji),{pathname:l}=xu(),c=Li(),u=ET(e,bT(a,s.v7_relativeSplatPath),l,i==="path"),f=JSON.stringify(u);return I.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:i}),[c,f,i,n,r]),null}function IT(t){return W5(t.context)}function In(t){Ot(!1)}function s9(t){let{basename:e="/",children:n=null,location:r,navigationType:i=so.Pop,navigator:s,static:o=!1,future:a}=t;Su()&&Ot(!1);let l=e.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:s,static:o,future:Zh({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Iu(r));let{pathname:u="/",search:f="",hash:p="",state:m=null,key:y="default"}=r,_=I.useMemo(()=>{let v=wT(u,l);return v==null?null:{location:{pathname:v,search:f,hash:p,state:m,key:y},navigationType:i}},[l,u,f,p,m,y,i]);return _==null?null:I.createElement(qo.Provider,{value:c},I.createElement(Nv.Provider,{children:n,value:_}))}function o9(t){let{children:e,location:n}=t;return H5(O0(e),n)}new Promise(()=>{});function O0(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,O0(r.props.children,s));return}r.type!==In&&Ot(!1),!r.props.index||!r.props.children||Ot(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=O0(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function N0(){return N0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},N0.apply(this,arguments)}function a9(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function l9(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function c9(t,e){return t.button===0&&(!e||e==="_self")&&!l9(t)}function D0(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function u9(t,e){let n=D0(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const d9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],h9="startTransition",Nk=i6[h9];function f9(t){let{basename:e,children:n,future:r,window:i}=t,s=I.useRef();s.current==null&&(s.current=m5({window:i,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=I.useCallback(f=>{c&&Nk?Nk(()=>l(f)):l(f)},[l,c]);return I.useLayoutEffect(()=>o.listen(u),[o,u]),I.createElement(s9,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const p9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",m9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fr=I.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:f}=e,p=a9(e,d9),{basename:m}=I.useContext(qo),y,_=!1;if(typeof c=="string"&&m9.test(c)&&(y=c,p9))try{let T=new URL(window.location.href),R=c.startsWith("//")?new URL(T.protocol+c):new URL(c),D=wT(R.pathname,m);R.origin===T.origin&&D!=null?c=D+R.search+R.hash:_=!0}catch{}let v=B5(c,{relative:i}),E=g9(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:f});function w(T){r&&r(T),T.defaultPrevented||E(T)}return I.createElement("a",N0({},p,{href:y||v,onClick:_||s?r:w,ref:n,target:l}))});var Dk;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Dk||(Dk={}));var jk;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(jk||(jk={}));function g9(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Li(),c=xu(),u=ED(t,{relative:o});return I.useCallback(f=>{if(c9(f,n)){f.preventDefault();let p=r!==void 0?r:kg(c)===kg(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function v9(t){let e=I.useRef(D0(t)),n=I.useRef(!1),r=xu(),i=I.useMemo(()=>u9(r.search,n.current?null:e.current),[r.search]),s=Li(),o=I.useCallback((a,l)=>{const c=D0(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var xD={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(xD);var y9=xD.exports;const Q=$o(y9);function j0(){return j0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j0.apply(this,arguments)}function kD(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Lk(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function _9(t){var e=w9(t,"string");return typeof e=="symbol"?e:String(e)}function w9(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function AD(t,e,n){var r=I.useRef(t!==void 0),i=I.useState(e),s=i[0],o=i[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&s!==e&&o(e),[a?t:s,I.useCallback(function(c){for(var u=arguments.length,f=new Array(u>1?u-1:0),p=1;p<u;p++)f[p-1]=arguments[p];n&&n.apply(void 0,[c].concat(f)),o(c)},[n])]}function ku(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,o=s[Lk(r)],a=s[r],l=kD(s,[Lk(r),r].map(_9)),c=e[r],u=AD(a,o,t[c]),f=u[0],p=u[1];return j0({},l,(i={},i[r]=f,i[c]=p,i))},t)}function L0(t,e){return L0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},L0(t,e)}function b9(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,L0(t,e)}const E9=["xxl","xl","lg","md","sm","xs"],T9="xs",Dv=I.createContext({prefixes:{},breakpoints:E9,minBreakpoint:T9});function J(t,e){const{prefixes:n}=I.useContext(Dv);return t||n[e]||e}function RD(){const{breakpoints:t}=I.useContext(Dv);return t}function CD(){const{minBreakpoint:t}=I.useContext(Dv);return t}function jv(){const{dir:t}=I.useContext(Dv);return t==="rtl"}function Au(t){return t&&t.ownerDocument||document}function I9(t){var e=Au(t);return e&&e.defaultView||window}function S9(t,e){return I9(t).getComputedStyle(t,e)}var x9=/([A-Z])/g;function k9(t){return t.replace(x9,"-$1").toLowerCase()}var A9=/^ms-/;function Qp(t){return k9(t).replace(A9,"-ms-")}var R9=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function C9(t){return!!(t&&R9.test(t))}function es(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(Qp(e))||S9(t).getPropertyValue(Qp(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(Qp(i)):C9(i)?r+=i+"("+s+") ":n+=Qp(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var PD={exports:{}},P9="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",O9=P9,N9=O9;function OD(){}function ND(){}ND.resetWarningCache=OD;var D9=function(){function t(r,i,s,o,a,l){if(l!==N9){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ND,resetWarningCache:OD};return n.PropTypes=n,n};PD.exports=D9();var j9=PD.exports;const oe=$o(j9),Mk={disabled:!1},DD=mt.createContext(null);var L9=function(e){return e.scrollTop},Ud="unmounted",Js="exited",Jr="entering",Wi="entered",ef="exiting",Ts=function(t){b9(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=Js,s.appearStatus=Jr):l=Wi:r.unmountOnExit||r.mountOnEnter?l=Ud:l=Js,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Ud?{status:Js}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Jr&&o!==Wi&&(s=Jr):(o===Jr||o===Wi)&&(s=ef)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Jr){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Aa.findDOMNode(this);o&&L9(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Js&&this.setState({status:Ud})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Aa.findDOMNode(this),a],c=l[0],u=l[1],f=this.getTimeouts(),p=a?f.appear:f.enter;if(!i&&!o||Mk.disabled){this.safeSetState({status:Wi},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Jr},function(){s.props.onEntering(c,u),s.onTransitionEnd(p,function(){s.safeSetState({status:Wi},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Aa.findDOMNode(this);if(!s||Mk.disabled){this.safeSetState({status:Js},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:ef},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Js},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Aa.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Ud)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=kD(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return mt.createElement(DD.Provider,{value:null},typeof o=="function"?o(i,a):mt.cloneElement(mt.Children.only(o),a))},e}(mt.Component);Ts.contextType=DD;Ts.propTypes={};function Pl(){}Ts.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Pl,onEntering:Pl,onEntered:Pl,onExit:Pl,onExiting:Pl,onExited:Pl};Ts.UNMOUNTED=Ud;Ts.EXITED=Js;Ts.ENTERING=Jr;Ts.ENTERED=Wi;Ts.EXITING=ef;const M9=Ts,Ru=!!(typeof window<"u"&&window.document&&window.document.createElement);var M0=!1,V0=!1;try{var V_={get passive(){return M0=!0},get once(){return V0=M0=!0}};Ru&&(window.addEventListener("test",V_,V_),window.removeEventListener("test",V_,!0))}catch{}function ST(t,e,n,r){if(r&&typeof r!="boolean"&&!V0){var i=r.once,s=r.capture,o=n;!V0&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,M0?r:s)}t.addEventListener(e,n,r)}function F0(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function Qi(t,e,n,r){return ST(t,e,n,r),function(){F0(t,e,n,r)}}function V9(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function F9(t){var e=es(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function $9(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||V9(t,"transitionend",!0)},e+n),s=Qi(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function jD(t,e,n,r){n==null&&(n=F9(t)||0);var i=$9(t,n,r),s=Qi(t,"transitionend",e);return function(){i(),s()}}function Vk(t,e){const n=es(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function xT(t,e){const n=Vk(t,"transitionDuration"),r=Vk(t,"transitionDelay"),i=jD(t,s=>{s.target===t&&(i(),e(s))},n+r)}function yd(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function LD(t){t.offsetHeight}const Fk=t=>!t||typeof t=="function"?t:e=>{t.current=e};function U9(t,e){const n=Fk(t),r=Fk(e);return i=>{n&&n(i),r&&r(i)}}function Mi(t,e){return I.useMemo(()=>U9(t,e),[t,e])}function Rg(t){return t&&"setState"in t?Aa.findDOMNode(t):t??null}const B9=mt.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...c},u)=>{const f=I.useRef(null),p=Mi(f,l),m=O=>{p(Rg(O))},y=O=>x=>{O&&f.current&&O(f.current,x)},_=I.useCallback(y(t),[t]),v=I.useCallback(y(e),[e]),E=I.useCallback(y(n),[n]),w=I.useCallback(y(r),[r]),T=I.useCallback(y(i),[i]),R=I.useCallback(y(s),[s]),D=I.useCallback(y(o),[o]);return h.jsx(M9,{ref:u,...c,onEnter:_,onEntered:E,onEntering:v,onExit:w,onExited:R,onExiting:T,addEndListener:D,nodeRef:f,children:typeof a=="function"?(O,x)=>a(O,{...x,ref:m}):mt.cloneElement(a,{ref:m})})}),kT=B9,z9={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function q9(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=z9[t];return r+parseInt(es(e,i[0]),10)+parseInt(es(e,i[1]),10)}const W9={[Js]:"collapse",[ef]:"collapsing",[Jr]:"collapsing",[Wi]:"collapse show"},H9=mt.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:o,dimension:a="height",in:l=!1,timeout:c=300,mountOnEnter:u=!1,unmountOnExit:f=!1,appear:p=!1,getDimensionValue:m=q9,...y},_)=>{const v=typeof a=="function"?a():a,E=I.useMemo(()=>yd(O=>{O.style[v]="0"},t),[v,t]),w=I.useMemo(()=>yd(O=>{const x=`scroll${v[0].toUpperCase()}${v.slice(1)}`;O.style[v]=`${O[x]}px`},e),[v,e]),T=I.useMemo(()=>yd(O=>{O.style[v]=null},n),[v,n]),R=I.useMemo(()=>yd(O=>{O.style[v]=`${m(v,O)}px`,LD(O)},r),[r,m,v]),D=I.useMemo(()=>yd(O=>{O.style[v]=null},i),[v,i]);return h.jsx(kT,{ref:_,addEndListener:xT,...y,"aria-expanded":y.role?l:null,onEnter:E,onEntering:w,onEntered:T,onExit:R,onExiting:D,childRef:o.ref,in:l,timeout:c,mountOnEnter:u,unmountOnExit:f,appear:p,children:(O,x)=>mt.cloneElement(o,{...x,className:Q(s,o.props.className,W9[O],v==="width"&&"collapse-horizontal")})})}),G9=H9;function K9(t){const e=I.useRef(t);return I.useEffect(()=>{e.current=t},[t]),e}function Xe(t){const e=K9(t);return I.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const Ff=t=>I.forwardRef((e,n)=>h.jsx("div",{...e,ref:n,className:Q(e.className,t)})),MD=Ff("h4");MD.displayName="DivStyledAsH4";const VD=I.forwardRef(({className:t,bsPrefix:e,as:n=MD,...r},i)=>(e=J(e,"alert-heading"),h.jsx(n,{ref:i,className:Q(t,e),...r})));VD.displayName="AlertHeading";const Q9=VD;function Cg(){return I.useState(null)}function Y9(t,e,n,r=!1){const i=Xe(n);I.useEffect(()=>{const s=typeof t=="function"?t():t;return s.addEventListener(e,i,r),()=>s.removeEventListener(e,i,r)},[t])}function AT(){const t=I.useRef(!0),e=I.useRef(()=>t.current);return I.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function FD(t){const e=I.useRef(null);return I.useEffect(()=>{e.current=t}),e.current}const J9=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",X9=typeof document<"u",tf=X9||J9?I.useLayoutEffect:I.useEffect,Z9=["as","disabled"];function e8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function t8(t){return!t||t.trim()==="#"}function RT({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=p=>{if((e||t==="a"&&t8(n))&&p.preventDefault(),e){p.stopPropagation();return}o==null||o(p)},f=p=>{p.key===" "&&(p.preventDefault(),u(p))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:u,onKeyDown:f},c]}const CT=I.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=e8(t,Z9);const[s,{tagName:o}]=RT(Object.assign({tagName:n,disabled:r},i));return h.jsx(o,Object.assign({},i,s,{ref:e}))});CT.displayName="Button";const n8=["onKeyDown"];function r8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function i8(t){return!t||t.trim()==="#"}const $D=I.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=r8(t,n8);const[i]=RT(Object.assign({tagName:"a"},r)),s=Xe(o=>{i.onKeyDown(o),n==null||n(o)});return i8(r.href)||r.role==="button"?h.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):h.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});$D.displayName="Anchor";const PT=$D,UD=I.forwardRef(({className:t,bsPrefix:e,as:n=PT,...r},i)=>(e=J(e,"alert-link"),h.jsx(n,{ref:i,className:Q(t,e),...r})));UD.displayName="AlertLink";const s8=UD,o8={[Jr]:"show",[Wi]:"show"},BD=I.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=I.useCallback((l,c)=>{LD(l),r==null||r(l,c)},[r]);return h.jsx(kT,{ref:s,addEndListener:xT,...o,onEnter:a,childRef:e.ref,children:(l,c)=>I.cloneElement(e,{...c,className:Q("fade",t,e.props.className,o8[l],n[l])})})});BD.displayName="Fade";const ls=BD,a8={"aria-label":oe.string,onClick:oe.func,variant:oe.oneOf(["white"])},OT=I.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>h.jsx("button",{ref:i,type:"button",className:Q("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));OT.displayName="CloseButton";OT.propTypes=a8;const zD=OT,qD=I.forwardRef((t,e)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:s,className:o,children:a,variant:l="primary",onClose:c,dismissible:u,transition:f=ls,...p}=ku(t,{show:"onClose"}),m=J(n,"alert"),y=Xe(E=>{c&&c(!1,E)}),_=f===!0?ls:f,v=h.jsxs("div",{role:"alert",..._?void 0:p,ref:e,className:Q(o,m,l&&`${m}-${l}`,u&&`${m}-dismissible`),children:[u&&h.jsx(zD,{onClick:y,"aria-label":i,variant:s}),a]});return _?h.jsx(_,{unmountOnExit:!0,...p,ref:void 0,in:r,children:v}):r?v:null});qD.displayName="Alert";const Yt=Object.assign(qD,{Link:s8,Heading:Q9}),WD=I.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:r,className:i,as:s="span",...o},a)=>{const l=J(t,"badge");return h.jsx(s,{ref:a,...o,className:Q(i,l,n&&"rounded-pill",r&&`text-${r}`,e&&`bg-${e}`)})});WD.displayName="Badge";const cs=WD,HD=I.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...a},l)=>{const c=J(e,"btn"),[u,{tagName:f}]=RT({tagName:t,disabled:s,...a}),p=f;return h.jsx(p,{...u,...a,ref:l,disabled:s,className:Q(o,c,i&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,a.href&&s&&"disabled")})});HD.displayName="Button";const be=HD,GD=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"card-body"),h.jsx(n,{ref:i,className:Q(t,e),...r})));GD.displayName="CardBody";const KD=GD,QD=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"card-footer"),h.jsx(n,{ref:i,className:Q(t,e),...r})));QD.displayName="CardFooter";const l8=QD,YD=I.createContext(null);YD.displayName="CardHeaderContext";const JD=YD,XD=I.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=J(t,"card-header"),o=I.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return h.jsx(JD.Provider,{value:o,children:h.jsx(n,{ref:i,...r,className:Q(e,s)})})});XD.displayName="CardHeader";const c8=XD,ZD=I.forwardRef(({bsPrefix:t,className:e,variant:n,as:r="img",...i},s)=>{const o=J(t,"card-img");return h.jsx(r,{ref:s,className:Q(n?`${o}-${n}`:o,e),...i})});ZD.displayName="CardImg";const u8=ZD,e2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"card-img-overlay"),h.jsx(n,{ref:i,className:Q(t,e),...r})));e2.displayName="CardImgOverlay";const d8=e2,t2=I.forwardRef(({className:t,bsPrefix:e,as:n="a",...r},i)=>(e=J(e,"card-link"),h.jsx(n,{ref:i,className:Q(t,e),...r})));t2.displayName="CardLink";const h8=t2,f8=Ff("h6"),n2=I.forwardRef(({className:t,bsPrefix:e,as:n=f8,...r},i)=>(e=J(e,"card-subtitle"),h.jsx(n,{ref:i,className:Q(t,e),...r})));n2.displayName="CardSubtitle";const p8=n2,r2=I.forwardRef(({className:t,bsPrefix:e,as:n="p",...r},i)=>(e=J(e,"card-text"),h.jsx(n,{ref:i,className:Q(t,e),...r})));r2.displayName="CardText";const m8=r2,g8=Ff("h5"),i2=I.forwardRef(({className:t,bsPrefix:e,as:n=g8,...r},i)=>(e=J(e,"card-title"),h.jsx(n,{ref:i,className:Q(t,e),...r})));i2.displayName="CardTitle";const v8=i2,s2=I.forwardRef(({bsPrefix:t,className:e,bg:n,text:r,border:i,body:s=!1,children:o,as:a="div",...l},c)=>{const u=J(t,"card");return h.jsx(a,{ref:c,...l,className:Q(e,u,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?h.jsx(KD,{children:o}):o})});s2.displayName="Card";const de=Object.assign(s2,{Img:u8,Title:v8,Subtitle:p8,Body:KD,Link:h8,Text:m8,Header:c8,Footer:l8,ImgOverlay:d8});function y8(t){const e=I.useRef(t);return e.current=t,e}function NT(t){const e=y8(t);I.useEffect(()=>()=>e.current(),[])}const $0=2**31-1;function o2(t,e,n){const r=n-Date.now();t.current=r<=$0?setTimeout(e,r):setTimeout(()=>o2(t,e,n),$0)}function _8(){const t=AT(),e=I.useRef();return NT(()=>clearTimeout(e.current)),I.useMemo(()=>{const n=()=>clearTimeout(e.current);function r(i,s=0){t()&&(n(),s<=$0?e.current=setTimeout(i,s):o2(e,i,Date.now()+s))}return{set:r,clear:n,handleRef:e}},[])}function $k(t,e){let n=0;return I.Children.map(t,r=>I.isValidElement(r)?e(r,n++):r)}function w8(t,e){let n=0;I.Children.forEach(t,r=>{I.isValidElement(r)&&e(r,n++)})}function b8(t,e){return I.Children.toArray(t).some(n=>I.isValidElement(n)&&n.type===e)}function a2({as:t,bsPrefix:e,className:n,...r}){e=J(e,"col");const i=RD(),s=CD(),o=[],a=[];return i.forEach(l=>{const c=r[l];delete r[l];let u,f,p;typeof c=="object"&&c!=null?{span:u,offset:f,order:p}=c:u=c;const m=l!==s?`-${l}`:"";u&&o.push(u===!0?`${e}${m}`:`${e}${m}-${u}`),p!=null&&a.push(`order${m}-${p}`),f!=null&&a.push(`offset${m}-${f}`)}),[{...r,className:Q(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const l2=I.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=a2(t);return h.jsx(i,{...r,ref:e,className:Q(n,!o.length&&s)})});l2.displayName="Col";const ve=l2,c2=I.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const o=J(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return h.jsx(n,{ref:s,...i,className:Q(r,e?`${o}${a}`:o)})});c2.displayName="Container";const Gt=c2;var E8=Function.prototype.bind.call(Function.prototype.call,[].slice);function zi(t,e){return E8(t.querySelectorAll(e))}function u2(t,e,n){const r=I.useRef(t!==void 0),[i,s]=I.useState(e),o=t!==void 0,a=r.current;return r.current=o,!o&&a&&i!==e&&s(e),[o?t:i,I.useCallback((...l)=>{const[c,...u]=l;let f=n==null?void 0:n(c,...u);return s(c),f},[n])]}function d2(){const[,t]=I.useReducer(e=>!e,!1);return t}const T8=I.createContext(null),Lv=T8;var Uk=Object.prototype.hasOwnProperty;function Bk(t,e,n){for(n of t.keys())if(lh(n,e))return n}function lh(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&lh(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=Bk(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=Bk(e,i),!i)||!lh(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(Uk.call(t,n)&&++r&&!Uk.call(e,n)||!(n in e)||!lh(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function I8(t){const e=AT();return[t[0],I.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var Xn="top",Vr="bottom",Fr="right",Zn="left",DT="auto",$f=[Xn,Vr,Fr,Zn],Wc="start",nf="end",S8="clippingParents",h2="viewport",_d="popper",x8="reference",zk=$f.reduce(function(t,e){return t.concat([e+"-"+Wc,e+"-"+nf])},[]),f2=[].concat($f,[DT]).reduce(function(t,e){return t.concat([e,e+"-"+Wc,e+"-"+nf])},[]),k8="beforeRead",A8="read",R8="afterRead",C8="beforeMain",P8="main",O8="afterMain",N8="beforeWrite",D8="write",j8="afterWrite",L8=[k8,A8,R8,C8,P8,O8,N8,D8,j8];function Ii(t){return t.split("-")[0]}function gr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ka(t){var e=gr(t).Element;return t instanceof e||t instanceof Element}function Si(t){var e=gr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function jT(t){if(typeof ShadowRoot>"u")return!1;var e=gr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var Va=Math.max,Pg=Math.min,Hc=Math.round;function U0(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function p2(){return!/^((?!chrome|android).)*safari/i.test(U0())}function Gc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Si(t)&&(i=t.offsetWidth>0&&Hc(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Hc(r.height)/t.offsetHeight||1);var o=Ka(t)?gr(t):window,a=o.visualViewport,l=!p2()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,f=r.width/i,p=r.height/s;return{width:f,height:p,top:u,right:c+f,bottom:u+p,left:c,x:c,y:u}}function LT(t){var e=Gc(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function m2(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&jT(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Io(t){return t?(t.nodeName||"").toLowerCase():null}function us(t){return gr(t).getComputedStyle(t)}function M8(t){return["table","td","th"].indexOf(Io(t))>=0}function Wo(t){return((Ka(t)?t.ownerDocument:t.document)||window.document).documentElement}function Mv(t){return Io(t)==="html"?t:t.assignedSlot||t.parentNode||(jT(t)?t.host:null)||Wo(t)}function qk(t){return!Si(t)||us(t).position==="fixed"?null:t.offsetParent}function V8(t){var e=/firefox/i.test(U0()),n=/Trident/i.test(U0());if(n&&Si(t)){var r=us(t);if(r.position==="fixed")return null}var i=Mv(t);for(jT(i)&&(i=i.host);Si(i)&&["html","body"].indexOf(Io(i))<0;){var s=us(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Uf(t){for(var e=gr(t),n=qk(t);n&&M8(n)&&us(n).position==="static";)n=qk(n);return n&&(Io(n)==="html"||Io(n)==="body"&&us(n).position==="static")?e:n||V8(t)||e}function MT(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function ch(t,e,n){return Va(t,Pg(e,n))}function F8(t,e,n){var r=ch(t,e,n);return r>n?n:r}function g2(){return{top:0,right:0,bottom:0,left:0}}function v2(t){return Object.assign({},g2(),t)}function y2(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var $8=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,v2(typeof e!="number"?e:y2(e,$f))};function U8(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Ii(n.placement),l=MT(a),c=[Zn,Fr].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var f=$8(i.padding,n),p=LT(s),m=l==="y"?Xn:Zn,y=l==="y"?Vr:Fr,_=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],v=o[l]-n.rects.reference[l],E=Uf(s),w=E?l==="y"?E.clientHeight||0:E.clientWidth||0:0,T=_/2-v/2,R=f[m],D=w-p[u]-f[y],O=w/2-p[u]/2+T,x=ch(R,O,D),S=l;n.modifiersData[r]=(e={},e[S]=x,e.centerOffset=x-O,e)}}function B8(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||m2(e.elements.popper,i)&&(e.elements.arrow=i))}const z8={name:"arrow",enabled:!0,phase:"main",fn:U8,effect:B8,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Kc(t){return t.split("-")[1]}var q8={top:"auto",right:"auto",bottom:"auto",left:"auto"};function W8(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Hc(n*i)/i||0,y:Hc(r*i)/i||0}}function Wk(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,f=t.isFixed,p=o.x,m=p===void 0?0:p,y=o.y,_=y===void 0?0:y,v=typeof u=="function"?u({x:m,y:_}):{x:m,y:_};m=v.x,_=v.y;var E=o.hasOwnProperty("x"),w=o.hasOwnProperty("y"),T=Zn,R=Xn,D=window;if(c){var O=Uf(n),x="clientHeight",S="clientWidth";if(O===gr(n)&&(O=Wo(n),us(O).position!=="static"&&a==="absolute"&&(x="scrollHeight",S="scrollWidth")),O=O,i===Xn||(i===Zn||i===Fr)&&s===nf){R=Vr;var A=f&&O===D&&D.visualViewport?D.visualViewport.height:O[x];_-=A-r.height,_*=l?1:-1}if(i===Zn||(i===Xn||i===Vr)&&s===nf){T=Fr;var P=f&&O===D&&D.visualViewport?D.visualViewport.width:O[S];m-=P-r.width,m*=l?1:-1}}var N=Object.assign({position:a},c&&q8),j=u===!0?W8({x:m,y:_},gr(n)):{x:m,y:_};if(m=j.x,_=j.y,l){var C;return Object.assign({},N,(C={},C[R]=w?"0":"",C[T]=E?"0":"",C.transform=(D.devicePixelRatio||1)<=1?"translate("+m+"px, "+_+"px)":"translate3d("+m+"px, "+_+"px, 0)",C))}return Object.assign({},N,(e={},e[R]=w?_+"px":"",e[T]=E?m+"px":"",e.transform="",e))}function H8(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Ii(e.placement),variation:Kc(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Wk(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Wk(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const G8={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:H8,data:{}};var Yp={passive:!0};function K8(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=gr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Yp)}),a&&l.addEventListener("resize",n.update,Yp),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Yp)}),a&&l.removeEventListener("resize",n.update,Yp)}}const Q8={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:K8,data:{}};var Y8={left:"right",right:"left",bottom:"top",top:"bottom"};function Lm(t){return t.replace(/left|right|bottom|top/g,function(e){return Y8[e]})}var J8={start:"end",end:"start"};function Hk(t){return t.replace(/start|end/g,function(e){return J8[e]})}function VT(t){var e=gr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function FT(t){return Gc(Wo(t)).left+VT(t).scrollLeft}function X8(t,e){var n=gr(t),r=Wo(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=p2();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+FT(t),y:l}}function Z8(t){var e,n=Wo(t),r=VT(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=Va(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=Va(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+FT(t),l=-r.scrollTop;return us(i||n).direction==="rtl"&&(a+=Va(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function $T(t){var e=us(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function _2(t){return["html","body","#document"].indexOf(Io(t))>=0?t.ownerDocument.body:Si(t)&&$T(t)?t:_2(Mv(t))}function uh(t,e){var n;e===void 0&&(e=[]);var r=_2(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=gr(r),o=i?[s].concat(s.visualViewport||[],$T(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(uh(Mv(o)))}function B0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function ez(t,e){var n=Gc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Gk(t,e,n){return e===h2?B0(X8(t,n)):Ka(e)?ez(e,n):B0(Z8(Wo(t)))}function tz(t){var e=uh(Mv(t)),n=["absolute","fixed"].indexOf(us(t).position)>=0,r=n&&Si(t)?Uf(t):t;return Ka(r)?e.filter(function(i){return Ka(i)&&m2(i,r)&&Io(i)!=="body"}):[]}function nz(t,e,n,r){var i=e==="clippingParents"?tz(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=Gk(t,c,r);return l.top=Va(u.top,l.top),l.right=Pg(u.right,l.right),l.bottom=Pg(u.bottom,l.bottom),l.left=Va(u.left,l.left),l},Gk(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function w2(t){var e=t.reference,n=t.element,r=t.placement,i=r?Ii(r):null,s=r?Kc(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Xn:l={x:o,y:e.y-n.height};break;case Vr:l={x:o,y:e.y+e.height};break;case Fr:l={x:e.x+e.width,y:a};break;case Zn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?MT(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Wc:l[c]=l[c]-(e[u]/2-n[u]/2);break;case nf:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function rf(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?S8:a,c=n.rootBoundary,u=c===void 0?h2:c,f=n.elementContext,p=f===void 0?_d:f,m=n.altBoundary,y=m===void 0?!1:m,_=n.padding,v=_===void 0?0:_,E=v2(typeof v!="number"?v:y2(v,$f)),w=p===_d?x8:_d,T=t.rects.popper,R=t.elements[y?w:p],D=nz(Ka(R)?R:R.contextElement||Wo(t.elements.popper),l,u,o),O=Gc(t.elements.reference),x=w2({reference:O,element:T,strategy:"absolute",placement:i}),S=B0(Object.assign({},T,x)),A=p===_d?S:O,P={top:D.top-A.top+E.top,bottom:A.bottom-D.bottom+E.bottom,left:D.left-A.left+E.left,right:A.right-D.right+E.right},N=t.modifiersData.offset;if(p===_d&&N){var j=N[i];Object.keys(P).forEach(function(C){var ue=[Fr,Vr].indexOf(C)>=0?1:-1,fe=[Xn,Vr].indexOf(C)>=0?"y":"x";P[C]+=j[fe]*ue})}return P}function rz(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?f2:l,u=Kc(r),f=u?a?zk:zk.filter(function(y){return Kc(y)===u}):$f,p=f.filter(function(y){return c.indexOf(y)>=0});p.length===0&&(p=f);var m=p.reduce(function(y,_){return y[_]=rf(t,{placement:_,boundary:i,rootBoundary:s,padding:o})[Ii(_)],y},{});return Object.keys(m).sort(function(y,_){return m[y]-m[_]})}function iz(t){if(Ii(t)===DT)return[];var e=Lm(t);return[Hk(t),e,Hk(e)]}function sz(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,f=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,y=m===void 0?!0:m,_=n.allowedAutoPlacements,v=e.options.placement,E=Ii(v),w=E===v,T=l||(w||!y?[Lm(v)]:iz(v)),R=[v].concat(T).reduce(function(Ge,Ne){return Ge.concat(Ii(Ne)===DT?rz(e,{placement:Ne,boundary:u,rootBoundary:f,padding:c,flipVariations:y,allowedAutoPlacements:_}):Ne)},[]),D=e.rects.reference,O=e.rects.popper,x=new Map,S=!0,A=R[0],P=0;P<R.length;P++){var N=R[P],j=Ii(N),C=Kc(N)===Wc,ue=[Xn,Vr].indexOf(j)>=0,fe=ue?"width":"height",Ae=rf(e,{placement:N,boundary:u,rootBoundary:f,altBoundary:p,padding:c}),Re=ue?C?Fr:Zn:C?Vr:Xn;D[fe]>O[fe]&&(Re=Lm(Re));var z=Lm(Re),Z=[];if(s&&Z.push(Ae[j]<=0),a&&Z.push(Ae[Re]<=0,Ae[z]<=0),Z.every(function(Ge){return Ge})){A=N,S=!1;break}x.set(N,Z)}if(S)for(var te=y?3:1,Ee=function(Ne){var ht=R.find(function(Lt){var tr=x.get(Lt);if(tr)return tr.slice(0,Ne).every(function(Ur){return Ur})});if(ht)return A=ht,"break"},ye=te;ye>0;ye--){var Te=Ee(ye);if(Te==="break")break}e.placement!==A&&(e.modifiersData[r]._skip=!0,e.placement=A,e.reset=!0)}}const oz={name:"flip",enabled:!0,phase:"main",fn:sz,requiresIfExists:["offset"],data:{_skip:!1}};function Kk(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Qk(t){return[Xn,Fr,Vr,Zn].some(function(e){return t[e]>=0})}function az(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=rf(e,{elementContext:"reference"}),a=rf(e,{altBoundary:!0}),l=Kk(o,r),c=Kk(a,i,s),u=Qk(l),f=Qk(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:f},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":f})}const lz={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:az};function cz(t,e,n){var r=Ii(t),i=[Zn,Xn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[Zn,Fr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function uz(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=f2.reduce(function(u,f){return u[f]=cz(f,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const dz={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:uz};function hz(t){var e=t.state,n=t.name;e.modifiersData[n]=w2({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const fz={name:"popperOffsets",enabled:!0,phase:"read",fn:hz,data:{}};function pz(t){return t==="x"?"y":"x"}function mz(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,f=n.padding,p=n.tether,m=p===void 0?!0:p,y=n.tetherOffset,_=y===void 0?0:y,v=rf(e,{boundary:l,rootBoundary:c,padding:f,altBoundary:u}),E=Ii(e.placement),w=Kc(e.placement),T=!w,R=MT(E),D=pz(R),O=e.modifiersData.popperOffsets,x=e.rects.reference,S=e.rects.popper,A=typeof _=="function"?_(Object.assign({},e.rects,{placement:e.placement})):_,P=typeof A=="number"?{mainAxis:A,altAxis:A}:Object.assign({mainAxis:0,altAxis:0},A),N=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(O){if(s){var C,ue=R==="y"?Xn:Zn,fe=R==="y"?Vr:Fr,Ae=R==="y"?"height":"width",Re=O[R],z=Re+v[ue],Z=Re-v[fe],te=m?-S[Ae]/2:0,Ee=w===Wc?x[Ae]:S[Ae],ye=w===Wc?-S[Ae]:-x[Ae],Te=e.elements.arrow,Ge=m&&Te?LT(Te):{width:0,height:0},Ne=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:g2(),ht=Ne[ue],Lt=Ne[fe],tr=ch(0,x[Ae],Ge[Ae]),Ur=T?x[Ae]/2-te-tr-ht-P.mainAxis:Ee-tr-ht-P.mainAxis,nr=T?-x[Ae]/2+te+tr+Lt+P.mainAxis:ye+tr+Lt+P.mainAxis,rr=e.elements.arrow&&Uf(e.elements.arrow),Er=rr?R==="y"?rr.clientTop||0:rr.clientLeft||0:0,Tr=(C=N==null?void 0:N[R])!=null?C:0,Ir=Re+Ur-Tr-Er,Ue=Re+nr-Tr,si=ch(m?Pg(z,Ir):z,Re,m?Va(Z,Ue):Z);O[R]=si,j[R]=si-Re}if(a){var Br,Yu=R==="x"?Xn:Zn,Il=R==="x"?Vr:Fr,Sr=O[D],oi=D==="y"?"height":"width",ea=Sr+v[Yu],Sl=Sr-v[Il],ai=[Xn,Zn].indexOf(E)!==-1,Ls=(Br=N==null?void 0:N[D])!=null?Br:0,Se=ai?ea:Sr-x[oi]-S[oi]-Ls+P.altAxis,Qe=ai?Sr+x[oi]+S[oi]-Ls-P.altAxis:Sl,Rt=m&&ai?F8(Se,Sr,Qe):ch(m?Se:ea,Sr,m?Qe:Sl);O[D]=Rt,j[D]=Rt-Sr}e.modifiersData[r]=j}}const gz={name:"preventOverflow",enabled:!0,phase:"main",fn:mz,requiresIfExists:["offset"]};function vz(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function yz(t){return t===gr(t)||!Si(t)?VT(t):vz(t)}function _z(t){var e=t.getBoundingClientRect(),n=Hc(e.width)/t.offsetWidth||1,r=Hc(e.height)/t.offsetHeight||1;return n!==1||r!==1}function wz(t,e,n){n===void 0&&(n=!1);var r=Si(e),i=Si(e)&&_z(e),s=Wo(e),o=Gc(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((Io(e)!=="body"||$T(s))&&(a=yz(e)),Si(e)?(l=Gc(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=FT(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function bz(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Ez(t){var e=bz(t);return L8.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Tz(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Iz(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Yk={placement:"bottom",modifiers:[],strategy:"absolute"};function Jk(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Sz(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Yk:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Yk,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},f=[],p=!1,m={state:u,setOptions:function(E){var w=typeof E=="function"?E(u.options):E;_(),u.options=Object.assign({},s,u.options,w),u.scrollParents={reference:Ka(a)?uh(a):a.contextElement?uh(a.contextElement):[],popper:uh(l)};var T=Ez(Iz([].concat(r,u.options.modifiers)));return u.orderedModifiers=T.filter(function(R){return R.enabled}),y(),m.update()},forceUpdate:function(){if(!p){var E=u.elements,w=E.reference,T=E.popper;if(Jk(w,T)){u.rects={reference:wz(w,Uf(T),u.options.strategy==="fixed"),popper:LT(T)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(P){return u.modifiersData[P.name]=Object.assign({},P.data)});for(var R=0;R<u.orderedModifiers.length;R++){if(u.reset===!0){u.reset=!1,R=-1;continue}var D=u.orderedModifiers[R],O=D.fn,x=D.options,S=x===void 0?{}:x,A=D.name;typeof O=="function"&&(u=O({state:u,options:S,name:A,instance:m})||u)}}}},update:Tz(function(){return new Promise(function(v){m.forceUpdate(),v(u)})}),destroy:function(){_(),p=!0}};if(!Jk(a,l))return m;m.setOptions(c).then(function(v){!p&&c.onFirstUpdate&&c.onFirstUpdate(v)});function y(){u.orderedModifiers.forEach(function(v){var E=v.name,w=v.options,T=w===void 0?{}:w,R=v.effect;if(typeof R=="function"){var D=R({state:u,name:E,instance:m,options:T}),O=function(){};f.push(D||O)}})}function _(){f.forEach(function(v){return v()}),f=[]}return m}}const xz=Sz({defaultModifiers:[lz,fz,G8,Q8,dz,oz,gz,z8]}),kz=["enabled","placement","strategy","modifiers"];function Az(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Rz={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},Cz={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,i=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},Pz=[];function b2(t,e,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:o=Pz}=n,a=Az(n,kz);const l=I.useRef(o),c=I.useRef(),u=I.useCallback(()=>{var v;(v=c.current)==null||v.update()},[]),f=I.useCallback(()=>{var v;(v=c.current)==null||v.forceUpdate()},[]),[p,m]=I8(I.useState({placement:i,update:u,forceUpdate:f,attributes:{},styles:{popper:{},arrow:{}}})),y=I.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:v})=>{const E={},w={};Object.keys(v.elements).forEach(T=>{E[T]=v.styles[T],w[T]=v.attributes[T]}),m({state:v,styles:E,attributes:w,update:u,forceUpdate:f,placement:v.placement})}}),[u,f,m]),_=I.useMemo(()=>(lh(l.current,o)||(l.current=o),l.current),[o]);return I.useEffect(()=>{!c.current||!r||c.current.setOptions({placement:i,strategy:s,modifiers:[..._,y,Rz]})},[s,i,y,r,_]),I.useEffect(()=>{if(!(!r||t==null||e==null))return c.current=xz(t,e,Object.assign({},a,{placement:i,strategy:s,modifiers:[..._,Cz,y]})),()=>{c.current!=null&&(c.current.destroy(),c.current=void 0,m(v=>Object.assign({},v,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),p}function sf(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var Oz=function(){},Nz=Oz;const Dz=$o(Nz),Xk=()=>{};function jz(t){return t.button===0}function Lz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Mm=t=>t&&("current"in t?t.current:t),Zk={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function E2(t,e=Xk,{disabled:n,clickTrigger:r="click"}={}){const i=I.useRef(!1),s=I.useRef(!1),o=I.useCallback(c=>{const u=Mm(t);Dz(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!u||Lz(c)||!jz(c)||!!sf(u,c.target)||s.current,s.current=!1},[t]),a=Xe(c=>{const u=Mm(t);u&&sf(u,c.target)&&(s.current=!0)}),l=Xe(c=>{i.current||e(c)});I.useEffect(()=>{var c,u;if(n||t==null)return;const f=Au(Mm(t)),p=f.defaultView||window;let m=(c=p.event)!=null?c:(u=p.parent)==null?void 0:u.event,y=null;Zk[r]&&(y=Qi(f,Zk[r],a,!0));const _=Qi(f,r,o,!0),v=Qi(f,r,w=>{if(w===m){m=void 0;return}l(w)});let E=[];return"ontouchstart"in f.documentElement&&(E=[].slice.call(f.body.children).map(w=>Qi(w,"mousemove",Xk))),()=>{y==null||y(),_(),v(),E.forEach(w=>w())}},[t,n,r,o,a,l])}function Mz(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function Vz(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function T2({enabled:t,enableEvents:e,placement:n,flip:r,offset:i,fixed:s,containerPadding:o,arrowElement:a,popperConfig:l={}}){var c,u,f,p,m;const y=Mz(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:s?"fixed":l.strategy,modifiers:Vz(Object.assign({},y,{eventListeners:{enabled:e,options:(c=y.eventListeners)==null?void 0:c.options},preventOverflow:Object.assign({},y.preventOverflow,{options:o?Object.assign({padding:o},(u=y.preventOverflow)==null?void 0:u.options):(f=y.preventOverflow)==null?void 0:f.options}),offset:{options:Object.assign({offset:i},(p=y.offset)==null?void 0:p.options)},arrow:Object.assign({},y.arrow,{enabled:!!a,options:Object.assign({},(m=y.arrow)==null?void 0:m.options,{element:a})}),flip:Object.assign({enabled:!!r},y.flip)}))})}const Fz=["children"];function $z(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const Uz=()=>{};function I2(t={}){const e=I.useContext(Lv),[n,r]=Cg(),i=I.useRef(!1),{flip:s,offset:o,rootCloseEvent:a,fixed:l=!1,placement:c,popperConfig:u={},enableEventListeners:f=!0,usePopper:p=!!e}=t,m=(e==null?void 0:e.show)==null?!!t.show:e.show;m&&!i.current&&(i.current=!0);const y=O=>{e==null||e.toggle(!1,O)},{placement:_,setMenu:v,menuElement:E,toggleElement:w}=e||{},T=b2(w,E,T2({placement:c||_||"bottom-start",enabled:p,enableEvents:f??m,offset:o,flip:s,fixed:l,arrowElement:n,popperConfig:u})),R=Object.assign({ref:v||Uz,"aria-labelledby":w==null?void 0:w.id},T.attributes.popper,{style:T.styles.popper}),D={show:m,placement:_,hasShown:i.current,toggle:e==null?void 0:e.toggle,popper:p?T:null,arrowProps:p?Object.assign({ref:r},T.attributes.arrow,{style:T.styles.arrow}):{}};return E2(E,y,{clickTrigger:a,disabled:!m}),[R,D]}const Bz={usePopper:!0};function UT(t){let{children:e}=t,n=$z(t,Fz);const[r,i]=I2(n);return h.jsx(h.Fragment,{children:e(r,i)})}UT.displayName="DropdownMenu";UT.defaultProps=Bz;const Og={prefix:String(Math.round(Math.random()*1e10)),current:0},S2=mt.createContext(Og),zz=mt.createContext(!1);let qz=!!(typeof window<"u"&&window.document&&window.document.createElement),F_=new WeakMap;function Wz(t=!1){let e=I.useContext(S2),n=I.useRef(null);if(n.current===null&&!t){var r,i;let s=(i=mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let o=F_.get(s);o==null?F_.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==o.state&&(e.current=o.id,F_.delete(s))}n.current=++e.current}return n.current}function Hz(t){let e=I.useContext(S2);e===Og&&!qz&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Wz(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function Gz(t){let e=mt.useId(),[n]=I.useState(Jz()),r=n?"react-aria":`react-aria${Og.prefix}`;return t||`${r}-${e}`}const x2=typeof mt.useId=="function"?Gz:Hz;function Kz(){return!1}function Qz(){return!0}function Yz(t){return()=>{}}function Jz(){return typeof mt.useSyncExternalStore=="function"?mt.useSyncExternalStore(Yz,Kz,Qz):I.useContext(zz)}const k2=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},eA=()=>{};function A2(){const t=x2(),{show:e=!1,toggle:n=eA,setToggle:r,menuElement:i}=I.useContext(Lv)||{},s=I.useCallback(a=>{n(!e,a)},[e,n]),o={id:t,ref:r||eA,onClick:s,"aria-expanded":!!e};return i&&k2(i)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function R2({children:t}){const[e,n]=A2();return h.jsx(h.Fragment,{children:t(e,n)})}R2.displayName="DropdownToggle";const Xz=I.createContext(null),So=(t,e=null)=>t!=null?String(t):e||null,Ci=Xz,C2=I.createContext(null);C2.displayName="NavContext";const BT=C2,Zz="data-rr-ui-",eq="rrUi";function Cu(t){return`${Zz}${t}`}function tq(t){return`${eq}${t}`}const nq=["eventKey","disabled","onClick","active","as"];function rq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function P2({key:t,href:e,active:n,disabled:r,onClick:i}){const s=I.useContext(Ci),o=I.useContext(BT),{activeKey:a}=o||{},l=So(t,e),c=n==null&&t!=null?So(a)===l:n;return[{onClick:Xe(f=>{r||(i==null||i(f),s&&!f.isPropagationStopped()&&s(l,f))}),"aria-disabled":r||void 0,"aria-selected":c,[Cu("dropdown-item")]:""},{isActive:c}]}const O2=I.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=CT}=t,a=rq(t,nq);const[l]=P2({key:n,href:a.href,disabled:r,onClick:i,active:s});return h.jsx(o,Object.assign({},a,{ref:e},l))});O2.displayName="DropdownItem";const N2=I.createContext(Ru?window:void 0);N2.Provider;function Vv(){return I.useContext(N2)}function tA(){const t=d2(),e=I.useRef(null),n=I.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function Bf({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:i=`* [${Cu("dropdown-item")}]`,focusFirstItemOnShow:s,placement:o="bottom-start",children:a}){const l=Vv(),[c,u]=u2(e,t,r),[f,p]=tA(),m=f.current,[y,_]=tA(),v=y.current,E=FD(c),w=I.useRef(null),T=I.useRef(!1),R=I.useContext(Ci),D=I.useCallback((N,j,C=j==null?void 0:j.type)=>{u(N,{originalEvent:j,source:C})},[u]),O=Xe((N,j)=>{n==null||n(N,j),D(!1,j,"select"),j.isPropagationStopped()||R==null||R(N,j)}),x=I.useMemo(()=>({toggle:D,placement:o,show:c,menuElement:m,toggleElement:v,setMenu:p,setToggle:_}),[D,o,c,m,v,p,_]);m&&E&&!c&&(T.current=m.contains(m.ownerDocument.activeElement));const S=Xe(()=>{v&&v.focus&&v.focus()}),A=Xe(()=>{const N=w.current;let j=s;if(j==null&&(j=f.current&&k2(f.current)?"keyboard":!1),j===!1||j==="keyboard"&&!/^key.+$/.test(N))return;const C=zi(f.current,i)[0];C&&C.focus&&C.focus()});I.useEffect(()=>{c?A():T.current&&(T.current=!1,S())},[c,T,S,A]),I.useEffect(()=>{w.current=null});const P=(N,j)=>{if(!f.current)return null;const C=zi(f.current,i);let ue=C.indexOf(N)+j;return ue=Math.max(0,Math.min(ue,C.length)),C[ue]};return Y9(I.useCallback(()=>l.document,[l]),"keydown",N=>{var j,C;const{key:ue}=N,fe=N.target,Ae=(j=f.current)==null?void 0:j.contains(fe),Re=(C=y.current)==null?void 0:C.contains(fe);if(/input|textarea/i.test(fe.tagName)&&(ue===" "||ue!=="Escape"&&Ae||ue==="Escape"&&fe.type==="search")||!Ae&&!Re||ue==="Tab"&&(!f.current||!c))return;w.current=N.type;const Z={originalEvent:N,source:N.type};switch(ue){case"ArrowUp":{const te=P(fe,-1);te&&te.focus&&te.focus(),N.preventDefault();return}case"ArrowDown":if(N.preventDefault(),!c)u(!0,Z);else{const te=P(fe,1);te&&te.focus&&te.focus()}return;case"Tab":ST(fe.ownerDocument,"keyup",te=>{var Ee;(te.key==="Tab"&&!te.target||!((Ee=f.current)!=null&&Ee.contains(te.target)))&&u(!1,Z)},{once:!0});break;case"Escape":ue==="Escape"&&(N.preventDefault(),N.stopPropagation()),u(!1,Z);break}}),h.jsx(Ci.Provider,{value:O,children:h.jsx(Lv.Provider,{value:x,children:a})})}Bf.displayName="Dropdown";Bf.Menu=UT;Bf.Toggle=R2;Bf.Item=O2;const D2=I.createContext({});D2.displayName="DropdownContext";const j2=D2,L2=I.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:r="separator",...i},s)=>(e=J(e,"dropdown-divider"),h.jsx(n,{ref:s,className:Q(t,e),role:r,...i})));L2.displayName="DropdownDivider";const iq=L2,M2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",role:r="heading",...i},s)=>(e=J(e,"dropdown-header"),h.jsx(n,{ref:s,className:Q(t,e),role:r,...i})));M2.displayName="DropdownHeader";const sq=M2,V2=I.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:i,active:s,as:o=PT,...a},l)=>{const c=J(t,"dropdown-item"),[u,f]=P2({key:n,href:a.href,disabled:r,onClick:i,active:s});return h.jsx(o,{...a,...u,ref:l,className:Q(e,c,f.isActive&&"active",r&&"disabled")})});V2.displayName="DropdownItem";const oq=V2,F2=I.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=J(e,"dropdown-item-text"),h.jsx(n,{ref:i,className:Q(t,e),...r})));F2.displayName="DropdownItemText";const aq=F2,$2=I.createContext(null);$2.displayName="InputGroupContext";const zT=$2,U2=I.createContext(null);U2.displayName="NavbarContext";const ml=U2;function B2(t,e){return t}function z2(t,e,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",s=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",l=n?"right-end":"left-end",c=n?"left-start":"right-start",u=n?"left-end":"right-end";let f=t?o:s;return e==="up"?f=t?i:r:e==="end"?f=t?u:c:e==="start"?f=t?l:a:e==="down-centered"?f="bottom":e==="up-centered"&&(f="top"),f}const q2=I.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:i=!0,show:s,renderOnMount:o,as:a="div",popperConfig:l,variant:c,...u},f)=>{let p=!1;const m=I.useContext(ml),y=J(t,"dropdown-menu"),{align:_,drop:v,isRTL:E}=I.useContext(j2);n=n||_;const w=I.useContext(zT),T=[];if(n)if(typeof n=="object"){const N=Object.keys(n);if(N.length){const j=N[0],C=n[j];p=C==="start",T.push(`${y}-${j}-${C}`)}}else n==="end"&&(p=!0);const R=z2(p,v,E),[D,{hasShown:O,popper:x,show:S,toggle:A}]=I2({flip:i,rootCloseEvent:r,show:s,usePopper:!m&&T.length===0,offset:[0,2],popperConfig:l,placement:R});if(D.ref=Mi(B2(f),D.ref),tf(()=>{S&&(x==null||x.update())},[S]),!O&&!o&&!w)return null;typeof a!="string"&&(D.show=S,D.close=()=>A==null?void 0:A(!1),D.align=n);let P=u.style;return x!=null&&x.placement&&(P={...u.style,...D.style},u["x-placement"]=x.placement),h.jsx(a,{...u,...D,style:P,...(T.length||m)&&{"data-bs-popper":"static"},className:Q(e,y,S&&"show",p&&`${y}-end`,c&&`${y}-${c}`,...T)})});q2.displayName="DropdownMenu";const lq=q2,W2=I.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:i=be,...s},o)=>{const a=J(t,"dropdown-toggle"),l=I.useContext(Lv);r!==void 0&&(s.bsPrefix=r);const[c]=A2();return c.ref=Mi(c.ref,B2(o)),h.jsx(i,{className:Q(n,a,e&&`${a}-split`,(l==null?void 0:l.show)&&"show"),...c,...s})});W2.displayName="DropdownToggle";const cq=W2,H2=I.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:i,className:s,align:o="start",onSelect:a,onToggle:l,focusFirstItemOnShow:c,as:u="div",navbar:f,autoClose:p=!0,...m}=ku(t,{show:"onToggle"}),y=I.useContext(zT),_=J(n,"dropdown"),v=jv(),E=x=>p===!1?x==="click":p==="inside"?x!=="rootClose":p==="outside"?x!=="select":!0,w=Xe((x,S)=>{var A,P;!((A=S.originalEvent)==null||(P=A.target)==null)&&P.classList.contains("dropdown-toggle")&&S.source==="mousedown"||(S.originalEvent.currentTarget===document&&(S.source!=="keydown"||S.originalEvent.key==="Escape")&&(S.source="rootClose"),E(S.source)&&(l==null||l(x,S)))}),R=z2(o==="end",r,v),D=I.useMemo(()=>({align:o,drop:r,isRTL:v}),[o,r,v]),O={down:_,"down-centered":`${_}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return h.jsx(j2.Provider,{value:D,children:h.jsx(Bf,{placement:R,show:i,onSelect:a,onToggle:w,focusFirstItemOnShow:c,itemSelector:`.${_}-item:not(.disabled):not(:disabled)`,children:y?m.children:h.jsx(u,{...m,ref:e,className:Q(s,i&&"show",O[r])})})})});H2.displayName="Dropdown";const Le=Object.assign(H2,{Toggle:cq,Menu:lq,Item:oq,ItemText:aq,Divider:iq,Header:sq}),uq={type:oe.string,tooltip:oe.bool,as:oe.elementType},qT=I.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},s)=>h.jsx(t,{...i,ref:s,className:Q(e,`${n}-${r?"tooltip":"feedback"}`)}));qT.displayName="Feedback";qT.propTypes=uq;const G2=qT,dq=I.createContext({}),ds=dq,K2=I.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:c}=I.useContext(ds);return e=J(e,"form-check-input"),h.jsx(o,{...a,ref:l,type:r,id:t||c,className:Q(n,e,i&&"is-valid",s&&"is-invalid")})});K2.displayName="FormCheckInput";const Fv=K2,Q2=I.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:s}=I.useContext(ds);return t=J(t,"form-check-label"),h.jsx("label",{...r,ref:i,htmlFor:n||s,className:Q(e,t)})});Q2.displayName="FormCheckLabel";const z0=Q2,Y2=I.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:f,style:p,title:m="",type:y="checkbox",label:_,children:v,as:E="input",...w},T)=>{e=J(e,"form-check"),n=J(n,"form-switch");const{controlId:R}=I.useContext(ds),D=I.useMemo(()=>({controlId:t||R}),[R,t]),O=!v&&_!=null&&_!==!1||b8(v,z0),x=h.jsx(Fv,{...w,type:y==="switch"?"checkbox":y,ref:T,isValid:o,isInvalid:a,disabled:s,as:E});return h.jsx(ds.Provider,{value:D,children:h.jsx("div",{style:p,className:Q(f,O&&e,r&&`${e}-inline`,i&&`${e}-reverse`,y==="switch"&&n),children:v||h.jsxs(h.Fragment,{children:[x,O&&h.jsx(z0,{title:m,children:_}),c&&h.jsx(G2,{type:u,tooltip:l,children:c})]})})})});Y2.displayName="FormCheck";const Ng=Object.assign(Y2,{Input:Fv,Label:z0}),J2=I.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:c,as:u="input",...f},p)=>{const{controlId:m}=I.useContext(ds);return t=J(t,"form-control"),h.jsx(u,{...f,type:e,size:r,ref:p,readOnly:c,id:i||m,className:Q(s,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",a&&"is-invalid")})});J2.displayName="FormControl";const hq=Object.assign(J2,{Feedback:G2}),X2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"form-floating"),h.jsx(n,{ref:i,className:Q(t,e),...r})));X2.displayName="FormFloating";const fq=X2,Z2=I.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=I.useMemo(()=>({controlId:t}),[t]);return h.jsx(ds.Provider,{value:i,children:h.jsx(e,{...n,ref:r})})});Z2.displayName="FormGroup";const ej=Z2,tj=I.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...o},a)=>{const{controlId:l}=I.useContext(ds);e=J(e,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const u=Q(i,e,r&&"visually-hidden",n&&c);return s=s||l,n?h.jsx(ve,{ref:a,as:"label",className:u,htmlFor:s,...o}):h.jsx(t,{ref:a,className:u,htmlFor:s,...o})});tj.displayName="FormLabel";const pq=tj,nj=I.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:s}=I.useContext(ds);return t=J(t,"form-range"),h.jsx("input",{...r,type:"range",ref:i,className:Q(e,t),id:n||s})});nj.displayName="FormRange";const mq=nj,rj=I.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:c}=I.useContext(ds);return t=J(t,"form-select"),h.jsx("select",{...a,size:n,ref:l,className:Q(r,t,e&&`${t}-${e}`,i&&"is-valid",s&&"is-invalid"),id:o||c})});rj.displayName="FormSelect";const gq=rj,ij=I.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},s)=>(t=J(t,"form-text"),h.jsx(n,{...i,ref:s,className:Q(e,t,r&&"text-muted")})));ij.displayName="FormText";const vq=ij,sj=I.forwardRef((t,e)=>h.jsx(Ng,{...t,ref:e,type:"switch"}));sj.displayName="Switch";const yq=Object.assign(sj,{Input:Ng.Input,Label:Ng.Label}),oj=I.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...s},o)=>(t=J(t,"form-floating"),h.jsxs(ej,{ref:o,className:Q(e,t),controlId:r,...s,children:[n,h.jsx("label",{htmlFor:r,children:i})]})));oj.displayName="FloatingLabel";const _q=oj,wq={_ref:oe.any,validated:oe.bool,as:oe.elementType},WT=I.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>h.jsx(n,{...r,ref:i,className:Q(t,e&&"was-validated")}));WT.displayName="Form";WT.propTypes=wq;const V=Object.assign(WT,{Group:ej,Control:hq,Floating:fq,Check:Ng,Switch:yq,Label:pq,Text:vq,Range:mq,Select:gq,FloatingLabel:_q}),aj=I.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=J(e,"input-group-text"),h.jsx(n,{ref:i,className:Q(t,e),...r})));aj.displayName="InputGroupText";const HT=aj,bq=t=>h.jsx(HT,{children:h.jsx(Fv,{type:"checkbox",...t})}),Eq=t=>h.jsx(HT,{children:h.jsx(Fv,{type:"radio",...t})}),lj=I.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:r,as:i="div",...s},o)=>{t=J(t,"input-group");const a=I.useMemo(()=>({}),[]);return h.jsx(zT.Provider,{value:a,children:h.jsx(i,{ref:o,...s,className:Q(r,t,e&&`${t}-${e}`,n&&"has-validation")})})});lj.displayName="InputGroup";const nA=Object.assign(lj,{Text:HT,Radio:Eq,Checkbox:bq}),Tq=I.createContext(null),Pu=Tq,Iq=["as","active","eventKey"];function Sq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function GT({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const o=I.useContext(Ci),a=I.useContext(BT),l=I.useContext(Pu);let c=n;const u={role:i};if(a){!i&&a.role==="tablist"&&(u.role="tab");const f=a.getControllerId(t??null),p=a.getControlledId(t??null);u[Cu("event-key")]=t,u.id=f||r,c=n==null&&t!=null?a.activeKey===t:n,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=p)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),s&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=Xe(f=>{s||(e==null||e(f),t!=null&&o&&!f.isPropagationStopped()&&o(t,f))}),[u,{isActive:c}]}const cj=I.forwardRef((t,e)=>{let{as:n=CT,active:r,eventKey:i}=t,s=Sq(t,Iq);const[o,a]=GT(Object.assign({key:So(i,s.href),active:r},s));return o[Cu("active")]=a.isActive,h.jsx(n,Object.assign({},s,o,{ref:e}))});cj.displayName="NavItem";const xq=cj,kq=["as","onSelect","activeKey","role","onKeyDown"];function Aq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const rA=()=>{},iA=Cu("event-key"),uj=I.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:o}=t,a=Aq(t,kq);const l=d2(),c=I.useRef(!1),u=I.useContext(Ci),f=I.useContext(Pu);let p,m;f&&(s=s||"tablist",i=f.activeKey,p=f.getControlledId,m=f.getControllerId);const y=I.useRef(null),_=T=>{const R=y.current;if(!R)return null;const D=zi(R,`[${iA}]:not([aria-disabled=true])`),O=R.querySelector("[aria-selected=true]");if(!O||O!==document.activeElement)return null;const x=D.indexOf(O);if(x===-1)return null;let S=x+T;return S>=D.length&&(S=0),S<0&&(S=D.length-1),D[S]},v=(T,R)=>{T!=null&&(r==null||r(T,R),u==null||u(T,R))},E=T=>{if(o==null||o(T),!f)return;let R;switch(T.key){case"ArrowLeft":case"ArrowUp":R=_(-1);break;case"ArrowRight":case"ArrowDown":R=_(1);break;default:return}R&&(T.preventDefault(),v(R.dataset[tq("EventKey")]||null,T),c.current=!0,l())};I.useEffect(()=>{if(y.current&&c.current){const T=y.current.querySelector(`[${iA}][aria-selected=true]`);T==null||T.focus()}c.current=!1});const w=Mi(e,y);return h.jsx(Ci.Provider,{value:v,children:h.jsx(BT.Provider,{value:{role:s,activeKey:So(i),getControlledId:p||rA,getControllerId:m||rA},children:h.jsx(n,Object.assign({},a,{onKeyDown:E,ref:w,role:s}))})})});uj.displayName="Nav";const dj=Object.assign(uj,{Item:xq}),hj=I.forwardRef(({bsPrefix:t,active:e,disabled:n,eventKey:r,className:i,variant:s,action:o,as:a,...l},c)=>{t=J(t,"list-group-item");const[u,f]=GT({key:So(r,l.href),active:e,...l}),p=Xe(y=>{if(n){y.preventDefault(),y.stopPropagation();return}u.onClick(y)});n&&l.tabIndex===void 0&&(l.tabIndex=-1,l["aria-disabled"]=!0);const m=a||(o?l.href?"a":"button":"div");return h.jsx(m,{ref:c,...l,...u,onClick:p,className:Q(i,t,f.isActive&&"active",n&&"disabled",s&&`${t}-${s}`,o&&`${t}-action`)})});hj.displayName="ListGroupItem";const Rq=hj,fj=I.forwardRef((t,e)=>{const{className:n,bsPrefix:r,variant:i,horizontal:s,numbered:o,as:a="div",...l}=ku(t,{activeKey:"onSelect"}),c=J(r,"list-group");let u;return s&&(u=s===!0?"horizontal":`horizontal-${s}`),h.jsx(dj,{ref:e,...l,as:a,className:Q(n,c,i&&`${c}-${i}`,u&&`${c}-${u}`,o&&`${c}-numbered`)})});fj.displayName="ListGroup";const fc=Object.assign(fj,{Item:Rq});var Jp;function sA(t){if((!Jp&&Jp!==0||t)&&Ru){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),Jp=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return Jp}function $_(t){t===void 0&&(t=Au());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function Cq(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const oA=Cu("modal-open");class Pq{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return Cq(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(es(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(oA,""),es(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(oA),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const KT=Pq,U_=(t,e)=>Ru?t==null?(e||Au()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function q0(t,e){const n=Vv(),[r,i]=I.useState(()=>U_(t,n==null?void 0:n.document));if(!r){const s=U_(t);s&&i(s)}return I.useEffect(()=>{e&&r&&e(r)},[e,r]),I.useEffect(()=>{const s=U_(t);s!==r&&i(s)},[t,r]),r}function QT({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=I.useRef(null),o=I.useRef(e),a=Xe(n);I.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=Mi(s,t.ref),c=I.cloneElement(t,{ref:l});return e?c:i||!o.current&&r?null:c}function Oq({in:t,onTransition:e}){const n=I.useRef(null),r=I.useRef(!0),i=Xe(e);return tf(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),tf(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Nq({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=I.useState(!e);e&&s&&o(!1);const a=Oq({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(o(!0),n==null||n(c.element)))};Promise.resolve(i(c)).then(u,f=>{throw c.in||o(!0),f})}}),l=Mi(a,t.ref);return s&&!e?null:I.cloneElement(t,{ref:l})}function W0(t,e,n){return t?h.jsx(t,Object.assign({},n)):e?h.jsx(Nq,Object.assign({},n,{transition:e})):h.jsx(QT,Object.assign({},n))}function pj(t){return t.code==="Escape"||t.keyCode===27}const Dq=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function jq(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let B_;function Lq(t){return B_||(B_=new KT({ownerDocument:t==null?void 0:t.document})),B_}function Mq(t){const e=Vv(),n=t||Lq(e),r=I.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:I.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:I.useCallback(i=>{r.current.backdrop=i},[])})}const mj=I.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:f,runTransition:p,backdropTransition:m,runBackdropTransition:y,autoFocus:_=!0,enforceFocus:v=!0,restoreFocus:E=!0,restoreFocusOptions:w,renderDialog:T,renderBackdrop:R=Ue=>h.jsx("div",Object.assign({},Ue)),manager:D,container:O,onShow:x,onHide:S=()=>{},onExit:A,onExited:P,onExiting:N,onEnter:j,onEntering:C,onEntered:ue}=t,fe=jq(t,Dq);const Ae=Vv(),Re=q0(O),z=Mq(D),Z=AT(),te=FD(n),[Ee,ye]=I.useState(!n),Te=I.useRef(null);I.useImperativeHandle(e,()=>z,[z]),Ru&&!te&&n&&(Te.current=$_(Ae==null?void 0:Ae.document)),n&&Ee&&ye(!1);const Ge=Xe(()=>{if(z.add(),nr.current=Qi(document,"keydown",tr),Ur.current=Qi(document,"focus",()=>setTimeout(ht),!0),x&&x(),_){var Ue,si;const Br=$_((Ue=(si=z.dialog)==null?void 0:si.ownerDocument)!=null?Ue:Ae==null?void 0:Ae.document);z.dialog&&Br&&!sf(z.dialog,Br)&&(Te.current=Br,z.dialog.focus())}}),Ne=Xe(()=>{if(z.remove(),nr.current==null||nr.current(),Ur.current==null||Ur.current(),E){var Ue;(Ue=Te.current)==null||Ue.focus==null||Ue.focus(w),Te.current=null}});I.useEffect(()=>{!n||!Re||Ge()},[n,Re,Ge]),I.useEffect(()=>{Ee&&Ne()},[Ee,Ne]),NT(()=>{Ne()});const ht=Xe(()=>{if(!v||!Z()||!z.isTopModal())return;const Ue=$_(Ae==null?void 0:Ae.document);z.dialog&&Ue&&!sf(z.dialog,Ue)&&z.dialog.focus()}),Lt=Xe(Ue=>{Ue.target===Ue.currentTarget&&(c==null||c(Ue),a===!0&&S())}),tr=Xe(Ue=>{l&&pj(Ue)&&z.isTopModal()&&(u==null||u(Ue),Ue.defaultPrevented||S())}),Ur=I.useRef(),nr=I.useRef(),rr=(...Ue)=>{ye(!0),P==null||P(...Ue)};if(!Re)return null;const Er=Object.assign({role:r,ref:z.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},fe,{style:s,className:i,tabIndex:-1});let Tr=T?T(Er):h.jsx("div",Object.assign({},Er,{children:I.cloneElement(o,{role:"document"})}));Tr=W0(f,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:A,onExiting:N,onExited:rr,onEnter:j,onEntering:C,onEntered:ue,children:Tr});let Ir=null;return a&&(Ir=R({ref:z.setBackdropRef,onClick:Lt}),Ir=W0(m,y,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:Ir})),h.jsx(h.Fragment,{children:Aa.createPortal(h.jsxs(h.Fragment,{children:[Ir,Tr]}),Re)})});mj.displayName="Modal";const gj=Object.assign(mj,{Manager:KT});function H0(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function Vq(t,e){t.classList?t.classList.add(e):H0(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function aA(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Fq(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=aA(t.className,e):t.setAttribute("class",aA(t.className&&t.className.baseVal||"",e))}const Ol={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class vj extends KT{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,es(n,{[e]:`${parseFloat(es(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],es(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(Vq(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";zi(n,Ol.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),zi(n,Ol.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),zi(n,Ol.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();Fq(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";zi(n,Ol.FIXED_CONTENT).forEach(s=>this.restore(r,s)),zi(n,Ol.STICKY_CONTENT).forEach(s=>this.restore(i,s)),zi(n,Ol.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let z_;function yj(t){return z_||(z_=new vj(t)),z_}const _j=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"modal-body"),h.jsx(n,{ref:i,className:Q(t,e),...r})));_j.displayName="ModalBody";const $q=_j,Uq=I.createContext({onHide(){}}),YT=Uq,wj=I.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:a,...l},c)=>{t=J(t,"modal");const u=`${t}-dialog`,f=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return h.jsx("div",{...l,ref:c,className:Q(u,e,i&&`${t}-${i}`,r&&`${u}-centered`,a&&`${u}-scrollable`,s&&f),children:h.jsx("div",{className:Q(`${t}-content`,n),children:o})})});wj.displayName="ModalDialog";const bj=wj,Ej=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"modal-footer"),h.jsx(n,{ref:i,className:Q(t,e),...r})));Ej.displayName="ModalFooter";const Bq=Ej,zq=I.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=I.useContext(YT),l=Xe(()=>{a==null||a.onHide(),r==null||r()});return h.jsxs("div",{ref:o,...s,children:[i,n&&h.jsx(zD,{"aria-label":t,variant:e,onClick:l})]})}),Tj=zq,Ij=I.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=J(t,"modal-header"),h.jsx(Tj,{ref:s,...i,className:Q(e,t),closeLabel:n,closeButton:r})));Ij.displayName="ModalHeader";const qq=Ij,Wq=Ff("h4"),Sj=I.forwardRef(({className:t,bsPrefix:e,as:n=Wq,...r},i)=>(e=J(e,"modal-title"),h.jsx(n,{ref:i,className:Q(t,e),...r})));Sj.displayName="ModalTitle";const Hq=Sj;function Gq(t){return h.jsx(ls,{...t,timeout:null})}function Kq(t){return h.jsx(ls,{...t,timeout:null})}const xj=I.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=bj,"data-bs-theme":a,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:f=!1,animation:p=!0,backdrop:m=!0,keyboard:y=!0,onEscapeKeyDown:_,onShow:v,onHide:E,container:w,autoFocus:T=!0,enforceFocus:R=!0,restoreFocus:D=!0,restoreFocusOptions:O,onEntered:x,onExit:S,onExiting:A,onEnter:P,onEntering:N,onExited:j,backdropClassName:C,manager:ue,...fe},Ae)=>{const[Re,z]=I.useState({}),[Z,te]=I.useState(!1),Ee=I.useRef(!1),ye=I.useRef(!1),Te=I.useRef(null),[Ge,Ne]=Cg(),ht=Mi(Ae,Ne),Lt=Xe(E),tr=jv();t=J(t,"modal");const Ur=I.useMemo(()=>({onHide:Lt}),[Lt]);function nr(){return ue||yj({isRTL:tr})}function rr(Se){if(!Ru)return;const Qe=nr().getScrollbarWidth()>0,Rt=Se.scrollHeight>Au(Se).documentElement.clientHeight;z({paddingRight:Qe&&!Rt?sA():void 0,paddingLeft:!Qe&&Rt?sA():void 0})}const Er=Xe(()=>{Ge&&rr(Ge.dialog)});NT(()=>{F0(window,"resize",Er),Te.current==null||Te.current()});const Tr=()=>{Ee.current=!0},Ir=Se=>{Ee.current&&Ge&&Se.target===Ge.dialog&&(ye.current=!0),Ee.current=!1},Ue=()=>{te(!0),Te.current=jD(Ge.dialog,()=>{te(!1)})},si=Se=>{Se.target===Se.currentTarget&&Ue()},Br=Se=>{if(m==="static"){si(Se);return}if(ye.current||Se.target!==Se.currentTarget){ye.current=!1;return}E==null||E()},Yu=Se=>{y?_==null||_(Se):(Se.preventDefault(),m==="static"&&Ue())},Il=(Se,Qe)=>{Se&&rr(Se),P==null||P(Se,Qe)},Sr=Se=>{Te.current==null||Te.current(),S==null||S(Se)},oi=(Se,Qe)=>{N==null||N(Se,Qe),ST(window,"resize",Er)},ea=Se=>{Se&&(Se.style.display=""),j==null||j(Se),F0(window,"resize",Er)},Sl=I.useCallback(Se=>h.jsx("div",{...Se,className:Q(`${t}-backdrop`,C,!p&&"show")}),[p,C,t]),ai={...n,...Re};ai.display="block";const Ls=Se=>h.jsx("div",{role:"dialog",...Se,style:ai,className:Q(e,t,Z&&`${t}-static`,!p&&"show"),onClick:m?Br:void 0,onMouseUp:Ir,"data-bs-theme":a,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:h.jsx(o,{...fe,onMouseDown:Tr,className:r,contentClassName:i,children:s})});return h.jsx(YT.Provider,{value:Ur,children:h.jsx(gj,{show:f,ref:ht,backdrop:m,container:w,keyboard:!0,autoFocus:T,enforceFocus:R,restoreFocus:D,restoreFocusOptions:O,onEscapeKeyDown:Yu,onShow:v,onHide:E,onEnter:Il,onEntering:oi,onEntered:x,onExit:Sr,onExiting:A,onExited:ea,manager:nr(),transition:p?Gq:void 0,backdropTransition:p?Kq:void 0,renderBackdrop:Sl,renderDialog:Ls})})});xj.displayName="Modal";const qt=Object.assign(xj,{Body:$q,Header:qq,Title:Hq,Footer:Bq,Dialog:bj,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var lA={exports:{}},G0={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(o,a,l,c,u,f){var p=c||"<<anonymous>>",m=f||l;if(a[l]==null)return o?new Error("Required "+u+" `"+m+"` was not specified "+("in `"+p+"`.")):null;for(var y=arguments.length,_=Array(y>6?y-6:0),v=6;v<y;v++)_[v-6]=arguments[v];return r.apply(void 0,[a,l,p,u,m].concat(_))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(G0,G0.exports);var Qq=G0.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=Qq,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function c(){for(var u=arguments.length,f=Array(u),p=0;p<u;p++)f[p]=arguments[p];var m=null;return a.forEach(function(y){if(m==null){var _=y.apply(void 0,f);_!=null&&(m=_)}}),m}return(0,r.default)(c)}t.exports=e.default})(lA,lA.exports);const kj=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"nav-item"),h.jsx(n,{ref:i,className:Q(t,e),...r})));kj.displayName="NavItem";const Aj=kj,Rj=I.forwardRef(({bsPrefix:t,className:e,as:n=PT,active:r,eventKey:i,disabled:s=!1,...o},a)=>{t=J(t,"nav-link");const[l,c]=GT({key:So(i,o.href),active:r,disabled:s,...o});return h.jsx(n,{...o,...l,ref:a,disabled:s,className:Q(e,t,s&&"disabled",c.isActive&&"active")})});Rj.displayName="NavLink";const Cj=Rj,Pj=I.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:c,activeKey:u,...f}=ku(t,{activeKey:"onSelect"}),p=J(r,"nav");let m,y,_=!1;const v=I.useContext(ml),E=I.useContext(JD);return v?(m=v.bsPrefix,_=a??!0):E&&({cardHeaderBsPrefix:y}=E),h.jsx(dj,{as:n,ref:e,activeKey:u,className:Q(c,{[p]:!_,[`${m}-nav`]:_,[`${m}-nav-scroll`]:_&&l,[`${y}-${i}`]:!!y,[`${p}-${i}`]:!!i,[`${p}-fill`]:s,[`${p}-justified`]:o}),...f})});Pj.displayName="Nav";const Bd=Object.assign(Pj,{Item:Aj,Link:Cj}),Oj=I.forwardRef(({bsPrefix:t,className:e,as:n,...r},i)=>{t=J(t,"navbar-brand");const s=n||(r.href?"a":"span");return h.jsx(s,{...r,ref:i,className:Q(e,t)})});Oj.displayName="NavbarBrand";const Yq=Oj,Nj=I.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=J(e,"navbar-collapse");const i=I.useContext(ml);return h.jsx(G9,{in:!!(i&&i.expanded),...n,children:h.jsx("div",{ref:r,className:e,children:t})})});Nj.displayName="NavbarCollapse";const Jq=Nj,Dj=I.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...o},a)=>{t=J(t,"navbar-toggler");const{onToggle:l,expanded:c}=I.useContext(ml)||{},u=Xe(f=>{s&&s(f),l&&l()});return i==="button"&&(o.type="button"),h.jsx(i,{...o,ref:a,onClick:u,"aria-label":r,className:Q(e,t,!c&&"collapsed"),children:n||h.jsx("span",{className:`${t}-icon`})})});Dj.displayName="NavbarToggle";const Xq=Dj,K0=new WeakMap,cA=(t,e)=>{if(!t||!e)return;const n=K0.get(e)||new Map;K0.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function Zq(t,e=typeof window>"u"?void 0:window){const n=cA(t,e),[r,i]=I.useState(()=>n?n.matches:!1);return tf(()=>{let s=cA(t,e);if(!s)return i(!1);let o=K0.get(e);const a=()=>{i(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(o==null||o.delete(s.media)),s=void 0}},[t]),r}function eW(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const l=r(a);let c=t[l];return typeof c=="number"?c=`${c-.2}px`:c=`calc(${c} - 0.2px)`,`(max-width: ${c})`}function s(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,c){let u;typeof a=="object"?(u=a,c=l,l=!0):(l=l||!0,u={[a]:l});let f=I.useMemo(()=>Object.entries(u).reduce((p,[m,y])=>((y==="up"||y===!0)&&(p=n(p,s(m))),(y==="down"||y===!0)&&(p=n(p,i(m))),p),""),[JSON.stringify(u)]);return Zq(f,c)}return o}const tW=eW({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),jj=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"offcanvas-body"),h.jsx(n,{ref:i,className:Q(t,e),...r})));jj.displayName="OffcanvasBody";const nW=jj,rW={[Jr]:"show",[Wi]:"show"},Lj=I.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=J(t,"offcanvas"),h.jsx(kT,{ref:l,addEndListener:xT,in:r,mountOnEnter:i,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(c,u)=>I.cloneElement(n,{...u,className:Q(e,n.props.className,(c===Jr||c===ef)&&`${t}-toggling`,rW[c])})})));Lj.displayName="OffcanvasToggling";const iW=Lj,Mj=I.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=J(t,"offcanvas-header"),h.jsx(Tj,{ref:s,...i,className:Q(e,t),closeLabel:n,closeButton:r})));Mj.displayName="OffcanvasHeader";const sW=Mj,oW=Ff("h5"),Vj=I.forwardRef(({className:t,bsPrefix:e,as:n=oW,...r},i)=>(e=J(e,"offcanvas-title"),h.jsx(n,{ref:i,className:Q(t,e),...r})));Vj.displayName="OffcanvasTitle";const aW=Vj;function lW(t){return h.jsx(iW,{...t})}function cW(t){return h.jsx(ls,{...t})}const Fj=I.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:c=!1,onEscapeKeyDown:u,onShow:f,onHide:p,container:m,autoFocus:y=!0,enforceFocus:_=!0,restoreFocus:v=!0,restoreFocusOptions:E,onEntered:w,onExit:T,onExiting:R,onEnter:D,onEntering:O,onExited:x,backdropClassName:S,manager:A,renderStaticNode:P=!1,...N},j)=>{const C=I.useRef();t=J(t,"offcanvas");const{onToggle:ue}=I.useContext(ml)||{},[fe,Ae]=I.useState(!1),Re=tW(s||"xs","up");I.useEffect(()=>{Ae(s?o&&!Re:o)},[o,s,Re]);const z=Xe(()=>{ue==null||ue(),p==null||p()}),Z=I.useMemo(()=>({onHide:z}),[z]);function te(){return A||(c?(C.current||(C.current=new vj({handleContainerOverflow:!1})),C.current):yj())}const Ee=(Ne,...ht)=>{Ne&&(Ne.style.visibility="visible"),D==null||D(Ne,...ht)},ye=(Ne,...ht)=>{Ne&&(Ne.style.visibility=""),x==null||x(...ht)},Te=I.useCallback(Ne=>h.jsx("div",{...Ne,className:Q(`${t}-backdrop`,S)}),[S,t]),Ge=Ne=>h.jsx("div",{...Ne,...N,className:Q(e,s?`${t}-${s}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return h.jsxs(h.Fragment,{children:[!fe&&(s||P)&&Ge({}),h.jsx(YT.Provider,{value:Z,children:h.jsx(gj,{show:fe,ref:j,backdrop:a,container:m,keyboard:l,autoFocus:y,enforceFocus:_&&!c,restoreFocus:v,restoreFocusOptions:E,onEscapeKeyDown:u,onShow:f,onHide:z,onEnter:Ee,onEntering:O,onEntered:w,onExit:T,onExiting:R,onExited:ye,manager:te(),transition:lW,backdropTransition:cW,renderBackdrop:Te,renderDialog:Ge})})]})});Fj.displayName="Offcanvas";const uW=Object.assign(Fj,{Body:nW,Header:sW,Title:aW}),$j=I.forwardRef((t,e)=>{const n=I.useContext(ml);return h.jsx(uW,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});$j.displayName="NavbarOffcanvas";const dW=$j,Uj=I.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=J(e,"navbar-text"),h.jsx(n,{ref:i,className:Q(t,e),...r})));Uj.displayName="NavbarText";const hW=Uj,Bj=I.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:o,sticky:a,className:l,as:c="nav",expanded:u,onToggle:f,onSelect:p,collapseOnSelect:m=!1,...y}=ku(t,{expanded:"onToggle"}),_=J(n,"navbar"),v=I.useCallback((...T)=>{p==null||p(...T),m&&u&&(f==null||f(!1))},[p,m,u,f]);y.role===void 0&&c!=="nav"&&(y.role="navigation");let E=`${_}-expand`;typeof r=="string"&&(E=`${E}-${r}`);const w=I.useMemo(()=>({onToggle:()=>f==null?void 0:f(!u),bsPrefix:_,expanded:!!u,expand:r}),[_,u,r,f]);return h.jsx(ml.Provider,{value:w,children:h.jsx(Ci.Provider,{value:v,children:h.jsx(c,{ref:e,...y,className:Q(l,_,r&&E,i&&`${_}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});Bj.displayName="Navbar";const Xp=Object.assign(Bj,{Brand:Yq,Collapse:Jq,Offcanvas:dW,Text:hW,Toggle:Xq}),fW=()=>{};function pW(t,e,{disabled:n,clickTrigger:r}={}){const i=e||fW;E2(t,i,{disabled:n,clickTrigger:r});const s=Xe(o=>{pj(o)&&i(o)});I.useEffect(()=>{if(n||t==null)return;const o=Au(Mm(t));let a=(o.defaultView||window).event;const l=Qi(o,"keyup",c=>{if(c===a){a=void 0;return}s(c)});return()=>{l()}},[t,n,s])}const zj=I.forwardRef((t,e)=>{const{flip:n,offset:r,placement:i,containerPadding:s,popperConfig:o={},transition:a,runTransition:l}=t,[c,u]=Cg(),[f,p]=Cg(),m=Mi(u,e),y=q0(t.container),_=q0(t.target),[v,E]=I.useState(!t.show),w=b2(_,c,T2({placement:i,enableEvents:!!t.show,containerPadding:s||5,flip:n,offset:r,arrowElement:f,popperConfig:o}));t.show&&v&&E(!1);const T=(...N)=>{E(!0),t.onExited&&t.onExited(...N)},R=t.show||!v;if(pW(c,t.onHide,{disabled:!t.rootClose||t.rootCloseDisabled,clickTrigger:t.rootCloseEvent}),!R)return null;const{onExit:D,onExiting:O,onEnter:x,onEntering:S,onEntered:A}=t;let P=t.children(Object.assign({},w.attributes.popper,{style:w.styles.popper,ref:m}),{popper:w,placement:i,show:!!t.show,arrowProps:Object.assign({},w.attributes.arrow,{style:w.styles.arrow,ref:p})});return P=W0(a,l,{in:!!t.show,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:P,onExit:D,onExiting:O,onExited:T,onEnter:x,onEntering:S,onEntered:A}),y?Aa.createPortal(P,y):null});zj.displayName="Overlay";const mW=zj,qj=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"popover-header"),h.jsx(n,{ref:i,className:Q(t,e),...r})));qj.displayName="PopoverHeader";const gW=qj,Wj=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"popover-body"),h.jsx(n,{ref:i,className:Q(t,e),...r})));Wj.displayName="PopoverBody";const Hj=Wj;function Gj(t,e){let n=t;return t==="left"?n=e?"end":"start":t==="right"&&(n=e?"start":"end"),n}function Kj(t="absolute"){return{position:t,top:"0",left:"0",opacity:"0",pointerEvents:"none"}}const vW=I.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:r,children:i,body:s,arrowProps:o,hasDoneInitialMeasure:a,popper:l,show:c,...u},f)=>{const p=J(t,"popover"),m=jv(),[y]=(e==null?void 0:e.split("-"))||[],_=Gj(y,m);let v=r;return c&&!a&&(v={...r,...Kj(l==null?void 0:l.strategy)}),h.jsxs("div",{ref:f,role:"tooltip",style:v,"x-placement":y,className:Q(n,p,y&&`bs-popover-${_}`),...u,children:[h.jsx("div",{className:"popover-arrow",...o}),s?h.jsx(Hj,{children:i}):i]})}),Q0=Object.assign(vW,{Header:gW,Body:Hj,POPPER_OFFSET:[0,8]}),Qj=I.forwardRef(({bsPrefix:t,placement:e="right",className:n,style:r,children:i,arrowProps:s,hasDoneInitialMeasure:o,popper:a,show:l,...c},u)=>{t=J(t,"tooltip");const f=jv(),[p]=(e==null?void 0:e.split("-"))||[],m=Gj(p,f);let y=r;return l&&!o&&(y={...r,...Kj(a==null?void 0:a.strategy)}),h.jsxs("div",{ref:u,style:y,role:"tooltip","x-placement":p,className:Q(n,t,`bs-tooltip-${m}`),...c,children:[h.jsx("div",{className:"tooltip-arrow",...s}),h.jsx("div",{className:`${t}-inner`,children:i})]})});Qj.displayName="Tooltip";const yW=Object.assign(Qj,{TOOLTIP_OFFSET:[0,6]});function _W(t){const e=I.useRef(null),n=J(void 0,"popover"),r=J(void 0,"tooltip"),i=I.useMemo(()=>({name:"offset",options:{offset:()=>{if(t)return t;if(e.current){if(H0(e.current,n))return Q0.POPPER_OFFSET;if(H0(e.current,r))return yW.TOOLTIP_OFFSET}return[0,0]}}}),[t,n,r]);return[e,[i]]}function wW(t,e){const{ref:n}=t,{ref:r}=e;t.ref=n.__wrapped||(n.__wrapped=i=>n(Rg(i))),e.ref=r.__wrapped||(r.__wrapped=i=>r(Rg(i)))}const Yj=I.forwardRef(({children:t,transition:e=ls,popperConfig:n={},rootClose:r=!1,placement:i="top",show:s=!1,...o},a)=>{const l=I.useRef({}),[c,u]=I.useState(null),[f,p]=_W(o.offset),m=Mi(a,f),y=e===!0?ls:e||void 0,_=Xe(v=>{u(v),n==null||n.onFirstUpdate==null||n.onFirstUpdate(v)});return tf(()=>{c&&o.target&&(l.current.scheduleUpdate==null||l.current.scheduleUpdate())},[c,o.target]),I.useEffect(()=>{s||u(null)},[s]),h.jsx(mW,{...o,ref:m,popperConfig:{...n,modifiers:p.concat(n.modifiers||[]),onFirstUpdate:_},transition:y,rootClose:r,placement:i,show:s,children:(v,{arrowProps:E,popper:w,show:T})=>{var R,D;wW(v,E);const O=w==null?void 0:w.placement,x=Object.assign(l.current,{state:w==null?void 0:w.state,scheduleUpdate:w==null?void 0:w.update,placement:O,outOfBoundaries:(w==null||(R=w.state)==null||(D=R.modifiersData.hide)==null?void 0:D.isReferenceHidden)||!1,strategy:n.strategy}),S=!!c;return typeof t=="function"?t({...v,placement:O,show:T,...!e&&T&&{className:"show"},popper:x,arrowProps:E,hasDoneInitialMeasure:S}):I.cloneElement(t,{...v,placement:O,arrowProps:E,popper:x,hasDoneInitialMeasure:S,className:Q(t.props.className,!e&&T&&"show"),style:{...t.props.style,...v.style}})}})});Yj.displayName="Overlay";const bW=Yj;function EW(t){return t&&typeof t=="object"?t:{show:t,hide:t}}function uA(t,e,n){const[r]=e,i=r.currentTarget,s=r.relatedTarget||r.nativeEvent[n];(!s||s!==i)&&!sf(i,s)&&t(...e)}oe.oneOf(["click","hover","focus"]);const TW=({trigger:t=["hover","focus"],overlay:e,children:n,popperConfig:r={},show:i,defaultShow:s=!1,onToggle:o,delay:a,placement:l,flip:c=l&&l.indexOf("auto")!==-1,...u})=>{const f=I.useRef(null),p=Mi(f,n.ref),m=_8(),y=I.useRef(""),[_,v]=AD(i,s,o),E=EW(a),{onFocus:w,onBlur:T,onClick:R}=typeof n!="function"?I.Children.only(n).props:{},D=fe=>{p(Rg(fe))},O=I.useCallback(()=>{if(m.clear(),y.current="show",!E.show){v(!0);return}m.set(()=>{y.current==="show"&&v(!0)},E.show)},[E.show,v,m]),x=I.useCallback(()=>{if(m.clear(),y.current="hide",!E.hide){v(!1);return}m.set(()=>{y.current==="hide"&&v(!1)},E.hide)},[E.hide,v,m]),S=I.useCallback((...fe)=>{O(),w==null||w(...fe)},[O,w]),A=I.useCallback((...fe)=>{x(),T==null||T(...fe)},[x,T]),P=I.useCallback((...fe)=>{v(!_),R==null||R(...fe)},[R,v,_]),N=I.useCallback((...fe)=>{uA(O,fe,"fromElement")},[O]),j=I.useCallback((...fe)=>{uA(x,fe,"toElement")},[x]),C=t==null?[]:[].concat(t),ue={ref:D};return C.indexOf("click")!==-1&&(ue.onClick=P),C.indexOf("focus")!==-1&&(ue.onFocus=S,ue.onBlur=A),C.indexOf("hover")!==-1&&(ue.onMouseOver=N,ue.onMouseOut=j),h.jsxs(h.Fragment,{children:[typeof n=="function"?n(ue):I.cloneElement(n,ue),h.jsx(bW,{...u,show:_,onHide:x,flip:c,placement:l,popperConfig:r,target:f.current,children:e})]})},IW=TW;function Jj({animation:t,bg:e,bsPrefix:n,size:r,...i}){n=J(n,"placeholder");const[{className:s,...o}]=a2(i);return{...o,className:Q(s,t?`${n}-${t}`:n,r&&`${n}-${r}`,e&&`bg-${e}`)}}const Xj=I.forwardRef((t,e)=>{const n=Jj(t);return h.jsx(be,{...n,ref:e,disabled:!0,tabIndex:-1})});Xj.displayName="PlaceholderButton";const SW=Xj,Zj=I.forwardRef(({as:t="span",...e},n)=>{const r=Jj(e);return h.jsx(t,{...r,ref:n})});Zj.displayName="Placeholder";const Dg=Object.assign(Zj,{Button:SW}),eL=I.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=J(t,"row"),o=RD(),a=CD(),l=`${s}-cols`,c=[];return o.forEach(u=>{const f=r[u];delete r[u];let p;f!=null&&typeof f=="object"?{cols:p}=f:p=f;const m=u!==a?`-${u}`:"";p!=null&&c.push(`${l}${m}-${p}`)}),h.jsx(n,{ref:i,...r,className:Q(e,s,...c)})});eL.displayName="Row";const ut=eL,xW=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],kW=["activeKey","getControlledId","getControllerId"],AW=["as"];function Y0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function tL(t){let{active:e,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:s,role:o="tabpanel",onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:f,onExited:p}=t,m=Y0(t,xW);const y=I.useContext(Pu);if(!y)return[Object.assign({},m,{role:o}),{eventKey:n,isActive:e,mountOnEnter:r,transition:i,unmountOnExit:s,onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:f,onExited:p}];const{activeKey:_,getControlledId:v,getControllerId:E}=y,w=Y0(y,kW),T=So(n);return[Object.assign({},m,{role:o,id:v(n),"aria-labelledby":E(n)}),{eventKey:n,isActive:e==null&&T!=null?So(_)===T:e,transition:i||w.transition,mountOnEnter:r??w.mountOnEnter,unmountOnExit:s??w.unmountOnExit,onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:f,onExited:p}]}const nL=I.forwardRef((t,e)=>{let{as:n="div"}=t,r=Y0(t,AW);const[i,{isActive:s,onEnter:o,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:f,mountOnEnter:p,unmountOnExit:m,transition:y=QT}]=tL(r);return h.jsx(Pu.Provider,{value:null,children:h.jsx(Ci.Provider,{value:null,children:h.jsx(y,{in:s,onEnter:o,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:f,mountOnEnter:p,unmountOnExit:m,children:h.jsx(n,Object.assign({},i,{ref:e,hidden:!s,"aria-hidden":!s}))})})})});nL.displayName="TabPanel";const rL=t=>{const{id:e,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:s,transition:o,mountOnEnter:a,unmountOnExit:l,children:c}=t,[u,f]=u2(i,s,r),p=x2(e),m=I.useMemo(()=>n||((_,v)=>p?`${p}-${v}-${_}`:null),[p,n]),y=I.useMemo(()=>({onSelect:f,activeKey:u,transition:o,mountOnEnter:a||!1,unmountOnExit:l||!1,getControlledId:_=>m(_,"tabpane"),getControllerId:_=>m(_,"tab")}),[f,u,o,a,l,m]);return h.jsx(Pu.Provider,{value:y,children:h.jsx(Ci.Provider,{value:f||null,children:c})})};rL.Panel=nL;const iL=rL;function JT(t){return typeof t=="boolean"?t?ls:QT:t}const sL=({transition:t,...e})=>h.jsx(iL,{...e,transition:JT(t)});sL.displayName="TabContainer";const RW=sL,oL=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=J(e,"tab-content"),h.jsx(n,{ref:i,className:Q(t,e),...r})));oL.displayName="TabContent";const aL=oL,lL=I.forwardRef(({bsPrefix:t,transition:e,...n},r)=>{const[{className:i,as:s="div",...o},{isActive:a,onEnter:l,onEntering:c,onEntered:u,onExit:f,onExiting:p,onExited:m,mountOnEnter:y,unmountOnExit:_,transition:v=ls}]=tL({...n,transition:JT(e)}),E=J(t,"tab-pane");return h.jsx(Pu.Provider,{value:null,children:h.jsx(Ci.Provider,{value:null,children:h.jsx(v,{in:a,onEnter:l,onEntering:c,onEntered:u,onExit:f,onExiting:p,onExited:m,mountOnEnter:y,unmountOnExit:_,children:h.jsx(s,{...o,ref:r,className:Q(i,E,a&&"active")})})})})});lL.displayName="TabPane";const cL=lL,CW={eventKey:oe.oneOfType([oe.string,oe.number]),title:oe.node.isRequired,disabled:oe.bool,tabClassName:oe.string,tabAttrs:oe.object},uL=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};uL.propTypes=CW;const wd=Object.assign(uL,{Container:RW,Content:aL,Pane:cL}),PW=I.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:r,borderless:i,hover:s,size:o,variant:a,responsive:l,...c},u)=>{const f=J(t,"table"),p=Q(e,f,a&&`${f}-${a}`,o&&`${f}-${o}`,n&&`${f}-${typeof n=="string"?`striped-${n}`:"striped"}`,r&&`${f}-bordered`,i&&`${f}-borderless`,s&&`${f}-hover`),m=h.jsx("table",{...c,className:p,ref:u});if(l){let y=`${f}-responsive`;return typeof l=="string"&&(y=`${y}-${l}`),h.jsx("div",{className:y,children:m})}return m}),$v=PW;function OW(t){let e;return w8(t,n=>{e==null&&(e=n.props.eventKey)}),e}function NW(t){const{title:e,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:o}=t.props;return e==null?null:h.jsx(Aj,{as:"li",role:"presentation",children:h.jsx(Cj,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,...s,children:e})})}const dL=t=>{const{id:e,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:s=!1,variant:o="tabs",children:a,activeKey:l=OW(a),...c}=ku(t,{activeKey:"onSelect"});return h.jsxs(iL,{id:e,activeKey:l,onSelect:n,transition:JT(r),mountOnEnter:i,unmountOnExit:s,children:[h.jsx(Bd,{...c,role:"tablist",as:"ul",variant:o,children:$k(a,NW)}),h.jsx(aL,{children:$k(a,u=>{const f={...u.props};return delete f.title,delete f.disabled,delete f.tabClassName,delete f.tabAttrs,h.jsx(cL,{...f})})})]})};dL.displayName="Tabs";const DW=dL;function jW(){return h.jsx(Gt,{fluid:!0,className:"d-flex align-items-center justify-content-center vh-100 text-center",children:h.jsx(ut,{children:h.jsxs(ve,{children:[h.jsx("h1",{children:"Oops something went wrong!"}),h.jsx("h3",{children:"Page not found"}),h.jsx(fr,{to:"/",className:"fs-5",children:"Go back to Home"})]})})})}function Uv(){throw new Error("Cycle detected")}var LW=Symbol.for("preact-signals");function XT(){if(xc>1)xc--;else{for(var t,e=!1;dh!==void 0;){var n=dh;for(dh=void 0,J0++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&fL(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=r}}if(J0=0,xc--,e)throw t}}var Tt=void 0,dh=void 0,xc=0,J0=0,jg=0;function hL(t){if(Tt!==void 0){var e=t.n;if(e===void 0||e.t!==Tt)return e={i:0,S:t,p:Tt.s,n:void 0,t:Tt,e:void 0,x:void 0,r:e},Tt.s!==void 0&&(Tt.s.n=e),Tt.s=e,t.n=e,32&Tt.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=Tt.s,e.n=void 0,Tt.s.n=e,Tt.s=e),e}}function yn(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}yn.prototype.brand=LW;yn.prototype.h=function(){return!0};yn.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};yn.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};yn.prototype.subscribe=function(t){var e=this;return vL(function(){var n=e.value,r=32&this.f;this.f&=-33;try{t(n)}finally{this.f|=r}})};yn.prototype.valueOf=function(){return this.value};yn.prototype.toString=function(){return this.value+""};yn.prototype.toJSON=function(){return this.value};yn.prototype.peek=function(){return this.v};Object.defineProperty(yn.prototype,"value",{get:function(){var t=hL(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(Tt instanceof gl&&function(){throw new Error("Computed cannot have side-effects")}(),t!==this.v){J0>100&&Uv(),this.v=t,this.i++,jg++,xc++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{XT()}}}});function Bv(t){return new yn(t)}function fL(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function pL(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function mL(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function gl(t){yn.call(this,void 0),this.x=t,this.s=void 0,this.g=jg-1,this.f=4}(gl.prototype=new yn).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===jg))return!0;if(this.g=jg,this.f|=1,this.i>0&&!fL(this))return this.f&=-2,!0;var t=Tt;try{pL(this),Tt=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return Tt=t,mL(this),this.f&=-2,!0};gl.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}yn.prototype.S.call(this,t)};gl.prototype.U=function(t){if(this.t!==void 0&&(yn.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};gl.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};gl.prototype.peek=function(){if(this.h()||Uv(),16&this.f)throw this.v;return this.v};Object.defineProperty(gl.prototype,"value",{get:function(){1&this.f&&Uv();var t=hL(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function gL(t){var e=t.u;if(t.u=void 0,typeof e=="function"){xc++;var n=Tt;Tt=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,ZT(t),r}finally{Tt=n,XT()}}}function ZT(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,gL(t)}function MW(t){if(Tt!==this)throw new Error("Out-of-order effect");mL(this),Tt=t,this.f&=-2,8&this.f&&ZT(this),XT()}function zf(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}zf.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};zf.prototype.S=function(){1&this.f&&Uv(),this.f|=1,this.f&=-9,gL(this),pL(this),xc++;var t=Tt;return Tt=this,MW.bind(this,t)};zf.prototype.N=function(){2&this.f||(this.f|=2,this.o=dh,dh=this)};zf.prototype.d=function(){this.f|=8,1&this.f||ZT(this)};function vL(t){var e=new zf(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var yL={exports:{}},_L={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qc=I;function VW(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var FW=typeof Object.is=="function"?Object.is:VW,$W=Qc.useState,UW=Qc.useEffect,BW=Qc.useLayoutEffect,zW=Qc.useDebugValue;function qW(t,e){var n=e(),r=$W({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return BW(function(){i.value=n,i.getSnapshot=e,q_(i)&&s({inst:i})},[t,n,e]),UW(function(){return q_(i)&&s({inst:i}),t(function(){q_(i)&&s({inst:i})})},[t]),zW(n),n}function q_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!FW(t,n)}catch{return!0}}function WW(t,e){return e()}var HW=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WW:qW;_L.useSyncExternalStore=Qc.useSyncExternalStore!==void 0?Qc.useSyncExternalStore:HW;yL.exports=_L;var GW=yL.exports,wL={exports:{}},eI={};/**
 * @license React
 * react-jsx-dev-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KW=Symbol.for("react.fragment");eI.Fragment=KW;eI.jsxDEV=void 0;wL.exports=eI;var QW=wL.exports;const YW=$o(QW);var bd=null,Ed=!1,Zp=null,dA=new Map;function hA(t){if(!t)return 1;var e,n=dA.get(t);if(n!==void 0)return n;var r=t.useCallback.toString();if(t.useReducer===t.useEffect)e=1;else if(t.useEffect===t.useImperativeHandle)e=32;else if(/Invalid/.test(r))e=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){var i=t.useReducer.toString();/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i)?e=16:e=8}else e=4;return dA.set(t,e),e}var JW=Symbol.for("react.element");function sa(t){return typeof t!="function"?t:function(e,n){if(typeof e=="string"&&n)for(var r in n){var i=n[r];r!=="children"&&i instanceof yn&&(n[r]=i.value)}return t.call.apply(t,[t,e,n].concat([].slice.call(arguments,2)))}}var va,W_,XW=Symbol.dispose||Symbol.for("Symbol.dispose");function H_(t,e){var n=e.effect.S();return va=e,ZW.bind(e,t,n)}function ZW(t,e){e(),va=t}var eH=Promise.prototype.then.bind(Promise.resolve());function X0(t){t===void 0&&(t=0),function(){W_||(W_=eH(function(){var r;W_=void 0,(r=va)==null||r.f()}))}();var e=I.useRef();e.current==null&&(e.current=function(r){var i,s,o,a,l=0,c=vL(function(){s=this});return s.c=function(){l=l+1|0,a&&a()},(i={u:r,effect:s,subscribe:function(u){return a=u,function(){l=l+1|0,a=void 0,c()}},getSnapshot:function(){return l},S:function(){if(va!=null){var u=va.u,f=this.u;u==0&&f==0||u==0&&f==1?(va.f(),o=H_(void 0,this)):u==1&&f==0||u==2&&f==0||(o=H_(va,this))}else o=H_(void 0,this)},f:function(){o==null||o(),o=void 0}})[XW]=function(){this.f()},i}(t));var n=e.current;return GW.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot),n.S(),n}Object.defineProperties(yn.prototype,{$$typeof:{configurable:!0,value:JW},type:{configurable:!0,value:function(t){var e=t.data,n=X0(1);try{return e.value}finally{n.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});(function(){Object.defineProperty(I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return Zp},set:function(t){if(Ed)Zp=t;else{var e=hA(Zp),n=hA(t);if(Zp=t,function(s,o){return 1&s&&28&o?!0:(2&s||2&o,!1)}(e,n))Ed=!0,bd=X0(1),Ed=!1;else if(function(s,o){return!!(28&s&&16&o)}(e,n)){var r;(r=bd)==null||r.f(),Ed=!0,bd=X0(1),Ed=!1}else if(function(s,o){return!!(28&s&&1&o)}(e,n)){var i;(i=bd)==null||i.f(),bd=null}}}}),function(){var t=d6,e=YW;mt.createElement=sa(mt.createElement),e.jsx&&(e.jsx=sa(e.jsx)),t.jsx&&(t.jsx=sa(t.jsx)),e.jsxs&&(e.jsxs=sa(e.jsxs)),t.jsxs&&(t.jsxs=sa(t.jsxs)),e.jsxDEV&&(e.jsxDEV=sa(e.jsxDEV)),t.jsxDEV&&(t.jsxDEV=sa(t.jsxDEV))}()})();const G_=(t,e)=>{if(t.previousValue=t.value,!t)throw new Error("Signal is not defined");return Array.isArray(t.value)?t.value=[...e]:typeof t.value=="object"?t.value={...t.value,...e}:t.value=e,Bv},Is=t=>{const e=Bv(t);return e.previousState=null,e.update=n=>G_(e,n),e.reset=()=>{e.value=t},e.loadingStart=()=>{G_(e,{isLoading:!0})},e.loadingEnd=()=>{G_(e,{isLoading:!1})},e};Is({activeTab:"dash"});Is();Is();Is();Is();Is();Is();const je=Is,dn=je({isLoading:!0,isSignedIn:!1}),of=je({}),zv=je({}),Yc=je({}),tH=je({}),nH=je({}),qf=je({}),Ra=je({page:1}),gt=je({}),xi=je({list:[],current:null}),tI=je({list:[]}),hh=je({list:[]}),fh=je({list:[]}),ph=je({stats:{events:0,forms:0,orders:0,revenue:0}}),Ie=je({form:null,tickets:[],formData:{},selectedTickets:{},discountCode:"",appliedDiscount:null,totals:{subtotal:0,discount_amount:0,total:0},error:null,isFormValid:!1}),Ut=je({order:null,form:null,paymentSession:null,error:null,paymentStatus:null}),rH=Object.freeze(Object.defineProperty({__proto__:null,$alert:gt,$auth:zv,$checkout:Ut,$dashboard:ph,$detail:nH,$discounts:hh,$embed:Ie,$events:xi,$filter:Ra,$form:qf,$forms:fh,$global:dn,$list:tH,$tickets:tI,$user:Yc,$view:of},Symbol.toStringTag,{value:"Module"})),iH=()=>{const t=Li();return I.useEffect(()=>{dn.value.isLoading||(dn.value.isSignedIn?t("/admin"):t("/login"))},[dn.value.isLoading,dn.value.isSignedIn,t]),null},sH=()=>dn.value.isSignedIn&&!dn.value.isLoading&&!window.location.pathname.startsWith("/embed")?h.jsx(SD,{to:"/admin"}):h.jsx(IT,{}),Ho=({message:t="",className:e})=>h.jsx("div",{className:e,children:h.jsx("h4",{className:"mt-16",children:t??"Loading..."})});/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function fA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fA(Object(n),!0).forEach(function(r){lH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Lg(t){"@babel/helpers - typeof";return Lg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Lg(t)}function oH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function aH(t,e,n){return e&&pA(t.prototype,e),n&&pA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function lH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nI(t,e){return uH(t)||hH(t,e)||bL(t,e)||pH()}function qv(t){return cH(t)||dH(t)||bL(t)||fH()}function cH(t){if(Array.isArray(t))return Z0(t)}function uH(t){if(Array.isArray(t))return t}function dH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function hH(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function bL(t,e){if(t){if(typeof t=="string")return Z0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z0(t,e)}}function Z0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var mA=function(){},rI={},EL={},TL=null,IL={mark:mA,measure:mA};try{typeof window<"u"&&(rI=window),typeof document<"u"&&(EL=document),typeof MutationObserver<"u"&&(TL=MutationObserver),typeof performance<"u"&&(IL=performance)}catch{}var mH=rI.navigator||{},gA=mH.userAgent,vA=gA===void 0?"":gA,xo=rI,it=EL,yA=TL,em=IL;xo.document;var Ss=!!it.documentElement&&!!it.head&&typeof it.addEventListener=="function"&&typeof it.createElement=="function",SL=~vA.indexOf("MSIE")||~vA.indexOf("Trident/"),hs="___FONT_AWESOME___",eb=16,xL="fa",kL="svg-inline--fa",Qa="data-fa-i2svg",tb="data-fa-pseudo-element",gH="data-fa-pseudo-element-pending",iI="data-prefix",sI="data-icon",_A="fontawesome-i2svg",vH="async",yH=["HTML","HEAD","STYLE","SCRIPT"],AL=function(){try{return!0}catch{return!1}}(),oI={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Mg={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},RL={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},_H={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},wH=/fa[srltdbk\-\ ]/,CL="fa-layers-text",bH=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,EH={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},PL=[1,2,3,4,5,6,7,8,9,10],TH=PL.concat([11,12,13,14,15,16,17,18,19,20]),IH=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],Ca={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},SH=[].concat(qv(Object.keys(Mg)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",Ca.GROUP,Ca.SWAP_OPACITY,Ca.PRIMARY,Ca.SECONDARY]).concat(PL.map(function(t){return"".concat(t,"x")})).concat(TH.map(function(t){return"w-".concat(t)})),OL=xo.FontAwesomeConfig||{};function xH(t){var e=it.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function kH(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(it&&typeof it.querySelector=="function"){var AH=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];AH.forEach(function(t){var e=nI(t,2),n=e[0],r=e[1],i=kH(xH(n));i!=null&&(OL[r]=i)})}var RH={familyPrefix:xL,styleDefault:"solid",replacementClass:kL,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},mh=X(X({},RH),OL);mh.autoReplaceSvg||(mh.observeMutations=!1);var ce={};Object.keys(mh).forEach(function(t){Object.defineProperty(ce,t,{enumerable:!0,set:function(n){mh[t]=n,Vm.forEach(function(r){return r(ce)})},get:function(){return mh[t]}})});xo.FontAwesomeConfig=ce;var Vm=[];function CH(t){return Vm.push(t),function(){Vm.splice(Vm.indexOf(t),1)}}var Us=eb,yi={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function PH(t){if(!(!t||!Ss)){var e=it.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=it.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return it.head.insertBefore(e,r),t}}var OH="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function af(){for(var t=12,e="";t-- >0;)e+=OH[Math.random()*62|0];return e}function Ou(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function aI(t){return t.classList?Ou(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function NL(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function NH(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(NL(t[n]),'" ')},"").trim()}function Wv(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function lI(t){return t.size!==yi.size||t.x!==yi.x||t.y!==yi.y||t.rotate!==yi.rotate||t.flipX||t.flipY}function DH(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function jH(t){var e=t.transform,n=t.width,r=n===void 0?eb:n,i=t.height,s=i===void 0?eb:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&SL?l+="translate(".concat(e.x/Us-r/2,"em, ").concat(e.y/Us-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/Us,"em), calc(-50% + ").concat(e.y/Us,"em)) "):l+="translate(".concat(e.x/Us,"em, ").concat(e.y/Us,"em) "),l+="scale(".concat(e.size/Us*(e.flipX?-1:1),", ").concat(e.size/Us*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var LH=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function DL(){var t=xL,e=kL,n=ce.familyPrefix,r=ce.replacementClass,i=LH;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var wA=!1;function K_(){ce.autoAddCss&&!wA&&(PH(DL()),wA=!0)}var MH={mixout:function(){return{dom:{css:DL,insertCss:K_}}},hooks:function(){return{beforeDOMElementCreation:function(){K_()},beforeI2svg:function(){K_()}}}},fs=xo||{};fs[hs]||(fs[hs]={});fs[hs].styles||(fs[hs].styles={});fs[hs].hooks||(fs[hs].hooks={});fs[hs].shims||(fs[hs].shims=[]);var Xr=fs[hs],jL=[],VH=function t(){it.removeEventListener("DOMContentLoaded",t),Vg=1,jL.map(function(e){return e()})},Vg=!1;Ss&&(Vg=(it.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(it.readyState),Vg||it.addEventListener("DOMContentLoaded",VH));function FH(t){Ss&&(Vg?setTimeout(t,0):jL.push(t))}function Wf(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?NL(t):"<".concat(e," ").concat(NH(r),">").concat(s.map(Wf).join(""),"</").concat(e,">")}function bA(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var $H=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},Q_=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?$H(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function UH(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function nb(t){var e=UH(t);return e.length===1?e[0].toString(16):null}function BH(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function EA(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function rb(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=EA(e);typeof Xr.hooks.addPack=="function"&&!i?Xr.hooks.addPack(t,EA(e)):Xr.styles[t]=X(X({},Xr.styles[t]||{}),s),t==="fas"&&rb("fa",e)}var gh=Xr.styles,zH=Xr.shims,qH=Object.values(RL),cI=null,LL={},ML={},VL={},FL={},$L={},WH=Object.keys(oI);function HH(t){return~SH.indexOf(t)}function GH(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!HH(i)?i:null}var UL=function(){var e=function(s){return Q_(gh,function(o,a,l){return o[l]=Q_(a,s,{}),o},{})};LL=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),ML=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),$L=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in gh||ce.autoFetchSvg,r=Q_(zH,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});VL=r.names,FL=r.unicodes,cI=Hv(ce.styleDefault)};CH(function(t){cI=Hv(t.styleDefault)});UL();function uI(t,e){return(LL[t]||{})[e]}function KH(t,e){return(ML[t]||{})[e]}function pc(t,e){return($L[t]||{})[e]}function BL(t){return VL[t]||{prefix:null,iconName:null}}function QH(t){var e=FL[t],n=uI("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function ko(){return cI}var dI=function(){return{prefix:null,iconName:null,rest:[]}};function Hv(t){var e=oI[t],n=Mg[t]||Mg[e],r=t in Xr.styles?t:null;return n||r||null}function Gv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.skipLookups,r=n===void 0?!1:n,i=null,s=t.reduce(function(o,a){var l=GH(ce.familyPrefix,a);if(gh[a]?(a=qH.includes(a)?_H[a]:a,i=a,o.prefix=a):WH.indexOf(a)>-1?(i=a,o.prefix=Hv(a)):l?o.iconName=l:a!==ce.replacementClass&&o.rest.push(a),!r&&o.prefix&&o.iconName){var c=i==="fa"?BL(o.iconName):{},u=pc(o.prefix,o.iconName);c.prefix&&(i=null),o.iconName=c.iconName||u||o.iconName,o.prefix=c.prefix||o.prefix,o.prefix==="far"&&!gh.far&&gh.fas&&!ce.autoFetchSvg&&(o.prefix="fas")}return o},dI());return(s.prefix==="fa"||i==="fa")&&(s.prefix=ko()||"fas"),s}var YH=function(){function t(){oH(this,t),this.definitions={}}return aH(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=X(X({},n.definitions[a]||{}),o[a]),rb(a,o[a]);var l=RL[a];l&&rb(l,o[a]),UL()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(f){typeof f=="string"&&(n[a][f]=c)}),n[a][l]=c}),n}}]),t}(),TA=[],mc={},kc={},JH=Object.keys(kc);function XH(t,e){var n=e.mixoutsTo;return TA=t,mc={},Object.keys(kc).forEach(function(r){JH.indexOf(r)===-1&&delete kc[r]}),TA.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),Lg(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){mc[o]||(mc[o]=[]),mc[o].push(s[o])})}r.provides&&r.provides(kc)}),n}function ib(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=mc[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function Ya(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=mc[t]||[];i.forEach(function(s){s.apply(null,n)})}function ps(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return kc[t]?kc[t].apply(null,e):void 0}function sb(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||ko();if(e)return e=pc(n,e)||e,bA(zL.definitions,n,e)||bA(Xr.styles,n,e)}var zL=new YH,ZH=function(){ce.autoReplaceSvg=!1,ce.observeMutations=!1,Ya("noAuto")},eG={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ss?(Ya("beforeI2svg",e),ps("pseudoElements2svg",e),ps("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;ce.autoReplaceSvg===!1&&(ce.autoReplaceSvg=!0),ce.observeMutations=!0,FH(function(){nG({autoReplaceSvgRoot:n}),Ya("watch",e)})}},tG={icon:function(e){if(e===null)return null;if(Lg(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:pc(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=Hv(e[0]);return{prefix:r,iconName:pc(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(ce.familyPrefix,"-"))>-1||e.match(wH))){var i=Gv(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||ko(),iconName:pc(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=ko();return{prefix:s,iconName:pc(s,e)||e}}}},br={noAuto:ZH,config:ce,dom:eG,parse:tG,library:zL,findIconDefinition:sb,toHtml:Wf},nG=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?it:n;(Object.keys(Xr.styles).length>0||ce.autoFetchSvg)&&Ss&&ce.autoReplaceSvg&&br.dom.i2svg({node:r})};function Kv(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return Wf(r)})}}),Object.defineProperty(t,"node",{get:function(){if(Ss){var r=it.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function rG(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(lI(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=Wv(X(X({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function iG(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(ce.familyPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:X(X({},i),{},{id:o}),children:r}]}]}function hI(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,f=t.extra,p=t.watchable,m=p===void 0?!1:p,y=r.found?r:n,_=y.width,v=y.height,E=i==="fak",w=[ce.replacementClass,s?"".concat(ce.familyPrefix,"-").concat(s):""].filter(function(A){return f.classes.indexOf(A)===-1}).filter(function(A){return A!==""||!!A}).concat(f.classes).join(" "),T={children:[],attributes:X(X({},f.attributes),{},{"data-prefix":i,"data-icon":s,class:w,role:f.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(_," ").concat(v)})},R=E&&!~f.classes.indexOf("fa-fw")?{width:"".concat(_/v*16*.0625,"em")}:{};m&&(T.attributes[Qa]=""),l&&(T.children.push({tag:"title",attributes:{id:T.attributes["aria-labelledby"]||"title-".concat(u||af())},children:[l]}),delete T.attributes.title);var D=X(X({},T),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:X(X({},R),f.styles)}),O=r.found&&n.found?ps("generateAbstractMask",D)||{children:[],attributes:{}}:ps("generateAbstractIcon",D)||{children:[],attributes:{}},x=O.children,S=O.attributes;return D.children=x,D.attributes=S,a?iG(D):rG(D)}function IA(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=X(X(X({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[Qa]="");var u=X({},o.styles);lI(i)&&(u.transform=jH({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var f=Wv(u);f.length>0&&(c.style=f);var p=[];return p.push({tag:"span",attributes:c,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function sG(t){var e=t.content,n=t.title,r=t.extra,i=X(X(X({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=Wv(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var Y_=Xr.styles;function ob(t){var e=t[0],n=t[1],r=t.slice(4),i=nI(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(ce.familyPrefix,"-").concat(Ca.GROUP)},children:[{tag:"path",attributes:{class:"".concat(ce.familyPrefix,"-").concat(Ca.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(ce.familyPrefix,"-").concat(Ca.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var oG={found:!1,width:512,height:512};function aG(t,e){!AL&&!ce.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function ab(t,e){var n=e;return e==="fa"&&ce.styleDefault!==null&&(e=ko()),new Promise(function(r,i){if(ps("missingIconAbstract"),n==="fa"){var s=BL(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&Y_[e]&&Y_[e][t]){var o=Y_[e][t];return r(ob(o))}aG(t,e),r(X(X({},oG),{},{icon:ce.showMissingIcons&&t?ps("missingIconAbstract")||{}:{}}))})}var SA=function(){},lb=ce.measurePerformance&&em&&em.mark&&em.measure?em:{mark:SA,measure:SA},zd='FA "6.0.0"',lG=function(e){return lb.mark("".concat(zd," ").concat(e," begins")),function(){return qL(e)}},qL=function(e){lb.mark("".concat(zd," ").concat(e," ends")),lb.measure("".concat(zd," ").concat(e),"".concat(zd," ").concat(e," begins"),"".concat(zd," ").concat(e," ends"))},fI={begin:lG,end:qL},Fm=function(){};function xA(t){var e=t.getAttribute?t.getAttribute(Qa):null;return typeof e=="string"}function cG(t){var e=t.getAttribute?t.getAttribute(iI):null,n=t.getAttribute?t.getAttribute(sI):null;return e&&n}function uG(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(ce.replacementClass)}function dG(){if(ce.autoReplaceSvg===!0)return $m.replace;var t=$m[ce.autoReplaceSvg];return t||$m.replace}function hG(t){return it.createElementNS("http://www.w3.org/2000/svg",t)}function fG(t){return it.createElement(t)}function WL(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?hG:fG:n;if(typeof t=="string")return it.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(WL(o,{ceFn:r}))}),i}function pG(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var $m={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(WL(i),n)}),n.getAttribute(Qa)===null&&ce.keepOriginalSource){var r=it.createComment(pG(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~aI(n).indexOf(ce.replacementClass))return $m.replace(e);var i=new RegExp("".concat(ce.familyPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===ce.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return Wf(a)}).join(`
`);n.setAttribute(Qa,""),n.innerHTML=o}};function kA(t){t()}function HL(t,e){var n=typeof e=="function"?e:Fm;if(t.length===0)n();else{var r=kA;ce.mutateApproach===vH&&(r=xo.requestAnimationFrame||kA),r(function(){var i=dG(),s=fI.begin("mutate");t.map(i),s(),n()})}}var pI=!1;function GL(){pI=!0}function cb(){pI=!1}var Fg=null;function AA(t){if(yA&&ce.observeMutations){var e=t.treeCallback,n=e===void 0?Fm:e,r=t.nodeCallback,i=r===void 0?Fm:r,s=t.pseudoElementsCallback,o=s===void 0?Fm:s,a=t.observeMutationsRoot,l=a===void 0?it:a;Fg=new yA(function(c){if(!pI){var u=ko();Ou(c).forEach(function(f){if(f.type==="childList"&&f.addedNodes.length>0&&!xA(f.addedNodes[0])&&(ce.searchPseudoElements&&o(f.target),n(f.target)),f.type==="attributes"&&f.target.parentNode&&ce.searchPseudoElements&&o(f.target.parentNode),f.type==="attributes"&&xA(f.target)&&~IH.indexOf(f.attributeName))if(f.attributeName==="class"&&cG(f.target)){var p=Gv(aI(f.target)),m=p.prefix,y=p.iconName;f.target.setAttribute(iI,m||u),y&&f.target.setAttribute(sI,y)}else uG(f.target)&&i(f.target)})}}),Ss&&Fg.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function mG(){Fg&&Fg.disconnect()}function gG(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function vG(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=Gv(aI(t));return i.prefix||(i.prefix=ko()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||i.prefix&&r.length>0&&(i.iconName=KH(i.prefix,t.innerText)||uI(i.prefix,nb(t.innerText))),i}function yG(t){var e=Ou(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return ce.autoA11y&&(n?e["aria-labelledby"]="".concat(ce.replacementClass,"-title-").concat(r||af()):(e["aria-hidden"]="true",e.focusable="false")),e}function _G(){return{iconName:null,title:null,titleId:null,prefix:null,transform:yi,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function RA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=vG(t),r=n.iconName,i=n.prefix,s=n.rest,o=yG(t),a=ib("parseNodeAttributes",{},t),l=e.styleParser?gG(t):[];return X({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:yi,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var wG=Xr.styles;function KL(t){var e=ce.autoReplaceSvg==="nest"?RA(t,{styleParser:!1}):RA(t);return~e.extra.classes.indexOf(CL)?ps("generateLayersText",t,e):ps("generateSvgReplacementMutation",t,e)}function CA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!Ss)return Promise.resolve();var n=it.documentElement.classList,r=function(f){return n.add("".concat(_A,"-").concat(f))},i=function(f){return n.remove("".concat(_A,"-").concat(f))},s=ce.autoFetchSvg?Object.keys(oI):Object.keys(wG),o=[".".concat(CL,":not([").concat(Qa,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(Qa,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=Ou(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=fI.begin("onTree"),c=a.reduce(function(u,f){try{var p=KL(f);p&&u.push(p)}catch(m){AL||m.name==="MissingIcon"&&console.error(m)}return u},[]);return new Promise(function(u,f){Promise.all(c).then(function(p){HL(p,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(p){l(),f(p)})})}function bG(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;KL(t).then(function(n){n&&HL([n],e)})}function EG(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:sb(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:sb(i||{})),t(r,X(X({},n),{},{mask:i}))}}var TG=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?yi:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,f=n.title,p=f===void 0?null:f,m=n.titleId,y=m===void 0?null:m,_=n.classes,v=_===void 0?[]:_,E=n.attributes,w=E===void 0?{}:E,T=n.styles,R=T===void 0?{}:T;if(e){var D=e.prefix,O=e.iconName,x=e.icon;return Kv(X({type:"icon"},e),function(){return Ya("beforeDOMElementCreation",{iconDefinition:e,params:n}),ce.autoA11y&&(p?w["aria-labelledby"]="".concat(ce.replacementClass,"-title-").concat(y||af()):(w["aria-hidden"]="true",w.focusable="false")),hI({icons:{main:ob(x),mask:l?ob(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:D,iconName:O,transform:X(X({},yi),i),symbol:o,title:p,maskId:u,titleId:y,extra:{attributes:w,styles:R,classes:v}})})}},IG={mixout:function(){return{icon:EG(TG)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=CA,n.nodeCallback=bG,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?it:r,s=n.callback,o=s===void 0?function(){}:s;return CA(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,f=r.maskId,p=r.extra;return new Promise(function(m,y){Promise.all([ab(i,a),u.iconName?ab(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(_){var v=nI(_,2),E=v[0],w=v[1];m([n,hI({icons:{main:E,mask:w},prefix:a,iconName:i,transform:l,symbol:c,maskId:f,title:s,titleId:o,extra:p,watchable:!0})])}).catch(y)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=Wv(a);l.length>0&&(i.style=l);var c;return lI(o)&&(c=ps("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},SG={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return Kv({type:"layer"},function(){Ya("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(ce.familyPrefix,"-layers")].concat(qv(s)).join(" ")},children:o}]})}}}},xG={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,f=u===void 0?{}:u;return Kv({type:"counter",content:n},function(){return Ya("beforeDOMElementCreation",{content:n,params:r}),sG({content:n.toString(),title:s,extra:{attributes:c,styles:f,classes:["".concat(ce.familyPrefix,"-layers-counter")].concat(qv(a))}})})}}}},kG={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?yi:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,f=u===void 0?{}:u,p=r.styles,m=p===void 0?{}:p;return Kv({type:"text",content:n},function(){return Ya("beforeDOMElementCreation",{content:n,params:r}),IA({content:n,transform:X(X({},yi),s),title:a,extra:{attributes:f,styles:m,classes:["".concat(ce.familyPrefix,"-layers-text")].concat(qv(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(SL){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return ce.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,IA({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},AG=new RegExp('"',"ug"),PA=[1105920,1112319];function RG(t){var e=t.replace(AG,""),n=BH(e,0),r=n>=PA[0]&&n<=PA[1],i=e.length===2?e[0]===e[1]:!1;return{value:nb(i?e[0]:e),isSecondary:r||i}}function OA(t,e){var n="".concat(gH).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=Ou(t.children),o=s.filter(function(O){return O.getAttribute(tb)===e})[0],a=xo.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(bH),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var f=a.getPropertyValue("content"),p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Mg[l[2].toLowerCase()]:EH[c],m=RG(f),y=m.value,_=m.isSecondary,v=l[0].startsWith("FontAwesome"),E=uI(p,y),w=E;if(v){var T=QH(y);T.iconName&&T.prefix&&(E=T.iconName,p=T.prefix)}if(E&&!_&&(!o||o.getAttribute(iI)!==p||o.getAttribute(sI)!==w)){t.setAttribute(n,w),o&&t.removeChild(o);var R=_G(),D=R.extra;D.attributes[tb]=e,ab(E,p).then(function(O){var x=hI(X(X({},R),{},{icons:{main:O,mask:dI()},prefix:p,iconName:w,extra:D,watchable:!0})),S=it.createElement("svg");e==="::before"?t.insertBefore(S,t.firstChild):t.appendChild(S),S.outerHTML=x.map(function(A){return Wf(A)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function CG(t){return Promise.all([OA(t,"::before"),OA(t,"::after")])}function PG(t){return t.parentNode!==document.head&&!~yH.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(tb)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function NA(t){if(Ss)return new Promise(function(e,n){var r=Ou(t.querySelectorAll("*")).filter(PG).map(CG),i=fI.begin("searchPseudoElements");GL(),Promise.all(r).then(function(){i(),cb(),e()}).catch(function(){i(),cb(),n()})})}var OG={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=NA,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?it:r;ce.searchPseudoElements&&NA(i)}}},DA=!1,NG={mixout:function(){return{dom:{unwatch:function(){GL(),DA=!0}}}},hooks:function(){return{bootstrap:function(){AA(ib("mutationObserverCallbacks",{}))},noAuto:function(){mG()},watch:function(n){var r=n.observeMutationsRoot;DA?cb():AA(ib("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},jA=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},DG={mixout:function(){return{parse:{transform:function(n){return jA(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=jA(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),f={transform:"".concat(l," ").concat(c," ").concat(u)},p={transform:"translate(".concat(o/2*-1," -256)")},m={outer:a,inner:f,path:p};return{tag:"g",attributes:X({},m.outer),children:[{tag:"g",attributes:X({},m.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:X(X({},r.icon.attributes),m.path)}]}]}}}},J_={x:0,y:0,width:"100%",height:"100%"};function LA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function jG(t){return t.tag==="g"?t.children:[t]}var LG={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?Gv(i.split(" ").map(function(o){return o.trim()})):dI();return s.prefix||(s.prefix=ko()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,f=o.width,p=o.icon,m=DH({transform:l,containerWidth:f,iconWidth:c}),y={tag:"rect",attributes:X(X({},J_),{},{fill:"white"})},_=u.children?{children:u.children.map(LA)}:{},v={tag:"g",attributes:X({},m.inner),children:[LA(X({tag:u.tag,attributes:X(X({},u.attributes),m.path)},_))]},E={tag:"g",attributes:X({},m.outer),children:[v]},w="mask-".concat(a||af()),T="clip-".concat(a||af()),R={tag:"mask",attributes:X(X({},J_),{},{id:w,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[y,E]},D={tag:"defs",children:[{tag:"clipPath",attributes:{id:T},children:jG(p)},R]};return r.push(D,{tag:"rect",attributes:X({fill:"currentColor","clip-path":"url(#".concat(T,")"),mask:"url(#".concat(w,")")},J_)}),{children:r,attributes:i}}}},MG={provides:function(e){var n=!1;xo.matchMedia&&(n=xo.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:X(X({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=X(X({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:X(X({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:X(X({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:X(X({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:X(X({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:X(X({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:X(X({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:X(X({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},VG={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},FG=[MH,IG,SG,xG,kG,OG,NG,DG,LG,MG,VG];XH(FG,{mixoutsTo:br});br.noAuto;br.config;br.library;br.dom;var ub=br.parse;br.findIconDefinition;br.toHtml;var $G=br.icon;br.layer;br.text;br.counter;function MA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function di(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(n),!0).forEach(function(r){gc(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $g(t){"@babel/helpers - typeof";return $g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$g(t)}function gc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UG(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function BG(t,e){if(t==null)return{};var n=UG(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function db(t){return zG(t)||qG(t)||WG(t)||HG()}function zG(t){if(Array.isArray(t))return hb(t)}function qG(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function WG(t,e){if(t){if(typeof t=="string")return hb(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hb(t,e)}}function hb(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function HG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function GG(t){var e,n=t.beat,r=t.fade,i=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,f=t.pulse,p=t.fixedWidth,m=t.inverse,y=t.border,_=t.listItem,v=t.flip,E=t.size,w=t.rotation,T=t.pull,R=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":f,"fa-fw":p,"fa-inverse":m,"fa-border":y,"fa-li":_,"fa-flip":v===!0,"fa-flip-horizontal":v==="horizontal"||v==="both","fa-flip-vertical":v==="vertical"||v==="both"},gc(e,"fa-".concat(E),typeof E<"u"&&E!==null),gc(e,"fa-rotate-".concat(w),typeof w<"u"&&w!==null&&w!==0),gc(e,"fa-pull-".concat(T),typeof T<"u"&&T!==null),gc(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(R).map(function(D){return R[D]?D:null}).filter(function(D){return D})}function KG(t){return t=t-0,t===t}function QL(t){return KG(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var QG=["style"];function YG(t){return t.charAt(0).toUpperCase()+t.slice(1)}function JG(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=QL(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?e[YG(i)]=s:e[i]=s,e},{})}function YL(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return YL(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=JG(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[QL(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=BG(n,QG);return i.attrs.style=di(di({},i.attrs.style),o),t.apply(void 0,[e.tag,di(di({},i.attrs),a)].concat(db(r)))}var JL=!1;try{JL=!0}catch{}function XG(){if(!JL&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function VA(t){if(t&&$g(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(ub.icon)return ub.icon(t);if(t===null)return null;if(t&&$g(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function X_(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?gc({},t,e):{}}var FA={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},$e=mt.forwardRef(function(t,e){var n=di(di({},FA),t),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=VA(r),f=X_("classes",[].concat(db(GG(n)),db((o||"").split(" ")))),p=X_("transform",typeof n.transform=="string"?ub.transform(n.transform):n.transform),m=X_("mask",VA(i)),y=$G(u,di(di(di(di({},f),p),m),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!y)return XG("Could not find icon",u),null;var _=y.abstract,v={ref:e};return Object.keys(n).forEach(function(E){FA.hasOwnProperty(E)||(v[E]=n[E])}),ZG(_[0],v)});$e.displayName="FontAwesomeIcon";$e.propTypes={beat:oe.bool,border:oe.bool,beatFade:oe.bool,bounce:oe.bool,className:oe.string,fade:oe.bool,flash:oe.bool,mask:oe.oneOfType([oe.object,oe.array,oe.string]),maskId:oe.string,fixedWidth:oe.bool,inverse:oe.bool,flip:oe.oneOf([!0,!1,"horizontal","vertical","both"]),icon:oe.oneOfType([oe.object,oe.array,oe.string]),listItem:oe.bool,pull:oe.oneOf(["right","left"]),pulse:oe.bool,rotation:oe.oneOf([0,90,180,270]),shake:oe.bool,size:oe.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:oe.bool,spinPulse:oe.bool,spinReverse:oe.bool,symbol:oe.oneOfType([oe.bool,oe.string]),title:oe.string,titleId:oe.string,transform:oe.oneOfType([oe.string,oe.object]),swapOpacity:oe.bool};var ZG=YL.bind(null,mt.createElement);/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const e7={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},t7=e7,n7={prefix:"fas",iconName:"sort-down",icon:[320,512,["sort-desc"],"f0dd","M182.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8l256 0c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128z"]},r7={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},i7=r7,s7={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},o7={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},a7={prefix:"fas",iconName:"sort",icon:[320,512,["unsorted"],"f0dc","M137.4 41.4c12.5-12.5 32.8-12.5 45.3 0l128 128c9.2 9.2 11.9 22.9 6.9 34.9s-16.6 19.8-29.6 19.8L32 224c-12.9 0-24.6-7.8-29.6-19.8s-2.2-25.7 6.9-34.9l128-128zm0 429.3l-128-128c-9.2-9.2-11.9-22.9-6.9-34.9s16.6-19.8 29.6-19.8l256 0c12.9 0 24.6 7.8 29.6 19.8s2.2 25.7-6.9 34.9l-128 128c-12.5 12.5-32.8 12.5-45.3 0z"]},l7={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},c7={prefix:"fas",iconName:"floppy-disk",icon:[448,512,[128190,128426,"save"],"f0c7","M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z"]},u7=c7,d7={prefix:"fas",iconName:"sort-up",icon:[320,512,["sort-asc"],"f0de","M182.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-128 128c-9.2 9.2-11.9 22.9-6.9 34.9s16.6 19.8 29.6 19.8l256 0c12.9 0 24.6-7.8 29.6-19.8s2.2-25.7-6.9-34.9l-128-128z"]},h7={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},f7={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},p7={prefix:"fas",iconName:"gear",icon:[512,512,[9881,"cog"],"f013","M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"]},m7={prefix:"fas",iconName:"cart-shopping",icon:[576,512,[128722,"shopping-cart"],"f07a","M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},g7=m7,v7={prefix:"fas",iconName:"grip-vertical",icon:[320,512,[],"f58e","M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"]},y7={prefix:"fas",iconName:"ellipsis-vertical",icon:[128,512,["ellipsis-v"],"f142","M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"]},Qv=y7,_7={prefix:"fas",iconName:"ticket",icon:[576,512,[127903],"f145","M64 64C28.7 64 0 92.7 0 128l0 64c0 8.8 7.4 15.7 15.7 18.6C34.5 217.1 48 235 48 256s-13.5 38.9-32.3 45.4C7.4 304.3 0 311.2 0 320l0 64c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-64c0-8.8-7.4-15.7-15.7-18.6C541.5 294.9 528 277 528 256s13.5-38.9 32.3-45.4c8.3-2.9 15.7-9.8 15.7-18.6l0-64c0-35.3-28.7-64-64-64L64 64zm64 112l0 160c0 8.8 7.2 16 16 16l288 0c8.8 0 16-7.2 16-16l0-160c0-8.8-7.2-16-16-16l-288 0c-8.8 0-16 7.2-16 16zM96 160c0-17.7 14.3-32 32-32l320 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-320 0c-17.7 0-32-14.3-32-32l0-192z"]},w7={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},lf={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},b7={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},E7=b7,T7={prefix:"fas",iconName:"chevron-left",icon:[320,512,[9001],"f053","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l192 192c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256 246.6 86.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-192 192z"]},I7={prefix:"fas",iconName:"chevron-right",icon:[320,512,[9002],"f054","M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z"]},S7={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z"]},x7={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]};var $A={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},k7=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ZL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[f],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(XL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):k7(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new A7;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),f!==64){const y=c<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class A7 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const R7=function(t){const e=XL(t);return ZL.encodeByteArray(e,!0)},Ug=function(t){return R7(t).replace(/\./g,"")},eM=function(t){try{return ZL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Bg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!C7(n)||(t[n]=Bg(t[n],e[n]));return t}function C7(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P7=()=>tM().__FIREBASE_DEFAULTS__,O7=()=>{if(typeof process>"u"||typeof $A>"u")return;const t=$A.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},N7=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&eM(t[1]);return e&&JSON.parse(e)},mI=()=>{try{return P7()||O7()||N7()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nM=()=>{var t;return(t=mI())===null||t===void 0?void 0:t.config},D7=t=>{var e;return(e=mI())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j7=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ug(JSON.stringify(n)),Ug(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function L7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function gI(){var t;const e=(t=mI())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function M7(){return typeof window<"u"||iM()}function iM(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function V7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function vI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sM(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oM(){return!gI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ja(){try{return typeof indexedDB=="object"}catch{return!1}}function yI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function aM(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F7="FirebaseError";class tn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=F7,Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xs.prototype.create)}}class xs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?$7(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new tn(i,a,r)}}function $7(t,e){return t.replace(U7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const U7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function B7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function cf(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(BA(s)&&BA(o)){if(!cf(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function BA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function vc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function qd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lM(t,e){const n=new z7(t,e);return n.subscribe.bind(n)}class z7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");q7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Z_),i.error===void 0&&(i.error=Z_),i.complete===void 0&&(i.complete=Z_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function q7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Z_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W7=1e3,H7=2,G7=4*60*60*1e3,K7=.5;function zA(t,e=W7,n=H7){const r=e*Math.pow(n,t),i=Math.round(K7*r*(Math.random()-.5)*2);return Math.min(G7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class gn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ha="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new j7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(J7(e))try{this.getOrInitializeService({instanceIdentifier:ha})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ha){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ha){return this.instances.has(e)}getOptions(e=ha){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Y7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ha){return this.component?this.component.multipleInstances?e:ha:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Y7(t){return t===ha?void 0:t}function J7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Q7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I=[];var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const uM={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},X7=xe.INFO,Z7={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},eK=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Z7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hf{constructor(e){this.name=e,this._logLevel=X7,this._logHandler=eK,this._userLogHandler=null,_I.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}function tK(t){_I.forEach(e=>{e.setLogLevel(t)})}function nK(t,e){for(const n of _I){let r=null;e&&e.level&&(r=uM[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:xe[s].toLowerCase(),message:a,args:o,type:i.name})}}}const rK=(t,e)=>e.some(n=>t instanceof n);let qA,WA;function iK(){return qA||(qA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sK(){return WA||(WA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const dM=new WeakMap,fb=new WeakMap,hM=new WeakMap,ew=new WeakMap,wI=new WeakMap;function oK(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(yo(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&dM.set(n,t)}).catch(()=>{}),wI.set(e,t),e}function aK(t){if(fb.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fb.set(t,e)}let pb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return fb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hM.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yo(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function lK(t){pb=t(pb)}function cK(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(tw(this),e,...n);return hM.set(r,e.sort?e.sort():[e]),yo(r)}:sK().includes(t)?function(...e){return t.apply(tw(this),e),yo(dM.get(this))}:function(...e){return yo(t.apply(tw(this),e))}}function uK(t){return typeof t=="function"?cK(t):(t instanceof IDBTransaction&&aK(t),rK(t,iK())?new Proxy(t,pb):t)}function yo(t){if(t instanceof IDBRequest)return oK(t);if(ew.has(t))return ew.get(t);const e=uK(t);return e!==t&&(ew.set(t,e),wI.set(e,t)),e}const tw=t=>wI.get(t);function fM(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=yo(o);return r&&o.addEventListener("upgradeneeded",l=>{r(yo(o.result),l.oldVersion,l.newVersion,yo(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const dK=["get","getKey","getAll","getAllKeys","count"],hK=["put","add","delete","clear"],nw=new Map;function HA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nw.get(e))return nw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=hK.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||dK.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return nw.set(e,s),s}lK(t=>({...t,get:(e,n,r)=>HA(e,n)||t.get(e,n,r),has:(e,n)=>!!HA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fK{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(pK(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function pK(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const zg="@firebase/app",mb="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ms=new Hf("@firebase/app"),mK="@firebase/app-compat",gK="@firebase/analytics-compat",vK="@firebase/analytics",yK="@firebase/app-check-compat",_K="@firebase/app-check",wK="@firebase/auth",bK="@firebase/auth-compat",EK="@firebase/database",TK="@firebase/data-connect",IK="@firebase/database-compat",SK="@firebase/functions",xK="@firebase/functions-compat",kK="@firebase/installations",AK="@firebase/installations-compat",RK="@firebase/messaging",CK="@firebase/messaging-compat",PK="@firebase/performance",OK="@firebase/performance-compat",NK="@firebase/remote-config",DK="@firebase/remote-config-compat",jK="@firebase/storage",LK="@firebase/storage-compat",MK="@firebase/firestore",VK="@firebase/vertexai",FK="@firebase/firestore-compat",$K="firebase",UK="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ao="[DEFAULT]",BK={[zg]:"fire-core",[mK]:"fire-core-compat",[vK]:"fire-analytics",[gK]:"fire-analytics-compat",[_K]:"fire-app-check",[yK]:"fire-app-check-compat",[wK]:"fire-auth",[bK]:"fire-auth-compat",[EK]:"fire-rtdb",[TK]:"fire-data-connect",[IK]:"fire-rtdb-compat",[SK]:"fire-fn",[xK]:"fire-fn-compat",[kK]:"fire-iid",[AK]:"fire-iid-compat",[RK]:"fire-fcm",[CK]:"fire-fcm-compat",[PK]:"fire-perf",[OK]:"fire-perf-compat",[NK]:"fire-rc",[DK]:"fire-rc-compat",[jK]:"fire-gcs",[LK]:"fire-gcs-compat",[MK]:"fire-fst",[FK]:"fire-fst-compat",[VK]:"fire-vertex","fire-js":"fire-js",[$K]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new Map,Jc=new Map,Xc=new Map;function uf(t,e){try{t.container.addComponent(e)}catch(n){ms.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function pM(t,e){t.container.addOrOverwriteComponent(e)}function vr(t){const e=t.name;if(Xc.has(e))return ms.debug(`There were multiple attempts to register component ${e}.`),!1;Xc.set(e,t);for(const n of Ro.values())uf(n,t);for(const n of Jc.values())uf(n,t);return!0}function Jv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function zK(t,e,n=Ao){Jv(t,e).clearInstance(n)}function mM(t){return t.options!==void 0}function St(t){return t.settings!==void 0}function qK(){Xc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},jr=new xs("app","Firebase",WK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gM=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new gn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw jr.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HK extends gM{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,fn(zg,mb,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){EI(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw jr.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=UK;function bI(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ao,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw jr.create("bad-app-name",{appName:String(i)});if(n||(n=nM()),!n)throw jr.create("no-options");const s=Ro.get(i);if(s){if(cf(n,s.options)&&cf(r,s.config))return s;throw jr.create("duplicate-app",{appName:i})}const o=new cM(i);for(const l of Xc.values())o.addComponent(l);const a=new gM(n,r,o);return Ro.set(i,a),a}function GK(t,e){if(M7()&&!iM())throw jr.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;mM(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((u,f)=>Math.imul(31,u)+f.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw jr.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=Jc.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new cM(s);for(const c of Xc.values())a.addComponent(c);const l=new HK(n,e,s,a);return Jc.set(s,l),l}function KK(t=Ao){const e=Ro.get(t);if(!e&&t===Ao&&nM())return bI();if(!e)throw jr.create("no-app",{appName:t});return e}function QK(){return Array.from(Ro.values())}async function EI(t){let e=!1;const n=t.name;Ro.has(n)?(e=!0,Ro.delete(n)):Jc.has(n)&&t.decRefCount()<=0&&(Jc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function fn(t,e,n){var r;let i=(r=BK[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ms.warn(a.join(" "));return}vr(new gn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function vM(t,e){if(t!==null&&typeof t!="function")throw jr.create("invalid-log-argument");nK(t,e)}function yM(t){tK(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YK="firebase-heartbeat-database",JK=1,df="firebase-heartbeat-store";let rw=null;function _M(){return rw||(rw=fM(YK,JK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(df)}catch(n){console.warn(n)}}}}).catch(t=>{throw jr.create("idb-open",{originalErrorMessage:t.message})})),rw}async function XK(t){try{const n=(await _M()).transaction(df),r=await n.objectStore(df).get(wM(t));return await n.done,r}catch(e){if(e instanceof tn)ms.warn(e.message);else{const n=jr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ms.warn(n.message)}}}async function GA(t,e){try{const r=(await _M()).transaction(df,"readwrite");await r.objectStore(df).put(e,wM(t)),await r.done}catch(n){if(n instanceof tn)ms.warn(n.message);else{const r=jr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ms.warn(r.message)}}}function wM(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZK=1024,eQ=30*24*60*60*1e3;class tQ{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rQ(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=KA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=eQ}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ms.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=KA(),{heartbeatsToSend:r,unsentEntries:i}=nQ(this._heartbeatsCache.heartbeats),s=Ug(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return ms.warn(n),""}}}function KA(){return new Date().toISOString().substring(0,10)}function nQ(t,e=ZK){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),QA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rQ{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ja()?yI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await XK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return GA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return GA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function QA(t){return Ug(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iQ(t){vr(new gn("platform-logger",e=>new fK(e),"PRIVATE")),vr(new gn("heartbeat",e=>new tQ(e),"PRIVATE")),fn(zg,mb,t),fn(zg,mb,"esm2017"),fn("fire-js","")}iQ("");const sQ=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:tn,SDK_VERSION:ks,_DEFAULT_ENTRY_NAME:Ao,_addComponent:uf,_addOrOverwriteComponent:pM,_apps:Ro,_clearComponents:qK,_components:Xc,_getProvider:Jv,_isFirebaseApp:mM,_isFirebaseServerApp:St,_registerComponent:vr,_removeServiceInstance:zK,_serverApps:Jc,deleteApp:EI,getApp:KK,getApps:QK,initializeApp:bI,initializeServerApp:GK,onLog:vM,registerVersion:fn,setLogLevel:yM},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e,n){this._delegate=e,this.firebase=n,uf(e,new gn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),EI(this._delegate)))}_getService(e,n=Ao){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ao){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){uf(this._delegate,e)}_addOrOverwriteComponent(e){pM(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aQ={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},YA=new xs("app-compat","Firebase",aQ);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lQ(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:fn,setLogLevel:yM,onLog:vM,apps:null,SDK_VERSION:ks,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:sQ}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||Ao,!UA(e,c))throw YA.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const f=bI(c,u);if(UA(e,f.name))return e[f.name];const p=new t(f,n);return e[f.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,f=u.replace("-compat","");if(vr(c)&&c.type==="PUBLIC"){const p=(m=i())=>{if(typeof m[f]!="function")throw YA.create("invalid-app-argument",{appName:u});return m[f]()};c.serviceProps!==void 0&&Bg(p,c.serviceProps),n[f]=p,t.prototype[f]=function(...m){return this._getService.bind(this,u).apply(this,c.multipleInstances?m:[])}}return c.type==="PUBLIC"?n[f]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bM(){const t=lQ(oQ);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:bM,extendNamespace:e,createSubscribe:lM,ErrorFactory:xs,deepExtend:Bg});function e(n){Bg(t,n)}return t}const cQ=bM();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=new Hf("@firebase/app-compat"),uQ="@firebase/app-compat",dQ="0.2.48";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(t){fn(uQ,dQ,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=tM();if(t.firebase!==void 0){JA.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&JA.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const sn=cQ;hQ();var gb=function(t,e){return gb=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},gb(t,e)};function EM(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");gb(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var qg=function(){return qg=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qg.apply(this,arguments)};function As(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function TM(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function IM(t,e){return function(n,r){e(n,r,t)}}function SM(t,e,n,r,i,s){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),f,p=!1,m=n.length-1;m>=0;m--){var y={};for(var _ in r)y[_]=_==="access"?{}:r[_];for(var _ in r.access)y.access[_]=r.access[_];y.addInitializer=function(E){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(E||null))};var v=(0,n[m])(a==="accessor"?{get:u.get,set:u.set}:u[l],y);if(a==="accessor"){if(v===void 0)continue;if(v===null||typeof v!="object")throw new TypeError("Object expected");(f=o(v.get))&&(u.get=f),(f=o(v.set))&&(u.set=f),(f=o(v.init))&&i.unshift(f)}else(f=o(v))&&(a==="field"?i.unshift(f):u[l]=f)}c&&Object.defineProperty(c,r.name,u),p=!0}function xM(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function kM(t){return typeof t=="symbol"?t:"".concat(t)}function AM(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function RM(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function ie(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(f){o(f)}}function l(u){try{c(r.throw(u))}catch(f){o(f)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function CM(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var Xv=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function PM(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Xv(e,t,n)}function Wg(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function TI(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function OM(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(TI(arguments[e]));return t}function NM(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function DM(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Zc(t){return this instanceof Zc?(this.v=t,this):new Zc(t)}function jM(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(y){return Promise.resolve(y).then(m,f)}}function a(m,y){r[m]&&(i[m]=function(_){return new Promise(function(v,E){s.push([m,_,v,E])>1||l(m,_)})},y&&(i[m]=y(i[m])))}function l(m,y){try{c(r[m](y))}catch(_){p(s[0][3],_)}}function c(m){m.value instanceof Zc?Promise.resolve(m.value.v).then(u,f):p(s[0][2],m)}function u(m){l("next",m)}function f(m){l("throw",m)}function p(m,y){m(y),s.shift(),s.length&&l(s[0][0],s[0][1])}}function LM(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Zc(t[i](o)),done:!1}:s?s(o):o}:s}}function MM(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Wg=="function"?Wg(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function VM(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var fQ=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},vb=function(t){return vb=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},vb(t)};function FM(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=vb(t),r=0;r<n.length;r++)n[r]!=="default"&&Xv(e,t,n[r]);return fQ(e,t),e}function $M(t){return t&&t.__esModule?t:{default:t}}function UM(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function BM(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function zM(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function qM(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var pQ=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function WM(t){function e(s){t.error=t.hasError?new pQ(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function HM(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):t}const mQ={__extends:EM,__assign:qg,__rest:As,__decorate:TM,__param:IM,__esDecorate:SM,__runInitializers:xM,__propKey:kM,__setFunctionName:AM,__metadata:RM,__awaiter:ie,__generator:CM,__createBinding:Xv,__exportStar:PM,__values:Wg,__read:TI,__spread:OM,__spreadArrays:NM,__spreadArray:DM,__await:Zc,__asyncGenerator:jM,__asyncDelegator:LM,__asyncValues:MM,__makeTemplateObject:VM,__importStar:FM,__importDefault:$M,__classPrivateFieldGet:UM,__classPrivateFieldSet:BM,__classPrivateFieldIn:zM,__addDisposableResource:qM,__disposeResources:WM,__rewriteRelativeImportExtension:HM},gQ=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:qM,get __assign(){return qg},__asyncDelegator:LM,__asyncGenerator:jM,__asyncValues:MM,__await:Zc,__awaiter:ie,__classPrivateFieldGet:UM,__classPrivateFieldIn:zM,__classPrivateFieldSet:BM,__createBinding:Xv,__decorate:TM,__disposeResources:WM,__esDecorate:SM,__exportStar:PM,__extends:EM,__generator:CM,__importDefault:$M,__importStar:FM,__makeTemplateObject:VM,__metadata:RM,__param:IM,__propKey:kM,__read:TI,__rest:As,__rewriteRelativeImportExtension:HM,__runInitializers:xM,__setFunctionName:AM,__spread:OM,__spreadArray:DM,__spreadArrays:NM,__values:Wg,default:mQ},Symbol.toStringTag,{value:"Module"})),Td={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Nl={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function GM(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yQ=vQ,_Q=GM,KM=new xs("auth","Firebase",GM());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hg=new Hf("@firebase/auth");function wQ(t,...e){Hg.logLevel<=xe.WARN&&Hg.warn(`Auth (${ks}): ${t}`,...e)}function Um(t,...e){Hg.logLevel<=xe.ERROR&&Hg.error(`Auth (${ks}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vn(t,...e){throw SI(t,...e)}function Kt(t,...e){return SI(t,...e)}function II(t,e,n){const r=Object.assign(Object.assign({},_Q()),{[e]:n});return new xs("auth","Firebase",r).create(e,{appName:t.name})}function nn(t){return II(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Du(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vn(t,"argument-error"),II(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function SI(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return KM.create(t,...e)}function q(t,e,...n){if(!t)throw SI(e,...n)}function _i(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Um(e),new Error(e)}function ni(t,e){t||_i(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xI(){return XA()==="http:"||XA()==="https:"}function XA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bQ(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xI()||Yv()||"connection"in navigator)?navigator.onLine:!0}function EQ(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.shortDelay=e,this.longDelay=n,ni(n>e,"Short delay should be less than long delay!"),this.isMobile=L7()||vI()}get(){return bQ()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e){ni(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;_i("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;_i("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;_i("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TQ={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ=new Gf(3e4,6e4);function kt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function At(t,e,n,r,i={}){return YM(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Nu(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return V7()||(c.referrerPolicy="no-referrer"),QM.fetch()(JM(t,t.config.apiHost,n,a),c)})}async function YM(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TQ),e);try{const i=new xQ(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Wd(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Wd(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Wd(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Wd(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw II(t,u,c);vn(t,u)}}catch(i){if(i instanceof tn)throw i;vn(t,"network-request-failed",{message:String(i)})}}async function Rs(t,e,n,r,i={}){const s=await At(t,e,n,r,i);return"mfaPendingCredential"in s&&vn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function JM(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?kI(t.config,i):`${t.config.apiScheme}://${i}`}function SQ(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class xQ{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Kt(this.auth,"network-request-failed")),IQ.get())})}}function Wd(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Kt(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){return t!==void 0&&t.getResponse!==void 0}function eR(t){return t!==void 0&&t.enterprise!==void 0}class XM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SQ(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kQ(t){return(await At(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function ZM(t,e){return At(t,"GET","/v2/recaptchaConfig",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AQ(t,e){return At(t,"POST","/v1/accounts:delete",e)}async function RQ(t,e){return At(t,"POST","/v1/accounts:update",e)}async function eV(t,e){return At(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CQ(t,e=!1){const n=ne(t),r=await n.getIdToken(e),i=Zv(r);q(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:vh(iw(i.auth_time)),issuedAtTime:vh(iw(i.iat)),expirationTime:vh(iw(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function iw(t){return Number(t)*1e3}function Zv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Um("JWT malformed, contained fewer than 3 sections"),null;try{const i=eM(n);return i?JSON.parse(i):(Um("Failed to decode base64 JWT payload"),null)}catch(i){return Um("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function tR(t){const e=Zv(t);return q(e,"internal-error"),q(typeof e.exp<"u","internal-error"),q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gs(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof tn&&PQ(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function PQ({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=vh(this.lastLoginAt),this.creationTime=vh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ff(t){var e;const n=t.auth,r=await t.getIdToken(),i=await gs(t,eV(n,{idToken:r}));q(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?tV(s.providerUserInfo):[],a=DQ(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new yb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,f)}async function NQ(t){const e=ne(t);await ff(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DQ(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function tV(t){return t.map(e=>{var{providerId:n}=e,r=As(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jQ(t,e){const n=await YM(t,{},async()=>{const r=Nu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=JM(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",QM.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function LQ(t,e){return At(t,"POST","/v2/accounts:revokeToken",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){q(e.idToken,"internal-error"),q(typeof e.idToken<"u","internal-error"),q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){q(e.length!==0,"internal-error");const n=tR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await jQ(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ac;return r&&(q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(q(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(q(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ac,this.toJSON())}_performRefresh(){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bs(t,e){q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=As(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OQ(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new yb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await gs(this,this.stsTokenManager.getToken(this.auth,e));return q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CQ(this,e)}reload(){return NQ(this)}_assign(e){this!==e&&(q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ff(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(St(this.auth.app))return Promise.reject(nn(this.auth));const e=await this.getIdToken();return await gs(this,AQ(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,v=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,w=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:T,emailVerified:R,isAnonymous:D,providerData:O,stsTokenManager:x}=n;q(T&&x,e,"internal-error");const S=Ac.fromJSON(this.name,x);q(typeof T=="string",e,"internal-error"),Bs(f,e.name),Bs(p,e.name),q(typeof R=="boolean",e,"internal-error"),q(typeof D=="boolean",e,"internal-error"),Bs(m,e.name),Bs(y,e.name),Bs(_,e.name),Bs(v,e.name),Bs(E,e.name),Bs(w,e.name);const A=new Yi({uid:T,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:D,photoURL:y,phoneNumber:m,tenantId:_,stsTokenManager:S,createdAt:E,lastLoginAt:w});return O&&Array.isArray(O)&&(A.providerData=O.map(P=>Object.assign({},P))),v&&(A._redirectEventId=v),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ac;i.updateFromServerResponse(n);const s=new Yi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await ff(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];q(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?tV(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ac;a.updateFromIdToken(r);const l=new Yi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new yb(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=new Map;function dr(t){ni(t instanceof Function,"Expected a class definition");let e=nR.get(t);return e?(ni(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}nV.type="NONE";const eu=nV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t,e,n){return`firebase:${t}:${e}:${n}`}class Rc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Fa(this.userKey,i.apiKey,s),this.fullPersistenceKey=Fa("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Rc(dr(eu),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||dr(eu);const o=Fa(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const f=Yi._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Rc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Rc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(oV(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(rV(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aV(e))return"Blackberry";if(lV(e))return"Webos";if(iV(e))return"Safari";if((e.includes("chrome/")||sV(e))&&!e.includes("edge/"))return"Chrome";if(Kf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function rV(t=wt()){return/firefox\//i.test(t)}function iV(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sV(t=wt()){return/crios\//i.test(t)}function oV(t=wt()){return/iemobile/i.test(t)}function Kf(t=wt()){return/android/i.test(t)}function aV(t=wt()){return/blackberry/i.test(t)}function lV(t=wt()){return/webos/i.test(t)}function Qf(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MQ(t=wt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function VQ(t=wt()){var e;return Qf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FQ(){return sM()&&document.documentMode===10}function cV(t=wt()){return Qf(t)||Kf(t)||lV(t)||aV(t)||/windows phone/i.test(t)||oV(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t,e=[]){let n;switch(t){case"Browser":n=rR(wt());break;case"Worker":n=`${rR(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ks}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Q{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UQ(t,e={}){return At(t,"GET","/v2/passwordPolicy",kt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BQ=6;class zQ{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BQ,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qQ{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new iR(this),this.idTokenSubscription=new iR(this),this.beforeStateQueue=new $Q(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=KM,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Rc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await eV(this,{idToken:e}),r=await Yi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(St(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ff(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=EQ()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(St(this.app))return Promise.reject(nn(this));const n=e?ne(e):null;return n&&q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return St(this.app)?Promise.reject(nn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return St(this.app)?Promise.reject(nn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UQ(this),n=new zQ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await LQ(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dr(e)||this._popupRedirectResolver;q(n,this,"argument-error"),this.redirectPersistenceManager=await Rc.create(this,[dr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(q(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=uV(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&wQ(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bt(t){return ne(t)}class iR{constructor(e){this.auth=e,this.observer=null,this.addObserver=lM(n=>this.observer=n)}get next(){return q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WQ(t){Yf=t}function AI(t){return Yf.loadJS(t)}function HQ(){return Yf.recaptchaV2Script}function GQ(){return Yf.recaptchaEnterpriseScript}function KQ(){return Yf.gapiScript}function dV(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QQ=500,YQ=6e4,tm=1e12;class JQ{constructor(e){this.auth=e,this.counter=tm,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new eY(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||tm;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||tm;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||tm;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class XQ{constructor(){this.enterprise=new ZQ}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZQ{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eY{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;q(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=tY(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},YQ)},QQ))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function tY(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const nY="recaptcha-enterprise",yh="NO_RECAPTCHA";class hV{constructor(e){this.type=nY,this.auth=bt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{ZM(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new XM(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;eR(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(yh)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XQ().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&eR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=GQ();l.length!==0&&(l+=a),AI(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Id(t,e,n,r=!1,i=!1){const s=new hV(t);let o;if(i)o=yh;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function _o(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Id(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Id(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Id(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Id(t,e,n,!1,!0);return r(t,u)}return Promise.reject(l)})}else{const a=await Id(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function rY(t){const e=bt(t),n=await ZM(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new XM(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new hV(e).verify()}function iY(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sY(t,e,n){const r=bt(t);q(r._canInitEmulator,r,"emulator-config-failed"),q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=fV(e),{host:o,port:a}=oY(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||aY()}function fV(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function oY(t){const e=fV(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:sR(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:sR(o)}}}function sR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return _i("not implemented")}_getIdTokenResponse(e){return _i("not implemented")}_linkToIdToken(e,n){return _i("not implemented")}_getReauthenticationResolver(e){return _i("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pV(t,e){return At(t,"POST","/v1/accounts:resetPassword",kt(t,e))}async function lY(t,e){return At(t,"POST","/v1/accounts:update",e)}async function cY(t,e){return At(t,"POST","/v1/accounts:signUp",e)}async function uY(t,e){return At(t,"POST","/v1/accounts:update",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dY(t,e){return Rs(t,"POST","/v1/accounts:signInWithPassword",kt(t,e))}async function ey(t,e){return At(t,"POST","/v1/accounts:sendOobCode",kt(t,e))}async function hY(t,e){return ey(t,e)}async function fY(t,e){return ey(t,e)}async function pY(t,e){return ey(t,e)}async function mY(t,e){return ey(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gY(t,e){return Rs(t,"POST","/v1/accounts:signInWithEmailLink",kt(t,e))}async function vY(t,e){return Rs(t,"POST","/v1/accounts:signInWithEmailLink",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf extends ju{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new pf(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new pf(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _o(e,n,"signInWithPassword",dY,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return gY(e,{email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _o(e,r,"signUpPassword",cY,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return vY(e,{idToken:n,email:this._email,oobCode:this._password});default:vn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t,e){return Rs(t,"POST","/v1/accounts:signInWithIdp",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yY="http://localhost";class Pi extends ju{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Pi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=As(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Pi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ts(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ts(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ts(e,n)}buildRequest(){const e={requestUri:yY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Nu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e){return At(t,"POST","/v1/accounts:sendVerificationCode",kt(t,e))}async function _Y(t,e){return Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",kt(t,e))}async function wY(t,e){const n=await Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",kt(t,e));if(n.temporaryProof)throw Wd(t,"account-exists-with-different-credential",n);return n}const bY={USER_NOT_FOUND:"user-not-found"};async function EY(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Rs(t,"POST","/v1/accounts:signInWithPhoneNumber",kt(t,n),bY)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a extends ju{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new $a({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new $a({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return _Y(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return wY(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return EY(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new $a({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TY(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IY(t){const e=vc(qd(t)).link,n=e?vc(qd(e)).deep_link_id:null,r=vc(qd(t)).deep_link_id;return(r?vc(qd(r)).link:null)||r||n||e||t}class ty{constructor(e){var n,r,i,s,o,a;const l=vc(qd(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,f=TY((i=l.mode)!==null&&i!==void 0?i:null);q(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=IY(e);try{return new ty(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(){this.providerId=Go.PROVIDER_ID}static credential(e,n){return pf._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=ty.parseLink(n);return q(r,"argument-error"),pf._fromEmailAndCode(e,r.code,r.tenantId)}}Go.PROVIDER_ID="password";Go.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Go.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu extends Cs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Cc extends Lu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return q("providerId"in n&&"signInMethod"in n,"argument-error"),Pi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return q(e.idToken||e.accessToken,"argument-error"),Pi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Cc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Cc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new Cc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi extends Lu{constructor(){super("facebook.com")}static credential(e){return Pi._fromParams({providerId:fi.PROVIDER_ID,signInMethod:fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fi.credentialFromTaggedObject(e)}static credentialFromError(e){return fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fi.credential(e.oauthAccessToken)}catch{return null}}}fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi extends Lu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Pi._fromParams({providerId:pi.PROVIDER_ID,signInMethod:pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return pi.credentialFromTaggedObject(e)}static credentialFromError(e){return pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return pi.credential(n,r)}catch{return null}}}pi.GOOGLE_SIGN_IN_METHOD="google.com";pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi extends Lu{constructor(){super("github.com")}static credential(e){return Pi._fromParams({providerId:mi.PROVIDER_ID,signInMethod:mi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mi.credentialFromTaggedObject(e)}static credentialFromError(e){return mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mi.credential(e.oauthAccessToken)}catch{return null}}}mi.GITHUB_SIGN_IN_METHOD="github.com";mi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SY="http://localhost";class tu extends ju{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return ts(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ts(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ts(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new tu(r,s)}static _create(e,n){return new tu(e,n)}buildRequest(){return{requestUri:SY,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xY="saml.";class Gg extends Cs{constructor(e){q(e.startsWith(xY),"argument-error"),super(e)}static credentialFromResult(e){return Gg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Gg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=tu.fromJSON(e);return q(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return tu._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi extends Lu{constructor(){super("twitter.com")}static credential(e,n){return Pi._fromParams({providerId:gi.PROVIDER_ID,signInMethod:gi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return gi.credentialFromTaggedObject(e)}static credentialFromError(e){return gi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return gi.credential(n,r)}catch{return null}}}gi.TWITTER_SIGN_IN_METHOD="twitter.com";gi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mV(t,e){return Rs(t,"POST","/v1/accounts:signUp",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Yi._fromIdTokenResponse(e,r,i),o=aR(r);return new $r({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=aR(r);return new $r({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function aR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kY(t){var e;if(St(t.app))return Promise.reject(nn(t));const n=bt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new $r({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await mV(n,{returnSecureToken:!0}),i=await $r._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends tn{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Kg.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Kg(e,n,r,i)}}function gV(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Kg._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vV(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AY(t,e){const n=ne(t);await ny(!0,n,e);const{providerUserInfo:r}=await RQ(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=vV(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function RI(t,e,n=!1){const r=await gs(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return $r._forOperation(t,"link",r)}async function ny(t,e,n){await ff(e);const r=vV(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";q(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yV(t,e,n=!1){const{auth:r}=t;if(St(r.app))return Promise.reject(nn(r));const i="reauthenticate";try{const s=await gs(t,gV(r,i,e,t),n);q(s.idToken,r,"internal-error");const o=Zv(s.idToken);q(o,r,"internal-error");const{sub:a}=o;return q(t.uid===a,r,"user-mismatch"),$r._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&vn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _V(t,e,n=!1){if(St(t.app))return Promise.reject(nn(t));const r="signIn",i=await gV(t,r,e),s=await $r._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function ry(t,e){return _V(bt(t),e)}async function wV(t,e){const n=ne(t);return await ny(!1,n,e.providerId),RI(n,e)}async function bV(t,e){return yV(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RY(t,e){return Rs(t,"POST","/v1/accounts:signInWithCustomToken",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CY(t,e){if(St(t.app))return Promise.reject(nn(t));const n=bt(t),r=await RY(n,{token:e,returnSecureToken:!0}),i=await $r._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?CI._fromServerResponse(e,n):"totpInfo"in n?PI._fromServerResponse(e,n):vn(e,"internal-error")}}class CI extends Jf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new CI(n)}}class PI extends Jf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new PI(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t,e,n){var r;q(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),q(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(q(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(q(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(t){const e=bt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function PY(t,e,n){const r=bt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&iy(r,i,n),await _o(r,i,"getOobCode",fY,"EMAIL_PASSWORD_PROVIDER")}async function OY(t,e,n){await pV(ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OI(t),r})}async function NY(t,e){await uY(ne(t),{oobCode:e})}async function EV(t,e){const n=ne(t),r=await pV(n,{oobCode:e}),i=r.requestType;switch(q(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":q(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":q(r.mfaInfo,n,"internal-error");default:q(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=Jf._fromServerResponse(bt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function DY(t,e){const{data:n}=await EV(ne(t),e);return n.email}async function jY(t,e,n){if(St(t.app))return Promise.reject(nn(t));const r=bt(t),o=await _o(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mV,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&OI(t),l}),a=await $r._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function LY(t,e,n){return St(t.app)?Promise.reject(nn(t)):ry(ne(t),Go.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&OI(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MY(t,e,n){const r=bt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){q(a.handleCodeInApp,r,"argument-error"),a&&iy(r,o,a)}s(i,n),await _o(r,i,"getOobCode",pY,"EMAIL_PASSWORD_PROVIDER")}function VY(t,e){const n=ty.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function FY(t,e,n){if(St(t.app))return Promise.reject(nn(t));const r=ne(t),i=Go.credentialWithLink(e,n||hf());return q(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),ry(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $Y(t,e){return At(t,"POST","/v1/accounts:createAuthUri",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UY(t,e){const n=xI()?hf():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await $Y(ne(t),r);return i||[]}async function BY(t,e){const n=ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&iy(n.auth,i,e);const{email:s}=await hY(n.auth,i);s!==t.email&&await t.reload()}async function zY(t,e,n){const r=ne(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&iy(r.auth,s,n);const{email:o}=await mY(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qY(t,e){return At(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WY(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ne(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await gs(r,qY(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function HY(t,e){const n=ne(t);return St(n.auth.app)?Promise.reject(nn(n.auth)):TV(n,e,null)}function GY(t,e){return TV(ne(t),null,e)}async function TV(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await gs(t,lY(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KY(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=Zv(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new Pc(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new QY(s,i);case"github.com":return new YY(s,i);case"google.com":return new JY(s,i);case"twitter.com":return new XY(s,i,t.screenName||null);case"custom":case"anonymous":return new Pc(s,null);default:return new Pc(s,r,i)}}class Pc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class IV extends Pc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class QY extends Pc{constructor(e,n){super(e,"facebook.com",n)}}class YY extends IV{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class JY extends Pc{constructor(e,n){super(e,"google.com",n)}}class XY extends IV{constructor(e,n,r){super(e,"twitter.com",n,r)}}function ZY(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:KY(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Pa("enroll",e,n)}static _fromMfaPendingCredential(e){return new Pa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Pa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Pa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=bt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>Jf._fromServerResponse(r,a));q(i.mfaPendingCredential,r,"internal-error");const o=Pa._fromMfaPendingCredential(i.mfaPendingCredential);return new NI(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await $r._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return q(n.user,r,"internal-error"),$r._forOperation(n.user,n.operationType,c);default:vn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function eJ(t,e){var n;const r=ne(t),i=e;return q(e.customData.operationType,r,"argument-error"),q((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),NI._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(t,e){return At(t,"POST","/v2/accounts/mfaEnrollment:start",kt(t,e))}function tJ(t,e){return At(t,"POST","/v2/accounts/mfaEnrollment:finalize",kt(t,e))}function nJ(t,e){return At(t,"POST","/v2/accounts/mfaEnrollment:withdraw",kt(t,e))}class DI{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Jf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new DI(e)}async getSession(){return Pa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await gs(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await gs(this.user,nJ(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const sw=new WeakMap;function rJ(t){const e=ne(t);return sw.has(e)||sw.set(e,DI._fromUser(e)),sw.get(e)}const Qg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qg,"1"),this.storage.removeItem(Qg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iJ=1e3,sJ=10;class xV extends SV{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=cV(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);FQ()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,sJ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},iJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}xV.type="LOCAL";const jI=xV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV extends SV{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}kV.type="SESSION";const Xa=kV;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oJ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new sy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await oJ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}sy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=Xf("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return window}function lJ(t){$t().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LI(){return typeof $t().WorkerGlobalScope<"u"&&typeof $t().importScripts=="function"}async function cJ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uJ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function dJ(){return LI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AV="firebaseLocalStorageDb",hJ=1,Yg="firebaseLocalStorage",RV="fbase_key";class Zf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function oy(t,e){return t.transaction([Yg],e?"readwrite":"readonly").objectStore(Yg)}function fJ(){const t=indexedDB.deleteDatabase(AV);return new Zf(t).toPromise()}function _b(){const t=indexedDB.open(AV,hJ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Yg,{keyPath:RV})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Yg)?e(r):(r.close(),await fJ(),e(await _b()))})})}async function cR(t,e,n){const r=oy(t,!0).put({[RV]:e,value:n});return new Zf(r).toPromise()}async function pJ(t,e){const n=oy(t,!1).get(e),r=await new Zf(n).toPromise();return r===void 0?null:r.value}function uR(t,e){const n=oy(t,!0).delete(e);return new Zf(n).toPromise()}const mJ=800,gJ=3;class CV{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _b(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>gJ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return LI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=sy._getInstance(dJ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await cJ(),!this.activeServiceWorker)return;this.sender=new aJ(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _b();return await cR(e,Qg,"1"),await uR(e,Qg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>cR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>pJ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=oy(i,!1).getAll();return new Zf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),mJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}CV.type="LOCAL";const mf=CV;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e){return At(t,"POST","/v2/accounts/mfaSignIn:start",kt(t,e))}function vJ(t,e){return At(t,"POST","/v2/accounts/mfaSignIn:finalize",kt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=dV("rcb"),yJ=new Gf(3e4,6e4);class _J{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=$t().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return q(wJ(n),e,"argument-error"),this.shouldResolveImmediately(n)&&ZA($t().grecaptcha)?Promise.resolve($t().grecaptcha):new Promise((r,i)=>{const s=$t().setTimeout(()=>{i(Kt(e,"network-request-failed"))},yJ.get());$t()[ow]=()=>{$t().clearTimeout(s),delete $t()[ow];const a=$t().grecaptcha;if(!a||!ZA(a)){i(Kt(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const f=l(c,u);return this.counter++,f},this.hostLanguage=n,r(a)};const o=`${HQ()}?${Nu({onload:ow,render:"explicit",hl:n})}`;AI(o).catch(()=>{clearTimeout(s),i(Kt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=$t().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function wJ(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class bJ{async load(e){return new JQ(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="recaptcha",EJ={theme:"light",type:"image"};let TJ=class{constructor(e,n,r=Object.assign({},EJ)){this.parameters=r,this.type=_h,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=bt(e),this.isInvisible=this.parameters.size==="invisible",q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;q(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new bJ:new _J,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){q(!this.parameters.sitekey,this.auth,"argument-error"),q(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),q(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=$t()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){q(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){q(xI()&&!LI(),this.auth,"internal-error"),await IJ(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await kQ(this.auth);q(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return q(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function IJ(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=$a._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function SJ(t,e,n){if(St(t.app))return Promise.reject(nn(t));const r=bt(t),i=await ay(r,e,ne(n));return new MI(i,s=>ry(r,s))}async function xJ(t,e,n){const r=ne(t);await ny(!1,r,"phone");const i=await ay(r.auth,e,ne(n));return new MI(i,s=>wV(r,s))}async function kJ(t,e,n){const r=ne(t);if(St(r.auth.app))return Promise.reject(nn(r.auth));const i=await ay(r.auth,e,ne(n));return new MI(i,s=>bV(r,s))}async function ay(t,e,n){var r;if(!t._getRecaptchaConfig())try{await rY(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){q(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await _o(t,o,"mfaSmsEnrollment",async(u,f)=>{if(f.phoneEnrollmentInfo.captchaResponse===yh){q((n==null?void 0:n.type)===_h,u,"argument-error");const p=await aw(u,f,n);return lR(u,p)}return lR(u,f)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{q(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;q(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await _o(t,a,"mfaSmsSignIn",async(f,p)=>{if(p.phoneSignInInfo.captchaResponse===yh){q((n==null?void 0:n.type)===_h,f,"argument-error");const m=await aw(f,p,n);return dR(f,m)}return dR(f,p)},"PHONE_PROVIDER").catch(f=>Promise.reject(f))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await _o(t,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===yh){q((n==null?void 0:n.type)===_h,c,"argument-error");const f=await aw(c,u,n);return oR(c,f)}return oR(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function AJ(t,e){const n=ne(t);if(St(n.auth.app))return Promise.reject(nn(n.auth));await RI(n,e)}async function aw(t,e,n){q(n.type===_h,t,"argument-error");const r=await n.verify();q(typeof r=="string",t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Za=class Bm{constructor(e){this.providerId=Bm.PROVIDER_ID,this.auth=bt(e)}verifyPhoneNumber(e,n){return ay(this.auth,e,ne(n))}static credential(e,n){return $a._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Bm.credentialFromTaggedObject(n)}static credentialFromError(e){return Bm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?$a._fromTokenResponse(n,r):null}};Za.PROVIDER_ID="phone";Za.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e){return e?dr(e):(q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI extends ju{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ts(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ts(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ts(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function RJ(t){return _V(t.auth,new VI(t),t.bypassAuthState)}function CJ(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),yV(n,new VI(t),t.bypassAuthState)}async function PJ(t){const{auth:e,user:n}=t;return q(n,e,"internal-error"),RI(n,new VI(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RJ;case"linkViaPopup":case"linkViaRedirect":return PJ;case"reauthViaPopup":case"reauthViaRedirect":return CJ;default:vn(this.auth,"internal-error")}}resolve(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ni(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ=new Gf(2e3,1e4);async function NJ(t,e,n){if(St(t.app))return Promise.reject(Kt(t,"operation-not-supported-in-this-environment"));const r=bt(t);Du(t,e,Cs);const i=vl(r,n);return new Ji(r,"signInViaPopup",e,i).executeNotNull()}async function DJ(t,e,n){const r=ne(t);if(St(r.auth.app))return Promise.reject(Kt(r.auth,"operation-not-supported-in-this-environment"));Du(r.auth,e,Cs);const i=vl(r.auth,n);return new Ji(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function jJ(t,e,n){const r=ne(t);Du(r.auth,e,Cs);const i=vl(r.auth,n);return new Ji(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ji extends PV{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ji.currentPopupAction&&Ji.currentPopupAction.cancel(),Ji.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return q(e,this.auth,"internal-error"),e}async onExecution(){ni(this.filter.length===1,"Popup operations only handle one event");const e=Xf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Kt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Kt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ji.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Kt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,OJ.get())};e()}}Ji.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ="pendingRedirect",wh=new Map;class MJ extends PV{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=wh.get(this.auth._key());if(!e){try{const r=await VJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}wh.set(this.auth._key(),e)}return this.bypassAuthState||wh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VJ(t,e){const n=NV(e),r=OV(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function FI(t,e){return OV(t)._set(NV(e),"true")}function FJ(){wh.clear()}function $I(t,e){wh.set(t._key(),e)}function OV(t){return dr(t._redirectPersistence)}function NV(t){return Fa(LJ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $J(t,e,n){return UJ(t,e,n)}async function UJ(t,e,n){if(St(t.app))return Promise.reject(nn(t));const r=bt(t);Du(t,e,Cs),await r._initializationPromise;const i=vl(r,n);return await FI(i,r),i._openRedirect(r,e,"signInViaRedirect")}function BJ(t,e,n){return zJ(t,e,n)}async function zJ(t,e,n){const r=ne(t);if(Du(r.auth,e,Cs),St(r.auth.app))return Promise.reject(nn(r.auth));await r.auth._initializationPromise;const i=vl(r.auth,n);await FI(i,r.auth);const s=await DV(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function qJ(t,e,n){return WJ(t,e,n)}async function WJ(t,e,n){const r=ne(t);Du(r.auth,e,Cs),await r.auth._initializationPromise;const i=vl(r.auth,n);await ny(!1,r,e.providerId),await FI(i,r.auth);const s=await DV(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function HJ(t,e){return await bt(t)._initializationPromise,ly(t,e,!1)}async function ly(t,e,n=!1){if(St(t.app))return Promise.reject(nn(t));const r=bt(t),i=vl(r,e),o=await new MJ(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function DV(t){const e=Xf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GJ=10*60*1e3;class jV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!LV(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Kt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(hR(e))}saveEventToCache(e){this.cachedEventUids.add(hR(e)),this.lastProcessedEventTime=Date.now()}}function hR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function LV({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return LV(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(t,e={}){return At(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QJ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,YJ=/^https?/;async function JJ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await MV(t);for(const n of e)try{if(XJ(n))return}catch{}vn(t,"unauthorized-domain")}function XJ(t){const e=hf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!YJ.test(n))return!1;if(QJ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZJ=new Gf(3e4,6e4);function fR(){const t=$t().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function eX(t){return new Promise((e,n)=>{var r,i,s;function o(){fR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fR(),n(Kt(t,"network-request-failed"))},timeout:ZJ.get()})}if(!((i=(r=$t().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=$t().gapi)===null||s===void 0)&&s.load)o();else{const a=dV("iframefcb");return $t()[a]=()=>{gapi.load?o():n(Kt(t,"network-request-failed"))},AI(`${KQ()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zm=null,e})}let zm=null;function tX(t){return zm=zm||eX(t),zm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nX=new Gf(5e3,15e3),rX="__/auth/iframe",iX="emulator/auth/iframe",sX={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},oX=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function aX(t){const e=t.config;q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kI(e,iX):`https://${t.config.authDomain}/${rX}`,r={apiKey:e.apiKey,appName:t.name,v:ks},i=oX.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Nu(r).slice(1)}`}async function lX(t){const e=await tX(t),n=$t().gapi;return q(n,t,"internal-error"),e.open({where:document.body,url:aX(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:sX,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Kt(t,"network-request-failed"),a=$t().setTimeout(()=>{s(o)},nX.get());function l(){$t().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cX={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},uX=500,dX=600,hX="_blank",fX="http://localhost";class pR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pX(t,e,n,r=uX,i=dX){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},cX),{width:r.toString(),height:i.toString(),top:s,left:o}),c=wt().toLowerCase();n&&(a=sV(c)?hX:n),rV(c)&&(e=e||fX,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,y])=>`${p}${m}=${y},`,"");if(VQ(c)&&a!=="_self")return mX(e||"",a),new pR(null);const f=window.open(e||"",a,u);q(f,t,"popup-blocked");try{f.focus()}catch{}return new pR(f)}function mX(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gX="__/auth/handler",vX="emulator/auth/handler",yX=encodeURIComponent("fac");async function wb(t,e,n,r,i,s){q(t.config.authDomain,t,"auth-domain-config-required"),q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ks,eventId:i};if(e instanceof Cs){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",B7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries(s||{}))o[u]=f}if(e instanceof Lu){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${yX}=${encodeURIComponent(l)}`:"";return`${_X(t)}?${Nu(a).slice(1)}${c}`}function _X({config:t}){return t.emulator?kI(t,vX):`https://${t.authDomain}/${gX}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="webStorageSupport";class wX{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xa,this._completeRedirectFn=ly,this._overrideRedirectResult=$I}async _openPopup(e,n,r,i){var s;ni((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await wb(e,n,r,hf(),i);return pX(e,o,Xf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await wb(e,n,r,hf(),i);return lJ(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ni(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lX(e),r=new jV(e);return n.register("authEvent",i=>(q(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(lw,{type:lw},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[lw];o!==void 0&&n(!!o),vn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JJ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return cV()||iV()||Qf()}}const bX=wX;class EX{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return _i("unexpected MultiFactorSessionType")}}}class UI extends EX{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new UI(e)}_finalizeEnroll(e,n,r){return tJ(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return vJ(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class VV{constructor(){}static assertion(e){return UI._fromCredential(e)}}VV.FACTOR_ID="phone";var mR="@firebase/auth",gR="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TX{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IX(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function SX(t){vr(new gn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:uV(t)},c=new qQ(r,i,s,l);return iY(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),vr(new gn("auth-internal",e=>{const n=bt(e.getProvider("auth").getImmediate());return(r=>new TX(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),fn(mR,gR,IX(t)),fn(mR,gR,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xX=5*60;D7("authIdTokenMaxAge");function kX(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WQ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Kt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",kX().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});SX("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AX=2e3;async function RX(t,e,n){var r;const{BuildInfo:i}=el();ni(e.sessionId,"AuthEvent did not contain a session ID");const s=await DX(e.sessionId),o={};return Qf()?o.ibi=i.packageName:Kf()?o.apn=i.packageName:vn(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,wb(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function CX(t){const{BuildInfo:e}=el(),n={};Qf()?n.iosBundleId=e.packageName:Kf()?n.androidPackageName=e.packageName:vn(t,"operation-not-supported-in-this-environment"),await MV(t,n)}function PX(t){const{cordova:e}=el();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,MQ()?"_blank":"_system","location=yes"),n(i)})})}async function OX(t,e,n){const{cordova:r}=el();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var f;s();const p=(f=r.plugins.browsertab)===null||f===void 0?void 0:f.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Kt(t,"redirect-cancelled-by-user"))},AX))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),Kf()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function NX(t){var e,n,r,i,s,o,a,l,c,u;const f=el();q(typeof((e=f==null?void 0:f.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),q(typeof((n=f==null?void 0:f.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),q(typeof((s=(i=(r=f==null?void 0:f.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((l=(a=(o=f==null?void 0:f.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),q(typeof((u=(c=f==null?void 0:f.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function DX(t){const e=jX(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function jX(t){if(ni(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=20;class MX extends jV{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function VX(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:UX(),postBody:null,tenantId:t.tenantId,error:Kt(t,"no-auth-event")}}function FX(t,e){return bb()._set(Eb(t),e)}async function vR(t){const e=await bb()._get(Eb(t));return e&&await bb()._remove(Eb(t)),e}function $X(t,e){var n,r;const i=zX(e);if(i.includes("/__/auth/callback")){const s=qm(i),o=s.firebaseError?BX(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Kt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function UX(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<LX;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function bb(){return dr(jI)}function Eb(t){return Fa("authEvent",t.config.apiKey,t.name)}function BX(t){try{return JSON.parse(t)}catch{return null}}function zX(t){const e=qm(t),n=e.link?decodeURIComponent(e.link):void 0,r=qm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return qm(i).link||i||r||n||t}function qm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return vc(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX=500;class WX{constructor(){this._redirectPersistence=Xa,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ly,this._overrideRedirectResult=$I}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new MX(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){vn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){NX(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),FJ(),await this._originValidation(e);const o=VX(e,r,i);await FX(e,o);const a=await RX(e,o,n),l=await PX(a);return OX(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=CX(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=el(),o=setTimeout(async()=>{await vR(e),n.onEvent(yR())},qX),a=async u=>{clearTimeout(o);const f=await vR(e);let p=null;f&&(u!=null&&u.url)&&(p=$X(f,u.url)),n.onEvent(p||yR())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;el().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(f){console.error(f)}}}}const HX=WX;function yR(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Kt("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GX(t,e){bt(t)._logFramework(e)}var KX="@firebase/auth-compat",QX="0.5.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YX=1e3;function bh(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function JX(){return bh()==="http:"||bh()==="https:"}function FV(t=wt()){return!!((bh()==="file:"||bh()==="ionic:"||bh()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function XX(){return vI()||gI()}function ZX(){return sM()&&(document==null?void 0:document.documentMode)===11}function eZ(t=wt()){return/Edge\/\d+/.test(t)}function tZ(t=wt()){return ZX()||eZ(t)}function $V(){try{const t=self.localStorage,e=Xf();if(t)return t.setItem(e,"1"),t.removeItem(e),tZ()?Ja():!0}catch{return BI()&&Ja()}return!1}function BI(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function cw(){return(JX()||Yv()||FV())&&!XX()&&$V()&&!BI()}function UV(){return FV()&&typeof document<"u"}async function nZ(){return UV()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},YX);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function rZ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={LOCAL:"local",NONE:"none",SESSION:"session"},Sd=q,BV="persistence";function iZ(t,e){if(Sd(Object.values(ar).includes(e),t,"invalid-persistence-type"),vI()){Sd(e!==ar.SESSION,t,"unsupported-persistence-type");return}if(gI()){Sd(e===ar.NONE,t,"unsupported-persistence-type");return}if(BI()){Sd(e===ar.NONE||e===ar.LOCAL&&Ja(),t,"unsupported-persistence-type");return}Sd(e===ar.NONE||$V(),t,"unsupported-persistence-type")}async function Tb(t){await t._initializationPromise;const e=zV(),n=Fa(BV,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function sZ(t,e){const n=zV();if(!n)return[];const r=Fa(BV,t,e);switch(n.getItem(r)){case ar.NONE:return[eu];case ar.LOCAL:return[mf,Xa];case ar.SESSION:return[Xa];default:return[]}}function zV(){var t;try{return((t=rZ())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oZ=q;class oo{constructor(){this.browserResolver=dr(bX),this.cordovaResolver=dr(HX),this.underlyingResolver=null,this._redirectPersistence=Xa,this._completeRedirectFn=ly,this._overrideRedirectResult=$I}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return UV()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return oZ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await nZ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qV(t){return t.unwrap()}function aZ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lZ(t){return WV(t)}function cZ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new uZ(t,eJ(t,e))}else if(r){const i=WV(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function WV(t){const{_tokenResponse:e}=t instanceof tn?t.customData:t;if(!e)return null;if(!(t instanceof tn)&&"temporaryProof"in e&&"phoneNumber"in e)return Za.credentialFromResult(t);const n=e.providerId;if(!n||n===Td.PASSWORD)return null;let r;switch(n){case Td.GOOGLE:r=pi;break;case Td.FACEBOOK:r=fi;break;case Td.GITHUB:r=mi;break;case Td.TWITTER:r=gi;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?tu._create(n,a):Pi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new Cc(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof tn?r.credentialFromError(t):r.credentialFromResult(t)}function Bn(t,e){return e.catch(n=>{throw n instanceof tn&&cZ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:lZ(n),additionalUserInfo:ZY(n),user:cy.getOrCreate(i)}})}async function Ib(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Bn(t,n.confirm(r))}}class uZ{constructor(e,n){this.resolver=n,this.auth=aZ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Bn(qV(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cy=class Hd{constructor(e){this._delegate=e,this.multiFactor=rJ(e)}static getOrCreate(e){return Hd.USER_MAP.has(e)||Hd.USER_MAP.set(e,new Hd(e)),Hd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Bn(this.auth,wV(this._delegate,e))}async linkWithPhoneNumber(e,n){return Ib(this.auth,xJ(this._delegate,e,n))}async linkWithPopup(e){return Bn(this.auth,jJ(this._delegate,e,oo))}async linkWithRedirect(e){return await Tb(bt(this.auth)),qJ(this._delegate,e,oo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Bn(this.auth,bV(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return Ib(this.auth,kJ(this._delegate,e,n))}reauthenticateWithPopup(e){return Bn(this.auth,DJ(this._delegate,e,oo))}async reauthenticateWithRedirect(e){return await Tb(bt(this.auth)),BJ(this._delegate,e,oo)}sendEmailVerification(e){return BY(this._delegate,e)}async unlink(e){return await AY(this._delegate,e),this}updateEmail(e){return HY(this._delegate,e)}updatePassword(e){return GY(this._delegate,e)}updatePhoneNumber(e){return AJ(this._delegate,e)}updateProfile(e){return WY(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return zY(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};cy.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xd=q;class Sb{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;xd(r,"invalid-api-key",{appName:e.name}),xd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?oo:void 0;this._delegate=n.initialize({options:{persistence:dZ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(yQ),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?cy.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){sY(this._delegate,e,n)}applyActionCode(e){return NY(this._delegate,e)}checkActionCode(e){return EV(this._delegate,e)}confirmPasswordReset(e,n){return OY(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Bn(this._delegate,jY(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return UY(this._delegate,e)}isSignInWithEmailLink(e){return VY(this._delegate,e)}async getRedirectResult(){xd(cw(),this._delegate,"operation-not-supported-in-this-environment");const e=await HJ(this._delegate,oo);return e?Bn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){GX(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=_R(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=_R(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return MY(this._delegate,e,n)}sendPasswordResetEmail(e,n){return PY(this._delegate,e,n||void 0)}async setPersistence(e){iZ(this._delegate,e);let n;switch(e){case ar.SESSION:n=Xa;break;case ar.LOCAL:n=await dr(mf)._isAvailable()?mf:jI;break;case ar.NONE:n=eu;break;default:return vn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Bn(this._delegate,kY(this._delegate))}signInWithCredential(e){return Bn(this._delegate,ry(this._delegate,e))}signInWithCustomToken(e){return Bn(this._delegate,CY(this._delegate,e))}signInWithEmailAndPassword(e,n){return Bn(this._delegate,LY(this._delegate,e,n))}signInWithEmailLink(e,n){return Bn(this._delegate,FY(this._delegate,e,n))}signInWithPhoneNumber(e,n){return Ib(this._delegate,SJ(this._delegate,e,n))}async signInWithPopup(e){return xd(cw(),this._delegate,"operation-not-supported-in-this-environment"),Bn(this._delegate,NJ(this._delegate,e,oo))}async signInWithRedirect(e){return xd(cw(),this._delegate,"operation-not-supported-in-this-environment"),await Tb(this._delegate),$J(this._delegate,e,oo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return DY(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Sb.Persistence=ar;function _R(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&cy.getOrCreate(o)),error:e,complete:n}}function dZ(t,e){const n=sZ(t,e);if(typeof self<"u"&&!n.includes(mf)&&n.push(mf),typeof window<"u")for(const r of[jI,Xa])n.includes(r)||n.push(r);return n.includes(eu)||n.push(eu),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{static credential(e,n){return Za.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new Za(qV(sn.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}zI.PHONE_SIGN_IN_METHOD=Za.PHONE_SIGN_IN_METHOD;zI.PROVIDER_ID=Za.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hZ=q;class fZ{constructor(e,n,r=sn.app()){var i;hZ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new TJ(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pZ="auth-compat";function mZ(t){t.INTERNAL.registerComponent(new gn(pZ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Sb(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Nl.EMAIL_SIGNIN,PASSWORD_RESET:Nl.PASSWORD_RESET,RECOVER_EMAIL:Nl.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Nl.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Nl.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Nl.VERIFY_EMAIL}},EmailAuthProvider:Go,FacebookAuthProvider:fi,GithubAuthProvider:mi,GoogleAuthProvider:pi,OAuthProvider:Cc,SAMLAuthProvider:Gg,PhoneAuthProvider:zI,PhoneMultiFactorGenerator:VV,RecaptchaVerifier:fZ,TwitterAuthProvider:gi,Auth:Sb,AuthCredential:ju,Error:tn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(KX,QX)}mZ(sn);var gZ="firebase",vZ="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */sn.registerVersion(gZ,vZ,"app-compat");var wR={VITE_SUPABASE_URL:"https://ttctclwuiwfudfzdcaux.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",VITE_DEV_IS_BREAKPOINT_VISABLE:"true",VITE_APP_ENV:"development",VITE_FIREBASE_API_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_FIREBASE_AUTH_DOMAIN:"fractal-tickets.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"fractal-tickets",VITE_FIREBASE_STORAGE_BUCKET:"fractal-tickets.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"123289322265",VITE_FIREBASE_APP_ID:"1:123289322265:web:d31675e0df128103083b88",VITE_FIREBASE_PUB_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyB9MtoqdlypQTk3gFd10CaW8SllpXZSGP4",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const qI=t=>{const e="development",i={development:{...{ENV:e,BACKEND_GRAPHQL_ENDPOINT:wR.VITE_APP_BASE_URL,GOOGLE_MAPS_API_KEY:"AIzaSyB9MtoqdlypQTk3gFd10CaW8SllpXZSGP4",VITE_APP_FIREBASE_CONFIG:{apiKey:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",authDomain:"fractal-tickets.firebaseapp.com",projectId:"fractal-tickets",storageBucket:"fractal-tickets.firebasestorage.app",messagingSenderId:"123289322265",appId:"1:123289322265:web:d31675e0df128103083b88",measurementId:wR.VITE_FIREBASE_MEASUREMENT_ID||"Missing Measurement ID"}}}},s=i[e]||i.development;return t?s[t]:s};var bR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wo,HV;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function A(){}A.prototype=S.prototype,x.D=S.prototype,x.prototype=new A,x.prototype.constructor=x,x.C=function(P,N,j){for(var C=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)C[ue-2]=arguments[ue];return S.prototype[N].apply(P,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,S,A){A||(A=0);var P=Array(16);if(typeof S=="string")for(var N=0;16>N;++N)P[N]=S.charCodeAt(A++)|S.charCodeAt(A++)<<8|S.charCodeAt(A++)<<16|S.charCodeAt(A++)<<24;else for(N=0;16>N;++N)P[N]=S[A++]|S[A++]<<8|S[A++]<<16|S[A++]<<24;S=x.g[0],A=x.g[1],N=x.g[2];var j=x.g[3],C=S+(j^A&(N^j))+P[0]+3614090360&4294967295;S=A+(C<<7&4294967295|C>>>25),C=j+(N^S&(A^N))+P[1]+3905402710&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(A^j&(S^A))+P[2]+606105819&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(S^N&(j^S))+P[3]+3250441966&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(j^A&(N^j))+P[4]+4118548399&4294967295,S=A+(C<<7&4294967295|C>>>25),C=j+(N^S&(A^N))+P[5]+1200080426&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(A^j&(S^A))+P[6]+2821735955&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(S^N&(j^S))+P[7]+4249261313&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(j^A&(N^j))+P[8]+1770035416&4294967295,S=A+(C<<7&4294967295|C>>>25),C=j+(N^S&(A^N))+P[9]+2336552879&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(A^j&(S^A))+P[10]+4294925233&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(S^N&(j^S))+P[11]+2304563134&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(j^A&(N^j))+P[12]+1804603682&4294967295,S=A+(C<<7&4294967295|C>>>25),C=j+(N^S&(A^N))+P[13]+4254626195&4294967295,j=S+(C<<12&4294967295|C>>>20),C=N+(A^j&(S^A))+P[14]+2792965006&4294967295,N=j+(C<<17&4294967295|C>>>15),C=A+(S^N&(j^S))+P[15]+1236535329&4294967295,A=N+(C<<22&4294967295|C>>>10),C=S+(N^j&(A^N))+P[1]+4129170786&4294967295,S=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(S^A))+P[6]+3225465664&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(j^S))+P[11]+643717713&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^S&(N^j))+P[0]+3921069994&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(A^N))+P[5]+3593408605&4294967295,S=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(S^A))+P[10]+38016083&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(j^S))+P[15]+3634488961&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^S&(N^j))+P[4]+3889429448&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(A^N))+P[9]+568446438&4294967295,S=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(S^A))+P[14]+3275163606&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(j^S))+P[3]+4107603335&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^S&(N^j))+P[8]+1163531501&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(N^j&(A^N))+P[13]+2850285829&4294967295,S=A+(C<<5&4294967295|C>>>27),C=j+(A^N&(S^A))+P[2]+4243563512&4294967295,j=S+(C<<9&4294967295|C>>>23),C=N+(S^A&(j^S))+P[7]+1735328473&4294967295,N=j+(C<<14&4294967295|C>>>18),C=A+(j^S&(N^j))+P[12]+2368359562&4294967295,A=N+(C<<20&4294967295|C>>>12),C=S+(A^N^j)+P[5]+4294588738&4294967295,S=A+(C<<4&4294967295|C>>>28),C=j+(S^A^N)+P[8]+2272392833&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^A)+P[11]+1839030562&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^S)+P[14]+4259657740&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^j)+P[1]+2763975236&4294967295,S=A+(C<<4&4294967295|C>>>28),C=j+(S^A^N)+P[4]+1272893353&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^A)+P[7]+4139469664&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^S)+P[10]+3200236656&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^j)+P[13]+681279174&4294967295,S=A+(C<<4&4294967295|C>>>28),C=j+(S^A^N)+P[0]+3936430074&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^A)+P[3]+3572445317&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^S)+P[6]+76029189&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(A^N^j)+P[9]+3654602809&4294967295,S=A+(C<<4&4294967295|C>>>28),C=j+(S^A^N)+P[12]+3873151461&4294967295,j=S+(C<<11&4294967295|C>>>21),C=N+(j^S^A)+P[15]+530742520&4294967295,N=j+(C<<16&4294967295|C>>>16),C=A+(N^j^S)+P[2]+3299628645&4294967295,A=N+(C<<23&4294967295|C>>>9),C=S+(N^(A|~j))+P[0]+4096336452&4294967295,S=A+(C<<6&4294967295|C>>>26),C=j+(A^(S|~N))+P[7]+1126891415&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~A))+P[14]+2878612391&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~S))+P[5]+4237533241&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~j))+P[12]+1700485571&4294967295,S=A+(C<<6&4294967295|C>>>26),C=j+(A^(S|~N))+P[3]+2399980690&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~A))+P[10]+4293915773&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~S))+P[1]+2240044497&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~j))+P[8]+1873313359&4294967295,S=A+(C<<6&4294967295|C>>>26),C=j+(A^(S|~N))+P[15]+4264355552&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~A))+P[6]+2734768916&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~S))+P[13]+1309151649&4294967295,A=N+(C<<21&4294967295|C>>>11),C=S+(N^(A|~j))+P[4]+4149444226&4294967295,S=A+(C<<6&4294967295|C>>>26),C=j+(A^(S|~N))+P[11]+3174756917&4294967295,j=S+(C<<10&4294967295|C>>>22),C=N+(S^(j|~A))+P[2]+718787259&4294967295,N=j+(C<<15&4294967295|C>>>17),C=A+(j^(N|~S))+P[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(N+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+N&4294967295,x.g[3]=x.g[3]+j&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var A=S-this.blockSize,P=this.B,N=this.h,j=0;j<S;){if(N==0)for(;j<=A;)i(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<S;)if(P[N++]=x.charCodeAt(j++),N==this.blockSize){i(this,P),N=0;break}}else for(;j<S;)if(P[N++]=x[j++],N==this.blockSize){i(this,P),N=0;break}}this.h=N,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var A=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=A&255,A/=256;for(this.u(x),x=Array(16),S=A=0;4>S;++S)for(var P=0;32>P;P+=8)x[A++]=this.g[S]>>>P&255;return x};function s(x,S){var A=a;return Object.prototype.hasOwnProperty.call(A,x)?A[x]:A[x]=S(x)}function o(x,S){this.h=S;for(var A=[],P=!0,N=x.length-1;0<=N;N--){var j=x[N]|0;P&&j==S||(A[N]=j,P=!1)}this.g=A}var a={};function l(x){return-128<=x&&128>x?s(x,function(S){return new o([S|0],0>S?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return f;if(0>x)return v(c(-x));for(var S=[],A=1,P=0;x>=A;P++)S[P]=x/A|0,A*=4294967296;return new o(S,0)}function u(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return v(u(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(S,8)),P=f,N=0;N<x.length;N+=8){var j=Math.min(8,x.length-N),C=parseInt(x.substring(N,N+j),S);8>j?(j=c(Math.pow(S,j)),P=P.j(j).add(c(C))):(P=P.j(A),P=P.add(c(C)))}return P}var f=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(_(this))return-v(this).m();for(var x=0,S=1,A=0;A<this.g.length;A++){var P=this.i(A);x+=(0<=P?P:4294967296+P)*S,S*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(y(this))return"0";if(_(this))return"-"+v(this).toString(x);for(var S=c(Math.pow(x,6)),A=this,P="";;){var N=R(A,S).g;A=E(A,N.j(S));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(x);if(A=N,y(A))return j+P;for(;6>j.length;)j="0"+j;P=j+P}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function y(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function _(x){return x.h==-1}t.l=function(x){return x=E(this,x),_(x)?-1:y(x)?0:1};function v(x){for(var S=x.g.length,A=[],P=0;P<S;P++)A[P]=~x.g[P];return new o(A,~x.h).add(p)}t.abs=function(){return _(this)?v(this):this},t.add=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],P=0,N=0;N<=S;N++){var j=P+(this.i(N)&65535)+(x.i(N)&65535),C=(j>>>16)+(this.i(N)>>>16)+(x.i(N)>>>16);P=C>>>16,j&=65535,C&=65535,A[N]=C<<16|j}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(x,S){return x.add(v(S))}t.j=function(x){if(y(this)||y(x))return f;if(_(this))return _(x)?v(this).j(v(x)):v(v(this).j(x));if(_(x))return v(this.j(v(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var S=this.g.length+x.g.length,A=[],P=0;P<2*S;P++)A[P]=0;for(P=0;P<this.g.length;P++)for(var N=0;N<x.g.length;N++){var j=this.i(P)>>>16,C=this.i(P)&65535,ue=x.i(N)>>>16,fe=x.i(N)&65535;A[2*P+2*N]+=C*fe,w(A,2*P+2*N),A[2*P+2*N+1]+=j*fe,w(A,2*P+2*N+1),A[2*P+2*N+1]+=C*ue,w(A,2*P+2*N+1),A[2*P+2*N+2]+=j*ue,w(A,2*P+2*N+2)}for(P=0;P<S;P++)A[P]=A[2*P+1]<<16|A[2*P];for(P=S;P<2*S;P++)A[P]=0;return new o(A,0)};function w(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function T(x,S){this.g=x,this.h=S}function R(x,S){if(y(S))throw Error("division by zero");if(y(x))return new T(f,f);if(_(x))return S=R(v(x),S),new T(v(S.g),v(S.h));if(_(S))return S=R(x,v(S)),new T(v(S.g),S.h);if(30<x.g.length){if(_(x)||_(S))throw Error("slowDivide_ only works with positive integers.");for(var A=p,P=S;0>=P.l(x);)A=D(A),P=D(P);var N=O(A,1),j=O(P,1);for(P=O(P,2),A=O(A,2);!y(P);){var C=j.add(P);0>=C.l(x)&&(N=N.add(A),j=C),P=O(P,1),A=O(A,1)}return S=E(x,N.j(S)),new T(N,S)}for(N=f;0<=x.l(S);){for(A=Math.max(1,Math.floor(x.m()/S.m())),P=Math.ceil(Math.log(A)/Math.LN2),P=48>=P?1:Math.pow(2,P-48),j=c(A),C=j.j(S);_(C)||0<C.l(x);)A-=P,j=c(A),C=j.j(S);y(j)&&(j=p),N=N.add(j),x=E(x,C)}return new T(N,x)}t.A=function(x){return R(this,x).h},t.and=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)&x.i(P);return new o(A,this.h&x.h)},t.or=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)|x.i(P);return new o(A,this.h|x.h)},t.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),A=[],P=0;P<S;P++)A[P]=this.i(P)^x.i(P);return new o(A,this.h^x.h)};function D(x){for(var S=x.g.length+1,A=[],P=0;P<S;P++)A[P]=x.i(P)<<1|x.i(P-1)>>>31;return new o(A,x.h)}function O(x,S){var A=S>>5;S%=32;for(var P=x.g.length-A,N=[],j=0;j<P;j++)N[j]=0<S?x.i(j+A)>>>S|x.i(j+A+1)<<32-S:x.i(j+A);return new o(N,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,HV=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,wo=o}).apply(typeof bR<"u"?bR:typeof self<"u"?self:typeof window<"u"?window:{});var nm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var GV,Gd,KV,Wm,xb,QV,YV,JV;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,b){return d==Array.prototype||d==Object.prototype||(d[g]=b.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof nm=="object"&&nm];for(var g=0;g<d.length;++g){var b=d[g];if(b&&b.Math==Math)return b}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var b=r;d=d.split(".");for(var k=0;k<d.length-1;k++){var L=d[k];if(!(L in b))break e;b=b[L]}d=d[d.length-1],k=b[d],g=g(k),g!=k&&g!=null&&e(b,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var b=0,k=!1,L={next:function(){if(!k&&b<d.length){var F=b++;return{value:g(F,d[F]),done:!1}}return k=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,b){return b})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function c(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,b){return d.call.apply(d.bind,arguments)}function f(d,g,b){if(!d)throw Error();if(2<arguments.length){var k=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,k),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function p(d,g,b){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,p.apply(null,arguments)}function m(d,g){var b=Array.prototype.slice.call(arguments,1);return function(){var k=b.slice();return k.push.apply(k,arguments),d.apply(this,k)}}function y(d,g){function b(){}b.prototype=g.prototype,d.aa=g.prototype,d.prototype=new b,d.prototype.constructor=d,d.Qb=function(k,L,F){for(var H=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)H[Ke-2]=arguments[Ke];return g.prototype[L].apply(k,H)}}function _(d){const g=d.length;if(0<g){const b=Array(g);for(let k=0;k<g;k++)b[k]=d[k];return b}return[]}function v(d,g){for(let b=1;b<arguments.length;b++){const k=arguments[b];if(l(k)){const L=d.length||0,F=k.length||0;d.length=L+F;for(let H=0;H<F;H++)d[L+H]=k[H]}else d.push(k)}}class E{constructor(g,b){this.i=g,this.j=b,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function w(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var D=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function O(d,g,b){for(const k in d)g.call(b,d[k],k,d)}function x(d,g){for(const b in d)g.call(void 0,d[b],b,d)}function S(d){const g={};for(const b in d)g[b]=d[b];return g}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function P(d,g){let b,k;for(let L=1;L<arguments.length;L++){k=arguments[L];for(b in k)d[b]=k[b];for(let F=0;F<A.length;F++)b=A[F],Object.prototype.hasOwnProperty.call(k,b)&&(d[b]=k[b])}}function N(d){var g=1;d=d.split(":");const b=[];for(;0<g&&d.length;)b.push(d.shift()),g--;return d.length&&b.push(d.join(":")),b}function j(d){a.setTimeout(()=>{throw d},0)}function C(){var d=Z;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ue{constructor(){this.h=this.g=null}add(g,b){const k=fe.get();k.set(g,b),this.h?this.h.next=k:this.g=k,this.h=k}}var fe=new E(()=>new Ae,d=>d.reset());class Ae{constructor(){this.next=this.g=this.h=null}set(g,b){this.h=g,this.g=b,this.next=null}reset(){this.next=this.g=this.h=null}}let Re,z=!1,Z=new ue,te=()=>{const d=a.Promise.resolve(void 0);Re=()=>{d.then(Ee)}};var Ee=()=>{for(var d;d=C();){try{d.h.call(d.g)}catch(b){j(b)}var g=fe;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}z=!1};function ye(){this.s=this.s,this.C=this.C}ye.prototype.s=!1,ye.prototype.ma=function(){this.s||(this.s=!0,this.N())},ye.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Te(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}Te.prototype.h=function(){this.defaultPrevented=!0};var Ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const b=()=>{};a.addEventListener("test",b,g),a.removeEventListener("test",b,g)}catch{}return d}();function Ne(d,g){if(Te.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var b=this.type=d.type,k=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(D){e:{try{R(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else b=="mouseover"?g=d.fromElement:b=="mouseout"&&(g=d.toElement);this.relatedTarget=g,k?(this.clientX=k.clientX!==void 0?k.clientX:k.pageX,this.clientY=k.clientY!==void 0?k.clientY:k.pageY,this.screenX=k.screenX||0,this.screenY=k.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ht[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ne.aa.h.call(this)}}y(Ne,Te);var ht={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var Lt="closure_listenable_"+(1e6*Math.random()|0),tr=0;function Ur(d,g,b,k,L){this.listener=d,this.proxy=null,this.src=g,this.type=b,this.capture=!!k,this.ha=L,this.key=++tr,this.da=this.fa=!1}function nr(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function rr(d){this.src=d,this.g={},this.h=0}rr.prototype.add=function(d,g,b,k,L){var F=d.toString();d=this.g[F],d||(d=this.g[F]=[],this.h++);var H=Tr(d,g,k,L);return-1<H?(g=d[H],b||(g.fa=!1)):(g=new Ur(g,this.src,F,!!k,L),g.fa=b,d.push(g)),g};function Er(d,g){var b=g.type;if(b in d.g){var k=d.g[b],L=Array.prototype.indexOf.call(k,g,void 0),F;(F=0<=L)&&Array.prototype.splice.call(k,L,1),F&&(nr(g),d.g[b].length==0&&(delete d.g[b],d.h--))}}function Tr(d,g,b,k){for(var L=0;L<d.length;++L){var F=d[L];if(!F.da&&F.listener==g&&F.capture==!!b&&F.ha==k)return L}return-1}var Ir="closure_lm_"+(1e6*Math.random()|0),Ue={};function si(d,g,b,k,L){if(k&&k.once)return Il(d,g,b,k,L);if(Array.isArray(g)){for(var F=0;F<g.length;F++)si(d,g[F],b,k,L);return null}return b=Se(b),d&&d[Lt]?d.K(g,b,c(k)?!!k.capture:!!k,L):Br(d,g,b,!1,k,L)}function Br(d,g,b,k,L,F){if(!g)throw Error("Invalid event type");var H=c(L)?!!L.capture:!!L,Ke=ai(d);if(Ke||(d[Ir]=Ke=new rr(d)),b=Ke.add(g,b,k,H,F),b.proxy)return b;if(k=Yu(),b.proxy=k,k.src=d,k.listener=b,d.addEventListener)Ge||(L=H),L===void 0&&(L=!1),d.addEventListener(g.toString(),k,L);else if(d.attachEvent)d.attachEvent(ea(g.toString()),k);else if(d.addListener&&d.removeListener)d.addListener(k);else throw Error("addEventListener and attachEvent are unavailable.");return b}function Yu(){function d(b){return g.call(d.src,d.listener,b)}const g=Sl;return d}function Il(d,g,b,k,L){if(Array.isArray(g)){for(var F=0;F<g.length;F++)Il(d,g[F],b,k,L);return null}return b=Se(b),d&&d[Lt]?d.L(g,b,c(k)?!!k.capture:!!k,L):Br(d,g,b,!0,k,L)}function Sr(d,g,b,k,L){if(Array.isArray(g))for(var F=0;F<g.length;F++)Sr(d,g[F],b,k,L);else k=c(k)?!!k.capture:!!k,b=Se(b),d&&d[Lt]?(d=d.i,g=String(g).toString(),g in d.g&&(F=d.g[g],b=Tr(F,b,k,L),-1<b&&(nr(F[b]),Array.prototype.splice.call(F,b,1),F.length==0&&(delete d.g[g],d.h--)))):d&&(d=ai(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Tr(g,b,k,L)),(b=-1<d?g[d]:null)&&oi(b))}function oi(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[Lt])Er(g.i,d);else{var b=d.type,k=d.proxy;g.removeEventListener?g.removeEventListener(b,k,d.capture):g.detachEvent?g.detachEvent(ea(b),k):g.addListener&&g.removeListener&&g.removeListener(k),(b=ai(g))?(Er(b,d),b.h==0&&(b.src=null,g[Ir]=null)):nr(d)}}}function ea(d){return d in Ue?Ue[d]:Ue[d]="on"+d}function Sl(d,g){if(d.da)d=!0;else{g=new Ne(g,this);var b=d.listener,k=d.ha||d.src;d.fa&&oi(d),d=b.call(k,g)}return d}function ai(d){return d=d[Ir],d instanceof rr?d:null}var Ls="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(d){return typeof d=="function"?d:(d[Ls]||(d[Ls]=function(g){return d.handleEvent(g)}),d[Ls])}function Qe(){ye.call(this),this.i=new rr(this),this.M=this,this.F=null}y(Qe,ye),Qe.prototype[Lt]=!0,Qe.prototype.removeEventListener=function(d,g,b,k){Sr(this,d,g,b,k)};function Rt(d,g){var b,k=d.F;if(k)for(b=[];k;k=k.F)b.push(k);if(d=d.M,k=g.type||g,typeof g=="string")g=new Te(g,d);else if(g instanceof Te)g.target=g.target||d;else{var L=g;g=new Te(k,d),P(g,L)}if(L=!0,b)for(var F=b.length-1;0<=F;F--){var H=g.g=b[F];L=gp(H,k,!0,g)&&L}if(H=g.g=d,L=gp(H,k,!0,g)&&L,L=gp(H,k,!1,g)&&L,b)for(F=0;F<b.length;F++)H=g.g=b[F],L=gp(H,k,!1,g)&&L}Qe.prototype.N=function(){if(Qe.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var b=d.g[g],k=0;k<b.length;k++)nr(b[k]);delete d.g[g],d.h--}}this.F=null},Qe.prototype.K=function(d,g,b,k){return this.i.add(String(d),g,!1,b,k)},Qe.prototype.L=function(d,g,b,k){return this.i.add(String(d),g,!0,b,k)};function gp(d,g,b,k){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,F=0;F<g.length;++F){var H=g[F];if(H&&!H.da&&H.capture==b){var Ke=H.listener,on=H.ha||H.src;H.fa&&Er(d.i,H),L=Ke.call(on,k)!==!1&&L}}return L&&!k.defaultPrevented}function I1(d,g,b){if(typeof d=="function")b&&(d=p(d,b));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function S1(d){d.g=I1(()=>{d.g=null,d.i&&(d.i=!1,S1(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class g3 extends ye{constructor(g,b){super(),this.m=g,this.l=b,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:S1(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ju(d){ye.call(this),this.h=d,this.g={}}y(Ju,ye);var x1=[];function k1(d){O(d.g,function(g,b){this.g.hasOwnProperty(b)&&oi(g)},d),d.g={}}Ju.prototype.N=function(){Ju.aa.N.call(this),k1(this)},Ju.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qy=a.JSON.stringify,v3=a.JSON.parse,y3=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function Yy(){}Yy.prototype.h=null;function A1(d){return d.h||(d.h=d.i())}function R1(){}var Xu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jy(){Te.call(this,"d")}y(Jy,Te);function Xy(){Te.call(this,"c")}y(Xy,Te);var ta={},C1=null;function vp(){return C1=C1||new Qe}ta.La="serverreachability";function P1(d){Te.call(this,ta.La,d)}y(P1,Te);function Zu(d){const g=vp();Rt(g,new P1(g))}ta.STAT_EVENT="statevent";function O1(d,g){Te.call(this,ta.STAT_EVENT,d),this.stat=g}y(O1,Te);function Pn(d){const g=vp();Rt(g,new O1(g,d))}ta.Ma="timingevent";function N1(d,g){Te.call(this,ta.Ma,d),this.size=g}y(N1,Te);function ed(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function td(){this.g=!0}td.prototype.xa=function(){this.g=!1};function _3(d,g,b,k,L,F){d.info(function(){if(d.g)if(F)for(var H="",Ke=F.split("&"),on=0;on<Ke.length;on++){var Ve=Ke[on].split("=");if(1<Ve.length){var _n=Ve[0];Ve=Ve[1];var wn=_n.split("_");H=2<=wn.length&&wn[1]=="type"?H+(_n+"="+Ve+"&"):H+(_n+"=redacted&")}}else H=null;else H=F;return"XMLHTTP REQ ("+k+") [attempt "+L+"]: "+g+`
`+b+`
`+H})}function w3(d,g,b,k,L,F,H){d.info(function(){return"XMLHTTP RESP ("+k+") [ attempt "+L+"]: "+g+`
`+b+`
`+F+" "+H})}function xl(d,g,b,k){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+E3(d,b)+(k?" "+k:"")})}function b3(d,g){d.info(function(){return"TIMEOUT: "+g})}td.prototype.info=function(){};function E3(d,g){if(!d.g)return g;if(!g)return null;try{var b=JSON.parse(g);if(b){for(d=0;d<b.length;d++)if(Array.isArray(b[d])){var k=b[d];if(!(2>k.length)){var L=k[1];if(Array.isArray(L)&&!(1>L.length)){var F=L[0];if(F!="noop"&&F!="stop"&&F!="close")for(var H=1;H<L.length;H++)L[H]=""}}}}return Qy(b)}catch{return g}}var yp={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},D1={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Zy;function _p(){}y(_p,Yy),_p.prototype.g=function(){return new XMLHttpRequest},_p.prototype.i=function(){return{}},Zy=new _p;function Ms(d,g,b,k){this.j=d,this.i=g,this.l=b,this.R=k||1,this.U=new Ju(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new j1}function j1(){this.i=null,this.g="",this.h=!1}var L1={},e_={};function t_(d,g,b){d.L=1,d.v=Tp(Vi(g)),d.m=b,d.P=!0,M1(d,null)}function M1(d,g){d.F=Date.now(),wp(d),d.A=Vi(d.v);var b=d.A,k=d.R;Array.isArray(k)||(k=[String(k)]),J1(b.i,"t",k),d.C=0,b=d.j.J,d.h=new j1,d.g=mx(d.j,b?g:null,!d.m),0<d.O&&(d.M=new g3(p(d.Y,d,d.g),d.O)),g=d.U,b=d.g,k=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(x1[0]=L.toString()),L=x1);for(var F=0;F<L.length;F++){var H=si(b,L[F],k||g.handleEvent,!1,g.h||g);if(!H)break;g.g[H.key]=H}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Zu(),_3(d.i,d.u,d.A,d.l,d.R,d.m)}Ms.prototype.ca=function(d){d=d.target;const g=this.M;g&&Fi(d)==3?g.j():this.Y(d)},Ms.prototype.Y=function(d){try{if(d==this.g)e:{const wn=Fi(this.g);var g=this.g.Ba();const Rl=this.g.Z();if(!(3>wn)&&(wn!=3||this.g&&(this.h.h||this.g.oa()||ix(this.g)))){this.J||wn!=4||g==7||(g==8||0>=Rl?Zu(3):Zu(2)),n_(this);var b=this.g.Z();this.X=b;t:if(V1(this)){var k=ix(this.g);d="";var L=k.length,F=Fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){na(this),nd(this);var H="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(k[g],{stream:!(F&&g==L-1)});k.length=0,this.h.g+=d,this.C=0,H=this.h.g}else H=this.g.oa();if(this.o=b==200,w3(this.i,this.u,this.A,this.l,this.R,wn,b),this.o){if(this.T&&!this.K){t:{if(this.g){var Ke,on=this.g;if((Ke=on.g?on.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Ke)){var Ve=Ke;break t}}Ve=null}if(b=Ve)xl(this.i,this.l,b,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,r_(this,b);else{this.o=!1,this.s=3,Pn(12),na(this),nd(this);break e}}if(this.P){b=!0;let zr;for(;!this.J&&this.C<H.length;)if(zr=T3(this,H),zr==e_){wn==4&&(this.s=4,Pn(14),b=!1),xl(this.i,this.l,null,"[Incomplete Response]");break}else if(zr==L1){this.s=4,Pn(15),xl(this.i,this.l,H,"[Invalid Chunk]"),b=!1;break}else xl(this.i,this.l,zr,null),r_(this,zr);if(V1(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wn!=4||H.length!=0||this.h.h||(this.s=1,Pn(16),b=!1),this.o=this.o&&b,!b)xl(this.i,this.l,H,"[Invalid Chunked Response]"),na(this),nd(this);else if(0<H.length&&!this.W){this.W=!0;var _n=this.j;_n.g==this&&_n.ba&&!_n.M&&(_n.j.info("Great, no buffering proxy detected. Bytes received: "+H.length),c_(_n),_n.M=!0,Pn(11))}}else xl(this.i,this.l,H,null),r_(this,H);wn==4&&na(this),this.o&&!this.J&&(wn==4?dx(this.j,this):(this.o=!1,wp(this)))}else $3(this.g),b==400&&0<H.indexOf("Unknown SID")?(this.s=3,Pn(12)):(this.s=0,Pn(13)),na(this),nd(this)}}}catch{}finally{}};function V1(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function T3(d,g){var b=d.C,k=g.indexOf(`
`,b);return k==-1?e_:(b=Number(g.substring(b,k)),isNaN(b)?L1:(k+=1,k+b>g.length?e_:(g=g.slice(k,k+b),d.C=k+b,g)))}Ms.prototype.cancel=function(){this.J=!0,na(this)};function wp(d){d.S=Date.now()+d.I,F1(d,d.I)}function F1(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=ed(p(d.ba,d),g)}function n_(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Ms.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(b3(this.i,this.A),this.L!=2&&(Zu(),Pn(17)),na(this),this.s=2,nd(this)):F1(this,this.S-d)};function nd(d){d.j.G==0||d.J||dx(d.j,d)}function na(d){n_(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,k1(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function r_(d,g){try{var b=d.j;if(b.G!=0&&(b.g==d||i_(b.h,d))){if(!d.K&&i_(b.h,d)&&b.G==3){try{var k=b.Da.g.parse(g)}catch{k=null}if(Array.isArray(k)&&k.length==3){var L=k;if(L[0]==0){e:if(!b.u){if(b.g)if(b.g.F+3e3<d.F)Rp(b),kp(b);else break e;l_(b),Pn(18)}}else b.za=L[1],0<b.za-b.T&&37500>L[2]&&b.F&&b.v==0&&!b.C&&(b.C=ed(p(b.Za,b),6e3));if(1>=B1(b.h)&&b.ca){try{b.ca()}catch{}b.ca=void 0}}else ia(b,11)}else if((d.K||b.g==d)&&Rp(b),!w(g))for(L=b.Da.g.parse(g),g=0;g<L.length;g++){let Ve=L[g];if(b.T=Ve[0],Ve=Ve[1],b.G==2)if(Ve[0]=="c"){b.K=Ve[1],b.ia=Ve[2];const _n=Ve[3];_n!=null&&(b.la=_n,b.j.info("VER="+b.la));const wn=Ve[4];wn!=null&&(b.Aa=wn,b.j.info("SVER="+b.Aa));const Rl=Ve[5];Rl!=null&&typeof Rl=="number"&&0<Rl&&(k=1.5*Rl,b.L=k,b.j.info("backChannelRequestTimeoutMs_="+k)),k=b;const zr=d.g;if(zr){const Pp=zr.g?zr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pp){var F=k.h;F.g||Pp.indexOf("spdy")==-1&&Pp.indexOf("quic")==-1&&Pp.indexOf("h2")==-1||(F.j=F.l,F.g=new Set,F.h&&(s_(F,F.h),F.h=null))}if(k.D){const u_=zr.g?zr.g.getResponseHeader("X-HTTP-Session-Id"):null;u_&&(k.ya=u_,et(k.I,k.D,u_))}}b.G=3,b.l&&b.l.ua(),b.ba&&(b.R=Date.now()-d.F,b.j.info("Handshake RTT: "+b.R+"ms")),k=b;var H=d;if(k.qa=px(k,k.J?k.ia:null,k.W),H.K){z1(k.h,H);var Ke=H,on=k.L;on&&(Ke.I=on),Ke.B&&(n_(Ke),wp(Ke)),k.g=H}else cx(k);0<b.i.length&&Ap(b)}else Ve[0]!="stop"&&Ve[0]!="close"||ia(b,7);else b.G==3&&(Ve[0]=="stop"||Ve[0]=="close"?Ve[0]=="stop"?ia(b,7):a_(b):Ve[0]!="noop"&&b.l&&b.l.ta(Ve),b.v=0)}}Zu(4)}catch{}}var I3=class{constructor(d,g){this.g=d,this.map=g}};function $1(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function U1(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function B1(d){return d.h?1:d.g?d.g.size:0}function i_(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function s_(d,g){d.g?d.g.add(g):d.h=g}function z1(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}$1.prototype.cancel=function(){if(this.i=q1(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function q1(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const b of d.g.values())g=g.concat(b.D);return g}return _(d.i)}function S3(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],b=d.length,k=0;k<b;k++)g.push(d[k]);return g}g=[],b=0;for(k in d)g[b++]=d[k];return g}function x3(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var b=0;b<d;b++)g.push(b);return g}g=[],b=0;for(const k in d)g[b++]=k;return g}}}function W1(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var b=x3(d),k=S3(d),L=k.length,F=0;F<L;F++)g.call(void 0,k[F],b&&b[F],d)}var H1=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function k3(d,g){if(d){d=d.split("&");for(var b=0;b<d.length;b++){var k=d[b].indexOf("="),L=null;if(0<=k){var F=d[b].substring(0,k);L=d[b].substring(k+1)}else F=d[b];g(F,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function ra(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof ra){this.h=d.h,bp(this,d.j),this.o=d.o,this.g=d.g,Ep(this,d.s),this.l=d.l;var g=d.i,b=new sd;b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),G1(this,b),this.m=d.m}else d&&(g=String(d).match(H1))?(this.h=!1,bp(this,g[1]||"",!0),this.o=rd(g[2]||""),this.g=rd(g[3]||"",!0),Ep(this,g[4]),this.l=rd(g[5]||"",!0),G1(this,g[6]||"",!0),this.m=rd(g[7]||"")):(this.h=!1,this.i=new sd(null,this.h))}ra.prototype.toString=function(){var d=[],g=this.j;g&&d.push(id(g,K1,!0),":");var b=this.g;return(b||g=="file")&&(d.push("//"),(g=this.o)&&d.push(id(g,K1,!0),"@"),d.push(encodeURIComponent(String(b)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b=this.s,b!=null&&d.push(":",String(b))),(b=this.l)&&(this.g&&b.charAt(0)!="/"&&d.push("/"),d.push(id(b,b.charAt(0)=="/"?C3:R3,!0))),(b=this.i.toString())&&d.push("?",b),(b=this.m)&&d.push("#",id(b,O3)),d.join("")};function Vi(d){return new ra(d)}function bp(d,g,b){d.j=b?rd(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Ep(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function G1(d,g,b){g instanceof sd?(d.i=g,N3(d.i,d.h)):(b||(g=id(g,P3)),d.i=new sd(g,d.h))}function et(d,g,b){d.i.set(g,b)}function Tp(d){return et(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function rd(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function id(d,g,b){return typeof d=="string"?(d=encodeURI(d).replace(g,A3),b&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function A3(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var K1=/[#\/\?@]/g,R3=/[#\?:]/g,C3=/[#\?]/g,P3=/[#\?@]/g,O3=/#/g;function sd(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Vs(d){d.g||(d.g=new Map,d.h=0,d.i&&k3(d.i,function(g,b){d.add(decodeURIComponent(g.replace(/\+/g," ")),b)}))}t=sd.prototype,t.add=function(d,g){Vs(this),this.i=null,d=kl(this,d);var b=this.g.get(d);return b||this.g.set(d,b=[]),b.push(g),this.h+=1,this};function Q1(d,g){Vs(d),g=kl(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function Y1(d,g){return Vs(d),g=kl(d,g),d.g.has(g)}t.forEach=function(d,g){Vs(this),this.g.forEach(function(b,k){b.forEach(function(L){d.call(g,L,k,this)},this)},this)},t.na=function(){Vs(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),b=[];for(let k=0;k<g.length;k++){const L=d[k];for(let F=0;F<L.length;F++)b.push(g[k])}return b},t.V=function(d){Vs(this);let g=[];if(typeof d=="string")Y1(this,d)&&(g=g.concat(this.g.get(kl(this,d))));else{d=Array.from(this.g.values());for(let b=0;b<d.length;b++)g=g.concat(d[b])}return g},t.set=function(d,g){return Vs(this),this.i=null,d=kl(this,d),Y1(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function J1(d,g,b){Q1(d,g),0<b.length&&(d.i=null,d.g.set(kl(d,g),_(b)),d.h+=b.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var b=0;b<g.length;b++){var k=g[b];const F=encodeURIComponent(String(k)),H=this.V(k);for(k=0;k<H.length;k++){var L=F;H[k]!==""&&(L+="="+encodeURIComponent(String(H[k]))),d.push(L)}}return this.i=d.join("&")};function kl(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function N3(d,g){g&&!d.j&&(Vs(d),d.i=null,d.g.forEach(function(b,k){var L=k.toLowerCase();k!=L&&(Q1(this,k),J1(this,L,b))},d)),d.j=g}function D3(d,g){const b=new td;if(a.Image){const k=new Image;k.onload=m(Fs,b,"TestLoadImage: loaded",!0,g,k),k.onerror=m(Fs,b,"TestLoadImage: error",!1,g,k),k.onabort=m(Fs,b,"TestLoadImage: abort",!1,g,k),k.ontimeout=m(Fs,b,"TestLoadImage: timeout",!1,g,k),a.setTimeout(function(){k.ontimeout&&k.ontimeout()},1e4),k.src=d}else g(!1)}function j3(d,g){const b=new td,k=new AbortController,L=setTimeout(()=>{k.abort(),Fs(b,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:k.signal}).then(F=>{clearTimeout(L),F.ok?Fs(b,"TestPingServer: ok",!0,g):Fs(b,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Fs(b,"TestPingServer: error",!1,g)})}function Fs(d,g,b,k,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),k(b)}catch{}}function L3(){this.g=new y3}function M3(d,g,b){const k=b||"";try{W1(d,function(L,F){let H=L;c(L)&&(H=Qy(L)),g.push(k+F+"="+encodeURIComponent(H))})}catch(L){throw g.push(k+"type="+encodeURIComponent("_badmap")),L}}function Ip(d){this.l=d.Ub||null,this.j=d.eb||!1}y(Ip,Yy),Ip.prototype.g=function(){return new Sp(this.l,this.j)},Ip.prototype.i=function(d){return function(){return d}}({});function Sp(d,g){Qe.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(Sp,Qe),t=Sp.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ad(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,od(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ad(this)),this.g&&(this.readyState=3,ad(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;X1(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function X1(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?od(this):ad(this),this.readyState==3&&X1(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,od(this))},t.Qa=function(d){this.g&&(this.response=d,od(this))},t.ga=function(){this.g&&od(this)};function od(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ad(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var b=g.next();!b.done;)b=b.value,d.push(b[0]+": "+b[1]),b=g.next();return d.join(`\r
`)};function ad(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Sp.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Z1(d){let g="";return O(d,function(b,k){g+=k,g+=":",g+=b,g+=`\r
`}),g}function o_(d,g,b){e:{for(k in b){var k=!1;break e}k=!0}k||(b=Z1(b),typeof d=="string"?b!=null&&encodeURIComponent(String(b)):et(d,g,b))}function Et(d){Qe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Et,Qe);var V3=/^https?$/i,F3=["POST","PUT"];t=Et.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,b,k){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Zy.g(),this.v=this.o?A1(this.o):A1(Zy),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(F){ex(this,F);return}if(d=b||"",b=new Map(this.headers),k)if(Object.getPrototypeOf(k)===Object.prototype)for(var L in k)b.set(L,k[L]);else if(typeof k.keys=="function"&&typeof k.get=="function")for(const F of k.keys())b.set(F,k.get(F));else throw Error("Unknown input type for opt_headers: "+String(k));k=Array.from(b.keys()).find(F=>F.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(F3,g,void 0))||k||L||b.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[F,H]of b)this.g.setRequestHeader(F,H);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{rx(this),this.u=!0,this.g.send(d),this.u=!1}catch(F){ex(this,F)}};function ex(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,tx(d),xp(d)}function tx(d){d.A||(d.A=!0,Rt(d,"complete"),Rt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Rt(this,"complete"),Rt(this,"abort"),xp(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xp(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?nx(this):this.bb())},t.bb=function(){nx(this)};function nx(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Fi(d)!=4||d.Z()!=2)){if(d.u&&Fi(d)==4)I1(d.Ea,0,d);else if(Rt(d,"readystatechange"),Fi(d)==4){d.h=!1;try{const H=d.Z();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var b;if(!(b=g)){var k;if(k=H===0){var L=String(d.D).match(H1)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),k=!V3.test(L?L.toLowerCase():"")}b=k}if(b)Rt(d,"complete"),Rt(d,"success");else{d.m=6;try{var F=2<Fi(d)?d.g.statusText:""}catch{F=""}d.l=F+" ["+d.Z()+"]",tx(d)}}finally{xp(d)}}}}function xp(d,g){if(d.g){rx(d);const b=d.g,k=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||Rt(d,"ready");try{b.onreadystatechange=k}catch{}}}function rx(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Fi(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Fi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),v3(g)}};function ix(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function $3(d){const g={};d=(d.g&&2<=Fi(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let k=0;k<d.length;k++){if(w(d[k]))continue;var b=N(d[k]);const L=b[0];if(b=b[1],typeof b!="string")continue;b=b.trim();const F=g[L]||[];g[L]=F,F.push(b)}x(g,function(k){return k.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ld(d,g,b){return b&&b.internalChannelParams&&b.internalChannelParams[d]||g}function sx(d){this.Aa=0,this.i=[],this.j=new td,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ld("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ld("baseRetryDelayMs",5e3,d),this.cb=ld("retryDelaySeedMs",1e4,d),this.Wa=ld("forwardChannelMaxRetries",2,d),this.wa=ld("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new $1(d&&d.concurrentRequestLimit),this.Da=new L3,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=sx.prototype,t.la=8,t.G=1,t.connect=function(d,g,b,k){Pn(0),this.W=d,this.H=g||{},b&&k!==void 0&&(this.H.OSID=b,this.H.OAID=k),this.F=this.X,this.I=px(this,null,this.W),Ap(this)};function a_(d){if(ox(d),d.G==3){var g=d.U++,b=Vi(d.I);if(et(b,"SID",d.K),et(b,"RID",g),et(b,"TYPE","terminate"),cd(d,b),g=new Ms(d,d.j,g),g.L=2,g.v=Tp(Vi(b)),b=!1,a.navigator&&a.navigator.sendBeacon)try{b=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!b&&a.Image&&(new Image().src=g.v,b=!0),b||(g.g=mx(g.j,null),g.g.ea(g.v)),g.F=Date.now(),wp(g)}fx(d)}function kp(d){d.g&&(c_(d),d.g.cancel(),d.g=null)}function ox(d){kp(d),d.u&&(a.clearTimeout(d.u),d.u=null),Rp(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Ap(d){if(!U1(d.h)&&!d.s){d.s=!0;var g=d.Ga;Re||te(),z||(Re(),z=!0),Z.add(g,d),d.B=0}}function U3(d,g){return B1(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=ed(p(d.Ga,d,g),hx(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new Ms(this,this.j,d);let F=this.o;if(this.S&&(F?(F=S(F),P(F,this.S)):F=this.S),this.m!==null||this.O||(L.H=F,F=null),this.P)e:{for(var g=0,b=0;b<this.i.length;b++){t:{var k=this.i[b];if("__data__"in k.map&&(k=k.map.__data__,typeof k=="string")){k=k.length;break t}k=void 0}if(k===void 0)break;if(g+=k,4096<g){g=b;break e}if(g===4096||b===this.i.length-1){g=b+1;break e}}g=1e3}else g=1e3;g=lx(this,L,g),b=Vi(this.I),et(b,"RID",d),et(b,"CVER",22),this.D&&et(b,"X-HTTP-Session-Id",this.D),cd(this,b),F&&(this.O?g="headers="+encodeURIComponent(String(Z1(F)))+"&"+g:this.m&&o_(b,this.m,F)),s_(this.h,L),this.Ua&&et(b,"TYPE","init"),this.P?(et(b,"$req",g),et(b,"SID","null"),L.T=!0,t_(L,b,null)):t_(L,b,g),this.G=2}}else this.G==3&&(d?ax(this,d):this.i.length==0||U1(this.h)||ax(this))};function ax(d,g){var b;g?b=g.l:b=d.U++;const k=Vi(d.I);et(k,"SID",d.K),et(k,"RID",b),et(k,"AID",d.T),cd(d,k),d.m&&d.o&&o_(k,d.m,d.o),b=new Ms(d,d.j,b,d.B+1),d.m===null&&(b.H=d.o),g&&(d.i=g.D.concat(d.i)),g=lx(d,b,1e3),b.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),s_(d.h,b),t_(b,k,g)}function cd(d,g){d.H&&O(d.H,function(b,k){et(g,k,b)}),d.l&&W1({},function(b,k){et(g,k,b)})}function lx(d,g,b){b=Math.min(d.i.length,b);var k=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let F=-1;for(;;){const H=["count="+b];F==-1?0<b?(F=L[0].g,H.push("ofs="+F)):F=0:H.push("ofs="+F);let Ke=!0;for(let on=0;on<b;on++){let Ve=L[on].g;const _n=L[on].map;if(Ve-=F,0>Ve)F=Math.max(0,L[on].g-100),Ke=!1;else try{M3(_n,H,"req"+Ve+"_")}catch{k&&k(_n)}}if(Ke){k=H.join("&");break e}}}return d=d.i.splice(0,b),g.D=d,k}function cx(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;Re||te(),z||(Re(),z=!0),Z.add(g,d),d.v=0}}function l_(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=ed(p(d.Fa,d),hx(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,ux(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=ed(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pn(10),kp(this),ux(this))};function c_(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function ux(d){d.g=new Ms(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Vi(d.qa);et(g,"RID","rpc"),et(g,"SID",d.K),et(g,"AID",d.T),et(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&et(g,"TO",d.ja),et(g,"TYPE","xmlhttp"),cd(d,g),d.m&&d.o&&o_(g,d.m,d.o),d.L&&(d.g.I=d.L);var b=d.g;d=d.ia,b.L=1,b.v=Tp(Vi(g)),b.m=null,b.P=!0,M1(b,d)}t.Za=function(){this.C!=null&&(this.C=null,kp(this),l_(this),Pn(19))};function Rp(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function dx(d,g){var b=null;if(d.g==g){Rp(d),c_(d),d.g=null;var k=2}else if(i_(d.h,g))b=g.D,z1(d.h,g),k=1;else return;if(d.G!=0){if(g.o)if(k==1){b=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;k=vp(),Rt(k,new N1(k,b)),Ap(d)}else cx(d);else if(L=g.s,L==3||L==0&&0<g.X||!(k==1&&U3(d,g)||k==2&&l_(d)))switch(b&&0<b.length&&(g=d.h,g.i=g.i.concat(b)),L){case 1:ia(d,5);break;case 4:ia(d,10);break;case 3:ia(d,6);break;default:ia(d,2)}}}function hx(d,g){let b=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(b*=2),b*g}function ia(d,g){if(d.j.info("Error code "+g),g==2){var b=p(d.fb,d),k=d.Xa;const L=!k;k=new ra(k||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||bp(k,"https"),Tp(k),L?D3(k.toString(),b):j3(k.toString(),b)}else Pn(2);d.G=0,d.l&&d.l.sa(g),fx(d),ox(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Pn(2)):(this.j.info("Failed to ping google.com"),Pn(1))};function fx(d){if(d.G=0,d.ka=[],d.l){const g=q1(d.h);(g.length!=0||d.i.length!=0)&&(v(d.ka,g),v(d.ka,d.i),d.h.i.length=0,_(d.i),d.i.length=0),d.l.ra()}}function px(d,g,b){var k=b instanceof ra?Vi(b):new ra(b);if(k.g!="")g&&(k.g=g+"."+k.g),Ep(k,k.s);else{var L=a.location;k=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var F=new ra(null);k&&bp(F,k),g&&(F.g=g),L&&Ep(F,L),b&&(F.l=b),k=F}return b=d.D,g=d.ya,b&&g&&et(k,b,g),et(k,"VER",d.la),cd(d,k),k}function mx(d,g,b){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Et(new Ip({eb:b})):new Et(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function gx(){}t=gx.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Cp(){}Cp.prototype.g=function(d,g){return new ir(d,g)};function ir(d,g){Qe.call(this),this.g=new sx(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!w(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!w(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Al(this)}y(ir,Qe),ir.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ir.prototype.close=function(){a_(this.g)},ir.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var b={};b.__data__=d,d=b}else this.u&&(b={},b.__data__=Qy(d),d=b);g.i.push(new I3(g.Ya++,d)),g.G==3&&Ap(g)},ir.prototype.N=function(){this.g.l=null,delete this.j,a_(this.g),delete this.g,ir.aa.N.call(this)};function vx(d){Jy.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const b in g){d=b;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}y(vx,Jy);function yx(){Xy.call(this),this.status=1}y(yx,Xy);function Al(d){this.g=d}y(Al,gx),Al.prototype.ua=function(){Rt(this.g,"a")},Al.prototype.ta=function(d){Rt(this.g,new vx(d))},Al.prototype.sa=function(d){Rt(this.g,new yx)},Al.prototype.ra=function(){Rt(this.g,"b")},Cp.prototype.createWebChannel=Cp.prototype.g,ir.prototype.send=ir.prototype.o,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,JV=function(){return new Cp},YV=function(){return vp()},QV=ta,xb={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},yp.NO_ERROR=0,yp.TIMEOUT=8,yp.HTTP_ERROR=6,Wm=yp,D1.COMPLETE="complete",KV=D1,R1.EventType=Xu,Xu.OPEN="a",Xu.CLOSE="b",Xu.ERROR="c",Xu.MESSAGE="d",Qe.prototype.listen=Qe.prototype.K,Gd=R1,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,GV=Et}).apply(typeof nm<"u"?nm:typeof self<"u"?self:typeof window<"u"?window:{});const ER="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mu="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Hf("@firebase/firestore");function Kl(){return Co.logLevel}function yZ(t){Co.setLogLevel(t)}function B(t,...e){if(Co.logLevel<=xe.DEBUG){const n=e.map(WI);Co.debug(`Firestore (${Mu}): ${t}`,...n)}}function Pt(t,...e){if(Co.logLevel<=xe.ERROR){const n=e.map(WI);Co.error(`Firestore (${Mu}): ${t}`,...n)}}function Oi(t,...e){if(Co.logLevel<=xe.WARN){const n=e.map(WI);Co.warn(`Firestore (${Mu}): ${t}`,...n)}}function WI(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Mu}) INTERNAL ASSERTION FAILED: `+t;throw Pt(e),new Error(e)}function re(t,e){t||Y()}function _Z(t,e){t||Y()}function K(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class U extends tn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Zt.UNAUTHENTICATED))}shutdown(){}}class bZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class EZ{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new pn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new pn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new pn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new XV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new Zt(e)}}class TZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class IZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new TZ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Zt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class SZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){re(this.o===void 0);const r=s=>{s.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,B("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string"),this.R=n.token,new SZ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=kZ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function nu(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function e4(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{static now(){return dt.fromMillis(Date.now())}static fromDate(e){return dt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new dt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new U($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{static fromTimestamp(e){return new se(e)}static min(){return new se(new dt(0,0))}static max(){return new se(new dt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ui{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ui.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ui?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ui.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=ui.isNumericId(e),i=ui.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ui.extractNumericId(e).compare(ui.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return wo.fromString(e.substring(4,e.length-2))}}class Ce extends ui{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new U($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const AZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lt extends ui{construct(e,n,r){return new lt(e,n,r)}static isValidIdentifier(e){return AZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new U($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new U($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new U($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new U($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lt(n)}static emptyPath(){return new lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ce.fromString(e))}static fromName(e){return new G(Ce.fromString(e).popFirst(5))}static empty(){return new G(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function kb(t){return t.fields.find(e=>e.kind===2)}function fa(t){return t.fields.filter(e=>e.kind!==2)}Jg.UNKNOWN_ID=-1;class Hm{constructor(e,n){this.fieldPath=e,this.kind=n}}class gf{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new gf(0,yr.min())}}function t4(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new dt(n+1,0):new dt(n,r));return new yr(i,G.empty(),e)}function n4(t){return new yr(t.readTime,t.key,-1)}class yr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new yr(se.min(),G.empty(),-1)}static max(){return new yr(se.max(),G.empty(),-1)}}function HI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class i4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ko(t){if(t.code!==$.FAILED_PRECONDITION||t.message!==r4)throw t;B("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{static open(e,n,r,i){try{return new uy(n,e.transaction(i,r))}catch(s){throw new Eh(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new pn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new Eh(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=GI(r.target.error);this.V.reject(new Eh(e,i))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(B("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new CZ(n)}}class ki{static delete(e){return B("SimpleDb","Removing database:",e),ya(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!Ja())return!1;if(ki.S())return!0;const e=wt(),n=ki.D(e),r=0<n&&n<10,i=s4(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.F=r,ki.D(wt())===12.2&&Pt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(B("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new Eh(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new U($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new U($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new Eh(e,o))},i.onupgradeneeded=s=>{B("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.F.O(o,i.transaction,s.oldVersion,this.version).next(()=>{B("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}B(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=uy.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(B("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function s4(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class RZ{constructor(e){this.L=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.L=e}done(){this.k=!0}$(e){this.q=e}delete(){return ya(this.L.delete())}}class Eh extends U{constructor(e,n){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Qo(t){return t.name==="IndexedDbTransactionError"}class CZ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(B("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(B("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ya(r)}add(e){return B("SimpleDb","ADD",this.store.name,e,e),ya(this.store.add(e))}get(e){return ya(this.store.get(e)).next(n=>(n===void 0&&(n=null),B("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return B("SimpleDb","DELETE",this.store.name,e),ya(this.store.delete(e))}count(){return B("SimpleDb","COUNT",this.store.name),ya(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){B("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=GI(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new RZ(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const u=c.catch(f=>(l.done(),M.reject(f)));r.push(u)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ya(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=GI(r.target.error);n(i)}})}let TR=!1;function GI(t){const e=ki.D(wt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new U("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return TR||(TR=!0,setTimeout(()=>{throw r},0)),r}}return t}class PZ{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){B("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{B("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){Qo(n)?B("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Ko(n)}await this.X(6e4)})}}class OZ{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return B("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(B("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=n4(s);HI(o,r)>0&&(r=o)}),new yr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hn.oe=-1;function ep(t){return t==null}function vf(t){return t===0&&1/t==-1/0}function o4(t){return typeof t=="number"&&Number.isInteger(t)&&!vf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=IR(e)),e=NZ(t.get(n),e);return IR(e)}function NZ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function IR(t){return t+""}function wi(t){const e=t.length;if(re(e>=2),e===2)return re(t.charAt(0)===""&&t.charAt(1)===""),Ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Y(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Y()}s=o+2}return new Ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gm(t,e){return[t,An(e)]}function a4(t,e,n){return[t,An(e),n]}const DZ={},jZ=["prefixPath","collectionGroup","readTime","documentId"],LZ=["prefixPath","collectionGroup","documentId"],MZ=["collectionGroup","readTime","prefixPath","documentId"],VZ=["canonicalId","targetId"],FZ=["targetId","path"],$Z=["path","targetId"],UZ=["collectionId","parent"],BZ=["indexId","uid"],zZ=["uid","sequenceNumber"],qZ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],WZ=["indexId","uid","orderedDocumentKey"],HZ=["userId","collectionPath","documentId"],GZ=["userId","collectionPath","largestBatchId"],KZ=["userId","collectionGroup","largestBatchId"],l4=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],QZ=[...l4,"documentOverlays"],c4=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],u4=c4,KI=[...u4,"indexConfiguration","indexState","indexEntries"],YZ=KI,JZ=[...KI,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ab extends i4{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Qt(t,e){const n=K(t);return ki.C(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yo(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function d4(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e,n){this.comparator=e,this.root=n||ln.EMPTY}insert(e,n){return new Ze(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new Ze(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rm(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rm(this.root,e,this.comparator,!1)}getReverseIterator(){return new rm(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rm(this.root,e,this.comparator,!0)}}class rm{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ln{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ln.RED,this.left=i??ln.EMPTY,this.right=s??ln.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ln(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ln.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ln.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ln.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ln.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ln(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e){this.comparator=e,this.data=new Ze(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kR(this.data.getIterator())}getIteratorFrom(e){return new kR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof He)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new He(this.comparator);return n.data=e,n}}class kR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Dl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(lt.comparator)}static empty(){return new Gn([])}unionWith(e){let n=new He(lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return nu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h4 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XZ(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new h4("Invalid base64 string: "+s):s}}(e);return new xt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new xt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const ZZ=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(re(!!t),typeof t=="string"){let e=0;const n=ZZ.exec(t);if(re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ot(t.seconds),nanos:ot(t.nanos)}}function ot(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?xt.fromBase64String(t):xt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hy(t){const e=t.mapValue.fields.__previous_value__;return dy(e)?hy(e):e}function yf(t){const e=vs(t.mapValue.fields.__local_write_time__.timestampValue);return new dt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eee{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Po{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Km={nullValue:"NULL_VALUE"};function Oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?dy(t)?4:f4(t)?9007199254740991:fy(t)?10:11:Y()}function Ni(t,e){if(t===e)return!0;const n=Oo(t);if(n!==Oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return yf(t).isEqual(yf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=vs(i.timestampValue),a=vs(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ys(i.bytesValue).isEqual(ys(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return ot(i.geoPointValue.latitude)===ot(s.geoPointValue.latitude)&&ot(i.geoPointValue.longitude)===ot(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ot(i.integerValue)===ot(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ot(i.doubleValue),a=ot(s.doubleValue);return o===a?vf(o)===vf(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return nu(t.arrayValue.values||[],e.arrayValue.values||[],Ni);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(xR(o)!==xR(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ni(o[l],a[l])))return!1;return!0}(t,e);default:return Y()}}function _f(t,e){return(t.values||[]).find(n=>Ni(n,e))!==void 0}function No(t,e){if(t===e)return 0;const n=Oo(t),r=Oo(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ot(s.integerValue||s.doubleValue),l=ot(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return AR(t.timestampValue,e.timestampValue);case 4:return AR(yf(t),yf(e));case 5:return pe(t.stringValue,e.stringValue);case 6:return function(s,o){const a=ys(s),l=ys(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=pe(a[c],l[c]);if(u!==0)return u}return pe(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=pe(ot(s.latitude),ot(o.latitude));return a!==0?a:pe(ot(s.longitude),ot(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return RR(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},p=o.fields||{},m=(a=f.value)===null||a===void 0?void 0:a.arrayValue,y=(l=p.value)===null||l===void 0?void 0:l.arrayValue,_=pe(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=y==null?void 0:y.values)===null||u===void 0?void 0:u.length)||0);return _!==0?_:RR(m,y)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ao.mapValue&&o===ao.mapValue)return 0;if(s===ao.mapValue)return 1;if(o===ao.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const p=pe(l[f],u[f]);if(p!==0)return p;const m=No(a[l[f]],c[u[f]]);if(m!==0)return m}return pe(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Y()}}function AR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=vs(t),r=vs(e),i=pe(n.seconds,r.seconds);return i!==0?i:pe(n.nanos,r.nanos)}function RR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=No(n[i],r[i]);if(s)return s}return pe(n.length,r.length)}function ru(t){return Rb(t)}function Rb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=vs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ys(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Rb(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Rb(n.fields[o])}`;return i+"}"}(t.mapValue):Y()}function Qm(t){switch(Oo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=hy(t);return e?16+Qm(e):16;case 5:return 2*t.stringValue.length;case 6:return ys(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Qm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Yo(r.fields,(s,o)=>{i+=s.length+Qm(o)}),i}(t.mapValue);default:throw Y()}}function tl(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cb(t){return!!t&&"integerValue"in t}function wf(t){return!!t&&"arrayValue"in t}function CR(t){return!!t&&"nullValue"in t}function PR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ym(t){return!!t&&"mapValue"in t}function fy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Th(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Yo(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Th(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Th(t.arrayValue.values[n]);return e}return Object.assign({},t)}function f4(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const p4={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function tee(t){return"nullValue"in t?Km:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?tl(Po.empty(),G.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?fy(t)?p4:{mapValue:{}}:Y()}function nee(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?tl(Po.empty(),G.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?p4:"mapValue"in t?fy(t)?{mapValue:{}}:ao:Y()}function OR(t,e){const n=No(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function NR(t,e){const n=No(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this.value=e}static empty(){return new un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ym(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Th(n)}setAll(e){let n=lt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=Th(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ym(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ni(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ym(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Yo(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new un(Th(this.value))}}function m4(t){const e=[];return Yo(t.fields,(n,r)=>{const i=new lt([n]);if(Ym(r)){const s=m4(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new nt(e,0,se.min(),se.min(),se.min(),un.empty(),0)}static newFoundDocument(e,n,r,i){return new nt(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new nt(e,2,n,se.min(),se.min(),un.empty(),0)}static newUnknownDocument(e,n){return new nt(e,3,n,se.min(),se.min(),un.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(e,n){this.position=e,this.inclusive=n}}function DR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=No(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function jR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ni(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n="asc"){this.field=e,this.dir=n}}function ree(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{}class Pe extends g4{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new iee(e,n,r):n==="array-contains"?new aee(e,r):n==="in"?new E4(e,r):n==="not-in"?new lee(e,r):n==="array-contains-any"?new cee(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new see(e,r):new oee(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(No(n,this.value)):n!==null&&Oo(this.value)===Oo(n)&&this.matchesComparison(No(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class qe extends g4{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new qe(e,n)}matches(e){return iu(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function iu(t){return t.op==="and"}function Pb(t){return t.op==="or"}function QI(t){return v4(t)&&iu(t)}function v4(t){for(const e of t.filters)if(e instanceof qe)return!1;return!0}function Ob(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+ru(t.value);if(QI(t))return t.filters.map(e=>Ob(e)).join(",");{const e=t.filters.map(n=>Ob(n)).join(",");return`${t.op}(${e})`}}function y4(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&Ni(r.value,i.value)}(t,e):t instanceof qe?function(r,i){return i instanceof qe&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&y4(o,i.filters[a]),!0):!1}(t,e):void Y()}function _4(t,e){const n=t.filters.concat(e);return qe.create(n,t.op)}function w4(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${ru(n.value)}`}(t):t instanceof qe?function(n){return n.op.toString()+" {"+n.getFilters().map(w4).join(" ,")+"}"}(t):"Filter"}class iee extends Pe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class see extends Pe{constructor(e,n){super(e,"in",n),this.keys=b4("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oee extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=b4("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function b4(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class aee extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return wf(n)&&_f(n.arrayValue,this.value)}}class E4 extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_f(this.value.arrayValue,n)}}class lee extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(_f(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_f(this.value.arrayValue,n)}}class cee extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!wf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_f(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Nb(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uee(t,e,n,r,i,s,o)}function nl(t){const e=K(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ob(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ep(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ru(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ru(r)).join(",")),e.ue=n}return e.ue}function tp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ree(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!y4(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!jR(t.startAt,e.startAt)&&jR(t.endAt,e.endAt)}function Xg(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Zg(t,e){return t.filters.filter(n=>n instanceof Pe&&n.field.isEqual(e))}function LR(t,e,n){let r=Km,i=!0;for(const s of Zg(t,e)){let o=Km,a=!0;switch(s.op){case"<":case"<=":o=tee(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=Km}OR({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];OR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function MR(t,e,n){let r=ao,i=!0;for(const s of Zg(t,e)){let o=ao,a=!0;switch(s.op){case">=":case">":o=nee(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=ao}NR({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];NR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function T4(t,e,n,r,i,s,o,a){return new Ps(t,e,n,r,i,s,o,a)}function Vu(t){return new Ps(t)}function VR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function YI(t){return t.collectionGroup!==null}function Oc(t){const e=K(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new He(lt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new bf(s,r))}),n.has(lt.keyField().canonicalString())||e.ce.push(new bf(lt.keyField(),r))}return e.ce}function Vn(t){const e=K(t);return e.le||(e.le=dee(e,Oc(t))),e.le}function dee(t,e){if(t.limitType==="F")return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new bf(i.field,s)});const n=t.endAt?new Do(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Do(t.startAt.position,t.startAt.inclusive):null;return Nb(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Db(t,e){const n=t.filters.concat([e]);return new Ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ev(t,e,n){return new Ps(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function np(t,e){return tp(Vn(t),Vn(e))&&t.limitType===e.limitType}function I4(t){return`${nl(Vn(t))}|lt:${t.limitType}`}function Ql(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>w4(i)).join(", ")}]`),ep(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ru(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ru(i)).join(",")),`Target(${r})`}(Vn(t))}; limitType=${t.limitType})`}function rp(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):G.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Oc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=DR(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,Oc(r),i)||r.endAt&&!function(o,a,l){const c=DR(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,Oc(r),i))}(t,e)}function S4(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x4(t){return(e,n)=>{let r=!1;for(const i of Oc(t)){const s=hee(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function hee(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?No(l,c):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yo(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return d4(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fee=new Ze(G.comparator);function Kn(){return fee}const k4=new Ze(G.comparator);function Kd(...t){let e=k4;for(const n of t)e=e.insert(n.key,n);return e}function A4(t){let e=k4;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function bi(){return Ih()}function R4(){return Ih()}function Ih(){return new Os(t=>t.toString(),(t,e)=>t.isEqual(e))}const pee=new Ze(G.comparator),mee=new He(G.comparator);function we(...t){let e=mee;for(const n of t)e=e.add(n);return e}const gee=new He(pe);function JI(){return gee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vf(e)?"-0":e}}function C4(t){return{integerValue:""+t}}function P4(t,e){return o4(e)?C4(e):XI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class py{constructor(){this._=void 0}}function vee(t,e,n){return t instanceof su?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&dy(s)&&(s=hy(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof rl?N4(t,e):t instanceof il?D4(t,e):function(i,s){const o=O4(i,s),a=FR(o)+FR(i.Pe);return Cb(o)&&Cb(i.Pe)?C4(a):XI(i.serializer,a)}(t,e)}function yee(t,e,n){return t instanceof rl?N4(t,e):t instanceof il?D4(t,e):n}function O4(t,e){return t instanceof ou?function(r){return Cb(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class su extends py{}class rl extends py{constructor(e){super(),this.elements=e}}function N4(t,e){const n=j4(e);for(const r of t.elements)n.some(i=>Ni(i,r))||n.push(r);return{arrayValue:{values:n}}}class il extends py{constructor(e){super(),this.elements=e}}function D4(t,e){let n=j4(e);for(const r of t.elements)n=n.filter(i=>!Ni(i,r));return{arrayValue:{values:n}}}class ou extends py{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function FR(t){return ot(t.integerValue||t.doubleValue)}function j4(t){return wf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.field=e,this.transform=n}}function _ee(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof rl&&i instanceof rl||r instanceof il&&i instanceof il?nu(r.elements,i.elements,Ni):r instanceof ou&&i instanceof ou?Ni(r.Pe,i.Pe):r instanceof su&&i instanceof su}(t.transform,e.transform)}class wee{constructor(e,n){this.version=e,this.transformResults=n}}class ct{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ct}static exists(e){return new ct(void 0,e)}static updateTime(e){return new ct(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class my{}function L4(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $u(t.key,ct.none()):new Fu(t.key,t.data,ct.none());{const n=t.data,r=un.empty();let i=new He(lt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Ns(t.key,r,new Gn(i.toArray()),ct.none())}}function bee(t,e,n){t instanceof Fu?function(i,s,o){const a=i.value.clone(),l=UR(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Ns?function(i,s,o){if(!Jm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=UR(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(M4(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Sh(t,e,n,r){return t instanceof Fu?function(s,o,a,l){if(!Jm(s.precondition,o))return a;const c=s.value.clone(),u=BR(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ns?function(s,o,a,l){if(!Jm(s.precondition,o))return a;const c=BR(s.fieldTransforms,l,o),u=o.data;return u.setAll(M4(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Jm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Eee(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=O4(r.transform,i||null);s!=null&&(n===null&&(n=un.empty()),n.set(r.field,s))}return n||null}function $R(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&nu(r,i,(s,o)=>_ee(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fu extends my{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Ns extends my{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function M4(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function UR(t,e,n){const r=new Map;re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,yee(o,a,n[i]))}return r}function BR(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,vee(s,o,e))}return r}class $u extends my{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZI extends my{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&bee(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Sh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Sh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=R4();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=L4(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&nu(this.mutations,e.mutations,(n,r)=>$R(n,r))&&nu(this.baseMutations,e.baseMutations,(n,r)=>$R(n,r))}}class tS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length);let i=function(){return pee}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new tS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tee{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,De;function V4(t){switch(t){default:return Y();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function F4(t){if(t===void 0)return Pt("GRPC error has no .code"),$.UNKNOWN;switch(t){case Mt.OK:return $.OK;case Mt.CANCELLED:return $.CANCELLED;case Mt.UNKNOWN:return $.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return $.INTERNAL;case Mt.UNAVAILABLE:return $.UNAVAILABLE;case Mt.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Mt.NOT_FOUND:return $.NOT_FOUND;case Mt.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Mt.ABORTED:return $.ABORTED;case Mt.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Mt.DATA_LOSS:return $.DATA_LOSS;default:return Y()}}(De=Mt||(Mt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iee=new wo([4294967295,4294967295],0);function zR(t){const e=$4().encode(t),n=new HV;return n.update(e),new Uint8Array(n.digest())}function qR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new wo([n,r],0),new wo([i,s],0)]}class rS{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qd(`Invalid padding: ${n}`);if(r<0)throw new Qd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qd(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=wo.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(wo.fromNumber(r)));return i.compare(Iee)===1&&(i=new wo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=zR(e),[r,i]=qR(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new rS(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=zR(e),[r,i]=qR(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,op.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new sp(se.min(),i,new Ze(pe),Kn(),we())}}class op{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new op(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class U4{constructor(e,n){this.targetId=e,this.me=n}}class B4{constructor(e,n,r=xt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class WR{constructor(){this.fe=0,this.ge=HR(),this.pe=xt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Y()}}),new op(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=HR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class See{constructor(e){this.Be=e,this.Le=new Map,this.ke=Kn(),this.qe=im(),this.Qe=im(),this.Ke=new Ze(pe)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(Xg(s))if(r===0){const o=new G(s.path);this.We(n,o,nt.newNoDocument(o,se.min()))}else re(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=ys(r).toUint8Array()}catch(l){if(l instanceof h4)return Oi("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new rS(o,i,s)}catch(l){return Oi(l instanceof Qd?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&Xg(a.target)){const l=new G(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,nt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=we();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new sp(e,n,this.Ke,this.ke,r);return this.ke=Kn(),this.qe=im(),this.Qe=im(),this.Ke=new Ze(pe),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new WR,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new He(pe),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new He(pe),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new WR),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function im(){return new Ze(G.comparator)}function HR(){return new Ze(G.comparator)}const xee={asc:"ASCENDING",desc:"DESCENDING"},kee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Aee={and:"AND",or:"OR"};class Ree{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jb(t,e){return t.useProto3Json||ep(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function z4(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Cee(t,e){return au(t,e.toTimestamp())}function Nt(t){return re(!!t),se.fromTimestamp(function(n){const r=vs(n);return new dt(r.seconds,r.nanos)}(t))}function iS(t,e){return Lb(t,e).canonicalString()}function Lb(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function q4(t){const e=Ce.fromString(t);return re(eF(e)),e}function Ef(t,e){return iS(t.databaseId,e.path)}function Ai(t,e){const n=q4(e);if(n.get(1)!==t.databaseId.projectId)throw new U($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(G4(n))}function W4(t,e){return iS(t.databaseId,e)}function H4(t){const e=q4(t);return e.length===4?Ce.emptyPath():G4(e)}function Mb(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function G4(t){return re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function GR(t,e,n){return{name:Ef(t,e),fields:n.value.mapValue.fields}}function K4(t,e,n){const r=Ai(t,e.name),i=Nt(e.updateTime),s=e.createTime?Nt(e.createTime):se.min(),o=new un({mapValue:{fields:e.fields}}),a=nt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Pee(t,e){return"found"in e?function(r,i){re(!!i.found),i.found.name,i.found.updateTime;const s=Ai(r,i.found.name),o=Nt(i.found.updateTime),a=i.found.createTime?Nt(i.found.createTime):se.min(),l=new un({mapValue:{fields:i.found.fields}});return nt.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){re(!!i.missing),re(!!i.readTime);const s=Ai(r,i.missing),o=Nt(i.readTime);return nt.newNoDocument(s,o)}(t,e):Y()}function Oee(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(re(u===void 0||typeof u=="string"),xt.fromBase64String(u||"")):(re(u===void 0||u instanceof Buffer||u instanceof Uint8Array),xt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?$.UNKNOWN:F4(c.code);return new U(u,c.message||"")}(o);n=new B4(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Ai(t,r.document.name),s=Nt(r.document.updateTime),o=r.document.createTime?Nt(r.document.createTime):se.min(),a=new un({mapValue:{fields:r.document.fields}}),l=nt.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Xm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Ai(t,r.document),s=r.readTime?Nt(r.readTime):se.min(),o=nt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Xm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Ai(t,r.document),s=r.removedTargetIds||[];n=new Xm([],s,i,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Tee(i,s),a=r.targetId;n=new U4(a,o)}}return n}function Tf(t,e){let n;if(e instanceof Fu)n={update:GR(t,e.key,e.value)};else if(e instanceof $u)n={delete:Ef(t,e.key)};else if(e instanceof Ns)n={update:GR(t,e.key,e.data),updateMask:Vee(e.fieldMask)};else{if(!(e instanceof ZI))return Y();n={verify:Ef(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof su)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof rl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof ou)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Cee(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Y()}(t,e.precondition)),n}function Vb(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?ct.updateTime(Nt(s.updateTime)):s.exists!==void 0?ct.exists(s.exists):ct.none()}(e.currentDocument):ct.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME"),l=new su;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new rl(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new il(u)}else"increment"in a?l=new ou(o,a.increment):Y();const c=lt.fromServerFormat(a.fieldPath);return new ip(c,l)}(t,i)):[];if(e.update){e.update.name;const i=Ai(t,e.update.name),s=new un({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Gn(c.map(u=>lt.fromServerFormat(u)))}(e.updateMask);return new Ns(i,s,o,n,r)}return new Fu(i,s,n,r)}if(e.delete){const i=Ai(t,e.delete);return new $u(i,n)}if(e.verify){const i=Ai(t,e.verify);return new ZI(i,n)}return Y()}function Nee(t,e){return t&&t.length>0?(re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Nt(i.updateTime):Nt(s);return o.isEqual(se.min())&&(o=Nt(s)),new wee(o,i.transformResults||[])}(n,e))):[]}function Q4(t,e){return{documents:[W4(t,e.path)]}}function Y4(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=W4(t,i);const s=function(c){if(c.length!==0)return Z4(qe.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Yl(p.field),direction:jee(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=jb(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function J4(t){let e=H4(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(f){const p=X4(f);return p instanceof qe&&QI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(p=>function(y){return new bf(Jl(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(f){let p;return p=typeof f=="object"?f.value:f,ep(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(f){const p=!!f.before,m=f.values||[];return new Do(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Do(m,p)}(n.endAt)),T4(e,i,o,s,a,"F",l,c)}function Dee(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function X4(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Jl(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Jl(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Jl(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Jl(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(Jl(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qe.create(n.compositeFilter.filters.map(r=>X4(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function jee(t){return xee[t]}function Lee(t){return kee[t]}function Mee(t){return Aee[t]}function Yl(t){return{fieldPath:t.canonicalString()}}function Jl(t){return lt.fromServerFormat(t.fieldPath)}function Z4(t){return t instanceof Pe?function(n){if(n.op==="=="){if(PR(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NAN"}};if(CR(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(PR(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NAN"}};if(CR(n.value))return{unaryFilter:{field:Yl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yl(n.field),op:Lee(n.op),value:n.value}}}(t):t instanceof qe?function(n){const r=n.getFilters().map(i=>Z4(i));return r.length===1?r[0]:{compositeFilter:{op:Mee(n.op),filters:r}}}(t):Y()}function Vee(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function eF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n,r,i,s=se.min(),o=se.min(),a=xt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e){this.ht=e}}function Fee(t,e){let n;if(e.document)n=K4(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=G.fromSegments(e.noDocument.path),i=ol(e.noDocument.readTime);n=nt.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Y();{const r=G.fromSegments(e.unknownDocument.path),i=ol(e.unknownDocument.version);n=nt.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new dt(i[0],i[1]);return se.fromTimestamp(s)}(e.readTime)),n}function KR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:tv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Ef(s,o.key),fields:o.data.value.mapValue.fields,updateTime:au(s,o.version.toTimestamp()),createTime:au(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:sl(e.version)};else{if(!e.isUnknownDocument())return Y();r.unknownDocument={path:n.path.toArray(),version:sl(e.version)}}return r}function tv(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function sl(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ol(t){const e=new dt(t.seconds,t.nanoseconds);return se.fromTimestamp(e)}function _a(t,e){const n=(e.baseMutations||[]).map(s=>Vb(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Vb(t.ht,s)),i=dt.fromMillis(e.localWriteTimeMs);return new eS(e.batchId,i,n,r)}function Yd(t){const e=ol(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?ol(t.lastLimboFreeSnapshotVersion):se.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return re(s.documents.length===1),Vn(Vu(H4(s.documents[0])))}(t.query):function(s){return Vn(J4(s))}(t.query),new Xi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,xt.fromBase64String(t.resumeToken))}function nF(t,e){const n=sl(e.snapshotVersion),r=sl(e.lastLimboFreeSnapshotVersion);let i;i=Xg(e.target)?Q4(t.ht,e.target):Y4(t.ht,e.target).ct;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:nl(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function sS(t){const e=J4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?ev(e,e.limit,"L"):e}function uw(t,e){return new nS(e.largestBatchId,Vb(t.ht,e.overlayMutation))}function QR(t,e){const n=e.path.lastSegment();return[t,An(e.path.popLast()),n]}function YR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:sl(r.readTime),documentKey:An(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $ee{getBundleMetadata(e,n){return JR(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:ol(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return JR(e).put(function(i){return{bundleId:i.id,createTime:sl(Nt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return XR(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:sS(s.bundledQuery),readTime:ol(s.readTime)}}(r)})}saveNamedQuery(e,n){return XR(e).put(function(i){return{name:i.name,readTime:sl(Nt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function JR(t){return Qt(t,"bundles")}function XR(t){return Qt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gy{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new gy(e,r)}getOverlay(e,n){return kd(e).get(QR(this.userId,n)).next(r=>r?uw(this.serializer,r):null)}getOverlays(e,n){const r=bi();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new nS(n,o);i.push(this.Tt(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(An(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(kd(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=bi(),s=An(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return kd(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=uw(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=bi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return kd(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const f=uw(this.serializer,c);s.size()<i||f.largestBatchId===o?(s.set(f.getKey(),f),o=f.largestBatchId):u.done()}).next(()=>s)}Tt(e,n){return kd(e).put(function(i,s,o){const[a,l,c]=QR(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Tf(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function kd(t){return Qt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uee{It(e){return Qt(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?xt.fromUint8Array(r):xt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.It(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(){}dt(e,n){this.Et(e,n),n.At()}Et(e,n){if("nullValue"in e)this.Rt(n,5);else if("booleanValue"in e)this.Rt(n,10),n.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(n,15),n.Vt(ot(e.integerValue));else if("doubleValue"in e){const r=ot(e.doubleValue);isNaN(r)?this.Rt(n,13):(this.Rt(n,15),vf(r)?n.Vt(0):n.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(n,20),typeof r=="string"&&(r=vs(r)),n.ft(`${r.seconds||""}`),n.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,n),this.yt(n);else if("bytesValue"in e)this.Rt(n,30),n.wt(ys(e.bytesValue)),this.yt(n);else if("referenceValue"in e)this.St(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(n,45),n.Vt(r.latitude||0),n.Vt(r.longitude||0)}else"mapValue"in e?f4(e)?this.Rt(n,Number.MAX_SAFE_INTEGER):fy(e)?this.bt(e.mapValue,n):(this.Dt(e.mapValue,n),this.yt(n)):"arrayValue"in e?(this.vt(e.arrayValue,n),this.yt(n)):Y()}gt(e,n){this.Rt(n,25),this.Ct(e,n)}Ct(e,n){n.ft(e)}Dt(e,n){const r=e.fields||{};this.Rt(n,55);for(const i of Object.keys(r))this.gt(i,n),this.Et(r[i],n)}bt(e,n){var r,i;const s=e.fields||{};this.Rt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(n,15),n.Vt(ot(a)),this.gt(o,n),this.Et(s[o],n)}vt(e,n){const r=e.values||[];this.Rt(n,50);for(const i of r)this.Et(i,n)}St(e,n){this.Rt(n,37),G.fromName(e).path.forEach(r=>{this.Rt(n,60),this.Ct(r,n)})}Rt(e,n){e.Vt(n)}yt(e){e.Vt(2)}}wa.Ft=new wa;function Bee(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function ZR(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=Bee(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class zee{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.xt(r.value),r=n.next();this.Ot()}Nt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Bt(r.value),r=n.next();this.Lt()}kt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=n.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}qt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Bt(r);else if(r<2048)this.Bt(960|r>>>6),this.Bt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Bt(480|r>>>12),this.Bt(128|63&r>>>6),this.Bt(128|63&r);else{const i=n.codePointAt(0);this.Bt(240|i>>>18),this.Bt(128|63&i>>>12),this.Bt(128|63&i>>>6),this.Bt(128|63&i)}}this.Lt()}Qt(e){const n=this.Kt(e),r=ZR(n);this.$t(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Ut(e){const n=this.Kt(e),r=ZR(n);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}xt(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(n)}Bt(e){const n=255&e;n===0?(this.jt(0),this.jt(255)):n===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Lt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class qee{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class Wee{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Ad{constructor(){this.Jt=new zee,this.Yt=new qee(this.Jt),this.Zt=new Wee(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}en(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ba(this.indexId,this.documentKey,this.arrayValue,r)}}function zs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=eC(t.arrayValue,e.arrayValue),n!==0?n:(n=eC(t.directionalValue,e.directionalValue),n!==0?n:G.comparator(t.documentKey,e.documentKey)))}function eC(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.tn=new He((n,r)=>lt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(re(e.collectionGroup===this.collectionId),this.sn)return!1;const n=kb(e);if(n!==void 0&&!this._n(n))return!1;const r=fa(e);let i=new Set,s=0,o=0;for(;s<r.length&&this._n(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn.size>0){const a=this.tn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.an(a,l)||!this.un(this.nn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.nn.length||!this.un(this.nn[o++],a))return!1}return!0}cn(){if(this.sn)return null;let e=new He(lt.comparator);const n=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Hm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Hm(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Hm(r.field,r.dir==="asc"?0:1)));return new Jg(Jg.UNKNOWN_ID,this.collectionId,n,gf.empty())}_n(e){for(const n of this.rn)if(this.an(n,e))return!0;return!1}an(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}un(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(t){var e,n;if(re(t instanceof Pe||t instanceof qe),t instanceof Pe){if(t instanceof E4){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Pe.create(t.field,"==",s)))||[];return qe.create(i,"or")}return t}const r=t.filters.map(i=>rF(i));return qe.create(r,t.op)}function Hee(t){if(t.getFilters().length===0)return[];const e=Ub(rF(t));return re(iF(e)),Fb(e)||$b(e)?[e]:e.getFilters()}function Fb(t){return t instanceof Pe}function $b(t){return t instanceof qe&&QI(t)}function iF(t){return Fb(t)||$b(t)||function(n){if(n instanceof qe&&Pb(n)){for(const r of n.getFilters())if(!Fb(r)&&!$b(r))return!1;return!0}return!1}(t)}function Ub(t){if(re(t instanceof Pe||t instanceof qe),t instanceof Pe)return t;if(t.filters.length===1)return Ub(t.filters[0]);const e=t.filters.map(r=>Ub(r));let n=qe.create(e,t.op);return n=nv(n),iF(n)?n:(re(n instanceof qe),re(iu(n)),re(n.filters.length>1),n.filters.reduce((r,i)=>oS(r,i)))}function oS(t,e){let n;return re(t instanceof Pe||t instanceof qe),re(e instanceof Pe||e instanceof qe),n=t instanceof Pe?e instanceof Pe?function(i,s){return qe.create([i,s],"and")}(t,e):nC(t,e):e instanceof Pe?nC(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0),iu(i)&&iu(s))return _4(i,s.getFilters());const o=Pb(i)?i:s,a=Pb(i)?s:i,l=o.filters.map(c=>oS(c,a));return qe.create(l,"or")}(t,e),nv(n)}function nC(t,e){if(iu(e))return _4(e,t.getFilters());{const n=e.filters.map(r=>oS(t,r));return qe.create(n,"or")}}function nv(t){if(re(t instanceof Pe||t instanceof qe),t instanceof Pe)return t;const e=t.getFilters();if(e.length===1)return nv(e[0]);if(v4(t))return t;const n=e.map(i=>nv(i)),r=[];return n.forEach(i=>{i instanceof Pe?r.push(i):i instanceof qe&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:qe.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gee{constructor(){this.ln=new aS}addToCollectionParentIndex(e,n){return this.ln.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(yr.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class aS{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new He(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new He(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm=new Uint8Array(0);class Kee{constructor(e,n){this.databaseId=n,this.hn=new aS,this.Pn=new Os(r=>nl(r),(r,i)=>tp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.hn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.hn.add(n)});const s={collectionId:r,parent:An(i)};return rC(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[e4(n),""],!1,!0);return rC(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(wi(o.parent))}return r})}addFieldIndex(e,n){const r=Rd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=Ll(e);return s.next(a=>{o.put(YR(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=Rd(e),i=Ll(e),s=jl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=Rd(e),r=jl(e),i=Ll(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.Tn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new tC(r).cn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=jl(e);let i=!0;const s=new Map;return M.forEach(this.Tn(n),o=>this.In(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=we();const a=[];return M.forEach(s,(l,c)=>{B("IndexedDbIndexManager",`Using index ${function(T){return`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(R=>`${R.fieldPath}:${R.kind}`).join(",")}`}(l)} to execute ${nl(n)}`);const u=function(T,R){const D=kb(R);if(D===void 0)return null;for(const O of Zg(T,D.fieldPath))switch(O.op){case"array-contains-any":return O.value.arrayValue.values||[];case"array-contains":return[O.value]}return null}(c,l),f=function(T,R){const D=new Map;for(const O of fa(R))for(const x of Zg(T,O.fieldPath))switch(x.op){case"==":case"in":D.set(O.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return D.set(O.fieldPath.canonicalString(),x.value),Array.from(D.values())}return null}(c,l),p=function(T,R){const D=[];let O=!0;for(const x of fa(R)){const S=x.kind===0?LR(T,x.fieldPath,T.startAt):MR(T,x.fieldPath,T.startAt);D.push(S.value),O&&(O=S.inclusive)}return new Do(D,O)}(c,l),m=function(T,R){const D=[];let O=!0;for(const x of fa(R)){const S=x.kind===0?MR(T,x.fieldPath,T.endAt):LR(T,x.fieldPath,T.endAt);D.push(S.value),O&&(O=S.inclusive)}return new Do(D,O)}(c,l),y=this.dn(l,c,p),_=this.dn(l,c,m),v=this.En(l,c,f),E=this.An(l.indexId,u,y,p.inclusive,_,m.inclusive,v);return M.forEach(E,w=>r.G(w,n.limit).next(T=>{T.forEach(R=>{const D=G.fromSegments(R.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return M.resolve(null)})}Tn(e){let n=this.Pn.get(e);return n||(e.filters.length===0?n=[e]:n=Hee(qe.create(e.filters,"and")).map(r=>Nb(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,n),n)}An(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let f=0;f<l;++f){const p=n?this.Rn(n[f/c]):sm,m=this.Vn(e,p,r[f%c],i),y=this.mn(e,p,s[f%c],o),_=a.map(v=>this.Vn(e,p,v,!0));u.push(...this.createRange(m,y,_))}return u}Vn(e,n,r,i){const s=new ba(e,G.empty(),n,r);return i?s:s.en()}mn(e,n,r,i){const s=new ba(e,G.empty(),n,r);return i?s.en():s}In(e,n){const r=new tC(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.on(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Tn(n);return M.forEach(i,s=>this.In(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new He(lt.comparator),u=!1;for(const f of l.filters)for(const p of f.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?u=!0:c=c.add(p.field));for(const f of l.orderBy)f.field.isKeyField()||(c=c.add(f.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}fn(e,n){const r=new Ad;for(const i of fa(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Xt(i.kind);wa.Ft.dt(s,o)}return r.Ht()}Rn(e){const n=new Ad;return wa.Ft.dt(e,n.Xt(0)),n.Ht()}gn(e,n){const r=new Ad;return wa.Ft.dt(tl(this.databaseId,n),r.Xt(function(s){const o=fa(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ht()}En(e,n,r){if(r===null)return[];let i=[];i.push(new Ad);let s=0;for(const o of fa(e)){const a=r[s++];for(const l of i)if(this.pn(n,o.fieldPath)&&wf(a))i=this.yn(i,o,a);else{const c=l.Xt(o.kind);wa.Ft.dt(a,c)}}return this.wn(i)}dn(e,n,r){return this.En(e,n,r.position)}wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ht();return n}yn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Ad;l.seed(a.Ht()),wa.Ft.dt(o,l.Xt(n.kind)),s.push(l)}return s}pn(e,n){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Rd(e),i=Ll(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,f){const p=f?new gf(f.sequenceNumber,new yr(ol(f.readTime),new G(wi(f.documentKey)),f.largestBatchId)):gf.empty(),m=u.fields.map(([y,_])=>new Hm(lt.fromServerFormat(y),_));return new Jg(u.indexId,u.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:pe(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=Rd(e),s=Ll(e);return this.Sn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(YR(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.bn(e,i,l).next(c=>{const u=this.Dn(s,l);return c.isEqual(u)?M.resolve():this.vn(e,s,l,c,u)}))))})}Cn(e,n,r,i){return jl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Fn(e,n,r,i){return jl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}bn(e,n,r){const i=jl(e);let s=new He(zs);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{s=s.add(new ba(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Dn(e,n){let r=new He(zs);const i=this.fn(n,e);if(i==null)return r;const s=kb(n);if(s!=null){const o=e.data.field(s.fieldPath);if(wf(o))for(const a of o.arrayValue.values||[])r=r.add(new ba(n.indexId,e.key,this.Rn(a),i))}else r=r.add(new ba(n.indexId,e.key,sm,i));return r}vn(e,n,r,i,s){B("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,f,p){const m=l.getIterator(),y=c.getIterator();let _=Dl(m),v=Dl(y);for(;_||v;){let E=!1,w=!1;if(_&&v){const T=u(_,v);T<0?w=!0:T>0&&(E=!0)}else _!=null?w=!0:E=!0;E?(f(v),v=Dl(y)):w?(p(_),_=Dl(m)):(_=Dl(m),v=Dl(y))}}(i,s,zs,a=>{o.push(this.Cn(e,n,r,a))},a=>{o.push(this.Fn(e,n,r,a))}),M.waitFor(o)}Sn(e){let n=1;return Ll(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>zs(o,a)).filter((o,a,l)=>!a||zs(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=zs(o,e),l=zs(o,n);if(a===0)i[0]=e.en();else if(a>0&&l<0)i.push(o),i.push(o.en());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Mn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,sm,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,sm,[]];s.push(IDBKeyRange.bound(a,l))}return s}Mn(e,n){return zs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(iC)}getMinOffset(e,n){return M.mapArray(this.Tn(n),r=>this.In(e,r).next(i=>i||Y())).next(iC)}}function rC(t){return Qt(t,"collectionParents")}function jl(t){return Qt(t,"indexEntries")}function Rd(t){return Qt(t,"indexConfiguration")}function Ll(t){return Qt(t,"indexState")}function iC(t){re(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;HI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new yr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Sn{static withCacheSize(e){return new Sn(e,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(u,f,p)=>(a++,p.delete()));s.push(l.next(()=>{re(a===1)}));const c=[];for(const u of n.mutations){const f=a4(e,u.key.path,n.batchId);s.push(i.delete(f)),c.push(u.key)}return M.waitFor(s).next(()=>c)}function rv(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Y();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(41943040,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);class vy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.xn={}}static Pt(e,n,r,i){re(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new vy(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Xl(e),o=qs(e);return o.add({}).next(a=>{re(typeof a=="number");const l=new eS(a,n,r,i),c=function(m,y,_){const v=_.baseMutations.map(w=>Tf(m.ht,w)),E=_.mutations.map(w=>Tf(m.ht,w));return{userId:y,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:v,mutations:E}}(this.serializer,this.userId,l),u=[];let f=new He((p,m)=>pe(p.canonicalString(),m.canonicalString()));for(const p of i){const m=a4(this.userId,p.key.path,a);f=f.add(p.key.path.popLast()),u.push(o.put(c)),u.push(s.put(m,DZ))}return f.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.xn[a]=l.keys()}),M.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return qs(e).get(n).next(r=>r?(re(r.userId===this.userId),_a(this.serializer,r)):null)}On(e,n){return this.xn[n]?M.resolve(this.xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return qs(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(re(a.batchId>=r),s=_a(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qs(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qs(e).U("userMutationsIndex",n).next(r=>r.map(i=>_a(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Gm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Xl(e).J({range:i},(o,a,l)=>{const[c,u,f]=o,p=wi(u);if(c===this.userId&&n.path.isEqual(p))return qs(e).get(f).next(m=>{if(!m)throw Y();re(m.userId===this.userId),s.push(_a(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(pe);const i=[];return n.forEach(s=>{const o=Gm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Xl(e).J({range:a},(c,u,f)=>{const[p,m,y]=c,_=wi(m);p===this.userId&&s.path.isEqual(_)?r=r.add(y):f.done()});i.push(l)}),M.waitFor(i).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=Gm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new He(pe);return Xl(e).J({range:o},(l,c,u)=>{const[f,p,m]=l,y=wi(p);f===this.userId&&r.isPrefixOf(y)?y.length===i&&(a=a.add(m)):u.done()}).next(()=>this.Nn(e,a))}Nn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(qs(e).get(s).next(o=>{if(o===null)throw Y();re(o.userId===this.userId),r.push(_a(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return sF(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Bn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Bn(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Xl(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=wi(s[1]);i.push(l)}else a.done()}).next(()=>{re(i.length===0)})})}containsKey(e,n){return oF(e,this.userId,n)}Ln(e){return aF(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function oF(t,e,n){const r=Gm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Xl(t).J({range:s,H:!0},(a,l,c)=>{const[u,f,p]=a;u===e&&f===i&&(o=!0),c.done()}).next(()=>o)}function qs(t){return Qt(t,"mutations")}function Xl(t){return Qt(t,"documentMutations")}function aF(t){return Qt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new al(0)}static Qn(){return new al(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qee{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Kn(e).next(n=>{const r=new al(n.highestTargetId);return n.highestTargetId=r.next(),this.$n(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(n=>se.fromTimestamp(new dt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.$n(e,i)))}addTargetData(e,n){return this.Un(e,n).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(n,r),this.$n(e,r))))}updateTargetData(e,n){return this.Un(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>Ml(e).delete(n.targetId)).next(()=>this.Kn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return Ml(e).J((o,a)=>{const l=Yd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return Ml(e).J((r,i)=>{const s=Yd(i);n(s)})}Kn(e){return oC(e).get("targetGlobalKey").next(n=>(re(n!==null),n))}$n(e,n){return oC(e).put("targetGlobalKey",n)}Un(e,n){return Ml(e).put(nF(this.serializer,n))}Wn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=nl(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return Ml(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=Yd(a);tp(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=eo(e);return n.forEach(o=>{const a=An(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=eo(e);return M.forEach(n,s=>{const o=An(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=eo(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=eo(e);let s=we();return i.J({range:r,H:!0},(o,a,l)=>{const c=wi(o[1]),u=new G(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=An(n.path),i=IDBKeyRange.bound([r],[e4(r)],!1,!0);let s=0;return eo(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ut(e,n){return Ml(e).get(n).next(r=>r?Yd(r):null)}}function Ml(t){return Qt(t,"targets")}function oC(t){return Qt(t,"targetGlobal")}function eo(t){return Qt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC([t,e],[n,r]){const i=pe(t,n);return i===0?pe(e,r):i}class Yee{constructor(e){this.Gn=e,this.buffer=new He(aC),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();aC(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class lF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){B("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Qo(n)?B("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Ko(n)}await this.Yn(3e5)})}}class Jee{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Hn.oe);const r=new Yee(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(sC)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),sC):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Kl()<=xe.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function cF(t,e){return new Jee(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xee{constructor(e,n){this.db=e,this.garbageCollector=cF(this,n)}Xn(e){const n=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}er(e,n){return this.rr(e,(r,i)=>n(i))}addReference(e,n,r){return om(e,r)}removeReference(e,n,r){return om(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return om(e,n)}ir(e,n){return function(i,s){let o=!1;return aF(i).Y(a=>oF(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.rr(e,(o,a)=>{if(a<=n){const l=this.ir(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,se.min()),eo(e).delete(function(f){return[0,An(f.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return om(e,n)}rr(e,n){const r=eo(e);let i,s=Hn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Hn.oe&&n(new G(wi(i)),s),s=c,i=l):s=Hn.oe}).next(()=>{s!==Hn.oe&&n(new G(wi(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function om(t,e){return eo(t).put(function(r,i){return{targetId:0,path:An(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{constructor(){this.changes=new Os(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return oa(e).put(r)}removeEntry(e,n,r){return oa(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],tv(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.sr(e,r)))}getEntry(e,n){let r=nt.newInvalidDocument(n);return oa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cd(n))},(i,s)=>{r=this._r(n,s)}).next(()=>r)}ar(e,n){let r={size:0,document:nt.newInvalidDocument(n)};return oa(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Cd(n))},(i,s)=>{r={document:this._r(n,s),size:rv(s)}}).next(()=>r)}getEntries(e,n){let r=Kn();return this.ur(e,n,(i,s)=>{const o=this._r(i,s);r=r.insert(i,o)}).next(()=>r)}cr(e,n){let r=Kn(),i=new Ze(G.comparator);return this.ur(e,n,(s,o)=>{const a=this._r(s,o);r=r.insert(s,a),i=i.insert(s,rv(o))}).next(()=>({documents:r,lr:i}))}ur(e,n,r){if(n.isEmpty())return M.resolve();let i=new He(uC);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Cd(i.first()),Cd(i.last())),o=i.getIterator();let a=o.getNext();return oa(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const f=G.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&uC(a,f)<0;)r(a,null),a=o.getNext();a&&a.isEqual(f)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(Cd(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),tv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return oa(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=Kn();for(const f of c){const p=this._r(G.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);p.isFoundDocument()&&(rp(n,p)||i.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=Kn();const o=cC(n,r),a=cC(n,yr.max());return oa(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const f=this._r(G.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(f.key,f),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new ete(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return lC(e).get("remoteDocumentGlobalKey").next(n=>(re(!!n),n))}sr(e,n){return lC(e).put("remoteDocumentGlobalKey",n)}_r(e,n){if(n){const r=Fee(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(se.min())))return r}return nt.newInvalidDocument(e)}}function dF(t){return new Zee(t)}class ete extends uF{constructor(e,n){super(),this.hr=e,this.trackRemovals=n,this.Pr=new Os(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new He((s,o)=>pe(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Pr.get(s);if(n.push(this.hr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=KR(this.hr.serializer,o);i=i.add(s.path.popLast());const c=rv(l);r+=c-a.size,n.push(this.hr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=KR(this.hr.serializer,o.convertToNoDocument(se.min()));n.push(this.hr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.hr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.hr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.hr.ar(e,n).next(r=>(this.Pr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.hr.cr(e,n).next(({documents:r,lr:i})=>(i.forEach((s,o)=>{this.Pr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function lC(t){return Qt(t,"remoteDocumentGlobal")}function oa(t){return Qt(t,"remoteDocumentsV14")}function Cd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function cC(t,e){const n=e.documentKey.path.toArray();return[t,tv(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function uC(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=pe(n[s],r[s]),i)return i;return i=pe(n.length,r.length),i||(i=pe(n[n.length-2],r[r.length-2]),i||pe(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tte{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Sh(r.mutation,i,Gn.empty(),dt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=bi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Kd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Kn();const o=Ih(),a=function(){return Ih()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Ns)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Sh(u.mutation,c,u.mutation.getFieldMask(),dt.now())):o.set(c.key,Gn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var f;return a.set(c,new tte(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Ih();let i=new Ze((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Gn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const f=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=R4();u.forEach(p=>{if(!s.has(p)){const m=L4(n.get(p),r.get(p));m!==null&&f.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):YI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(bi());let a=-1,l=s;return o.next(c=>M.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?M.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,we())).next(u=>({batchId:a,changes:A4(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=Kd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Kd();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const c=function(f,p){return new Ps(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,nt.newInvalidDocument(u)))});let a=Kd();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Sh(u.mutation,c,Gn.empty(),dt.now()),rp(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nte{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return M.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Nt(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:sS(i.bundledQuery),readTime:Nt(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(){this.overlays=new Ze(G.comparator),this.dr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=bi();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=bi(),s=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ze((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=bi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=bi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return M.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new nS(n,r));let s=this.dr.get(n);s===void 0&&(s=we(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ite{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lS{constructor(){this.Er=new He(Jt.Ar),this.Rr=new He(Jt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const r=new Jt(e,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new Jt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new G(new Ce([])),r=new Jt(n,e),i=new Jt(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new G(new Ce([])),r=new Jt(n,e),i=new Jt(n,e+1);let s=we();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Jt(e,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Jt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return G.comparator(e.key,n.key)||pe(e.br,n.br)}static Vr(e,n){return pe(e.br,n.br)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ste{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new He(Jt.Ar)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eS(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Jt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Jt(n,0),i=new Jt(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new He(pe);return n.forEach(i=>{const s=new Jt(i,0),o=new Jt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),M.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;G.isDocumentKey(s)||(s=s.child(""));const o=new Jt(new G(s),0);let a=new He(pe);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),M.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return M.forEach(n.mutations,i=>{const s=new Jt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,n){const r=new Jt(n,0),i=this.vr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ote{constructor(e){this.Nr=e,this.docs=function(){return new Ze(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():nt.newInvalidDocument(n))}getEntries(e,n){let r=Kn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():nt.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Kn();const o=n.path,a=new G(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||HI(n4(u),r)<=0||(i.has(u.key)||rp(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Y()}Br(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new ate(this)}getSize(e){return M.resolve(this.size)}}class ate extends uF{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lte{constructor(e){this.persistence=e,this.Lr=new Os(n=>nl(n),tp),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.kr=0,this.qr=new lS,this.targetCount=0,this.Qr=al.qn()}forEachTarget(e,n){return this.Lr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),M.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new al(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Un(n),M.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Lr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Hn(0),this.Ur=!1,this.Ur=!0,this.Wr=new ite,this.referenceDelegate=e(this),this.Gr=new lte(this),this.indexManager=new Gee,this.remoteDocumentCache=function(i){return new ote(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new tF(n),this.jr=new nte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new rte,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new ste(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);const i=new cte(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return M.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class cte extends i4{constructor(e){super(),this.currentSequenceNumber=e}}class yy{constructor(e){this.persistence=e,this.Zr=new lS,this.Xr=null}static ei(e){return new yy(e)}get ti(){if(this.Xr)return this.Xr;throw Y()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),M.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.ti,r=>{const i=G.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return M.or([()=>M.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class iv{constructor(e,n){this.persistence=e,this.ri=new Os(r=>An(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=cF(this,n)}static ei(e,n){return new iv(e,n)}Hr(){}Jr(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return M.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,se.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),M.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Qm(e.data.value)),n}ir(e,n,r){return M.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ute{constructor(e){this.serializer=e}O(e,n,r,i){const s=new uy("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SR,{unique:!0}),l.createObjectStore("documentMutations")}(e),dC(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),dC(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:se.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",SR,{unique:!0});const f=c.store("mutations"),p=u.map(m=>f.put(m));return M.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ii(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.si(s)))),r<7&&i>=7&&(o=o.next(()=>this.oi(s))),r<8&&i>=8&&(o=o.next(()=>this._i(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ai(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:HZ});c.createIndex("collectionPathOverlayIndex",GZ,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",KZ,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:jZ});c.createIndex("documentKeyIndex",LZ),c.createIndex("collectionGroupIndex",MZ)}(e)).next(()=>this.ui(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ci(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:BZ}).createIndex("sequenceNumberIndex",zZ,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:qZ}).createIndex("documentKeyIndex",WZ,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}si(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=rv(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{re(l.userId===s.userId);const c=_a(this.serializer,l);return sF(e,s.userId,c).next(()=>{})}))}))}oi(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ce(o),c=function(f){return[0,An(f)]}(l);s.push(n.get(c).next(u=>u?M.resolve():(f=>n.put({targetId:0,path:An(f),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}_i(e,n){e.createObjectStore("collectionParents",{keyPath:UZ});const r=n.store("collectionParents"),i=new aS,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:An(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ce(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=wi(a);return s(u.popLast())}))}ai(e){const n=e.store("targets");return n.J((r,i)=>{const s=Yd(i),o=nF(this.serializer,s);return n.put(o)})}ui(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(f){return f.document?new G(Ce.fromString(f.document.name).popFirst(5)):f.noDocument?G.fromSegments(f.noDocument.path):f.unknownDocument?G.fromSegments(f.unknownDocument.path):Y()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>M.waitFor(i))}ci(e,n){const r=n.store("mutations"),i=dF(this.serializer),s=new cS(yy.ei,this.serializer.ht);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:we();_a(this.serializer,l).keys().forEach(f=>u=u.add(f)),a.set(l.userId,u)}),M.forEach(a,(l,c)=>{const u=new Zt(c),f=gy.Pt(this.serializer,u),p=s.getIndexManager(u),m=vy.Pt(u,this.serializer,p,s.referenceDelegate);return new hF(i,m,f,p).recalculateAndSaveOverlaysForDocumentKeys(new Ab(n,Hn.oe),l).next()})})}}function dC(t){t.createObjectStore("targetDocuments",{keyPath:FZ}).createIndex("documentTargetsIndex",$Z,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",VZ,{unique:!0}),t.createObjectStore("targetGlobal")}const dw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uS{constructor(e,n,r,i,s,o,a,l,c,u,f=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.li=s,this.window=o,this.document=a,this.hi=c,this.Pi=u,this.Ti=f,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.di=null,this.Ei=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=p=>Promise.resolve(),!uS.p())throw new U($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Xee(this,i),this.Vi=n+"main",this.serializer=new tF(l),this.mi=new ki(this.Vi,this.Ti,new ute(this.serializer)),this.Wr=new Uee,this.Gr=new Qee(this.referenceDelegate,this.serializer),this.remoteDocumentCache=dF(this.serializer),this.jr=new $ee,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,u===!1&&Pt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new U($.FAILED_PRECONDITION,dw);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Hn(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>am(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(n=>{n||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(n=>this.isPrimary&&!n?this.vi(e).next(()=>!1):!!n&&this.Ci(e).next(()=>!0))).catch(e=>{if(Qo(e))return B("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return B("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Pd(e).get("owner").next(n=>M.resolve(this.Fi(n)))}Mi(e){return am(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Qt(n,"clientMetadata");return r.U().next(i=>{const s=this.Ni(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.fi)for(const n of e)this.fi.removeItem(this.Bi(n.clientId))}}wi(){this.Ei=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?M.resolve(!0):Pd(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Li(n.ownerId)){if(this.Fi(n)&&this.networkEnabled)return!0;if(!this.Fi(n)){if(!n.allowTabSynchronization)throw new U($.FAILED_PRECONDITION,dw);return!1}}return!(!this.networkEnabled||!this.inForeground)||am(e).U().next(r=>this.Ni(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&B("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ur=!1,this.ki(),this.Ei&&(this.Ei.cancel(),this.Ei=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Ab(e,Hn.oe);return this.vi(n).next(()=>this.Mi(n))}),this.mi.close(),this.Ki()}Ni(e,n){return e.filter(r=>this.Oi(r.updateTimeMs,n)&&!this.Li(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>am(e).U().next(n=>this.Ni(n,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,n){return vy.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Kee(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return gy.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,n,r){B("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?JZ:l===16?YZ:l===15?KI:l===14?u4:l===13?c4:l===12?QZ:l===11?l4:void Y()}(this.Ti);let o;return this.mi.runTransaction(e,i,s,a=>(o=new Ab(a,this.$r?this.$r.next():Hn.oe),n==="readwrite-primary"?this.bi(o).next(l=>!!l||this.Di(o)).next(l=>{if(!l)throw Pt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new U($.FAILED_PRECONDITION,r4);return r(o)}).next(l=>this.Ci(o).next(()=>l)):this.Ui(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ui(e){return Pd(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Li(n.ownerId)&&!this.Fi(n)&&!(this.Pi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new U($.FAILED_PRECONDITION,dw)})}Ci(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pd(e).put("owner",n)}static p(){return ki.p()}vi(e){const n=Pd(e);return n.get("owner").next(r=>this.Fi(r)?(B("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Oi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Pt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.di=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.di),this.inForeground=this.document.visibilityState==="visible")}qi(){this.di&&(this.document.removeEventListener("visibilitychange",this.di),this.di=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const n=/(?:Version|Mobile)\/1[456]/;oM()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Li(e){var n;try{const r=((n=this.fi)===null||n===void 0?void 0:n.getItem(this.Bi(e)))!==null;return B("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Pt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Bi(this.clientId),String(Date.now()))}catch(e){Pt("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Bi(this.clientId))}catch{}}Bi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Pd(t){return Qt(t,"owner")}function am(t){return Qt(t,"clientMetadata")}function dS(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hS{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new hS(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return oM()?8:s4(wt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new dte;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(Kl()<=xe.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Ql(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),M.resolve()):(Kl()<=xe.DEBUG&&B("QueryEngine","Query:",Ql(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(Kl()<=xe.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Ql(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vn(n))):M.resolve())}Xi(e,n){if(VR(n))return M.resolve(null);let r=Vn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=ev(n,null,"F"),r=Vn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,ev(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return VR(n)||i.isEqual(se.min())?M.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?M.resolve(null):(Kl()<=xe.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ql(n)),this.os(e,o,n,t4(i,-1)).next(a=>a))})}rs(e,n){let r=new He(x4(e));return n.forEach((i,s)=>{rp(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return Kl()<=xe.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Ql(n)),this.Zi.getDocumentsMatchingQuery(e,n,yr.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hte{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ze(pe),this.cs=new Os(s=>nl(s),tp),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hF(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function pF(t,e,n,r){return new hte(t,e,n,r)}async function mF(t,e){const n=K(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=we();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function fte(t,e){const n=K(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,p=f.keys();let m=M.resolve();return p.forEach(y=>{m=m.next(()=>u.getEntry(l,y)).next(_=>{const v=c.docVersions.get(y);re(v!==null),_.version.compareTo(v)<0&&(f.applyToRemoteDocument(_,c),_.isValidDocument()&&(_.setReadTime(c.commitVersion),u.addEntry(_)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function gF(t){const e=K(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function pte(t,e){const n=K(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((u,f)=>{const p=i.get(f);if(!p)return;a.push(n.Gr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,u.addedDocuments,f)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(xt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(f,m),function(_,v,E){return _.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,m,u)&&a.push(n.Gr.updateTargetData(s,m))});let l=Kn(),c=we();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(vF(s,o,e.documentUpdates).next(u=>{l=u.Is,c=u.ds})),!r.isEqual(se.min())){const u=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function vF(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Kn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(se.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):B("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,ds:i}})}function mte(t,e){const n=K(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function lu(t,e){const n=K(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Xi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function cu(t,e,n){const r=K(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Qo(o))throw o;B("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function sv(t,e,n){const r=K(t);let i=se.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=K(l),p=f.cs.get(u);return p!==void 0?M.resolve(f.us.get(p)):f.Gr.getTargetData(c,u)}(r,o,Vn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:we())).next(a=>(wF(r,S4(e),a),{documents:a,Es:s})))}function yF(t,e){const n=K(t),r=K(n.Gr),i=n.us.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ut(s,e).next(o=>o?o.target:null))}function _F(t,e){const n=K(t),r=n.ls.get(e)||se.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.hs.getAllFromCollectionGroup(i,e,t4(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(wF(n,e,i),i))}function wF(t,e,n){let r=t.ls.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}async function gte(t,e,n,r){const i=K(t);let s=we(),o=Kn();for(const c of n){const u=e.As(c.metadata.name);c.document&&(s=s.add(u));const f=e.Rs(c);f.setReadTime(e.Vs(c.metadata.readTime)),o=o.insert(u,f)}const a=i.hs.newChangeBuffer({trackRemovals:!0}),l=await lu(i,function(u){return Vn(Vu(Ce.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>vF(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Gr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Gr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Is,u.ds)).next(()=>u.Is)))}async function vte(t,e,n=we()){const r=await lu(t,Vn(sS(e.bundledQuery))),i=K(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Nt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.jr.saveNamedQuery(s,e);const a=r.withResumeToken(xt.EMPTY_BYTE_STRING,o);return i.us=i.us.insert(a.targetId,a),i.Gr.updateTargetData(s,a).next(()=>i.Gr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Gr.addMatchingKeys(s,n,r.targetId)).next(()=>i.jr.saveNamedQuery(s,e))})}function hC(t,e){return`firestore_clients_${t}_${e}`}function fC(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function hw(t,e){return`firestore_targets_${t}_${e}`}class ov{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static fs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new U(i.error.code,i.error.message))),o?new ov(e,n,i.state,s):(Pt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static fs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new U(r.error.code,r.error.message))),s?new xh(e,r.state,i):(Pt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class av{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static fs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=JI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=o4(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new av(e,s):(Pt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class fS{constructor(e,n){this.clientId=e,this.onlineState=n}static fs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new fS(n.clientId,n.onlineState):(Pt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Bb{constructor(){this.activeTargetIds=JI()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fw{constructor(e,n,r,i,s){this.window=e,this.li=n,this.persistenceKey=r,this.ws=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new Ze(pe),this.started=!1,this.vs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Cs=hC(this.persistenceKey,this.ws),this.Fs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new Bb),this.Ms=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ns=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Bs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.ws)continue;const i=this.getItem(hC(this.persistenceKey,r));if(i){const s=av.fs(r,i);s&&(this.Ds=this.Ds.insert(s.clientId,s))}}this.Ls();const n=this.storage.getItem(this.Ns);if(n){const r=this.ks(n);r&&this.qs(r)}for(const r of this.vs)this.bs(r);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let n=!1;return this.Ds.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,n,r){this.Ks(e,n,r),this.$s(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(hw(this.persistenceKey,e));if(i){const s=xh.fs(e,i);s&&(r=s.state)}}return n&&this.Us.ps(e),this.Ls(),r}removeLocalQueryTarget(e){this.Us.ys(e),this.Ls()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hw(this.persistenceKey,e))}updateQueryState(e,n,r){this.Ws(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.$s(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return B("SharedClientState","READ",e,n),n}setItem(e,n){B("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){B("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const n=e;if(n.storageArea===this.storage){if(B("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Cs)return void Pt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ms.test(n.key)){if(n.newValue==null){const r=this.js(n.key);return this.Hs(r,null)}{const r=this.Js(n.key,n.newValue);if(r)return this.Hs(r.clientId,r)}}else if(this.xs.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(this.Os.test(n.key)){if(n.newValue!==null){const r=this.Xs(n.key,n.newValue);if(r)return this.eo(r)}}else if(n.key===this.Ns){if(n.newValue!==null){const r=this.ks(n.newValue);if(r)return this.qs(r)}}else if(n.key===this.Fs){const r=function(s){let o=Hn.oe;if(s!=null)try{const a=JSON.parse(s);re(typeof a=="number"),o=a}catch(a){Pt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Hn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Bs){const r=this.no(n.newValue);await Promise.all(r.map(i=>this.syncEngine.ro(i)))}}}else this.vs.push(n)})}}get Us(){return this.Ds.get(this.ws)}Ls(){this.setItem(this.Cs,this.Us.gs())}Ks(e,n,r){const i=new ov(this.currentUser,e,n,r),s=fC(this.persistenceKey,this.currentUser,e);this.setItem(s,i.gs())}$s(e){const n=fC(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Gs(e){const n={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(n))}Ws(e,n,r){const i=hw(this.persistenceKey,e),s=new xh(e,n,r);this.setItem(i,s.gs())}zs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Bs,n)}js(e){const n=this.Ms.exec(e);return n?n[1]:null}Js(e,n){const r=this.js(e);return av.fs(r,n)}Ys(e,n){const r=this.xs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return ov.fs(new Zt(s),i,n)}Xs(e,n){const r=this.Os.exec(e),i=Number(r[1]);return xh.fs(i,n)}ks(e){return fS.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);B("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,n){const r=n?this.Ds.insert(e,n):this.Ds.remove(e),i=this.Qs(this.Ds),s=this.Qs(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.oo(o,a).then(()=>{this.Ds=r})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let n=JI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class bF{constructor(){this._o=new Bb,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new Bb,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yte{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){B("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){B("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lm=null;function pw(){return lm===null?lm=function(){return 268435456+Math.round(2147483648*Math.random())}():lm++,"0x"+lm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _te={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wte{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn="WebChannelConnection";class bte extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=pw(),l=this.No(n,r.toUriEncodedString());B("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(c,s,o),this.Lo(n,l,c,i).then(u=>(B("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Oi("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Mu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=_te[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,r,i){const s=pw();return new Promise((o,a)=>{const l=new GV;l.setWithCredentials(!0),l.listenOnce(KV.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Wm.NO_ERROR:const u=l.getResponseJson();B(Tn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Wm.TIMEOUT:B(Tn,`RPC '${e}' ${s} timed out`),a(new U($.DEADLINE_EXCEEDED,"Request time out"));break;case Wm.HTTP_ERROR:const f=l.getStatus();if(B(Tn,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const y=function(v){const E=v.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(E)>=0?E:$.UNKNOWN}(m.status);a(new U(y,m.message))}else a(new U($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new U($.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{B(Tn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);B(Tn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=pw(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=JV(),a=YV(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");B(Tn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const f=o.createWebChannel(u,l);let p=!1,m=!1;const y=new wte({Eo:v=>{m?B(Tn,`Not sending because RPC '${e}' stream ${i} is closed:`,v):(p||(B(Tn,`Opening RPC '${e}' stream ${i} transport.`),f.open(),p=!0),B(Tn,`RPC '${e}' stream ${i} sending:`,v),f.send(v))},Ao:()=>f.close()}),_=(v,E,w)=>{v.listen(E,T=>{try{w(T)}catch(R){setTimeout(()=>{throw R},0)}})};return _(f,Gd.EventType.OPEN,()=>{m||(B(Tn,`RPC '${e}' stream ${i} transport opened.`),y.So())}),_(f,Gd.EventType.CLOSE,()=>{m||(m=!0,B(Tn,`RPC '${e}' stream ${i} transport closed`),y.Do())}),_(f,Gd.EventType.ERROR,v=>{m||(m=!0,Oi(Tn,`RPC '${e}' stream ${i} transport errored:`,v),y.Do(new U($.UNAVAILABLE,"The operation could not be completed")))}),_(f,Gd.EventType.MESSAGE,v=>{var E;if(!m){const w=v.data[0];re(!!w);const T=w,R=(T==null?void 0:T.error)||((E=T[0])===null||E===void 0?void 0:E.error);if(R){B(Tn,`RPC '${e}' stream ${i} received error:`,R);const D=R.status;let O=function(A){const P=Mt[A];if(P!==void 0)return F4(P)}(D),x=R.message;O===void 0&&(O=$.INTERNAL,x="Unknown error status: "+D+" with message "+R.message),m=!0,y.Do(new U(O,x)),f.close()}else B(Tn,`RPC '${e}' stream ${i} received:`,w),y.vo(w)}}),_(a,QV.STAT_EVENT,v=>{v.stat===xb.PROXY?B(Tn,`RPC '${e}' stream ${i} detected buffering proxy`):v.stat===xb.NOPROXY&&B(Tn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.bo()},0),y}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EF(){return typeof window<"u"?window:null}function Zm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(t){return new Ree(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new pS(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(Pt(n.toString()),Pt("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new U($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return B("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(B("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ete extends TF{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=Oee(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?Nt(o.readTime):se.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=Mb(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Xg(l)?{documents:Q4(s,l)}:{query:Y4(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=z4(s,o.resumeToken);const c=jb(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=au(s,o.snapshotVersion.toTimestamp());const c=jb(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Dee(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=Mb(this.serializer),n.removeTarget=e,this.c_(n)}}class Tte extends TF{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return re(!!e.streamToken),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=Nee(e.writeResults,e.commitTime),r=Nt(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=Mb(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Tf(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new U($.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Lb(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U($.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Lb(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U($.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Ste{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Pt(n),this.C_=!1):B("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xte{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{Jo(this)&&(B("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=K(l);c.k_.add(4),await Uu(c),c.K_.set("Unknown"),c.k_.delete(4),await lp(c)}(this))})}),this.K_=new Ste(r,i)}}async function lp(t){if(Jo(t))for(const e of t.q_)await e(!0)}async function Uu(t){for(const e of t.q_)await e(!1)}function _y(t,e){const n=K(t);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),vS(n)?gS(n):zu(n).s_()&&mS(n,e))}function uu(t,e){const n=K(t),r=zu(n);n.L_.delete(e),r.s_()&&IF(n,e),n.L_.size===0&&(r.s_()?r.a_():Jo(n)&&n.K_.set("Unknown"))}function mS(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}zu(t).V_(e)}function IF(t,e){t.U_.xe(e),zu(t).m_(e)}function gS(t){t.U_=new See({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.L_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),zu(t).start(),t.K_.F_()}function vS(t){return Jo(t)&&!zu(t).i_()&&t.L_.size>0}function Jo(t){return K(t).k_.size===0}function SF(t){t.U_=void 0}async function kte(t){t.K_.set("Online")}async function Ate(t){t.L_.forEach((e,n)=>{mS(t,e)})}async function Rte(t,e){SF(t),vS(t)?(t.K_.O_(e),gS(t)):t.K_.set("Unknown")}async function Cte(t,e,n){if(t.K_.set("Online"),e instanceof B4&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){B("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await lv(t,r)}else if(e instanceof Xm?t.U_.$e(e):e instanceof U4?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(se.min()))try{const r=await gF(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.L_.get(c);u&&s.L_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.L_.get(l);if(!u)return;s.L_.set(l,u.withResumeToken(xt.EMPTY_BYTE_STRING,u.snapshotVersion)),IF(s,l);const f=new Xi(u.target,l,c,u.sequenceNumber);mS(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){B("RemoteStore","Failed to raise snapshot:",r),await lv(t,r)}}async function lv(t,e,n){if(!Qo(e))throw e;t.k_.add(1),await Uu(t),t.K_.set("Offline"),n||(n=()=>gF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await lp(t)})}function xF(t,e){return e().catch(n=>lv(t,n,e))}async function Bu(t){const e=K(t),n=jo(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;Pte(e);)try{const i=await mte(e.localStore,r);if(i===null){e.B_.length===0&&n.a_();break}r=i.batchId,Ote(e,i)}catch(i){await lv(e,i)}kF(e)&&AF(e)}function Pte(t){return Jo(t)&&t.B_.length<10}function Ote(t,e){t.B_.push(e);const n=jo(t);n.s_()&&n.f_&&n.g_(e.mutations)}function kF(t){return Jo(t)&&!jo(t).i_()&&t.B_.length>0}function AF(t){jo(t).start()}async function Nte(t){jo(t).w_()}async function Dte(t){const e=jo(t);for(const n of t.B_)e.g_(n.mutations)}async function jte(t,e,n){const r=t.B_.shift(),i=tS.from(r,e,n);await xF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Bu(t)}async function Lte(t,e){e&&jo(t).f_&&await async function(r,i){if(function(o){return V4(o)&&o!==$.ABORTED}(i.code)){const s=r.B_.shift();jo(r).__(),await xF(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Bu(r)}}(t,e),kF(t)&&AF(t)}async function mC(t,e){const n=K(t);n.asyncQueue.verifyOperationInProgress(),B("RemoteStore","RemoteStore received new credentials");const r=Jo(n);n.k_.add(3),await Uu(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await lp(n)}async function zb(t,e){const n=K(t);e?(n.k_.delete(2),await lp(n)):e||(n.k_.add(2),await Uu(n),n.K_.set("Unknown"))}function zu(t){return t.W_||(t.W_=function(n,r,i){const s=K(n);return s.b_(),new Ete(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:kte.bind(null,t),mo:Ate.bind(null,t),po:Rte.bind(null,t),R_:Cte.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),vS(t)?gS(t):t.K_.set("Unknown")):(await t.W_.stop(),SF(t))})),t.W_}function jo(t){return t.G_||(t.G_=function(n,r,i){const s=K(n);return s.b_(),new Tte(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:Nte.bind(null,t),po:Lte.bind(null,t),p_:Dte.bind(null,t),y_:jte.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await Bu(t)):(await t.G_.stop(),t.B_.length>0&&(B("RemoteStore",`Stopping write stream with ${t.B_.length} pending writes`),t.B_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new pn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new yS(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qu(t,e){if(Pt("AsyncQueue",`${e}: ${t}`),Qo(t))return new U($.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{static emptySet(e){return new Nc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Kd(),this.sortedSet=new Ze(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Nc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Nc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.z_=new Ze(G.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):Y():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class du{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new du(e,n,Nc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&np(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mte{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class Vte{constructor(){this.queries=vC(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=K(n),s=i.queries;i.queries=vC(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new U($.ABORTED,"Firestore shutting down"))}}function vC(){return new Os(t=>I4(t),np)}async function _S(t,e){const n=K(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new Mte,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=qu(o,`Initialization of query '${Ql(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&bS(n)}async function wS(t,e){const n=K(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Fte(t,e){const n=K(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&bS(n)}function $te(t,e,n){const r=K(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function bS(t){t.X_.forEach(e=>{e.next()})}var qb,yC;(yC=qb||(qb={})).na="default",yC.Cache="cache";class ES{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new du(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=du.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==qb.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ute{constructor(e,n){this.ca=e,this.byteLength=n}la(){return"metadata"in this.ca}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.serializer=e}As(e){return Ai(this.serializer,e)}Rs(e){return e.metadata.exists?K4(this.serializer,e.document,!1):nt.newNoDocument(this.As(e.metadata.name),this.Vs(e.metadata.readTime))}Vs(e){return Nt(e)}}class Bte{constructor(e,n,r){this.ha=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=RF(e)}Pa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ca.namedQuery)this.queries.push(e.ca.namedQuery);else if(e.ca.documentMetadata){this.documents.push({metadata:e.ca.documentMetadata}),e.ca.documentMetadata.exists||++n;const r=Ce.fromString(e.ca.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ca.document&&(this.documents[this.documents.length-1].document=e.ca.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ta(e){const n=new Map,r=new _C(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.As(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||we()).add(s);n.set(o,a)}}return n}async complete(){const e=await gte(this.localStore,new _C(this.serializer),this.documents,this.ha.id),n=this.Ta(this.documents);for(const r of this.queries)await vte(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ia:this.collectionGroups,da:e}}}function RF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.key=e}}class PF{constructor(e){this.key=e}}class OF{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=we(),this.mutatedKeys=we(),this.Va=x4(e),this.ma=new Nc(this.Va)}get fa(){return this.Ea}ga(e,n){const r=n?n.pa:new gC,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,f)=>{const p=i.get(u),m=rp(this.query,f)?f:null,y=!!p&&this.mutatedKeys.has(p.key),_=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let v=!1;p&&m?p.data.isEqual(m.data)?y!==_&&(r.track({type:3,doc:m}),v=!0):this.ya(p,m)||(r.track({type:2,doc:m}),v=!0,(l&&this.Va(m,l)>0||c&&this.Va(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),v=!0):p&&!m&&(r.track({type:1,doc:p}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),s=_?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,f)=>function(m,y){const _=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return _(m)-_(y)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new du(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new gC,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=we(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new PF(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new CF(r))}),n}va(e){this.Ea=e.Es,this.Ra=we();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return du.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class zte{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class qte{constructor(e){this.key=e,this.Fa=!1}}class Wte{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new Os(a=>I4(a),np),this.Oa=new Map,this.Na=new Set,this.Ba=new Ze(G.comparator),this.La=new Map,this.ka=new lS,this.qa={},this.Qa=new Map,this.Ka=al.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function Hte(t,e,n=!0){const r=wy(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await NF(r,e,n,!0),i}async function Gte(t,e){const n=wy(t);await NF(n,e,!0,!1)}async function NF(t,e,n,r){const i=await lu(t.localStore,Vn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await TS(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&_y(t.remoteStore,i),a}async function TS(t,e,n,r,i){t.Ua=(f,p,m)=>async function(_,v,E,w){let T=v.view.ga(E);T.ss&&(T=await sv(_.localStore,v.query,!1).then(({documents:x})=>v.view.ga(x,T)));const R=w&&w.targetChanges.get(v.targetId),D=w&&w.targetMismatches.get(v.targetId)!=null,O=v.view.applyChanges(T,_.isPrimaryClient,R,D);return Wb(_,v.targetId,O.ba),O.snapshot}(t,f,p,m);const s=await sv(t.localStore,e,!0),o=new OF(e,s.Es),a=o.ga(s.documents),l=op.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);Wb(t,n,c.ba);const u=new zte(e,n,o);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function Kte(t,e,n){const r=K(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!np(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await cu(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uu(r.remoteStore,i.targetId),hu(r,i.targetId)}).catch(Ko)):(hu(r,i.targetId),await cu(r.localStore,i.targetId,!0))}async function Qte(t,e){const n=K(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uu(n.remoteStore,r.targetId))}async function Yte(t,e,n){const r=kS(t);try{const i=await function(o,a){const l=K(o),c=dt.now(),u=a.reduce((m,y)=>m.add(y.key),we());let f,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let y=Kn(),_=we();return l.hs.getEntries(m,u).next(v=>{y=v,y.forEach((E,w)=>{w.isValidDocument()||(_=_.add(E))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,y)).next(v=>{f=v;const E=[];for(const w of a){const T=Eee(w,f.get(w.key).overlayedDocument);T!=null&&E.push(new Ns(w.key,T,m4(T.value.mapValue),ct.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,E,a)}).next(v=>{p=v;const E=v.applyToLocalDocumentSet(f,_);return l.documentOverlayCache.saveOverlays(m,v.batchId,E)})}).then(()=>({batchId:p.batchId,changes:A4(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new Ze(pe)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await Ds(r,i.changes),await Bu(r.remoteStore)}catch(i){const s=qu(i,"Failed to persist write");n.reject(s)}}async function DF(t,e){const n=K(t);try{const r=await pte(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?re(o.Fa):i.removedDocuments.size>0&&(re(o.Fa),o.Fa=!1))}),await Ds(n,r,e)}catch(r){await Ko(r)}}function wC(t,e,n){const r=K(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=K(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const p of f.J_)p.ea(a)&&(c=!0)}),c&&bS(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Jte(t,e,n){const r=K(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.La.get(e),s=i&&i.key;if(s){let o=new Ze(G.comparator);o=o.insert(s,nt.newNoDocument(s,se.min()));const a=we().add(s),l=new sp(se.min(),new Map,new Ze(pe),o,a);await DF(r,l),r.Ba=r.Ba.remove(s),r.La.delete(e),xS(r)}else await cu(r.localStore,e,!1).then(()=>hu(r,e,n)).catch(Ko)}async function Xte(t,e){const n=K(t),r=e.batch.batchId;try{const i=await fte(n.localStore,e);SS(n,r,null),IS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ds(n,i)}catch(i){await Ko(i)}}async function Zte(t,e,n){const r=K(t);try{const i=await function(o,a){const l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(re(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);SS(r,e,n),IS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ds(r,i)}catch(i){await Ko(i)}}async function ene(t,e){const n=K(t);Jo(n.remoteStore)||B("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=K(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Qa.get(r)||[];i.push(e),n.Qa.set(r,i)}catch(r){const i=qu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function IS(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function SS(t,e,n){const r=K(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function hu(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||jF(t,r)})}function jF(t,e){t.Na.delete(e.path.canonicalString());const n=t.Ba.get(e);n!==null&&(uu(t.remoteStore,n),t.Ba=t.Ba.remove(e),t.La.delete(n),xS(t))}function Wb(t,e,n){for(const r of n)r instanceof CF?(t.ka.addReference(r.key,e),tne(t,r)):r instanceof PF?(B("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||jF(t,r.key)):Y()}function tne(t,e){const n=e.key,r=n.path.canonicalString();t.Ba.get(n)||t.Na.has(r)||(B("SyncEngine","New document in limbo: "+n),t.Na.add(r),xS(t))}function xS(t){for(;t.Na.size>0&&t.Ba.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new G(Ce.fromString(e)),r=t.Ka.next();t.La.set(r,new qte(n)),t.Ba=t.Ba.insert(n,r),_y(t.remoteStore,new Xi(Vn(Vu(n.path)),r,"TargetPurposeLimboResolution",Hn.oe))}}async function Ds(t,e,n){const r=K(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){i.push(c);const f=hS.zi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const u=K(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>M.forEach(c,p=>M.forEach(p.Wi,m=>u.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>M.forEach(p.Gi,m=>u.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!Qo(f))throw f;B("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=u.us.get(p),y=m.snapshotVersion,_=m.withLastLimboFreeSnapshotVersion(y);u.us=u.us.insert(p,_)}}}(r.localStore,s))}async function nne(t,e){const n=K(t);if(!n.currentUser.isEqual(e)){B("SyncEngine","User change. New user:",e.toKey());const r=await mF(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new U($.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ds(n,r.Ts)}}function rne(t,e){const n=K(t),r=n.La.get(e);if(r&&r.Fa)return we().add(r.key);{let i=we();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}async function ine(t,e){const n=K(t),r=await sv(n.localStore,e.query,!0),i=e.view.va(r);return n.isPrimaryClient&&Wb(n,e.targetId,i.ba),i}async function sne(t,e){const n=K(t);return _F(n.localStore,e).then(r=>Ds(n,r))}async function one(t,e,n,r){const i=K(t),s=await function(a,l){const c=K(a),u=K(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",f=>u.On(f,l).next(p=>p?c.localDocuments.getDocuments(f,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await Bu(i.remoteStore):n==="acknowledged"||n==="rejected"?(SS(i,e,r||null),IS(i,e),function(a,l){K(K(a).mutationQueue).Bn(l)}(i.localStore,e)):Y(),await Ds(i,s)):B("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ane(t,e){const n=K(t);if(wy(n),kS(n),e===!0&&n.$a!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await bC(n,r.toArray());n.$a=!0,await zb(n.remoteStore,!0);for(const s of i)_y(n.remoteStore,s)}else if(e===!1&&n.$a!==!1){const r=[];let i=Promise.resolve();n.Oa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(hu(n,o),cu(n.localStore,o,!0))),uu(n.remoteStore,o)}),await i,await bC(n,r),function(o){const a=K(o);a.La.forEach((l,c)=>{uu(a.remoteStore,c)}),a.ka.wr(),a.La=new Map,a.Ba=new Ze(G.comparator)}(n),n.$a=!1,await zb(n.remoteStore,!1)}}async function bC(t,e,n){const r=K(t),i=[],s=[];for(const o of e){let a;const l=r.Oa.get(o);if(l&&l.length!==0){a=await lu(r.localStore,Vn(l[0]));for(const c of l){const u=r.xa.get(c),f=await ine(r,u);f.snapshot&&s.push(f.snapshot)}}else{const c=await yF(r.localStore,o);a=await lu(r.localStore,c),await TS(r,LF(c),o,!1,a.resumeToken)}i.push(a)}return r.Ma.R_(s),i}function LF(t){return T4(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function lne(t){return function(n){return K(K(n).persistence).$i()}(K(t).localStore)}async function cne(t,e,n,r){const i=K(t);if(i.$a)return void B("SyncEngine","Ignoring unexpected query state notification.");const s=i.Oa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await _F(i.localStore,S4(s[0])),a=sp.createSynthesizedRemoteEventForCurrentChange(e,n==="current",xt.EMPTY_BYTE_STRING);await Ds(i,o,a);break}case"rejected":await cu(i.localStore,e,!0),hu(i,e,r);break;default:Y()}}async function une(t,e,n){const r=wy(t);if(r.$a){for(const i of e){if(r.Oa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){B("SyncEngine","Adding an already active target "+i);continue}const s=await yF(r.localStore,i),o=await lu(r.localStore,s);await TS(r,LF(s),o.targetId,!1,o.resumeToken),_y(r.remoteStore,o)}for(const i of n)r.Oa.has(i)&&await cu(r.localStore,i,!1).then(()=>{uu(r.remoteStore,i),hu(r,i)}).catch(Ko)}}function wy(t){const e=K(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=DF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rne.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jte.bind(null,e),e.Ma.R_=Fte.bind(null,e.eventManager),e.Ma.Wa=$te.bind(null,e.eventManager),e}function kS(t){const e=K(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xte.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zte.bind(null,e),e}function dne(t,e,n){const r=K(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,y){const _=K(m),v=Nt(y.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",E=>_.jr.getBundleMetadata(E,y.id)).then(E=>!!E&&E.createTime.compareTo(v)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(RF(l));const c=new Bte(l,s.localStore,o.serializer);let u=await o.Ga();for(;u;){const p=await c.Pa(u);p&&a._updateProgress(p),u=await o.Ga()}const f=await c.complete();return await Ds(s,f.da,void 0),await function(m,y){const _=K(m);return _.persistence.runTransaction("Save bundle","readwrite",v=>_.jr.saveBundleMetadata(v,y))}(s.localStore,l),a._completeWith(f.progress),Promise.resolve(f.Ia)}catch(l){return Oi("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class If{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ap(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return pF(this.persistence,new fF,e.initialUser,this.serializer)}ja(e){return new cS(yy.ei,this.serializer)}za(e){return new bF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}If.provider={build:()=>new If};class hne extends If{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){re(this.persistence.referenceDelegate instanceof iv);const r=this.persistence.referenceDelegate.garbageCollector;return new lF(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new cS(r=>iv.ei(r,n),this.serializer)}}class MF extends If{constructor(e,n,r){super(),this.Za=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await kS(this.Za.syncEngine),await Bu(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return pF(this.persistence,new fF,e.initialUser,this.serializer)}Ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new lF(r,e.asyncQueue,n)}Ya(e,n){const r=new OZ(n,this.persistence);return new PZ(e.asyncQueue,r)}ja(e){const n=dS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Sn.withCacheSize(this.cacheSizeBytes):Sn.DEFAULT;return new uS(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,EF(),Zm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new bF}}class fne extends MF{constructor(e,n){super(e,n,!1),this.Za=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Za.syncEngine;this.sharedClientState instanceof fw&&(this.sharedClientState.syncEngine={io:one.bind(null,n),so:cne.bind(null,n),oo:une.bind(null,n),$i:lne.bind(null,n),ro:sne.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Si(async r=>{await ane(this.Za.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}za(e){const n=EF();if(!fw.p(n))throw new U($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dS(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Sf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>wC(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=nne.bind(null,this.syncEngine),await zb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Vte}()}createDatastore(e){const n=ap(e.databaseInfo.databaseId),r=function(s){return new bte(s)}(e.databaseInfo);return function(s,o,a,l){return new Ite(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new xte(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>wC(this.syncEngine,n,0),function(){return pC.p()?new pC:new yte}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const f=new Wte(i,s,o,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=K(i);B("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await Uu(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Sf.provider={build:()=>new Sf};function EC(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class by{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Pt("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e,n){this.tu=e,this.serializer=n,this.metadata=new pn,this.buffer=new Uint8Array,this.nu=function(){return new TextDecoder("utf-8")}(),this.ru().then(r=>{r&&r.la()?this.metadata.resolve(r.ca.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ca)}`))},r=>this.metadata.reject(r))}close(){return this.tu.cancel()}async getMetadata(){return this.metadata.promise}async Ga(){return await this.getMetadata(),this.ru()}async ru(){const e=await this.iu();if(e===null)return null;const n=this.nu.decode(e),r=Number(n);isNaN(r)&&this.su(`length string (${n}) is not valid number`);const i=await this.ou(r);return new Ute(JSON.parse(i),e.length+r)}_u(){return this.buffer.findIndex(e=>e===123)}async iu(){for(;this._u()<0&&!await this.au(););if(this.buffer.length===0)return null;const e=this._u();e<0&&this.su("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async ou(e){for(;this.buffer.length<e;)await this.au()&&this.su("Reached the end of bundle when more is expected.");const n=this.nu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}su(e){throw this.tu.cancel(),new Error(`Invalid bundle format: ${e}`)}async au(){const e=await this.tu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new U($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=K(i),a={documents:s.map(f=>Ef(o.serializer,f))},l=await o.ko("BatchGetDocuments",o.serializer.databaseId,Ce.emptyPath(),a,s.length),c=new Map;l.forEach(f=>{const p=Pee(o.serializer,f);c.set(p.key.toString(),p)});const u=[];return s.forEach(f=>{const p=c.get(f.toString());re(!!p),u.push(p)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new $u(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=G.fromPath(r);this.mutations.push(new ZI(i,this.precondition(i)))}),await async function(r,i){const s=K(r),o={writes:i.map(a=>Tf(s.serializer,a))};await s.Oo("Commit",s.serializer.databaseId,Ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Y();n=se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new U($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(se.min())?ct.exists(!1):ct.updateTime(n):ct.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(se.min()))throw new U($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ct.updateTime(n)}return ct.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.uu=r.maxAttempts,this.r_=new pS(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo(async()=>{const e=new mne(this.datastore),n=this.hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Pu(i)}))}).catch(r=>{this.Pu(r)})})}hu(e){try{const n=this.updateFunction(e);return!ep(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget(()=>(this.lu(),Promise.resolve()))):this.deferred.reject(e)}Tu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!V4(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Zt.UNAUTHENTICATED,this.clientId=ZV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{B("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(B("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new pn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=qu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function mw(t,e){t.asyncQueue.verifyOperationInProgress(),B("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function TC(t,e){t.asyncQueue.verifyOperationInProgress();const n=await AS(t);B("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>mC(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>mC(e.remoteStore,i)),t._onlineComponents=e}async function AS(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B("FirestoreClient","Using user provided OfflineComponentProvider");try{await mw(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===$.FAILED_PRECONDITION||i.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Oi("Error using user provided cache. Falling back to memory cache: "+n),await mw(t,new If)}}else B("FirestoreClient","Using default OfflineComponentProvider"),await mw(t,new hne(void 0));return t._offlineComponents}async function Ey(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B("FirestoreClient","Using user provided OnlineComponentProvider"),await TC(t,t._uninitializedComponentsProvider._online)):(B("FirestoreClient","Using default OnlineComponentProvider"),await TC(t,new Sf))),t._onlineComponents}function VF(t){return AS(t).then(e=>e.persistence)}function RS(t){return AS(t).then(e=>e.localStore)}function FF(t){return Ey(t).then(e=>e.remoteStore)}function CS(t){return Ey(t).then(e=>e.syncEngine)}function yne(t){return Ey(t).then(e=>e.datastore)}async function fu(t){const e=await Ey(t),n=e.eventManager;return n.onListen=Hte.bind(null,e.syncEngine),n.onUnlisten=Kte.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Gte.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Qte.bind(null,e.syncEngine),n}function _ne(t){return t.asyncQueue.enqueue(async()=>{const e=await VF(t),n=await FF(t);return e.setNetworkEnabled(!0),function(i){const s=K(i);return s.k_.delete(0),lp(s)}(n)})}function wne(t){return t.asyncQueue.enqueue(async()=>{const e=await VF(t),n=await FF(t);return e.setNetworkEnabled(!1),async function(i){const s=K(i);s.k_.add(0),await Uu(s),s.K_.set("Offline")}(n)})}function bne(t,e){const n=new pn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,u){const f=K(c);return f.persistence.runTransaction("read document","readonly",p=>f.localDocuments.getDocument(p,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new U($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=qu(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await RS(t),e,n)),n.promise}function $F(t,e,n={}){const r=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new by({next:p=>{u.eu(),o.enqueueAndForget(()=>wS(s,f));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new U($.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new U($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new ES(Vu(a.path),u,{includeMetadataChanges:!0,ua:!0});return _S(s,f)}(await fu(t),t.asyncQueue,e,n,r)),r.promise}function Ene(t,e){const n=new pn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await sv(i,s,!0),l=new OF(s,a.Es),c=l.ga(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=qu(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await RS(t),e,n)),n.promise}function UF(t,e,n={}){const r=new pn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new by({next:p=>{u.eu(),o.enqueueAndForget(()=>wS(s,f)),p.fromCache&&l.source==="server"?c.reject(new U($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new ES(a,u,{includeMetadataChanges:!0,ua:!0});return _S(s,f)}(await fu(t),t.asyncQueue,e,n,r)),r.promise}function Tne(t,e){const n=new by(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).X_.add(s),s.next()}(await fu(t),n)),()=>{n.eu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){K(i).X_.delete(s)}(await fu(t),n))}}function Ine(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?$4().encode(o):o,function(u,f){return new pne(u,f)}(function(u,f){if(u instanceof Uint8Array)return EC(u,f);if(u instanceof ArrayBuffer)return EC(new Uint8Array(u),f);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,ap(e));t.asyncQueue.enqueueAndForget(async()=>{dne(await CS(t),i,r)})}function Sne(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=K(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.jr.getNamedQuery(o,i))}(await RS(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t,e,n){if(!n)throw new U($.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function zF(t,e,n,r){if(e===!0&&r===!0)throw new U($.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function SC(t){if(!G.isDocumentKey(t))throw new U($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function xC(t){if(G.isDocumentKey(t))throw new U($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Ty(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function Fe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ty(t);throw new U($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function qF(t,e){if(e<=0)throw new U($.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new U($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new U($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}zF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new U($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new U($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new U($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class cp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kC({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kC(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new wZ;switch(r.type){case"firstParty":return new IZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=IC.get(n);r&&(B("ComponentProvider","Removing Datastore"),IC.delete(n),r.terminate())}(this),Promise.resolve()}}function xne(t,e,n,r={}){var i;const s=(t=Fe(t,cp))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Oi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Zt.MOCK_USER;else{a=rM(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new U($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Zt(c)}t._authCredentials=new bZ(new XV(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fn=class WF{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new WF(this.firestore,e,this._query)}},yt=class HF{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new HF(this.firestore,e,this._key)}},bo=class GF extends Fn{constructor(e,n,r){super(e,n,Vu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new yt(this.firestore,null,new G(e))}withConverter(e){return new GF(this.firestore,e,this._path)}};function KF(t,e,...n){if(t=ne(t),PS("collection","path",e),t instanceof cp){const r=Ce.fromString(e,...n);return xC(r),new bo(t,null,r)}{if(!(t instanceof yt||t instanceof bo))throw new U($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return xC(r),new bo(t.firestore,null,r)}}function kne(t,e){if(t=Fe(t,cp),PS("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new U($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Fn(t,null,function(r){return new Ps(Ce.emptyPath(),r)}(e))}function cv(t,e,...n){if(t=ne(t),arguments.length===1&&(e=ZV.newId()),PS("doc","path",e),t instanceof cp){const r=Ce.fromString(e,...n);return SC(r),new yt(t,null,new G(r))}{if(!(t instanceof yt||t instanceof bo))throw new U($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return SC(r),new yt(t.firestore,t instanceof bo?t.converter:null,new G(r))}}function QF(t,e){return t=ne(t),e=ne(e),(t instanceof yt||t instanceof bo)&&(e instanceof yt||e instanceof bo)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function YF(t,e){return t=ne(t),e=ne(e),t instanceof Fn&&e instanceof Fn&&t.firestore===e.firestore&&np(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new pS(this,"async_queue_retry"),this.fu=()=>{const r=Zm();r&&B("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=Zm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=Zm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new pn;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Qo(e))throw e;B("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Pt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=yS.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&Y()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function Hb(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Ane{constructor(){this._progressObserver={},this._taskCompletionResolver=new pn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rne=-1;let Dt=class extends cp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new AC,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new AC(e),this._firestoreClient=void 0,await e}}};function Cn(t){if(t._terminated)throw new U($.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||JF(t),t._firestoreClient}function JF(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new eee(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,BF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new vne(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Cne(t,e){Oi("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return XF(t,Sf.provider,{build:r=>new MF(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Pne(t){Oi("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();XF(t,Sf.provider,{build:n=>new fne(n,e.cacheSizeBytes)})}function XF(t,e,n){if((t=Fe(t,Dt))._firestoreClient||t._terminated)throw new U($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new U($.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},JF(t)}function One(t){if(t._initialized&&!t._terminated)throw new U($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new pn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!ki.p())return Promise.resolve();const i=r+"main";await ki.delete(i)}(dS(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Nne(t){return function(n){const r=new pn;return n.asyncQueue.enqueueAndForget(async()=>ene(await CS(n),r)),r.promise}(Cn(t=Fe(t,Dt)))}function Dne(t){return _ne(Cn(t=Fe(t,Dt)))}function jne(t){return wne(Cn(t=Fe(t,Dt)))}function Lne(t,e){const n=Cn(t=Fe(t,Dt)),r=new Ane;return Ine(n,t._databaseId,e,r),r}function Mne(t,e){return Sne(Cn(t=Fe(t,Dt)),e).then(n=>n?new Fn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(xt.fromBase64String(e))}catch(n){throw new U($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vne=/^__.*__$/;class Fne{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fu(e,this.data,n,this.fieldTransforms)}}class ZF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function e$(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class Sy{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Sy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return uv(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(e$(this.Mu)&&Vne.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class $ne{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ap(e)}$u(e,n,r,i=!1){return new Sy({Mu:e,methodName:n,Ku:r,path:lt.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _l(t){const e=t._freezeSettings(),n=ap(t._databaseId);return new $ne(t._databaseId,!!e.ignoreUndefinedProperties,n)}function xy(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);FS("Data must be an object, but it was:",o,r);const a=r$(r,o);let l,c;if(s.merge)l=new Gn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const p=Gb(e,f,n);if(!o.contains(p))throw new U($.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);s$(u,p)||u.push(p)}l=new Gn(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Fne(new un(a),l,c)}class up extends yl{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof up}}function t$(t,e,n){return new Sy({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class NS extends yl{_toFieldTransform(e){return new ip(e.path,new su)}isEqual(e){return e instanceof NS}}class DS extends yl{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=t$(this,e,!0),r=this.Uu.map(s=>wl(s,n)),i=new rl(r);return new ip(e.path,i)}isEqual(e){return e instanceof DS&&cf(this.Uu,e.Uu)}}class jS extends yl{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=t$(this,e,!0),r=this.Uu.map(s=>wl(s,n)),i=new il(r);return new ip(e.path,i)}isEqual(e){return e instanceof jS&&cf(this.Uu,e.Uu)}}class LS extends yl{constructor(e,n){super(e),this.Wu=n}_toFieldTransform(e){const n=new ou(e.serializer,P4(e.serializer,this.Wu));return new ip(e.path,n)}isEqual(e){return e instanceof LS&&this.Wu===e.Wu}}function MS(t,e,n,r){const i=t.$u(1,e,n);FS("Data must be an object, but it was:",i,r);const s=[],o=un.empty();Yo(r,(l,c)=>{const u=$S(e,l,n);c=ne(c);const f=i.Lu(u);if(c instanceof up)s.push(u);else{const p=wl(c,f);p!=null&&(s.push(u),o.set(u,p))}});const a=new Gn(s);return new ZF(o,a,i.fieldTransforms)}function VS(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[Gb(e,r,n)],l=[i];if(s.length%2!=0)throw new U($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(Gb(e,s[p])),l.push(s[p+1]);const c=[],u=un.empty();for(let p=a.length-1;p>=0;--p)if(!s$(c,a[p])){const m=a[p];let y=l[p];y=ne(y);const _=o.Lu(m);if(y instanceof up)c.push(m);else{const v=wl(y,_);v!=null&&(c.push(m),u.set(m,v))}}const f=new Gn(c);return new ZF(u,f,o.fieldTransforms)}function n$(t,e,n,r=!1){return wl(n,t.$u(r?4:3,e))}function wl(t,e){if(i$(t=ne(t)))return FS("Unsupported field value:",e,t),r$(t,e);if(t instanceof yl)return function(r,i){if(!e$(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=wl(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return P4(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=dt.fromDate(r);return{timestampValue:au(i.serializer,s)}}if(r instanceof dt){const s=new dt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(i.serializer,s)}}if(r instanceof Iy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:z4(i.serializer,r._byteString)};if(r instanceof yt){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iS(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof OS)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return XI(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Ty(r)}`)}(t,e)}function r$(t,e){const n={};return d4(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yo(t,(r,i)=>{const s=wl(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function i$(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dt||t instanceof Iy||t instanceof Di||t instanceof yt||t instanceof yl||t instanceof OS)}function FS(t,e,n){if(!i$(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Ty(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function Gb(t,e,n){if((e=ne(e))instanceof Lo)return e._internalPath;if(typeof e=="string")return $S(t,e);throw uv("Field path arguments must be of type string or ",t,!1,void 0,n)}const Une=new RegExp("[~\\*/\\[\\]]");function $S(t,e,n){if(e.search(Une)>=0)throw uv(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Lo(...e.split("."))._internalPath}catch{throw uv(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function uv(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new U($.INVALID_ARGUMENT,a+t+l)}function s$(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Bne(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ky("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Bne extends xf{data(){return super.data()}}function ky(t,e){return typeof e=="string"?$S(t,e):e instanceof Lo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o$(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class US{}class dp extends US{}function Ws(t,e,...n){let r=[];e instanceof US&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof BS).length,a=s.filter(l=>l instanceof Ay).length;if(o>1||o>0&&a>0)throw new U($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ay extends dp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ay(e,n,r)}_apply(e){const n=this._parse(e);return l$(e._query,n),new Fn(e.firestore,e.converter,Db(e._query,n))}_parse(e){const n=_l(e.firestore);return function(s,o,a,l,c,u,f){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new U($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){CC(f,u);const m=[];for(const y of f)m.push(RC(l,s,y));p={arrayValue:{values:m}}}else p=RC(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||CC(f,u),p=n$(a,o,f,u==="in"||u==="not-in");return Pe.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function zne(t,e,n){const r=e,i=ky("where",t);return Ay._create(i,r,n)}class BS extends US{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new BS(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:qe.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)l$(o,l),o=Db(o,l)}(e._query,n),new Fn(e.firestore,e.converter,Db(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zS extends dp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zS(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new U($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new U($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bf(s,o)}(e._query,this._field,this._direction);return new Fn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new Ps(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function qne(t,e="asc"){const n=e,r=ky("orderBy",t);return zS._create(r,n)}class Ry extends dp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Ry(e,n,r)}_apply(e){return new Fn(e.firestore,e.converter,ev(e._query,this._limit,this._limitType))}}function Wne(t){return qF("limit",t),Ry._create("limit",t,"F")}function Hne(t){return qF("limitToLast",t),Ry._create("limitToLast",t,"L")}class Cy extends dp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Cy(e,n,r)}_apply(e){const n=a$(e,this.type,this._docOrFields,this._inclusive);return new Fn(e.firestore,e.converter,function(i,s){return new Ps(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function Gne(...t){return Cy._create("startAt",t,!0)}function Kne(...t){return Cy._create("startAfter",t,!1)}class Py extends dp{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Py(e,n,r)}_apply(e){const n=a$(e,this.type,this._docOrFields,this._inclusive);return new Fn(e.firestore,e.converter,function(i,s){return new Ps(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function Qne(...t){return Py._create("endBefore",t,!1)}function Yne(...t){return Py._create("endAt",t,!0)}function a$(t,e,n,r){if(n[0]=ne(n[0]),n[0]instanceof xf)return function(s,o,a,l,c){if(!l)throw new U($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const f of Oc(s))if(f.field.isKeyField())u.push(tl(o,l.key));else{const p=l.data.field(f.field);if(dy(p))throw new U($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=f.field.canonicalString();throw new U($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}u.push(p)}return new Do(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=_l(t.firestore);return function(o,a,l,c,u,f){const p=o.explicitOrderBy;if(u.length>p.length)throw new U($.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let y=0;y<u.length;y++){const _=u[y];if(p[y].field.isKeyField()){if(typeof _!="string")throw new U($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof _}`);if(!YI(o)&&_.indexOf("/")!==-1)throw new U($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${_}' contains a slash.`);const v=o.path.child(Ce.fromString(_));if(!G.isDocumentKey(v))throw new U($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${v}' is not because it contains an odd number of segments.`);const E=new G(v);m.push(tl(a,E))}else{const v=n$(l,c,_);m.push(v)}}return new Do(m,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function RC(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new U($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!YI(e)&&n.indexOf("/")!==-1)throw new U($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!G.isDocumentKey(r))throw new U($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return tl(t,new G(r))}if(n instanceof yt)return tl(t,n._key);throw new U($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ty(n)}.`)}function CC(t,e){if(!Array.isArray(t)||t.length===0)throw new U($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function l$(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new U($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new U($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class qS{convertValue(e,n="none"){switch(Oo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ot(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Yo(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>ot(o.doubleValue));return new OS(s)}convertGeoPoint(e){return new Iy(ot(e.latitude),ot(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hy(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(yf(e));default:return null}}convertTimestamp(e){const n=vs(e);return new dt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);re(eF(r));const i=new Po(r.get(1),r.get(3)),s=new G(r.popFirst(5));return i.isEqual(n)||Pt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Jne extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let _s=class extends xf{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ky("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},kh=class extends _s{data(e={}){return super.data(e)}},Mo=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Oa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new kh(this._firestore,this._userDataWriter,r.key,r,new Oa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new kh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new kh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Oa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Xne(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function Xne(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}function c$(t,e){return t instanceof _s&&e instanceof _s?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mo&&e instanceof Mo&&t._firestore===e._firestore&&YF(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zne(t){t=Fe(t,yt);const e=Fe(t.firestore,Dt);return $F(Cn(e),t._key).then(n=>WS(e,t,n))}class bl extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new yt(this.firestore,null,n)}}function ere(t){t=Fe(t,yt);const e=Fe(t.firestore,Dt),n=Cn(e),r=new bl(e);return bne(n,t._key).then(i=>new _s(e,r,t._key,i,new Oa(i!==null&&i.hasLocalMutations,!0),t.converter))}function tre(t){t=Fe(t,yt);const e=Fe(t.firestore,Dt);return $F(Cn(e),t._key,{source:"server"}).then(n=>WS(e,t,n))}function nre(t){t=Fe(t,Fn);const e=Fe(t.firestore,Dt),n=Cn(e),r=new bl(e);return o$(t._query),UF(n,t._query).then(i=>new Mo(e,r,t,i))}function rre(t){t=Fe(t,Fn);const e=Fe(t.firestore,Dt),n=Cn(e),r=new bl(e);return Ene(n,t._query).then(i=>new Mo(e,r,t,i))}function ire(t){t=Fe(t,Fn);const e=Fe(t.firestore,Dt),n=Cn(e),r=new bl(e);return UF(n,t._query,{source:"server"}).then(i=>new Mo(e,r,t,i))}function PC(t,e,n){t=Fe(t,yt);const r=Fe(t.firestore,Dt),i=Oy(t.converter,e,n);return hp(r,[xy(_l(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ct.none())])}function OC(t,e,n,...r){t=Fe(t,yt);const i=Fe(t.firestore,Dt),s=_l(i);let o;return o=typeof(e=ne(e))=="string"||e instanceof Lo?VS(s,"updateDoc",t._key,e,n,r):MS(s,"updateDoc",t._key,e),hp(i,[o.toMutation(t._key,ct.exists(!0))])}function sre(t){return hp(Fe(t.firestore,Dt),[new $u(t._key,ct.none())])}function ore(t,e){const n=Fe(t.firestore,Dt),r=cv(t),i=Oy(t.converter,e);return hp(n,[xy(_l(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,ct.exists(!1))]).then(()=>r)}function u$(t,...e){var n,r,i;t=ne(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Hb(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Hb(e[o])){const f=e[o];e[o]=(n=f.next)===null||n===void 0?void 0:n.bind(f),e[o+1]=(r=f.error)===null||r===void 0?void 0:r.bind(f),e[o+2]=(i=f.complete)===null||i===void 0?void 0:i.bind(f)}let l,c,u;if(t instanceof yt)c=Fe(t.firestore,Dt),u=Vu(t._key.path),l={next:f=>{e[o]&&e[o](WS(c,t,f))},error:e[o+1],complete:e[o+2]};else{const f=Fe(t,Fn);c=Fe(f.firestore,Dt),u=f._query;const p=new bl(c);l={next:m=>{e[o]&&e[o](new Mo(c,p,f,m))},error:e[o+1],complete:e[o+2]},o$(t._query)}return function(p,m,y,_){const v=new by(_),E=new ES(m,v,y);return p.asyncQueue.enqueueAndForget(async()=>_S(await fu(p),E)),()=>{v.eu(),p.asyncQueue.enqueueAndForget(async()=>wS(await fu(p),E))}}(Cn(c),u,a,l)}function are(t,e){return Tne(Cn(t=Fe(t,Dt)),Hb(e)?e:{next:e})}function hp(t,e){return function(r,i){const s=new pn;return r.asyncQueue.enqueueAndForget(async()=>Yte(await CS(r),i,s)),s.promise}(Cn(t),e)}function WS(t,e,n){const r=n.docs.get(e._key),i=new bl(t);return new _s(t,i,e._key,r,new Oa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lre={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cre=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=_l(e)}set(e,n,r){this._verifyNotCommitted();const i=to(e,this._firestore),s=Oy(i.converter,n,r),o=xy(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,ct.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=to(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof Lo?VS(this._dataReader,"WriteBatch.update",s._key,n,r,i):MS(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,ct.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=to(e,this._firestore);return this._mutations=this._mutations.concat(new $u(n._key,ct.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new U($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function to(t,e){if((t=ne(t)).firestore!==e)throw new U($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ure=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=_l(n)}get(n){const r=to(n,this._firestore),i=new Jne(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Y();const o=s[0];if(o.isFoundDocument())return new xf(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new xf(this._firestore,i,r._key,null,r.converter);throw Y()})}set(n,r,i){const s=to(n,this._firestore),o=Oy(s.converter,r,i),a=xy(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=to(n,this._firestore);let a;return a=typeof(r=ne(r))=="string"||r instanceof Lo?VS(this._dataReader,"Transaction.update",o._key,r,i,s):MS(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=to(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=to(e,this._firestore),r=new bl(this._firestore);return super.get(e).then(i=>new _s(this._firestore,r,n._key,i._document,new Oa(!1,!1),n.converter))}};function dre(t,e,n){t=Fe(t,Dt);const r=Object.assign(Object.assign({},lre),n);return function(s){if(s.maxAttempts<1)throw new U($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new pn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await yne(s);new gne(s.asyncQueue,c,a,o,l).cu()}),l.promise}(Cn(t),i=>e(new ure(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hre(){return new up("deleteField")}function fre(){return new NS("serverTimestamp")}function pre(...t){return new DS("arrayUnion",t)}function mre(...t){return new jS("arrayRemove",t)}function gre(t){return new LS("increment",t)}(function(e,n=!0){(function(i){Mu=i})(ks),vr(new gn("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Dt(new EZ(r.getProvider("auth-internal")),new xZ(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new U($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),fn(ER,"4.7.6",e),fn(ER,"4.7.6","esm2017")})();const vre="@firebase/firestore-compat",yre="0.3.41";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new U("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NC(){if(typeof Uint8Array>"u")throw new U("unimplemented","Uint8Arrays are not available in this environment.")}function DC(){if(!XZ())throw new U("unimplemented","Blobs are unavailable in Firestore in this environment.")}let d$=class Kb{constructor(e){this._delegate=e}static fromBase64String(e){return DC(),new Kb(Di.fromBase64String(e))}static fromUint8Array(e){return NC(),new Kb(Di.fromUint8Array(e))}toBase64(){return DC(),this._delegate.toBase64()}toUint8Array(){return NC(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){return _re(t,["next","error","complete"])}function _re(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wre{enableIndexedDbPersistence(e,n){return Cne(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Pne(e._delegate)}clearIndexedDbPersistence(e){return One(e._delegate)}}class h${constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Po||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Oi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){xne(this._delegate,e,n,r)}enableNetwork(){return Dne(this._delegate)}disableNetwork(){return jne(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,zF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Nne(this._delegate)}onSnapshotsInSync(e){return are(this._delegate,e)}get app(){if(!this._appCompat)throw new U("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new pu(this,KF(this._delegate,e))}catch(n){throw jn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Or(this,cv(this._delegate,e))}catch(n){throw jn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Dn(this,kne(this._delegate,e))}catch(n){throw jn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return dre(this._delegate,n=>e(new f$(this,n)))}batch(){return Cn(this._delegate),new p$(new cre(this._delegate,e=>hp(this._delegate,e)))}loadBundle(e){return Lne(this._delegate,e)}namedQuery(e){return Mne(this._delegate,e).then(n=>n?new Dn(this,n):null)}}class Ny extends qS{constructor(e){super(),this.firestore=e}convertBytes(e){return new d$(new Di(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Or.forKey(n,this.firestore,null)}}function bre(t){yZ(t)}class f${constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Ny(e)}get(e){const n=Na(e);return this._delegate.get(n).then(r=>new kf(this._firestore,new _s(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=Na(e);return r?(HS("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Na(e);return this._delegate.delete(n),this}}class p${constructor(e){this._delegate=e}set(e,n,r){const i=Na(e);return r?(HS("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=Na(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=Na(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class ll{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new kh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Af(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=ll.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new ll(e,new Ny(e),n),i.set(n,s)),s}}ll.INSTANCES=new WeakMap;class Or{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ny(e)}static forPath(e,n,r){if(e.length%2!==0)throw new U("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Or(n,new yt(n._delegate,r,new G(e)))}static forKey(e,n,r){return new Or(n,new yt(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new pu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new pu(this.firestore,KF(this._delegate,e))}catch(n){throw jn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ne(e),e instanceof yt?QF(this._delegate,e):!1}set(e,n){n=HS("DocumentReference.set",n);try{return n?PC(this._delegate,e,n):PC(this._delegate,e)}catch(r){throw jn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?OC(this._delegate,e):OC(this._delegate,e,n,...r)}catch(i){throw jn(i,"updateDoc()","DocumentReference.update()")}}delete(){return sre(this._delegate)}onSnapshot(...e){const n=m$(e),r=g$(e,i=>new kf(this.firestore,new _s(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return u$(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=ere(this._delegate):(e==null?void 0:e.source)==="server"?n=tre(this._delegate):n=Zne(this._delegate),n.then(r=>new kf(this.firestore,new _s(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Or(this.firestore,e?this._delegate.withConverter(ll.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function jn(t,e,n){return t.message=t.message.replace(e,n),t}function m$(t){for(const e of t)if(typeof e=="object"&&!Qb(e))return e;return{}}function g$(t,e){var n,r;let i;return Qb(t[0])?i=t[0]:Qb(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class kf{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Or(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return c$(this._delegate,e._delegate)}}class Af extends kf{data(e){const n=this._delegate.data(e);return this._delegate._converter||_Z(n!==void 0),n}}class Dn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Ny(e)}where(e,n,r){try{return new Dn(this.firestore,Ws(this._delegate,zne(e,n,r)))}catch(i){throw jn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Dn(this.firestore,Ws(this._delegate,qne(e,n)))}catch(r){throw jn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Dn(this.firestore,Ws(this._delegate,Wne(e)))}catch(n){throw jn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Dn(this.firestore,Ws(this._delegate,Hne(e)))}catch(n){throw jn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Dn(this.firestore,Ws(this._delegate,Gne(...e)))}catch(n){throw jn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Dn(this.firestore,Ws(this._delegate,Kne(...e)))}catch(n){throw jn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Dn(this.firestore,Ws(this._delegate,Qne(...e)))}catch(n){throw jn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Dn(this.firestore,Ws(this._delegate,Yne(...e)))}catch(n){throw jn(n,"endAt()","Query.endAt()")}}isEqual(e){return YF(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=rre(this._delegate):(e==null?void 0:e.source)==="server"?n=ire(this._delegate):n=nre(this._delegate),n.then(r=>new Yb(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=m$(e),r=g$(e,i=>new Yb(this.firestore,new Mo(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return u$(this._delegate,n,r)}withConverter(e){return new Dn(this.firestore,e?this._delegate.withConverter(ll.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ere{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Af(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Yb{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Dn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Af(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Ere(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Af(this._firestore,r))})}isEqual(e){return c$(this._delegate,e._delegate)}}class pu extends Dn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Or(this.firestore,e):null}doc(e){try{return e===void 0?new Or(this.firestore,cv(this._delegate)):new Or(this.firestore,cv(this._delegate,e))}catch(n){throw jn(n,"doc()","CollectionReference.doc()")}}add(e){return ore(this._delegate,e).then(n=>new Or(this.firestore,n))}isEqual(e){return QF(this._delegate,e._delegate)}withConverter(e){return new pu(this.firestore,e?this._delegate.withConverter(ll.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Na(t){return Fe(t,yt)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(...e){this._delegate=new Lo(...e)}static documentId(){return new GS(lt.keyField().canonicalString())}isEqual(e){return e=ne(e),e instanceof Lo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{static serverTimestamp(){const e=fre();return e._methodName="FieldValue.serverTimestamp",new Ea(e)}static delete(){const e=hre();return e._methodName="FieldValue.delete",new Ea(e)}static arrayUnion(...e){const n=pre(...e);return n._methodName="FieldValue.arrayUnion",new Ea(n)}static arrayRemove(...e){const n=mre(...e);return n._methodName="FieldValue.arrayRemove",new Ea(n)}static increment(e){const n=gre(e);return n._methodName="FieldValue.increment",new Ea(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tre={Firestore:h$,GeoPoint:Iy,Timestamp:dt,Blob:d$,Transaction:f$,WriteBatch:p$,DocumentReference:Or,DocumentSnapshot:kf,Query:Dn,QueryDocumentSnapshot:Af,QuerySnapshot:Yb,CollectionReference:pu,FieldPath:GS,FieldValue:Ea,setLogLevel:bre,CACHE_SIZE_UNLIMITED:Rne};function Ire(t,e){t.INTERNAL.registerComponent(new gn("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Tre)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sre(t){Ire(t,(e,n)=>new h$(e,n,new wre)),t.registerVersion(vre,yre)}Sre(sn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$="firebasestorage.googleapis.com",y$="storageBucket",xre=2*60*1e3,kre=10*60*1e3,Are=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jt=class _$ extends tn{constructor(e,n,r=0){super(gw(e),`Firebase Storage: ${n} (${gw(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_$.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var st;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(st||(st={}));function gw(t){return"storage/"+t}function KS(){const t="An unknown error occurred, please check the error payload for server response.";return new jt(st.UNKNOWN,t)}function Rre(t){return new jt(st.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Cre(t){return new jt(st.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Pre(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new jt(st.UNAUTHENTICATED,t)}function Ore(){return new jt(st.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Nre(t){return new jt(st.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function w$(){return new jt(st.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function b$(){return new jt(st.CANCELED,"User canceled the upload/download.")}function Dre(t){return new jt(st.INVALID_URL,"Invalid URL '"+t+"'.")}function jre(t){return new jt(st.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function Lre(){return new jt(st.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+y$+"' property when initializing the app?")}function E$(){return new jt(st.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Mre(){return new jt(st.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function Vre(){return new jt(st.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Fre(t){return new jt(st.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Dc(t){return new jt(st.INVALID_ARGUMENT,t)}function T$(){return new jt(st.APP_DELETED,"The Firebase app was deleted.")}function I$(t){return new jt(st.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ah(t,e){return new jt(st.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Od(t){throw new jt(st.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=kn.makeFromUrl(e,n)}catch{return new kn(e,"")}if(r.path==="")return r;throw jre(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const u="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${f}/${u}/b/${i}/o${p}`,"i"),y={bucket:1,path:3},_=n===v$?"(?:storage.googleapis.com|storage.cloud.google.com)":n,v="([^?#]*)",E=new RegExp(`^https?://${_}/${i}/${v}`,"i"),T=[{regex:a,indices:l,postModify:s},{regex:m,indices:y,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<T.length;R++){const D=T[R],O=D.regex.exec(e);if(O){const x=O[D.indices.bucket];let S=O[D.indices.path];S||(S=""),r=new kn(x,S),D.postModify(r);break}}if(r==null)throw Dre(e);return r}}class $re{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ure(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...v){c||(c=!0,e.apply(null,v))}function f(v){i=setTimeout(()=>{i=null,t(m,l())},v)}function p(){s&&clearTimeout(s)}function m(v,...E){if(c){p();return}if(v){p(),u.call(null,v,...E);return}if(l()||o){p(),u.call(null,v,...E);return}r<64&&(r*=2);let T;a===1?(a=2,T=0):T=(r+Math.random())*1e3,f(T)}let y=!1;function _(v){y||(y=!0,p(),!c&&(i!==null?(v||(a=2),clearTimeout(i),f(0)):v||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,_(!0)},n),_}function Bre(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zre(t){return t!==void 0}function qre(t){return typeof t=="function"}function Wre(t){return typeof t=="object"&&!Array.isArray(t)}function Dy(t){return typeof t=="string"||t instanceof String}function jC(t){return QS()&&t instanceof Blob}function QS(){return typeof Blob<"u"}function Jb(t,e,n,r){if(r<e)throw Dc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Dc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xo(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function S$(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ua;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ua||(Ua={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x$(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hre{constructor(e,n,r,i,s,o,a,l,c,u,f,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,y)=>{this.resolve_=m,this.reject_=y,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new cm(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ua.NO_ERROR,l=s.getStatus();if(!a||x$(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Ua.ABORT;r(!1,new cm(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new cm(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());zre(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=KS();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?T$():b$();o(l)}else{const l=w$();o(l)}};this.canceled_?n(!1,new cm(!1,null,!0)):this.backoffId_=Ure(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Bre(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class cm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Gre(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Kre(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Qre(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Yre(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Jre(t,e,n,r,i,s,o=!0){const a=S$(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return Qre(c,e),Gre(c,n),Kre(c,s),Yre(c,r),new Hre(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xre(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Zre(...t){const e=Xre();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(QS())return new Blob(t);throw new jt(st.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function eie(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tie(t){if(typeof atob>"u")throw Fre("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class vw{constructor(e,n){this.data=e,this.contentType=n||null}}function k$(t,e){switch(t){case Nr.RAW:return new vw(A$(e));case Nr.BASE64:case Nr.BASE64URL:return new vw(R$(t,e));case Nr.DATA_URL:return new vw(rie(e),iie(e))}throw KS()}function A$(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function nie(t){let e;try{e=decodeURIComponent(t)}catch{throw Ah(Nr.DATA_URL,"Malformed data URL.")}return A$(e)}function R$(t,e){switch(t){case Nr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ah(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Nr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ah(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=tie(e)}catch(i){throw i.message.includes("polyfill")?i:Ah(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class C${constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ah(Nr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=sie(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function rie(t){const e=new C$(t);return e.base64?R$(Nr.BASE64,e.rest):nie(e.rest)}function iie(t){return new C$(t).contentType}function sie(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,n){let r=0,i="";jC(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(jC(this.data_)){const r=this.data_,i=eie(r,e,n);return i===null?null:new Hi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Hi(r,!0)}}static getBlob(...e){if(QS()){const n=e.map(r=>r instanceof Hi?r.data_:r);return new Hi(Zre.apply(null,n))}else{const n=e.map(o=>Dy(o)?k$(Nr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Hi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YS(t){let e;try{e=JSON.parse(t)}catch{return null}return Wre(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oie(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aie(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function P$(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(t,e){return e}class On{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||lie}}let um=null;function cie(t){return!Dy(t)||t.length<2?t:P$(t)}function jy(){if(um)return um;const t=[];t.push(new On("bucket")),t.push(new On("generation")),t.push(new On("metageneration")),t.push(new On("name","fullPath",!0));function e(s,o){return cie(o)}const n=new On("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new On("size");return i.xform=r,t.push(i),t.push(new On("timeCreated")),t.push(new On("updated")),t.push(new On("md5Hash",null,!0)),t.push(new On("cacheControl",null,!0)),t.push(new On("contentDisposition",null,!0)),t.push(new On("contentEncoding",null,!0)),t.push(new On("contentLanguage",null,!0)),t.push(new On("contentType",null,!0)),t.push(new On("metadata","customMetadata",!0)),um=t,um}function uie(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new kn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function die(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return uie(r,t),r}function O$(t,e,n){const r=YS(e);return r===null?null:die(t,r,n)}function hie(t,e,n,r){const i=YS(e);if(i===null||!Dy(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,f=t.fullPath,p="/b/"+o(u)+"/o/"+o(f),m=Xo(p,n,r),y=S$({alt:"media",token:c});return m+y})[0]}function JS(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC="prefixes",MC="items";function fie(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[LC])for(const i of n[LC]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new kn(e,s));r.prefixes.push(o)}if(n[MC])for(const i of n[MC]){const s=t._makeStorageReference(new kn(e,i.name));r.items.push(s)}return r}function pie(t,e,n){const r=YS(n);return r===null?null:fie(t,e,r)}class js{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){if(!t)throw KS()}function Ly(t,e){function n(r,i){const s=O$(t,i,e);return Ri(s!==null),s}return n}function mie(t,e){function n(r,i){const s=pie(t,e,i);return Ri(s!==null),s}return n}function gie(t,e){function n(r,i){const s=O$(t,i,e);return Ri(s!==null),hie(s,i,t.host,t._protocol)}return n}function Wu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Ore():i=Pre():n.getStatus()===402?i=Cre(t.bucket):n.getStatus()===403?i=Nre(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function My(t){const e=Wu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Rre(t.path)),s.serverResponse=i.serverResponse,s}return n}function N$(t,e,n){const r=e.fullServerUrl(),i=Xo(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new js(i,s,Ly(t,n),o);return a.errorHandler=My(e),a}function vie(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Xo(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new js(a,l,mie(t,e.bucket),c);return u.urlParams=s,u.errorHandler=Wu(e),u}function yie(t,e,n){const r=e.fullServerUrl(),i=Xo(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new js(i,s,gie(t,n),o);return a.errorHandler=My(e),a}function _ie(t,e,n,r){const i=e.fullServerUrl(),s=Xo(i,t.host,t._protocol),o="PATCH",a=JS(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new js(s,o,Ly(t,r),c);return u.headers=l,u.body=a,u.errorHandler=My(e),u}function wie(t,e){const n=e.fullServerUrl(),r=Xo(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new js(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=My(e),a}function bie(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function D$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=bie(null,e)),r}function Eie(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let T="";for(let R=0;R<2;R++)T=T+Math.random().toString().slice(2);return T}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=D$(e,r,i),u=JS(c,n),f="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Hi.getBlob(f,r,p);if(m===null)throw E$();const y={name:c.fullPath},_=Xo(s,t.host,t._protocol),v="POST",E=t.maxUploadRetryTime,w=new js(_,v,Ly(t,n),E);return w.urlParams=y,w.headers=o,w.body=m.uploadData(),w.errorHandler=Wu(e),w}class dv{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function XS(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{Ri(!1)}return Ri(!!n&&(e||["active"]).indexOf(n)!==-1),n}function Tie(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=D$(e,r,i),a={name:o.fullPath},l=Xo(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},f=JS(o,n),p=t.maxUploadRetryTime;function m(_){XS(_);let v;try{v=_.getResponseHeader("X-Goog-Upload-URL")}catch{Ri(!1)}return Ri(Dy(v)),v}const y=new js(l,c,m,p);return y.urlParams=a,y.headers=u,y.body=f,y.errorHandler=Wu(e),y}function Iie(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=XS(c,["active","final"]);let f=null;try{f=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ri(!1)}f||Ri(!1);const p=Number(f);return Ri(!isNaN(p)),new dv(p,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new js(n,o,s,a);return l.headers=i,l.errorHandler=Wu(e),l}const VC=256*1024;function Sie(t,e,n,r,i,s,o,a){const l=new dv(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Mre();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const f=l.current,p=f+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const y={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(f,p);if(_===null)throw E$();function v(R,D){const O=XS(R,["active","final"]),x=l.current+u,S=r.size();let A;return O==="final"?A=Ly(e,s)(R,D):A=null,new dv(x,S,O==="final",A)}const E="POST",w=e.maxUploadRetryTime,T=new js(n,E,v,w);return T.headers=y,T.body=_.uploadData(),T.progressCallback=a||null,T.errorHandler=Wu(t),T}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xie={STATE_CHANGED:"state_changed"},Ln={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function yw(t){switch(t){case"running":case"pausing":case"canceling":return Ln.RUNNING;case"paused":return Ln.PAUSED;case"success":return Ln.SUCCESS;case"canceled":return Ln.CANCELED;case"error":return Ln.ERROR;default:return Ln.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kie{constructor(e,n,r){if(qre(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Aie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ua.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ua.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ua.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Od("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Od("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Od("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Od("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Od("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Rie extends Aie{initXhr(){this.xhr_.responseType="text"}}function vi(){return new Rie}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j${isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=jy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(st.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(x$(i.status,[]))if(s)i=w$();else{this.sleepTime=Math.max(this.sleepTime*2,Are),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(st.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=Tie(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Iie(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,vi,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=VC*this._chunkMultiplier,n=new dv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Sie(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,vi,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){VC*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=N$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,vi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Eie(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,vi,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=b$(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=yw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new kie(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(yw(this._state)){case Ln.SUCCESS:Vl(this._resolve.bind(null,this.snapshot))();break;case Ln.CANCELED:case Ln.ERROR:const n=this._reject;Vl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(yw(this._state)){case Ln.RUNNING:case Ln.PAUSED:e.next&&Vl(e.next.bind(e,this.snapshot))();break;case Ln.SUCCESS:e.complete&&Vl(e.complete.bind(e))();break;case Ln.CANCELED:case Ln.ERROR:e.error&&Vl(e.error.bind(e,this._error))();break;default:e.error&&Vl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,n){this._service=e,n instanceof kn?this._location=n:this._location=kn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new cl(e,n)}get root(){const e=new kn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return P$(this._location.path)}get storage(){return this._service}get parent(){const e=oie(this._location.path);if(e===null)return null;const n=new kn(this._location.bucket,e);return new cl(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw I$(e)}}function Cie(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new j$(t,new Hi(e),n)}function Pie(t){const e={prefixes:[],items:[]};return L$(t,e).then(()=>e)}async function L$(t,e,n){const i=await M$(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await L$(t,e,i.nextPageToken)}function M$(t,e){e!=null&&typeof e.maxResults=="number"&&Jb("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=vie(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,vi)}function Oie(t){t._throwIfRoot("getMetadata");const e=N$(t.storage,t._location,jy());return t.storage.makeRequestWithTokens(e,vi)}function Nie(t,e){t._throwIfRoot("updateMetadata");const n=_ie(t.storage,t._location,e,jy());return t.storage.makeRequestWithTokens(n,vi)}function Die(t){t._throwIfRoot("getDownloadURL");const e=yie(t.storage,t._location,jy());return t.storage.makeRequestWithTokens(e,vi).then(n=>{if(n===null)throw Vre();return n})}function jie(t){t._throwIfRoot("deleteObject");const e=wie(t.storage,t._location);return t.storage.makeRequestWithTokens(e,vi)}function V$(t,e){const n=aie(t._location.path,e),r=new kn(t._location.bucket,n);return new cl(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lie(t){return/^[A-Za-z]+:\/\//.test(t)}function Mie(t,e){return new cl(t,e)}function F$(t,e){if(t instanceof ZS){const n=t;if(n._bucket==null)throw Lre();const r=new cl(n,n._bucket);return e!=null?F$(r,e):r}else return e!==void 0?V$(t,e):t}function Vie(t,e){if(e&&Lie(e)){if(t instanceof ZS)return Mie(t,e);throw Dc("To use ref(service, url), the first argument must be a Storage instance.")}else return F$(t,e)}function FC(t,e){const n=e==null?void 0:e[y$];return n==null?null:kn.makeFromBucketSpec(n,t)}function Fie(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:rM(i,t.app.options.projectId))}class ZS{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=v$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xre,this._maxUploadRetryTime=kre,this._requests=new Set,i!=null?this._bucket=kn.makeFromBucketSpec(i,this._host):this._bucket=FC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=kn.makeFromBucketSpec(this._url,e):this._bucket=FC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Jb("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Jb("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cl(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new $re(T$());{const o=Jre(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const $C="@firebase/storage",UC="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $ie="storage";function Uie(t,e,n){return t=ne(t),Cie(t,e,n)}function Bie(t){return t=ne(t),Oie(t)}function zie(t,e){return t=ne(t),Nie(t,e)}function qie(t,e){return t=ne(t),M$(t,e)}function Wie(t){return t=ne(t),Pie(t)}function Hie(t){return t=ne(t),Die(t)}function Gie(t){return t=ne(t),jie(t)}function BC(t,e){return t=ne(t),Vie(t,e)}function Kie(t,e){return V$(t,e)}function Qie(t,e,n,r={}){Fie(t,e,n,r)}function Yie(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new ZS(n,r,i,e,ks)}function Jie(){vr(new gn($ie,Yie,"PUBLIC").setMultipleInstances(!0)),fn($C,UC,""),fn($C,UC,"esm2017")}Jie();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new dm(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new dm(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new dm(o,this,this._ref)):s={next:n.next?o=>n.next(new dm(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class qC{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new ns(e,this._service))}get items(){return this._delegate.items.map(e=>new ns(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=Kie(this._delegate,e);return new ns(n,this.storage)}get root(){return new ns(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new ns(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new zC(Uie(this._delegate,e,n),this)}putString(e,n=Nr.RAW,r){this._throwIfRoot("putString");const i=k$(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new zC(new j$(this._delegate,new Hi(i.data,!0),s),this)}listAll(){return Wie(this._delegate).then(e=>new qC(e,this.storage))}list(e){return qie(this._delegate,e||void 0).then(n=>new qC(n,this.storage))}getMetadata(){return Bie(this._delegate)}updateMetadata(e){return zie(this._delegate,e)}getDownloadURL(){return Hie(this._delegate)}delete(){return this._throwIfRoot("delete"),Gie(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw I$(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $${constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WC(e))throw Dc("ref() expected a child path but got a URL, use refFromURL instead.");return new ns(BC(this._delegate,e),this)}refFromURL(e){if(!WC(e))throw Dc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{kn.makeFromUrl(e,this._delegate.host)}catch{throw Dc("refFromUrl() expected a valid full URL but got an invalid one.")}return new ns(BC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){Qie(this._delegate,e,n,r)}}function WC(t){return/^[A-Za-z]+:\/\//.test(t)}const Xie="@firebase/storage-compat",Zie="0.3.15";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ese="storage-compat";function tse(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new $$(n,r)}function nse(t){const e={TaskState:Ln,TaskEvent:xie,StringFormat:Nr,Storage:$$,Reference:ns};t.INTERNAL.registerComponent(new gn(ese,tse,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(Xie,Zie)}nse(sn);const U$="@firebase/installations",e1="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$=1e4,z$=`w:${e1}`,q$="FIS_v2",rse="https://firebaseinstallations.googleapis.com/v1",ise=60*60*1e3,sse="installations",ose="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ase={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ul=new xs(sse,ose,ase);function W$(t){return t instanceof tn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$({projectId:t}){return`${rse}/projects/${t}/installations`}function G$(t){return{token:t.token,requestStatus:2,expiresIn:cse(t.expiresIn),creationTime:Date.now()}}async function K$(t,e){const r=(await e.json()).error;return ul.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Q$({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function lse(t,{refreshToken:e}){const n=Q$(t);return n.append("Authorization",use(e)),n}async function Y$(t){const e=await t();return e.status>=500&&e.status<600?t():e}function cse(t){return Number(t.replace("s","000"))}function use(t){return`${q$} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dse({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=H$(t),i=Q$(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:q$,appId:t.appId,sdkVersion:z$},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Y$(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:G$(c.authToken)}}else throw await K$("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J$(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hse(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fse=/^[cdef][\w-]{21}$/,Xb="";function pse(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=mse(t);return fse.test(n)?n:Xb}catch{return Xb}}function mse(t){return hse(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X$=new Map;function Z$(t,e){const n=Vy(t);eU(n,e),gse(n,e)}function eU(t,e){const n=X$.get(t);if(n)for(const r of n)r(e)}function gse(t,e){const n=vse();n&&n.postMessage({key:t,fid:e}),yse()}let Da=null;function vse(){return!Da&&"BroadcastChannel"in self&&(Da=new BroadcastChannel("[Firebase] FID Change"),Da.onmessage=t=>{eU(t.data.key,t.data.fid)}),Da}function yse(){X$.size===0&&Da&&(Da.close(),Da=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _se="firebase-installations-database",wse=1,dl="firebase-installations-store";let _w=null;function t1(){return _w||(_w=fM(_se,wse,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(dl)}}})),_w}async function hv(t,e){const n=Vy(t),i=(await t1()).transaction(dl,"readwrite"),s=i.objectStore(dl),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&Z$(t,e.fid),e}async function tU(t){const e=Vy(t),r=(await t1()).transaction(dl,"readwrite");await r.objectStore(dl).delete(e),await r.done}async function Fy(t,e){const n=Vy(t),i=(await t1()).transaction(dl,"readwrite"),s=i.objectStore(dl),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&Z$(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n1(t){let e;const n=await Fy(t.appConfig,r=>{const i=bse(r),s=Ese(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===Xb?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function bse(t){const e=t||{fid:pse(),registrationStatus:0};return nU(e)}function Ese(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(ul.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=Tse(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:Ise(t)}:{installationEntry:e}}async function Tse(t,e){try{const n=await dse(t,e);return hv(t.appConfig,n)}catch(n){throw W$(n)&&n.customData.serverCode===409?await tU(t.appConfig):await hv(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function Ise(t){let e=await HC(t.appConfig);for(;e.registrationStatus===1;)await J$(100),e=await HC(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await n1(t);return r||n}return e}function HC(t){return Fy(t,e=>{if(!e)throw ul.create("installation-not-found");return nU(e)})}function nU(t){return Sse(t)?{fid:t.fid,registrationStatus:0}:t}function Sse(t){return t.registrationStatus===1&&t.registrationTime+B$<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xse({appConfig:t,heartbeatServiceProvider:e},n){const r=kse(t,n),i=lse(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:z$,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await Y$(()=>fetch(r,a));if(l.ok){const c=await l.json();return G$(c)}else throw await K$("Generate Auth Token",l)}function kse(t,{fid:e}){return`${H$(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r1(t,e=!1){let n;const r=await Fy(t.appConfig,s=>{if(!rU(s))throw ul.create("not-registered");const o=s.authToken;if(!e&&Cse(o))return s;if(o.requestStatus===1)return n=Ase(t,e),s;{if(!navigator.onLine)throw ul.create("app-offline");const a=Ose(s);return n=Rse(t,a),a}});return n?await n:r.authToken}async function Ase(t,e){let n=await GC(t.appConfig);for(;n.authToken.requestStatus===1;)await J$(100),n=await GC(t.appConfig);const r=n.authToken;return r.requestStatus===0?r1(t,e):r}function GC(t){return Fy(t,e=>{if(!rU(e))throw ul.create("not-registered");const n=e.authToken;return Nse(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Rse(t,e){try{const n=await xse(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await hv(t.appConfig,r),n}catch(n){if(W$(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await tU(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await hv(t.appConfig,r)}throw n}}function rU(t){return t!==void 0&&t.registrationStatus===2}function Cse(t){return t.requestStatus===2&&!Pse(t)}function Pse(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ise}function Ose(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Nse(t){return t.requestStatus===1&&t.requestTime+B$<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dse(t){const e=t,{installationEntry:n,registrationPromise:r}=await n1(e);return r?r.catch(console.error):r1(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jse(t,e=!1){const n=t;return await Lse(n),(await r1(n,e)).token}async function Lse(t){const{registrationPromise:e}=await n1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mse(t){if(!t||!t.options)throw ww("App Configuration");if(!t.name)throw ww("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ww(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ww(t){return ul.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iU="installations",Vse="installations-internal",Fse=t=>{const e=t.getProvider("app").getImmediate(),n=Mse(e),r=Jv(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},$se=t=>{const e=t.getProvider("app").getImmediate(),n=Jv(e,iU).getImmediate();return{getId:()=>Dse(n),getToken:i=>jse(n,i)}};function Use(){vr(new gn(iU,Fse,"PUBLIC")),vr(new gn(Vse,$se,"PRIVATE"))}Use();fn(U$,e1);fn(U$,e1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="analytics",Bse="firebase_id",zse="origin",qse=60*1e3,Wse="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",i1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rn=new Hf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hse={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},pr=new xs("analytics","Analytics",Hse);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gse(t){if(!t.startsWith(i1)){const e=pr.create("invalid-gtag-resource",{gtagURL:t});return rn.warn(e.message),""}return t}function sU(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Kse(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Qse(t,e){const n=Kse("firebase-js-sdk-policy",{createScriptURL:Gse}),r=document.createElement("script"),i=`${i1}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function Yse(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Jse(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await sU(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){rn.error(a)}t("config",i,s)}async function Xse(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await sU(n);for(const l of o){const c=a.find(f=>f.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){rn.error(s)}}function Zse(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await Xse(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await Jse(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){rn.error(a)}}return i}function eoe(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=Zse(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function toe(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(i1)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const noe=30,roe=1e3;class ioe{constructor(e={},n=roe){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const oU=new ioe;function soe(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ooe(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:soe(r)},s=Wse.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw pr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function aoe(t,e=oU,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw pr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw pr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new uoe;return setTimeout(async()=>{a.abort()},n!==void 0?n:qse),aU({appId:r,apiKey:i,measurementId:s},o,a,e)}async function aU(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=oU){var s;const{appId:o,measurementId:a}=t;try{await loe(r,e)}catch(l){if(a)return rn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await ooe(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!coe(c)){if(i.deleteThrottleMetadata(o),a)return rn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?zA(n,i.intervalMillis,noe):zA(n,i.intervalMillis),f={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,f),rn.debug(`Calling attemptFetch again in ${u} millis`),aU(t,f,r,i)}}function loe(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(pr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function coe(t){if(!(t instanceof tn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class uoe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function doe(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}async function hoe(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function foe(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function poe(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function moe(t,e){const n=await t;window[`ga-disable-${n}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function goe(){if(Ja())try{await yI()}catch(t){return rn.warn(pr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return rn.warn(pr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function voe(t,e,n,r,i,s,o){var a;const l=aoe(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&rn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>rn.error(m)),e.push(l);const c=goe().then(m=>{if(m)return r.getId()}),[u,f]=await Promise.all([l,c]);toe(s)||Qse(s,u.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[zse]="firebase",p.update=!0,f!=null&&(p[Bse]=f),i("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yoe=class{constructor(e){this.app=e}_delete(){return delete rs[this.app.options.appId],Promise.resolve()}},rs={},QC=[];const YC={};let eg="dataLayer",lU="gtag",JC,fp,Zb=!1;function _oe(t){if(Zb)throw pr.create("already-initialized");t.dataLayerName&&(eg=t.dataLayerName),t.gtagName&&(lU=t.gtagName)}function woe(){const t=[];if(Yv()&&t.push("This is a browser extension environment."),aM()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=pr.create("invalid-analytics-context",{errorInfo:e});rn.warn(n.message)}}function boe(t,e,n){woe();const r=t.options.appId;if(!r)throw pr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)rn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw pr.create("no-api-key");if(rs[r]!=null)throw pr.create("already-exists",{id:r});if(!Zb){Yse(eg);const{wrappedGtag:s,gtagCore:o}=eoe(rs,QC,YC,eg,lU);fp=s,JC=o,Zb=!0}return rs[r]=voe(t,QC,YC,e,JC,eg,n),new yoe(t)}async function Eoe(){if(Yv()||!aM()||!Ja())return!1;try{return await yI()}catch{return!1}}function Toe(t,e,n){t=ne(t),hoe(fp,rs[t.app.options.appId],e,n).catch(r=>rn.error(r))}function Ioe(t,e,n){t=ne(t),foe(fp,rs[t.app.options.appId],e,n).catch(r=>rn.error(r))}function Soe(t,e,n){t=ne(t),poe(fp,rs[t.app.options.appId],e,n).catch(r=>rn.error(r))}function xoe(t,e){t=ne(t),moe(rs[t.app.options.appId],e).catch(n=>rn.error(n))}function cU(t,e,n,r){t=ne(t),doe(fp,rs[t.app.options.appId],e,n,r).catch(i=>rn.error(i))}const XC="@firebase/analytics",ZC="0.10.11";function koe(){vr(new gn(KC,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return boe(r,i,n)},"PUBLIC")),vr(new gn("analytics-internal",t,"PRIVATE")),fn(XC,ZC),fn(XC,ZC,"esm2017");function t(e){try{const n=e.getProvider(KC).getImmediate();return{logEvent:(r,i,s)=>cU(n,r,i,s)}}catch(n){throw pr.create("interop-component-reg-failed",{reason:n})}}}koe();const Aoe="@firebase/analytics-compat",Roe="0.2.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){cU(this._delegate,e,n,r)}setCurrentScreen(e,n){Toe(this._delegate,e,n)}setUserId(e,n){Ioe(this._delegate,e,n)}setUserProperties(e,n){Soe(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){xoe(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var eE;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(eE||(eE={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Coe=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new uU(e,n)};function Poe(){const t={Analytics:uU,settings:_oe,isSupported:Eoe,EventName:eE};sn.INTERNAL.registerComponent(new gn("analytics-compat",Coe,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}Poe();sn.registerVersion(Aoe,Roe);const Ooe=qI("VITE_APP_FIREBASE_CONFIG");sn.apps.length||sn.initializeApp(Ooe);const tg=sn.auth(),Noe=t=>(t?tg.tenantId=t:tg.tenantId=null,tg);sn.firestore();new sn.auth.GoogleAuthProvider;sn.analytics();sn.firestore.Timestamp.now();`${qI("VITE_APP_FIREBASE_PUB_KEY")}`;const Doe="modulepreload",joe=function(t){return"/"+t},eP={},El=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=joe(o),o in eP)return;eP[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let f=s.length-1;f>=0;f--){const p=s[f];if(p.href===o&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Doe,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((f,p)=>{u.addEventListener("load",f),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Loe=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(()=>Promise.resolve().then(()=>Tl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class s1 extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class tP extends s1{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class nP extends s1{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class rP extends s1{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tE;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(tE||(tE={}));class Moe{constructor(e,{headers:n={},customFetch:r,region:i=tE.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=Loe(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ie(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const f=new URL(`${this.url}/${n}`);u&&u!=="any"&&(c["x-region"]=u,f.searchParams.set("forceFunctionRegion",u));let p;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(c["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(c["Content-Type"]="application/json",p=JSON.stringify(a)):p=a;const m=yield this.fetch(f.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:p,signal:l}).catch(E=>{throw E.name==="AbortError"?E:new tP(E)}),y=m.headers.get("x-relay-error");if(y&&y==="true")throw new nP(m);if(!m.ok)throw new rP(m);let _=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),v;return _==="application/json"?v=yield m.json():_==="application/octet-stream"||_==="application/pdf"?v=yield m.blob():_==="text/event-stream"?v=m:_==="multipart/form-data"?v=yield m.formData():v=yield m.text(),{data:v,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new tP(s)}:{data:null,error:s,response:s instanceof rP||s instanceof nP?s.context:void 0}}})}}var qn={};const Hu=nO(gQ);var hm={},fm={},pm={},mm={},gm={},Voe=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mu=Voe();const Foe=mu.fetch,dU=mu.fetch.bind(mu),hU=mu.Headers,$oe=mu.Request,Uoe=mu.Response,Tl=Object.freeze(Object.defineProperty({__proto__:null,Headers:hU,Request:$oe,Response:Uoe,default:dU,fetch:Foe},Symbol.toStringTag,{value:"Module"})),Boe=nO(Tl);var vm={},iP;function fU(){if(iP)return vm;iP=1,Object.defineProperty(vm,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return vm.default=t,vm}var sP;function pU(){if(sP)return gm;sP=1,Object.defineProperty(gm,"__esModule",{value:!0});const t=Hu,e=t.__importDefault(Boe),n=t.__importDefault(fU());class r{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,f,p,m;let y=null,_=null,v=null,E=c.status,w=c.statusText;if(c.ok){if(this.method!=="HEAD"){const O=await c.text();O===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?_=O:_=JSON.parse(O))}const R=(f=this.headers.get("Prefer"))===null||f===void 0?void 0:f.match(/count=(exact|planned|estimated)/),D=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");R&&D&&D.length>1&&(v=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(_)&&(_.length>1?(y={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,v=null,E=406,w="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{const R=await c.text();try{y=JSON.parse(R),Array.isArray(y)&&c.status===404&&(_=[],y=null,E=200,w="OK")}catch{c.status===404&&R===""?(E=204,w="No Content"):y={message:R}}if(y&&this.isMaybeSingle&&(!((m=y==null?void 0:y.details)===null||m===void 0)&&m.includes("0 rows"))&&(y=null,E=200,w="OK"),y&&this.shouldThrowOnError)throw new n.default(y)}return{error:y,data:_,count:v,status:E,statusText:w}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,f,p;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(f=c==null?void 0:c.stack)!==null&&f!==void 0?f:""}`,hint:"",code:`${(p=c==null?void 0:c.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return gm.default=r,gm}var oP;function mU(){if(oP)return mm;oP=1,Object.defineProperty(mm,"__esModule",{value:!0});const e=Hu.__importDefault(pU());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const f=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return mm.default=n,mm}var aP;function o1(){if(aP)return pm;aP=1,Object.defineProperty(pm,"__esModule",{value:!0});const e=Hu.__importDefault(mU());class n extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return pm.default=n,pm}var lP;function gU(){if(lP)return fm;lP=1,Object.defineProperty(fm,"__esModule",{value:!0});const e=Hu.__importDefault(o1());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(f=>/\s/.test(f)&&!c?"":(f==='"'&&(c=!c),f)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((u,f)=>u.concat(Object.keys(f)),[]);if(c.length>0){const u=[...new Set(c)].map(f=>`"${f}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(f.length>0){const p=[...new Set(f)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return fm.default=n,fm}var cP;function zoe(){if(cP)return hm;cP=1,Object.defineProperty(hm,"__esModule",{value:!0});const t=Hu,e=t.__importDefault(gU()),n=t.__importDefault(o1());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let f;const p=new URL(`${this.url}/rpc/${s}`);let m;a||l?(f=a?"HEAD":"GET",Object.entries(o).filter(([_,v])=>v!==void 0).map(([_,v])=>[_,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([_,v])=>{p.searchParams.append(_,v)})):(f="POST",m=o);const y=new Headers(this.headers);return c&&y.set("Prefer",`count=${c}`),new n.default({method:f,url:p,headers:y,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return hm.default=r,hm}Object.defineProperty(qn,"__esModule",{value:!0});qn.PostgrestError=qn.PostgrestBuilder=qn.PostgrestTransformBuilder=qn.PostgrestFilterBuilder=qn.PostgrestQueryBuilder=qn.PostgrestClient=void 0;const Gu=Hu,vU=Gu.__importDefault(zoe());qn.PostgrestClient=vU.default;const yU=Gu.__importDefault(gU());qn.PostgrestQueryBuilder=yU.default;const _U=Gu.__importDefault(o1());qn.PostgrestFilterBuilder=_U.default;const wU=Gu.__importDefault(mU());qn.PostgrestTransformBuilder=wU.default;const bU=Gu.__importDefault(pU());qn.PostgrestBuilder=bU.default;const EU=Gu.__importDefault(fU());qn.PostgrestError=EU.default;var qoe=qn.default={PostgrestClient:vU.default,PostgrestQueryBuilder:yU.default,PostgrestFilterBuilder:_U.default,PostgrestTransformBuilder:wU.default,PostgrestBuilder:bU.default,PostgrestError:EU.default};const{PostgrestClient:Woe,PostgrestQueryBuilder:Hpe,PostgrestFilterBuilder:Gpe,PostgrestTransformBuilder:Kpe,PostgrestBuilder:Qpe,PostgrestError:Ype}=qoe;class Hoe{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Goe="2.76.1",Koe=`realtime-js/${Goe}`,Qoe="1.0.0",nE=1e4,Yoe=1e3,Joe=100;var Rh;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Rh||(Rh={}));var zt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(zt||(zt={}));var Qr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Qr||(Qr={}));var rE;(function(t){t.websocket="websocket"})(rE||(rE={}));var Ta;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ta||(Ta={}));class Xoe{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class TU{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ye;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ye||(Ye={}));const uP=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=Zoe(o,t,e,i),s),{}):{}},Zoe=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?IU(s,o):iE(o)},IU=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return rae(e,n)}switch(t){case Ye.bool:return eae(e);case Ye.float4:case Ye.float8:case Ye.int2:case Ye.int4:case Ye.int8:case Ye.numeric:case Ye.oid:return tae(e);case Ye.json:case Ye.jsonb:return nae(e);case Ye.timestamp:return iae(e);case Ye.abstime:case Ye.date:case Ye.daterange:case Ye.int4range:case Ye.int8range:case Ye.money:case Ye.reltime:case Ye.text:case Ye.time:case Ye.timestamptz:case Ye.timetz:case Ye.tsrange:case Ye.tstzrange:return iE(e);default:return iE(e)}},iE=t=>t,eae=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},tae=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},nae=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},rae=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>IU(e,a))}return t},iae=t=>typeof t=="string"?t.replace(" ","T"):t,SU=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class bw{constructor(e,n,r={},i=nE){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var dP;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(dP||(dP={}));class Ch{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ch.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Ch.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Ch.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const f=s[c];if(f){const p=u.map(v=>v.presence_ref),m=f.map(v=>v.presence_ref),y=u.filter(v=>m.indexOf(v.presence_ref)<0),_=f.filter(v=>p.indexOf(v.presence_ref)<0);y.length>0&&(a[c]=y),_.length>0&&(l[c]=_)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const f=e[a].map(m=>m.presence_ref),p=u.filter(m=>f.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(f=>f.presence_ref);c=c.filter(f=>u.indexOf(f.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var hP;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(hP||(hP={}));var Ph;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Ph||(Ph={}));var Ui;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ui||(Ui={}));class a1{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=zt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new bw(this,Qr.join,this.params,this.timeout),this.rejoinTimer=new TU(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=zt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=zt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=zt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Qr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Ch(this),this.broadcastEndpointURL=SU(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==zt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Ph.PRESENCE]&&this.bindings[Ph.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,f={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(f.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Ui.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ui.CLOSED)),this.updateJoinPayload(Object.assign({config:p},f)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var y;if(this.socket.setAuth(),m===void 0){e==null||e(Ui.SUBSCRIBED);return}else{const _=this.bindings.postgres_changes,v=(y=_==null?void 0:_.length)!==null&&y!==void 0?y:0,E=[];for(let w=0;w<v;w++){const T=_[w],{filter:{event:R,schema:D,table:O,filter:x}}=T,S=m&&m[w];if(S&&S.event===R&&S.schema===D&&S.table===O&&S.filter===x)E.push(Object.assign(Object.assign({},T),{id:S.id}));else{this.unsubscribe(),this.state=zt.errored,e==null||e(Ui.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=E,e&&e(Ui.SUBSCRIBED);return}}).receive("error",m=>{this.state=zt.errored,e==null||e(Ui.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ui.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===zt.joined&&e===Ph.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=zt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Qr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new bw(this,Qr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=zt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new bw(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Joe){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Qr;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var y,_,v;return((y=m.filter)===null||y===void 0?void 0:y.event)==="*"||((v=(_=m.filter)===null||_===void 0?void 0:_.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var y,_,v,E,w,T;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const R=m.id,D=(y=m.filter)===null||y===void 0?void 0:y.event;return R&&((_=n.ids)===null||_===void 0?void 0:_.includes(R))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((v=n.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{const R=(w=(E=m==null?void 0:m.filter)===null||E===void 0?void 0:E.event)===null||w===void 0?void 0:w.toLocaleLowerCase();return R==="*"||R===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const y=p.data,{schema:_,table:v,commit_timestamp:E,type:w,errors:T}=y;p=Object.assign(Object.assign({},{schema:_,table:v,commit_timestamp:E,eventType:w,new:{},old:{},errors:T}),this._getPayloadRecords(y))}m.callback(p,r)})}_isClosed(){return this.state===zt.closed}_isJoined(){return this.state===zt.joined}_isJoining(){return this.state===zt.joining}_isLeaving(){return this.state===zt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&a1.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Qr.close,{},e)}_onError(e){this._on(Qr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=zt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=uP(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=uP(e.columns,e.old_record)),n}}const Ew=()=>{},ym={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},sae=[1e3,2e3,5e3,1e4],oae=1e4,aae=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class lae{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=nE,this.transport=null,this.heartbeatIntervalMs=ym.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ew,this.ref=0,this.reconnectTimer=null,this.logger=Ew,this.conn=null,this.sendBuffer=[],this.serializer=new Xoe,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>El(()=>Promise.resolve().then(()=>Tl),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${rE.websocket}`,this.httpEndpoint=SU(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Hoe.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qoe}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Rh.connecting:return Ta.Connecting;case Rh.open:return Ta.Open;case Rh.closing:return Ta.Closing;default:return Ta.Closed}}isConnected(){return this.connectionState()===Ta.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new a1(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Yoe,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ym.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Qr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([aae],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:Koe};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Qr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new TU(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ym.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:nE,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:ym.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:Ew,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:f=>sae[f-1]||oae,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(f,p)=>p(JSON.stringify(f)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class l1 extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ft(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class cae extends l1{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class sE extends l1{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const c1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(()=>Promise.resolve().then(()=>Tl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},uae=()=>ie(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield El(()=>Promise.resolve().then(()=>Tl),void 0)).Response:Response}),oE=t=>{if(Array.isArray(t))return t.map(n=>oE(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=oE(r)}),e},dae=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Tw=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),hae=(t,e,n)=>ie(void 0,void 0,void 0,function*(){const r=yield uae();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new cae(Tw(i),s,o))}).catch(i=>{e(new sE(Tw(i),i))}):e(new sE(Tw(t),t))}),fae=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(dae(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function pp(t,e,n,r,i,s){return ie(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,fae(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>hae(l,a,r))})})}function Rf(t,e,n,r){return ie(this,void 0,void 0,function*(){return pp(t,"GET",e,n,r)})}function Gr(t,e,n,r,i){return ie(this,void 0,void 0,function*(){return pp(t,"POST",e,r,i,n)})}function aE(t,e,n,r,i){return ie(this,void 0,void 0,function*(){return pp(t,"PUT",e,r,i,n)})}function pae(t,e,n,r){return ie(this,void 0,void 0,function*(){return pp(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function u1(t,e,n,r,i){return ie(this,void 0,void 0,function*(){return pp(t,"DELETE",e,r,i,n)})}class mae{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ie(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}var xU;class gae{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[xU]="BlobDownloadBuilder",this.promise=null}asStream(){return new mae(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ie(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}}xU=Symbol.toStringTag;const vae={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},fP={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class yae{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=c1(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return ie(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},fP),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),f=yield(e=="PUT"?aE:Gr)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:f.Id,fullPath:f.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ft(s))return{data:null,error:s};throw s}})}upload(e,n,r){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return ie(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:fP.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const f=yield aE(this.fetch,a.toString(),l,{headers:u});return{data:{path:s,fullPath:f.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ft(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return ie(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Gr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new l1("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}update(e,n,r){return ie(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ie(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}copy(e,n,r){return ie(this,void 0,void 0,function*(){try{return{data:{path:(yield Gr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return ie(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Gr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return ie(this,void 0,void 0,function*(){try{const i=yield Gr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>Rf(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new gae(l,this.shouldThrowOnError)}info(e){return ie(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Rf(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:oE(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}exists(e){return ie(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield pae(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r)&&r instanceof sE){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return ie(this,void 0,void 0,function*(){try{return{data:yield u1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}list(e,n,r){return ie(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},vae),n),{prefix:e||""});return{data:yield Gr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}listV2(e,n){return ie(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Gr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const kU="2.76.1",AU={"X-Client-Info":`storage-js/${kU}`};class _ae{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},AU),n),this.fetch=c1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return ie(this,void 0,void 0,function*(){try{return{data:yield Rf(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ft(e))return{data:null,error:e};throw e}})}getBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Rf(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}createBucket(e){return ie(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ft(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return ie(this,void 0,void 0,function*(){try{return{data:yield aE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ft(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield u1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}}class wae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},AU),n),this.fetch=c1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield Gr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}listBuckets(e){return ie(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,s=yield Rf(this.fetch,i,{headers:this.headers});return{data:Array.isArray(s)?s.filter(a=>a.type==="ANALYTICS"):[],error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield u1(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ft(n))return{data:null,error:n};throw n}})}}const d1={"X-Client-Info":`storage-js/${kU}`,"Content-Type":"application/json"};class RU extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function lr(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class Iw extends RU{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bae extends RU{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var pP;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(pP||(pP={}));const h1=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(()=>Promise.resolve().then(()=>Tl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Eae=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},mP=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Tae=(t,e,n)=>ie(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new Iw(mP(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Iw(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new Iw(a,i,o))}}else e(new bae(mP(t),t))}),Iae=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Eae(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function Sae(t,e,n,r,i,s){return ie(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Iae(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>Tae(l,a,r))})})}function cr(t,e,n,r,i){return ie(this,void 0,void 0,function*(){return Sae(t,"POST",e,r,i,n)})}class xae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},d1),n),this.fetch=h1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ie(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ie(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}listIndexes(e){return ie(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ie(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(lr(r))return{data:null,error:r};throw r}})}}class kae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},d1),n),this.fetch=h1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ie(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield cr(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}getVectors(e){return ie(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}listVectors(e){return ie(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield cr(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}queryVectors(e){return ie(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ie(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield cr(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}}class Aae{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},d1),n),this.fetch=h1(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}getBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:yield cr(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}listBuckets(){return ie(this,arguments,void 0,function*(e={}){try{return{data:yield cr(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ie(this,void 0,void 0,function*(){try{return{data:(yield cr(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(lr(n))return{data:null,error:n};throw n}})}}class Rae extends Aae{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Cae(this.url,this.headers,e,this.fetch)}}class Cae extends xae{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ie(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ie(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ie(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ie(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Pae(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Pae extends kae{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ie(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ie(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ie(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ie(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ie(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Oae extends _ae{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new yae(this.url,this.headers,e,this.fetch)}get vectors(){return new Rae(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new wae(this.url+"/iceberg",this.headers,this.fetch)}}const Nae="2.76.1";let Jd="";typeof Deno<"u"?Jd="deno":typeof document<"u"?Jd="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Jd="react-native":Jd="node";const Dae={"X-Client-Info":`supabase-js-${Jd}/${Nae}`},jae={headers:Dae},Lae={schema:"public"},Mae={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Vae={},Fae=t=>{let e;return t?e=t:typeof fetch>"u"?e=dU:e=fetch,(...n)=>e(...n)},$ae=()=>typeof Headers>"u"?hU:Headers,Uae=(t,e,n)=>{const r=Fae(n),i=$ae();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))}};function Bae(t){return t.endsWith("/")?t:t+"/"}function zae(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:f}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),a),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function qae(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Bae(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const CU="2.76.1",Zl=30*1e3,lE=3,Sw=lE*Zl,Wae="http://localhost:9999",Hae="supabase.auth.token",Gae={"X-Client-Info":`gotrue-js/${CU}`},cE="X-Supabase-Api-Version",PU={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Kae=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qae=10*60*1e3;class Cf extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Yae extends Cf{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function Jae(t){return le(t)&&t.name==="AuthApiError"}class Ia extends Cf{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Zo extends Cf{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Ks extends Zo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Xae(t){return le(t)&&t.name==="AuthSessionMissingError"}class Fl extends Zo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _m extends Zo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class wm extends Zo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Zae(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class gP extends Zo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uE extends Zo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function xw(t){return le(t)&&t.name==="AuthRetryableFetchError"}class vP extends Zo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class dE extends Zo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const fv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yP=` 	
\r=`.split(""),ele=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yP.length;e+=1)t[yP[e].charCodeAt(0)]=-2;for(let e=0;e<fv.length;e+=1)t[fv[e].charCodeAt(0)]=e;return t})();function _P(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fv[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(fv[r]),e.queuedBits-=6}}function OU(t,e,n){const r=ele[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wP(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{rle(o,r,n)};for(let o=0;o<t.length;o+=1)OU(t.charCodeAt(o),i,s);return e.join("")}function tle(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nle(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}tle(r,e)}}function rle(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function jc(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)OU(t.charCodeAt(i),n,r);return new Uint8Array(e)}function ile(t){const e=[];return nle(t,n=>e.push(n)),new Uint8Array(e)}function ja(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>_P(i,n,r)),_P(null,n,r),e.join("")}function sle(t){return Math.round(Date.now()/1e3)+t}function ole(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const sr=()=>typeof window<"u"&&typeof document<"u",aa={tested:!1,writable:!1},NU=()=>{if(!sr())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(aa.tested)return aa.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),aa.tested=!0,aa.writable=!0}catch{aa.tested=!0,aa.writable=!1}return aa.writable};function ale(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const DU=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>El(()=>Promise.resolve().then(()=>Tl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},lle=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",ec=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},la=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Hs=async(t,e)=>{await t.removeItem(e)};class $y{constructor(){this.promise=new $y.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}$y.promiseConstructor=Promise;function kw(t){const e=t.split(".");if(e.length!==3)throw new dE("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Kae.test(e[r]))throw new dE("JWT not in base64url format");return{header:JSON.parse(wP(e[0])),payload:JSON.parse(wP(e[1])),signature:jc(e[2]),raw:{header:e[0],payload:e[1]}}}async function cle(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ule(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function dle(t){return("0"+t.toString(16)).substr(-2)}function hle(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,dle).join("")}async function fle(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function ple(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await fle(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function $l(t,e,n=!1){const r=hle();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await ec(t,`${e}-code-verifier`,i);const s=await ple(r);return[s,r===s?"plain":"s256"]}const mle=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function gle(t){const e=t.headers.get(cE);if(!e||!e.match(mle))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function vle(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function yle(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _le=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ul(t){if(!_le.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Aw(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bP(t){return JSON.parse(JSON.stringify(t))}const pa=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),wle=[502,503,504];async function EP(t){var e;if(!lle(t))throw new uE(pa(t),0);if(wle.includes(t.status))throw new uE(pa(t),t.status);let n;try{n=await t.json()}catch(s){throw new Ia(pa(s),s)}let r;const i=gle(t);if(i&&i.getTime()>=PU["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new vP(pa(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Ks}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new vP(pa(n),t.status,n.weak_password.reasons);throw new Yae(pa(n),t.status||500,r)}const ble=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ge(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[cE]||(s[cE]=PU["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Ele(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Ele(t,e,n,r,i,s){const o=ble(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new uE(pa(l),0)}if(a.ok||await EP(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await EP(l)}}function Wr(t){var e;let n=null;Sle(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=sle(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function TP(t){const e=Wr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function no(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function Tle(t){return{data:t,error:null}}function Ile(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=As(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function IP(t){return t}function Sle(t){return t.access_token&&t.refresh_token&&t.expires_in}const Rw=["global","local","others"];class xle{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=DU(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Rw[0]){if(Rw.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Rw.join(", ")}`);try{return await ge(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:no})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=As(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ile,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(le(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:no})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:IP});if(u.error)throw u.error;const f=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=_}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(le(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Ul(e);try{return await ge(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:no})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Ul(e);try{return await ge(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:no})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Ul(e);try{return await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:no})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Ul(e.userId);try{const{data:n,error:r}=await ge(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Ul(e.userId),Ul(e.id);try{return{data:await ge(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:IP});if(u.error)throw u.error;const f=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(y.split(";")[1].split("=")[1]);c[`${v}Page`]=_}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},f),c),error:null}}catch(c){if(le(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}}function SP(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Bl={debug:!!(globalThis&&NU()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jU extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class kle extends jU{}async function Ale(t,e,n){Bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Bl.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Bl.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new kle(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Bl.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Rle(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function LU(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Cle(t){return parseInt(t,16)}function Ple(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Ole(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:f,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!f)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=LU(t.address),y=u?`${u}://${r}`:r,_=t.statement?`${t.statement}
`:"",v=`${y} wants you to sign in with your Ethereum account:
${m}

${_}`;let E=`URI: ${f}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(E+=`
Expiration Time: ${i.toISOString()}`),a&&(E+=`
Not Before: ${a.toISOString()}`),l&&(E+=`
Request ID: ${l}`),c){let w=`
Resources:`;for(const T of c){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);w+=`
- ${T}`}E+=w}return`${v}
${E}`}class Vt extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class pv extends Vt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Nle({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Vt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Vt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Vt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Vt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Vt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Vt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Vt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(MU(o)){if(s.rp.id!==o)return new Vt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Vt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Vt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function Dle({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Vt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Vt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(MU(r)){if(n.rpId!==r)return new Vt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Vt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Vt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Vt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class jle{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const Lle=new jle;function Mle(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=As(t,["challenge","user","excludeCredentials"]),s=jc(e).buffer,o=Object.assign(Object.assign({},n),{id:jc(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:jc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function Vle(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=As(t,["challenge","allowCredentials"]),i=jc(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:jc(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function Fle(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:ja(new Uint8Array(t.response.attestationObject)),clientDataJSON:ja(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function $le(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:ja(new Uint8Array(i.authenticatorData)),clientDataJSON:ja(new Uint8Array(i.clientDataJSON)),signature:ja(new Uint8Array(i.signature)),userHandle:i.userHandle?ja(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function MU(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function xP(){var t,e;return!!(sr()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Ule(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pv("Browser returned unexpected credential type",e)}:{data:null,error:new pv("Empty credential response",e)}}catch(e){return{data:null,error:Nle({error:e,options:t})}}}async function Ble(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new pv("Browser returned unexpected credential type",e)}:{data:null,error:new pv("Empty credential response",e)}}catch(e){return{data:null,error:Dle({error:e,options:t})}}}const zle={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},qle={userVerification:"preferred",hints:["security-key"]};function mv(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=mv(a,o):r[s]=mv(o)}else r[s]=o}return r}function Wle(t,e){return mv(zle,t,e||{})}function Hle(t,e){return mv(qle,t,e||{})}class Gle{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??Lle.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=Wle(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:f}=await Ule({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}case"request":{const c=Hle(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:f}=await Ble(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:f}}}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Ia("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Cf("rpId is required for WebAuthn authentication")};try{if(!xP())return{data:null,error:new Ia("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Ia("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Cf("rpId is required for WebAuthn registration")};try{if(!xP())return{data:null,error:new Ia("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var f;return(f=u.data)===null||f===void 0?void 0:f.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return le(o)?{data:null,error:o}:{data:null,error:new Ia("Unexpected error in register",o)}}}}Rle();const Kle={url:Wae,storageKey:Hae,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gae,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function kP(t,e,n){return await n()}const zl={};class Pf{get jwks(){var e,n;return(n=(e=zl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){zl[this.storageKey]=Object.assign(Object.assign({},zl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=zl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){zl[this.storageKey]=Object.assign(Object.assign({},zl[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Pf.nextInstanceID,Pf.nextInstanceID+=1,this.instanceID>0&&sr()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},Kle),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new xle({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=DU(i.fetch),this.lock=i.lock||kP,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:sr()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Ale:this.lock=kP,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Gle(this)},this.persistSession?(i.storage?this.storage=i.storage:NU()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=SP(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=SP(this.memoryStorage)),sr()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${CU}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=ale(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),sr()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),Zae(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return le(n)?{error:n}:{error:new Ia("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Wr}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:f,options:p}=e;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await $l(this.storage,this.storageKey)),s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},xform:Wr})}else if("phone"in e){const{phone:u,password:f,options:p}=e;s=await ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:f,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Wr})}else throw new _m("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:TP})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:TP})}else throw new _m("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Fl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,u,f,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:_,wallet:v,statement:E,options:w}=e;let T;if(sr())if(typeof v=="object")T=v;else{const A=window;if("ethereum"in A&&typeof A.ethereum=="object"&&"request"in A.ethereum&&typeof A.ethereum.request=="function")T=A.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=v}const R=new URL((n=w==null?void 0:w.url)!==null&&n!==void 0?n:window.location.href),D=await T.request({method:"eth_requestAccounts"}).then(A=>A).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const O=LU(D[0]);let x=(r=w==null?void 0:w.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!x){const A=await T.request({method:"eth_chainId"});x=Cle(A)}const S={domain:R.host,address:O,statement:E,uri:R.href,version:"1",chainId:x,nonce:(i=w==null?void 0:w.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=w==null?void 0:w.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=w==null?void 0:w.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=w==null?void 0:w.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=w==null?void 0:w.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=w==null?void 0:w.signInWithEthereum)===null||u===void 0?void 0:u.resources};m=Ole(S),y=await T.request({method:"personal_sign",params:[Ple(m),O]})}try{const{data:_,error:v}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:y},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Wr});if(v)throw v;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new Fl}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:v})}catch(_){if(le(_))return{data:{user:null,session:null},error:_};throw _}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,f,p,m;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{chain:v,wallet:E,statement:w,options:T}=e;let R;if(sr())if(typeof E=="object")R=E;else{const O=window;if("solana"in O&&typeof O.solana=="object"&&("signIn"in O.solana&&typeof O.solana.signIn=="function"||"signMessage"in O.solana&&typeof O.solana.signMessage=="function"))R=O.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=E}const D=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in R&&R.signIn){const O=await R.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),w?{statement:w}:null));let x;if(Array.isArray(O)&&O[0]&&typeof O[0]=="object")x=O[0];else if(O&&typeof O=="object"&&"signedMessage"in O&&"signature"in O)x=O;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)y=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),_=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in R)||typeof R.signMessage!="function"||!("publicKey"in R)||typeof R!="object"||!R.publicKey||!("toBase58"in R.publicKey)||typeof R.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,R.publicKey.toBase58(),...w?["",w,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=T==null?void 0:T.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=T==null?void 0:T.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((o=T==null?void 0:T.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((a=T==null?void 0:T.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((l=T==null?void 0:T.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((c=T==null?void 0:T.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((f=(u=T==null?void 0:T.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||f===void 0)&&f.length?["Resources",...T.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const O=await R.signMessage(new TextEncoder().encode(y),"utf8");if(!O||!(O instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=O}}try{const{data:v,error:E}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:ja(_)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Wr});if(E)throw E;return!v||!v.session||!v.user?{data:{user:null,session:null},error:new Fl}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("SIGNED_IN",v.session)),{data:Object.assign({},v),error:E})}catch(v){if(le(v))return{data:{user:null,session:null},error:v};throw v}}async _exchangeCodeForSession(e){const n=await la(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Wr});if(await Hs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new Fl}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(le(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Wr}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new Fl}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await $l(this.storage,this.storageKey));const{error:f}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new _m("You must provide either an email or phone number.")}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Wr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await $l(this.storage,this.storageKey)),await ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:Tle})}catch(s){if(le(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Ks;const{error:i}=await ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await ge(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new _m("You must provide either an email or phone number and a type")}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await la(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Sw:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await la(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Aw()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:no}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ks}:await ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:no})})}catch(n){if(le(n))return Xae(n)&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Ks;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await $l(this.storage,this.storageKey));const{data:c,error:u}=await ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:no});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(le(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ks;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=kw(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(le(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Ks;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(le(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!sr())throw new wm("No browser detected.");if(e.error||e.error_description||e.error_code)throw new wm(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new gP("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new wm("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new gP("No code detected.");const{data:w,error:T}=await this._exchangeCodeForSession(e.code);if(T)throw T;const R=new URL(window.location.href);return R.searchParams.delete("code"),window.history.replaceState(window.history.state,"",R.toString()),{data:{session:w.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new wm("No session defined in URL");const u=Math.round(Date.now()/1e3),f=parseInt(a);let p=u+f;l&&(p=parseInt(l));const m=p-u;m*1e3<=Zl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${f}s`);const y=p-f;u-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,p,u):u-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,p,u);const{data:_,error:v}=await this._getUser(s);if(v)throw v;const E={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:f,expires_at:p,refresh_token:o,token_type:c,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:E,redirectType:e.type},error:null}}catch(r){if(le(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await la(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Jae(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Hs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=ole(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await $l(this.storage,this.storageKey,!0));try{return await ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(le(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:f,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ge(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return sr()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(le(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,f=await ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Wr}),{data:p,error:m}=f;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new Fl}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(i){if(le(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await ge(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await ule(async i=>(i>0&&await cle(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Wr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&xw(s)&&Date.now()+o-r<Zl})}catch(r){if(this._debug(n,"error",r),le(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),sr()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await la(this.storage,this.storageKey);if(i&&this.userStorage){let o=await la(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await ec(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Aw()}else if(i&&!i.user&&!i.user){const o=await la(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Hs(this.storage,this.storageKey+"-user"),await ec(this.storage,this.storageKey,i)):i.user=Aw()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Sw;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${Sw}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),xw(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Ks;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new $y;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Ks;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),le(s)){const o={data:null,error:s};return xw(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await ec(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=bP(i);await ec(this.storage,this.storageKey,s)}else{const i=bP(n);await ec(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Hs(this.storage,this.storageKey),await Hs(this.storage,this.storageKey+"-code-verifier"),await Hs(this.storage,this.storageKey+"-user"),this.userStorage&&await Hs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&sr()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Zl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Zl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Zl}ms, refresh threshold is ${lE} ticks`),i<=lE&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jU)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!sr()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await $l(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ge(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ge(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(le(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?Fle(e.webauthn.credential_response):$le(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(le(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=await ge(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Mle(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:Vle(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(le(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=kw(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+Qae>i)return r;const{data:s,error:o}=await ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:y}=await this.getSession();if(y||!m.session)return{data:null,error:y};r=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=kw(r);n!=null&&n.allowExpired||vle(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const u=yle(i.alg),f=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,f,o,ile(`${a}.${l}`)))throw new dE("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(le(r))return{data:null,error:r};throw r}}}Pf.nextInstanceID=0;const Qle=Pf;class Yle extends Qle{constructor(e){super(e)}}class Jle{constructor(e,n,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=n;const a=qae(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:Lae,realtime:Vae,auth:Object.assign(Object.assign({},Mae),{storageKey:l}),global:jae},u=zae(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(f,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Uae(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Woe(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Oae(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Moe(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c},u,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Yle({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new lae(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Xle=(t,e,n)=>new Jle(t,e,n);function Zle(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Zle()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const ece="https://ttctclwuiwfudfzdcaux.supabase.co",tce="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",nce=Xle(ece,tce),rce="https://ttctclwuiwfudfzdcaux.supabase.co",Cw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4";async function ae(t,e={}){const{method:n="GET",body:r,headers:i={}}=e,s=`${rce}/functions/v1/${t}`,o={"Content-Type":"application/json",apikey:Cw,...i};try{const{data:{session:l}}=await nce.auth.getSession();l!=null&&l.access_token?o.Authorization=`Bearer ${l.access_token}`:o.Authorization=`Bearer ${Cw}`}catch{o.Authorization=`Bearer ${Cw}`}const a={method:n,headers:o};r&&(a.body=JSON.stringify(r));try{const l=await fetch(s,a),c=await l.json();if(!l.ok)throw new Error(c.error||c.message||"An error occurred");return c}catch(l){throw console.error(`Error calling edge function ${t}:`,l),l}}const me={events:{getAll:(t={})=>ae("events",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>ae("events",{method:"POST",body:{action:"getById",id:t}}),create:t=>ae("events",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>ae("events",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>ae("events",{method:"POST",body:{action:"delete",id:t}})},users:{getAll:(t={})=>ae("users",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>ae("users",{method:"POST",body:{action:"getById",id:t}}),getByFirebaseUid:t=>ae("users",{method:"POST",body:{action:"getByFirebaseUid",firebaseUid:t}}),create:t=>ae("users",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>ae("users",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>ae("users",{method:"POST",body:{action:"delete",id:t}}),getOrganizations:t=>ae("users",{method:"POST",body:{action:"getOrganizations",userId:t}}),addToOrganization:(t,e,n)=>ae("users",{method:"POST",body:{action:"addToOrganization",userId:t,orgId:e,role:n}}),removeFromOrganization:(t,e)=>ae("users",{method:"POST",body:{action:"removeFromOrganization",userId:t,orgId:e}})},organizations:{getAll:(t={})=>ae("organizations",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>ae("organizations",{method:"POST",body:{action:"getById",id:t}}),create:t=>ae("organizations",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>ae("organizations",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>ae("organizations",{method:"POST",body:{action:"delete",id:t}}),getUsers:t=>ae("organizations",{method:"POST",body:{action:"getUsers",orgId:t}}),addUser:(t,e,n)=>ae("organizations",{method:"POST",body:{action:"addUser",orgId:t,userId:e,role:n}}),removeUser:(t,e)=>ae("organizations",{method:"POST",body:{action:"removeUser",orgId:t,userId:e}})},tickets:{getByEventId:t=>ae("tickets",{method:"POST",body:{action:"getByEventId",eventId:t}}),getById:t=>ae("tickets",{method:"POST",body:{action:"getById",id:t}}),create:t=>ae("tickets",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>ae("tickets",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>ae("tickets",{method:"POST",body:{action:"delete",id:t}}),checkAvailability:(t,e)=>ae("tickets",{method:"POST",body:{action:"checkAvailability",ticketTypeId:t,quantity:e}})},orders:{getAll:(t={})=>ae("orders",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>ae("orders",{method:"POST",body:{action:"getById",id:t}}),create:t=>ae("orders",{method:"POST",body:{action:"create",data:t}}),updateStatus:(t,e,n)=>ae("orders",{method:"POST",body:{action:"updateStatus",id:t,status:e,paymentIntentId:n}}),calculateTotal:(t,e)=>ae("orders",{method:"POST",body:{action:"calculateTotal",items:t,discountCodeId:e}})},forms:{getAll:(t={})=>ae("forms",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>ae("forms",{method:"POST",body:{action:"getById",id:t}}),create:t=>ae("forms",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>ae("forms",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>ae("forms",{method:"POST",body:{action:"delete",id:t}}),publish:t=>ae("forms",{method:"POST",body:{action:"update",id:t,data:{is_published:!0}}}),unpublish:t=>ae("forms",{method:"POST",body:{action:"update",id:t,data:{is_published:!1}}}),submitForm:(t,e,n)=>ae("forms",{method:"POST",body:{action:"submitForm",formId:t,responses:e,email:n}}),getSubmissions:t=>ae("forms",{method:"POST",body:{action:"getSubmissions",formId:t}})},discounts:{getByEventId:t=>ae("discounts",{method:"POST",body:{action:"getByEventId",eventId:t}}),getById:t=>ae("discounts",{method:"POST",body:{action:"getById",id:t}}),create:t=>ae("discounts",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>ae("discounts",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>ae("discounts",{method:"POST",body:{action:"delete",id:t}}),validateCode:(t,e)=>ae("discounts",{method:"POST",body:{action:"validateCode",code:t,eventId:e}}),incrementUsage:t=>ae("discounts",{method:"POST",body:{action:"incrementUsage",id:t}})},payments:{createPaymentSession:t=>ae("payments",{method:"POST",body:{action:"createPaymentSession",orderId:t}}),confirmPayment:(t,e)=>ae("payments",{method:"POST",body:{action:"confirmPayment",orderId:t,paymentData:e}}),handleWebhook:t=>ae("payments",{method:"POST",body:{action:"handleWebhook",webhookData:t}})}},hE={async getAll(t={}){return(await me.users.getAll(t)).data},async getById(t){return(await me.users.getById(t)).data},async getByFirebaseUid(t){return(await me.users.getByFirebaseUid(t)).data},async create(t){return(await me.users.create(t)).data},async update(t,e){return(await me.users.update(t,e)).data},async delete(t){return await me.users.delete(t),!0},async getOrganizations(t){return(await me.users.getOrganizations(t)).data},async addToOrganization(t,e,n="member"){return(await me.users.addToOrganization(t,e,n)).data},async removeFromOrganization(t,e){return await me.users.removeFromOrganization(t,e),!0},async getFullUserWithToken(){const t=sn.auth().currentUser;if(!t)return null;const e=await this.getByFirebaseUid(t.uid);return e?[e]:[]}};var ice={VITE_SUPABASE_URL:"https://ttctclwuiwfudfzdcaux.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",VITE_DEV_IS_BREAKPOINT_VISABLE:"true",VITE_APP_ENV:"development",VITE_FIREBASE_API_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_FIREBASE_AUTH_DOMAIN:"fractal-tickets.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"fractal-tickets",VITE_FIREBASE_STORAGE_BUCKET:"fractal-tickets.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"123289322265",VITE_FIREBASE_APP_ID:"1:123289322265:web:d31675e0df128103083b88",VITE_FIREBASE_PUB_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_GOOGLE_MAPS_API_KEY:"AIzaSyB9MtoqdlypQTk3gFd10CaW8SllpXZSGP4",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const sce=ice.VITE_APP_FIREBASE_TENANT_ID,Ku=Noe(sce),Uy=async t=>{var e,n;try{await hE.getByFirebaseUid(t.uid)||await hE.create({email:t.email,first_name:((e=t.displayName)==null?void 0:e.split(" ")[0])||null,last_name:((n=t.displayName)==null?void 0:n.split(" ").slice(1).join(" "))||null,firebase_uid:t.uid})}catch(r){console.error("Error syncing Firebase user to Supabase:",r)}},oce=async(t,e)=>{const n=await Ku.signInWithEmailAndPassword(t,e);await Uy(n.user)},VU=async()=>{const t=await Ku.signInWithPopup(new sn.auth.GoogleAuthProvider);await Uy(t.user)},ace=async()=>{await Ku.signOut()},lce=async(t,e)=>{const n=await Ku.createUserWithEmailAndPassword(t,e);return await n.user.sendEmailVerification(),await Uy(n.user),n.user},cce=async t=>{await Ku.sendPasswordResetEmail(t)},uce=async()=>sn.auth().currentUser,dce=t=>({authToken:t.multiFactor.user.accessToken}),hce=async t=>{const{authToken:e}=dce(t);e&&(zv.update({authToken:e}),dn.update({isSignedIn:!0}))},fce=async()=>{const t=await uce();let e=null;return t&&(await Uy(t),e=await hE.getByFirebaseUid(t.uid),e&&Yc.update(e)),e},pce=()=>{Ku.signOut(),zv.reset(),dn.reset(),Yc.reset()},mce=()=>{var n;const t=Li(),e=async()=>{try{await ace(),zv.reset(),dn.reset(),Yc.reset(),gt.update({message:"Logged out successfully!",variant:"success"}),t("/login")}catch{gt.update({message:"Failed to log out. Please try again.",variant:"danger"})}};return h.jsx(Xp,{bg:"grey-900",expand:"lg",className:"mb-32 border-bottom",children:h.jsxs(Gt,{fluid:!0,children:[h.jsx(Xp.Brand,{as:fr,to:"/admin",children:h.jsx("img",{src:"/logo-white.svg",alt:"Logo",className:"me-2"})}),h.jsx(Xp.Toggle,{"aria-controls":"admin-navbar-nav"}),h.jsxs(Xp.Collapse,{id:"admin-navbar-nav",children:[h.jsxs(Bd,{className:"me-auto",children:[h.jsx(Bd.Link,{as:fr,to:"/admin",children:"Dashboard"}),h.jsx(Bd.Link,{as:fr,to:"/admin/events",children:"Events"})]}),h.jsx(Bd,{children:h.jsxs(Le,{align:"end",children:[h.jsxs(Le.Toggle,{variant:"outline-secondary",id:"user-dropdown",children:[h.jsx($e,{icon:o7,className:"me-2"}),((n=Yc.value)==null?void 0:n.email)||"Account"]}),h.jsx(Le.Menu,{children:h.jsxs(Le.Item,{onClick:e,children:[h.jsx($e,{icon:i7,className:"me-2"}),"Logout"]})})]})})]})]})})},gce=({children:t,className:e,fluid:n})=>{var r;return(r=dn.value)!=null&&r.isLoading?h.jsx("div",{children:h.jsx("div",{className:"min-vh-100 w-100 d-flex justify-content-center align-items-center flex-grow-1",children:h.jsx(Ho,{message:"Loading...",className:"text-center"})})}):h.jsxs("div",{children:[h.jsx(mce,{}),h.jsx(Gt,{fluid:!!n,className:e,children:t})]})},vce=()=>!dn.value.isSignedIn&&!dn.value.isLoading?h.jsx(SD,{to:`/login?redirect=${window.location.pathname}`}):h.jsx(gce,{children:h.jsx(IT,{})}),yce="0",_ce="576px",wce="768px",bce="992px",Ece="1200px",Tce="1400px",Ice="1600px",Sce={xs:yce,sm:_ce,md:wce,lg:bce,xl:Ece,xxl:Tce,xxxl:Ice},bm=je({windowSize:{breakPoint:null,height:null}}),Xd=Object.entries(Sce).reduce((t,[e,n])=>{const r=parseInt(`${n}`.replace("px",""),10),{lastBP:i,...s}=t;return{...s,[e]:{min:r,max:Number.MAX_SAFE_INTEGER},...i&&{[i]:{min:t[i].min,max:r-1}},lastBP:e}},{});function xce(t){var e;return(e=Object.entries(Xd).filter(([,{min:n,max:r}])=>n!=null&&r!=null&&t>=n&&t<=r)[0])==null?void 0:e[0]}const kce=()=>{const{windowSize:t}=bm.value,e=I.useCallback(()=>{const s=xce(window.innerWidth),o=bm.value.windowSize;s===o.breakPoint?bm.update({windowSize:o}):bm.update({windowSize:{breakPoint:s,height:window.scrollY}})},[]),n=I.useCallback(s=>{if(!t.breakPoint)return!1;const o=Xd[t.breakPoint],a=Xd[s];return t.breakPoint===s||a.max<=o.min},[t]),r=I.useCallback(s=>t.breakPoint===s,[t]),i=I.useCallback(s=>{if(!t.breakPoint)return!1;const o=Xd[t.breakPoint],a=Xd[s];return t.breakPoint===s||a.min>=o.max},[t]);return I.useEffect(()=>(window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)),[e]),{...t,isBreakpoint:r,isBreakpointUp:n,isBreakpointDown:i}},Ace=(t,e)=>{let n;return(...r)=>{n||(t.apply(void 0,r),n=!0,setTimeout(()=>{n=!1},e))}},Rce=(t,e=[],n=0)=>{const r=async()=>{await t()},i=I.useRef(Ace(r,n)).current,s=I.useCallback(async()=>{await i()},[i]);I.useEffect(()=>{s()},[...e])},er=Rce,Cce=({signal:t,animation:e,placeholderType:n,children:r,template:i,className:s})=>{var o;return t?(o=t==null?void 0:t.value)!=null&&o.isLoading?h.jsxs(Dg,{as:n||"div",animation:e||"glow",className:"mb-0",children:[!i&&h.jsx("div",{className:"w-100 d-flex justify-content-center text-primary",children:h.jsx("div",{className:"spinner-border"})}),i==="text"&&h.jsx(Dg,{xs:12,as:n||"p",className:`${s} text-loadable`}),i==="component"&&h.jsx(Ho,{className:"d-flex align-items-center justify-content-center"})]}):h.jsx("div",{children:r}):new Error("SIGNAL REQUIRED FOR LOADABLE")},Pce=()=>{const{breakPoint:t}=kce();return er(async()=>{const e=tg.onAuthStateChanged(async n=>{dn.update({isLoading:!0}),n?(await hce(n),await fce()):dn.value.isSignedIn&&await pce(),dn.update({isLoading:!1})});return()=>e()},[]),h.jsxs(Gt,{fluid:!0,className:"p-0",children:[h.jsx(cs,{bg:"primary",className:"breakpointBadge",children:t}),h.jsx(Cce,{signal:dn,children:h.jsx(IT,{})})]})},Oce=({notification:t,onRemoveNotification:e})=>{const[n,r]=I.useState(!1),{timeout:i=6e3,variant:s,displayMessage:o,id:a}=t,l=()=>{r(!0),setTimeout(()=>{e(a)},750)};return I.useEffect(()=>{const c=setTimeout(()=>l(),i);return()=>{clearTimeout(c)}},[]),h.jsx(ut,{className:`z-index-9999 mx-auto slide mt-16 d-flex justify-content-center ${n?"slide-out":"slide-in"}`,children:h.jsx(ve,{sm:10,md:8,lg:6,xl:4,className:`notification notification-${s} shadow-sm rounded-4 p-16`,children:h.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[h.jsx("div",{className:"text-center",children:(Array.isArray(o)?o:[o]).map(c=>h.jsx("div",{children:c},c))}),h.jsx("div",{tabIndex:0,role:"button","aria-label":"close",onClick:()=>e(a),className:"ms-auto pe-16",children:h.jsx($e,{style:{height:"15px",width:"15px"},icon:E7})})]})})})},Nce=({notification:t,onRemoveNotification:e})=>h.jsx("div",{className:"modal fade show modal-background d-block z-index-10",role:"dialog",children:h.jsx("div",{className:"modal-dialog modal-dialog-centered",children:h.jsxs("div",{className:"modal-content",children:[h.jsx("div",{className:"modal-header bg-danger text-white",children:"An Error has occured!"}),h.jsx("div",{className:"modal-body",children:t.displayMessage}),h.jsx("div",{className:"modal-footer",children:h.jsx(be,{className:"btn btn-dark",onClick:()=>e(t.id),type:"button",children:"Close"})})]})})}),Dce=({onRemoveNotification:t})=>h.jsx("div",{className:"z-index-9999 container-fliud fixed-top",children:gt.value.notificationArray.map(e=>h.jsx(Oce,{notification:e,onRemoveNotification:t},e.id))}),jce=()=>{const{notificationArray:t}=gt.value,e=I.useCallback(i=>{const s=gt.value.notificationArray.filter(o=>o.id!==i);gt.update({notificationArray:s})},[]),n=I.useMemo(()=>{const i={modal:[],toast:[],window:[]};return t==null||t.forEach(s=>{var o;i[s.displayType]&&((o=i[s.displayType])==null||o.push(s))}),i},[t==null?void 0:t.length]),r=t==null?void 0:t.filter(i=>i.displayType==="dev");return r!=null&&r.length&&(r==null||r.forEach(i=>console.error(i))),n.window.length?(window.alert(n.window[0].message),gt.reset(),null):n.modal.length?h.jsx(Nce,{notification:n.modal[0],onRemoveNotification:e}):n.toast.length?h.jsx(Dce,{notifications:n.toast,onRemoveNotification:e}):h.jsx("div",{})},ws={async getAll(t={}){return(await me.events.getAll(t)).data},async getById(t){return(await me.events.getById(t)).data},async create(t){return(await me.events.create(t)).data},async update(t,e){return(await me.events.update(t,e)).data},async delete(t){return await me.events.delete(t),!0},async publish(t){return this.update(t,{status:"PUBLISHED"})},async unpublish(t){return this.update(t,{status:"DRAFT"})}},bs={async getAll(t={}){return(await me.forms.getAll(t)).data},async getById(t){return(await me.forms.getById(t)).data},async create(t){return(await me.forms.create(t)).data},async update(t,e){return(await me.forms.update(t,e)).data},async delete(t){return await me.forms.delete(t),!0},async publish(t){return(await me.forms.publish(t)).data},async unpublish(t){return(await me.forms.unpublish(t)).data},async submitForm(t,e,n=null){return(await me.forms.submitForm(t,e,n)).data},async getSubmissions(t){return(await me.forms.getSubmissions(t)).data}},mp={async getAll(t={}){return(await me.orders.getAll(t)).data},async getById(t){return(await me.orders.getById(t)).data},async getByEventId(t){return(await me.orders.getAll({event_id:t})).data},async create(t){return(await me.orders.create(t)).data},async updateStatus(t,e,n=null){return(await me.orders.updateStatus(t,e,n)).data},async updateTicketInventory(){return!0},async calculateTotal(t,e=null){return await me.orders.calculateTotal(t,e)}},Lce=async()=>{try{ph.loadingStart();const[t,e,n]=await Promise.all([ws.getAll(),bs.getAll(),mp.getAll()]),r=n.filter(i=>i.status==="PAID").reduce((i,s)=>i+parseFloat(s.total),0);ph.update({stats:{events:t.length,forms:e.length,orders:n.length,revenue:r}})}catch(t){console.error("Error loading stats:",t)}finally{ph.loadingEnd()}};function Mce(){const{stats:t}=ph.value;return er(async()=>{await Lce()},[]),h.jsxs(Gt,{fluid:!0,className:"py-4",children:[h.jsx(ut,{className:"mb-32",children:h.jsxs(ve,{children:[h.jsx("h2",{children:"Dashboard"}),h.jsx("p",{className:"text-muted",children:"Headless Ticketing Platform"})]})}),h.jsxs(ut,{className:"mb-32",children:[h.jsx(ve,{md:3,children:h.jsx(de,{className:"text-center",children:h.jsxs(de.Body,{children:[h.jsx($e,{icon:S7,size:"2x",className:"text-primary mb-24"}),h.jsx("h3",{className:"mb-8",children:t.events}),h.jsx("p",{className:"text-muted mb-0",children:"Events"})]})})}),h.jsx(ve,{md:3,children:h.jsx(de,{className:"text-center",children:h.jsxs(de.Body,{children:[h.jsx($e,{icon:t7,size:"2x",className:"text-success mb-24"}),h.jsx("h3",{className:"mb-8",children:t.forms}),h.jsx("p",{className:"text-muted mb-0",children:"Forms"})]})})}),h.jsx(ve,{md:3,children:h.jsx(de,{className:"text-center",children:h.jsxs(de.Body,{children:[h.jsx($e,{icon:g7,size:"2x",className:"text-info mb-24"}),h.jsx("h3",{className:"mb-8",children:t.orders}),h.jsx("p",{className:"text-muted mb-0",children:"Orders"})]})})}),h.jsx(ve,{md:3,children:h.jsx(de,{className:"text-center",children:h.jsxs(de.Body,{children:[h.jsx($e,{icon:_7,size:"2x",className:"text-warning mb-24"}),h.jsxs("h3",{className:"mb-8",children:["$",t.revenue.toFixed(2)]}),h.jsx("p",{className:"text-muted mb-0",children:"Revenue"})]})})})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,className:"mb-32",children:h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsx("h5",{className:"mb-24",children:"Quick Actions"}),h.jsxs("div",{className:"d-flex flex-column gap-2",children:[h.jsx(fr,{to:"/admin/events/new",children:h.jsx(be,{variant:"outline-primary",className:"w-100",children:"Create New Event"})}),h.jsx(fr,{to:"/admin/forms/new",children:h.jsx(be,{variant:"outline-success",className:"w-100",children:"Create New Form"})}),h.jsx(fr,{to:"/admin/events",children:h.jsx(be,{variant:"outline-secondary",className:"w-100",children:"View All Events"})})]})]})})}),h.jsx(ve,{md:6,className:"mb-32",children:h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsx("h5",{className:"mb-24",children:"Getting Started"}),h.jsxs("ol",{className:"mb-0",children:[h.jsx("li",{className:"mb-16",children:"Create your first event"}),h.jsx("li",{className:"mb-16",children:"Add ticket types and pricing"}),h.jsx("li",{className:"mb-16",children:"Build a custom registration form"}),h.jsx("li",{className:"mb-16",children:"Publish and get your embed code"}),h.jsx("li",{children:"Start selling tickets!"})]})]})})})]})]})}const FU=6048e5,Vce=864e5,AP=Symbol.for("constructDateFrom");function Vo(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&AP in t?t[AP](e):t instanceof Date?new t.constructor(e):new Date(e)}function ii(t,e){return Vo(e||t,t)}let Fce={};function By(){return Fce}function Of(t,e){var a,l,c,u;const n=By(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=ii(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function gv(t,e){return Of(t,{...e,weekStartsOn:1})}function $U(t,e){const n=ii(t,e==null?void 0:e.in),r=n.getFullYear(),i=Vo(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=gv(i),o=Vo(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=gv(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function RP(t){const e=ii(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function $ce(t,...e){const n=Vo.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function CP(t,e){const n=ii(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function Uce(t,e,n){const[r,i]=$ce(n==null?void 0:n.in,t,e),s=CP(r),o=CP(i),a=+s-RP(s),l=+o-RP(o);return Math.round((a-l)/Vce)}function Bce(t,e){const n=$U(t,e),r=Vo((e==null?void 0:e.in)||t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),gv(r)}function zce(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function qce(t){return!(!zce(t)&&typeof t!="number"||isNaN(+ii(t)))}function Wce(t,e){const n=ii(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Hce={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Gce=(t,e,n)=>{let r;const i=Hce[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function Pw(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Kce={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Qce={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Yce={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Jce={date:Pw({formats:Kce,defaultWidth:"full"}),time:Pw({formats:Qce,defaultWidth:"full"}),dateTime:Pw({formats:Yce,defaultWidth:"full"})},Xce={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zce=(t,e,n,r)=>Xce[t];function Nd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const eue={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},tue={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},nue={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rue={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},iue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},sue={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},oue=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},aue={ordinalNumber:oue,era:Nd({values:eue,defaultWidth:"wide"}),quarter:Nd({values:tue,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Nd({values:nue,defaultWidth:"wide"}),day:Nd({values:rue,defaultWidth:"wide"}),dayPeriod:Nd({values:iue,defaultWidth:"wide",formattingValues:sue,defaultFormattingWidth:"wide"})};function Dd(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?cue(a,f=>f.test(o)):lue(a,f=>f.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function lue(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function cue(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function uue(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const due=/^(\d+)(th|st|nd|rd)?/i,hue=/\d+/i,fue={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pue={any:[/^b/i,/^(a|c)/i]},mue={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},gue={any:[/1/i,/2/i,/3/i,/4/i]},vue={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},yue={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},_ue={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},wue={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},bue={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Eue={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tue={ordinalNumber:uue({matchPattern:due,parsePattern:hue,valueCallback:t=>parseInt(t,10)}),era:Dd({matchPatterns:fue,defaultMatchWidth:"wide",parsePatterns:pue,defaultParseWidth:"any"}),quarter:Dd({matchPatterns:mue,defaultMatchWidth:"wide",parsePatterns:gue,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Dd({matchPatterns:vue,defaultMatchWidth:"wide",parsePatterns:yue,defaultParseWidth:"any"}),day:Dd({matchPatterns:_ue,defaultMatchWidth:"wide",parsePatterns:wue,defaultParseWidth:"any"}),dayPeriod:Dd({matchPatterns:bue,defaultMatchWidth:"any",parsePatterns:Eue,defaultParseWidth:"any"})},Iue={code:"en-US",formatDistance:Gce,formatLong:Jce,formatRelative:Zce,localize:aue,match:Tue,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Sue(t,e){const n=ii(t,e==null?void 0:e.in);return Uce(n,Wce(n))+1}function xue(t,e){const n=ii(t,e==null?void 0:e.in),r=+gv(n)-+Bce(n);return Math.round(r/FU)+1}function UU(t,e){var u,f,p,m;const n=ii(t,e==null?void 0:e.in),r=n.getFullYear(),i=By(),s=(e==null?void 0:e.firstWeekContainsDate)??((f=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(p=i.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=Vo((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Of(o,e),l=Vo((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Of(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function kue(t,e){var a,l,c,u;const n=By(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=UU(t,e),s=Vo((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Of(s,e)}function Aue(t,e){const n=ii(t,e==null?void 0:e.in),r=+Of(n,e)-+kue(n,e);return Math.round(r/FU)+1}function ze(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Gs={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return ze(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):ze(n+1,2)},d(t,e){return ze(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return ze(t.getHours()%12||12,e.length)},H(t,e){return ze(t.getHours(),e.length)},m(t,e){return ze(t.getMinutes(),e.length)},s(t,e){return ze(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return ze(i,e.length)}},ql={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PP={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Gs.y(t,e)},Y:function(t,e,n,r){const i=UU(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return ze(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):ze(s,e.length)},R:function(t,e){const n=$U(t);return ze(n,e.length)},u:function(t,e){const n=t.getFullYear();return ze(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return ze(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return ze(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Gs.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return ze(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Aue(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):ze(i,e.length)},I:function(t,e,n){const r=xue(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):ze(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Gs.d(t,e)},D:function(t,e,n){const r=Sue(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):ze(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ze(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ze(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return ze(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=ql.noon:r===0?i=ql.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=ql.evening:r>=12?i=ql.afternoon:r>=4?i=ql.morning:i=ql.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Gs.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Gs.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):ze(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):ze(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Gs.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Gs.s(t,e)},S:function(t,e){return Gs.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return NP(r);case"XXXX":case"XX":return ma(r);case"XXXXX":case"XXX":default:return ma(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return NP(r);case"xxxx":case"xx":return ma(r);case"xxxxx":case"xxx":default:return ma(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+OP(r,":");case"OOOO":default:return"GMT"+ma(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+OP(r,":");case"zzzz":default:return"GMT"+ma(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return ze(r,e.length)},T:function(t,e,n){return ze(+t,e.length)}};function OP(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+ze(s,2)}function NP(t,e){return t%60===0?(t>0?"-":"+")+ze(Math.abs(t)/60,2):ma(t,e)}function ma(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=ze(Math.trunc(r/60),2),s=ze(r%60,2);return n+i+e+s}const DP=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},BU=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Rue=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return DP(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",DP(r,e)).replace("{{time}}",BU(i,e))},Cue={p:BU,P:Rue},Pue=/^D+$/,Oue=/^Y+$/,Nue=["D","DD","YY","YYYY"];function Due(t){return Pue.test(t)}function jue(t){return Oue.test(t)}function Lue(t,e,n){const r=Mue(t,e,n);if(console.warn(r),Nue.includes(t))throw new RangeError(r)}function Mue(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Vue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$ue=/^'([^]*?)'?$/,Uue=/''/g,Bue=/[a-zA-Z]/;function gu(t,e,n){var u,f,p,m,y,_,v,E;const r=By(),i=(n==null?void 0:n.locale)??r.locale??Iue,s=(n==null?void 0:n.firstWeekContainsDate)??((f=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((_=(y=n==null?void 0:n.locale)==null?void 0:y.options)==null?void 0:_.weekStartsOn)??r.weekStartsOn??((E=(v=r.locale)==null?void 0:v.options)==null?void 0:E.weekStartsOn)??0,a=ii(t,n==null?void 0:n.in);if(!qce(a))throw new RangeError("Invalid time value");let l=e.match(Fue).map(w=>{const T=w[0];if(T==="p"||T==="P"){const R=Cue[T];return R(w,i.formatLong)}return w}).join("").match(Vue).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const T=w[0];if(T==="'")return{isToken:!1,value:zue(w)};if(PP[T])return{isToken:!0,value:w};if(T.match(Bue))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(w=>{if(!w.isToken)return w.value;const T=w.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&jue(T)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Due(T))&&Lue(T,e,String(t));const R=PP[T[0]];return R(a,T,i.localize,c)}).join("")}function zue(t){const e=t.match($ue);return e?e[1].replace(Uue,"'"):t}const que=({name:t,signal:e=qf,variant:n,className:r,isValid:i,isInvalid:s,options:o={},...a})=>{const l=I.useRef([]),c=(o==null?void 0:o.parentContainerClassName)||"",u=(o==null?void 0:o.length)||4;I.useEffect(()=>{var _;(((_=e.value)==null?void 0:_[t])||"").split("").forEach((v,E)=>{l.current[E]&&(l.current[E].value=v)})},[t,e]);const f=(y,_)=>{var w;const{value:v}=y.target;if(v.length>1){y.target.value=v.charAt(0);return}const E=[...((w=e.value)==null?void 0:w[t])||""];E[_]=v,e.update({[t]:E.join("")}),v&&_<l.current.length-1&&l.current[_+1].focus()},p=(y,_)=>{y.key==="Backspace"&&!y.target.value&&_>0&&l.current[_-1].focus()},m=y=>{y.preventDefault();const v=y.clipboardData.getData("text").slice(0,u).split("");v.forEach((E,w)=>{l.current[w]&&(l.current[w].value=E)}),e.update({[t]:v.join("")}),v.length<u&&l.current[v.length].focus()};return h.jsx(ut,{className:`${c} input-box-group-container`,children:Array.from({length:u}).map((y,_)=>h.jsx(ve,{className:"d-flex justify-content-center p-0",children:h.jsx(V.Control,{type:"text",maxLength:1,className:`custom-box-input ${n} ${r||""} shadow-none py-8`,ref:v=>{l.current[_]=v},onChange:v=>f(v,_),onKeyDown:v=>p(v,_),onPaste:m,isValid:i,isInvalid:s,...a})},_))})},Wue=({name:t,signal:e=qf,label:n,className:r,id:i,...s})=>{var o;return h.jsxs(V.Group,{className:"custom-checkbox",children:[h.jsx("input",{type:"checkbox",id:i||t,name:t,className:`small me-8 ${r}`,checked:((o=e.value)==null?void 0:o[t])??!1,onChange:()=>{var a;return e.update({[t]:!((a=e.value)!=null&&a[t])})},...s}),h.jsx(V.Label,{htmlFor:i||t,children:n})]})},jP=t=>{const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return(t==null?void 0:t.length)&&e.test(t)},Hue=t=>{if(!(t!=null&&t.length))return"";const e=t==null?void 0:t.replace(/\D/g,""),n=e==null?void 0:e.length;return n<4?e:n<7?`(${e.slice(0,3)}) ${e.slice(3)}`:`(${e==null?void 0:e.slice(0,3)}) ${e==null?void 0:e.slice(3,6)}-${e==null?void 0:e.slice(6,10)}`},Gue=t=>new Date(t).toISOString().slice(0,10),Kue=t=>{const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},he=({type:t,name:e,signal:n=qf,variant:r="form-control",className:i,placeholder:s,inputFormatCallback:o,value:a,customOnChange:l,autoComplete:c,isValid:u,isInvalid:f,inputBoxGroupOptions:p={},disabled:m,...y})=>{if((!n||!e)&&!l)return new Error(`Universal Input has no signal or name (Name: ${e})`);if(t==="inputBoxGroup")return h.jsx(que,{name:e,signal:n,variant:r,className:i,isValid:u,isInvalid:f,options:p,...y});if(t==="checkbox")return h.jsx(Wue,{name:e,signal:n,className:i,...y});const{[e]:_}=n.value,v={email:{valid:jP(_),invalid:!jP(_)},phone:{valid:(_==null?void 0:_.length)===14,invalid:(_==null?void 0:_.length)<14}},E=()=>t==="phone"?Hue(_):t==="date"?Gue(_):t==="time"&&_ instanceof Date?Kue(_):_||a||"";return h.jsx(V.Control,{type:t||"text",value:E(),placeholder:s,className:`w-100 ${r} ${i||""} ${m?"text-dark-300":""} shadow-none py-8 ps-16`,name:e,autoComplete:c,onChange:l||(w=>n.update({[e]:o?o(w.target.value):w.target.value})),isValid:v[t]?v[t].valid:u,isInvalid:v[t]?_&&v[t].invalid:f,disabled:m,maxLength:t==="phone"?14:"",...y})},Que=({length:t=16})=>{const e="40px",n=Array.from({length:t});return h.jsx(h.Fragment,{children:n.map((r,i)=>h.jsx(Dg,{as:"div",animation:"wave",children:h.jsx(Dg,{xs:12,className:`skeleton-row${t>1?" mb-8":""}`,style:{height:e}})},i))})},Yue=({itemsPerPageAmount:t,paginationMaxButtonAmount:e,totalItemsCount:n,currentPageItemsCount:r,currentPage:i,className:s="",disabled:o=!1})=>{const a=Math.ceil(n/t),l=a>1,c=Math.max(1,Math.min(a-e+1,i-Math.floor(e/2))),u=Math.min(a,c+e-1),f=Array.from({length:u-c+1},(m,y)=>c+y),p=(m,y="forward")=>{y==="forward"&&!m&&Ra.update({page:i+1}),y==="backward"&&!m&&Ra.update({page:i-1}),m&&Ra.update({page:m});const _=new URLSearchParams(Ra.value);window.history.pushState(null,"",`?${_.toString()}`),window.localStorage.setItem("filterQueryString",_.toString())};return h.jsxs(Gt,{className:`d-flex flex-column align-items-center justify-content-center p-0 py-16 ${s}`,children:[l&&h.jsxs(fc,{horizontal:!0,children:[h.jsx(fc.Item,{className:"bg-transparent border-0",children:h.jsx(be,{variant:"transparent",className:"border-0 p-0",disabled:o||i===1,onClick:()=>p(null,"backward"),children:h.jsx($e,{className:"text-primary",icon:T7})})}),f.map(m=>h.jsx(fc.Item,{className:"bg-transparent border-0",children:h.jsx(be,{variant:"transparent",className:`border-0 p-0 ${i===m?"fw-bold text-primary":"fw-normal text-dark"}`,disabled:o||i===m,onClick:()=>p(m),children:m})},m)),h.jsx(fc.Item,{className:"bg-transparent border-0",children:h.jsx(be,{variant:"transparent",className:"border-0 p-0",disabled:o||i>=a,onClick:()=>p(null,"forward"),children:h.jsx($e,{className:"text-primary",icon:I7})})})]}),l&&r>0&&h.jsxs("div",{className:"ml-16 text-muted",children:["Showing ",r," of ",n," results"]})]})},zU=({$filter:t,$view:e,onRowClick:n=()=>{},onHeaderClick:r=()=>{},headers:i=[],rows:s=[],hasCheckboxes:o=!1,hasPagination:a=!0,canFilterColumns:l=!1,onColumnToggle:c,totalCount:u,currentPageItemsCount:f,currentPage:p,paginationMaxButtonAmount:m=5,itemsPerPageAmount:y=10,rowClassName:_=""})=>{var w,T,R,D;const v=O=>{if(typeof c=="function")c(O.key,!O.isHidden);else{const x=i.map(S=>S.key===O.key?{...S,isHidden:!S.isHidden}:S);e.update({tableHeaders:x})}},E=h.jsx(Q0,{children:h.jsxs(Q0.Body,{children:[h.jsx("div",{className:"text-dark fw-800 p-8",children:"Displayed Columns"}),i.map(O=>h.jsxs("div",{role:"button",tabIndex:0,className:"cursor-pointer p-8 w-100 d-flex justify-content-between table-popover-option",onClick:()=>v(O),children:[h.jsx("div",{className:"me-8",children:O.value}),!O.isHidden&&h.jsx($e,{icon:x7,color:"#41696C"})]},O.key))]})});return I.useEffect(()=>{const O=new URLSearchParams(window.location.search),x=O.get("sortKey"),S=O.get("sortDirection"),A=O.get("page")||1;t.update({page:parseInt(A,10),sortKey:x,sortDirection:S||void 0})},[t]),h.jsxs("div",{className:"p-0 overflow-hidden",style:{borderRadius:12},children:[h.jsxs($v,{striped:!0,responsive:!0,style:{fontSize:16},hover:!0,className:"mb-136",children:[h.jsx("thead",{children:h.jsxs("tr",{children:[o&&h.jsx("td",{className:"border-0 fw-800 py-16","aria-label":"Check Box",children:h.jsx(he,{type:"checkbox",name:"selectAll",checked:(w=e.value)==null?void 0:w.isSelectAllChecked,customOnChange:O=>{O.stopPropagation(),e.update({isSelectAllChecked:O.target.checked,selectedItems:O.target.checked?s:[]})}})}),i.map(({key:O,value:x,sortKey:S,isHidden:A},P)=>{var N,j;return A?null:h.jsx("td",{className:`border-0 fw-800 text-nowrap py-16 ${P===i.length-1?"text-right":""}`,role:"button",tabIndex:P,onClick:()=>{var Ae,Re,z,Z;if(!S)return;const C=((Ae=t==null?void 0:t.value)==null?void 0:Ae.sortKey)===S&&((Re=t==null?void 0:t.value)==null?void 0:Re.sortDirection)==="asc",ue=((z=t==null?void 0:t.value)==null?void 0:z.sortKey)===S&&((Z=t==null?void 0:t.value)==null?void 0:Z.sortDirection)==="desc";t.update({page:1,sortKey:C?void 0:S,sortDirection:C?void 0:ue?"asc":"desc"});const fe=new URLSearchParams(t.value);window.history.pushState(null,"",`?${fe.toString()}`),window.localStorage.setItem("filterQueryString",fe.toString()),r({key:O,value:x,sortKey:S},P)},children:h.jsxs("b",{className:"d-flex",children:[h.jsx("span",{className:`${S?"me-8":""}`,children:x}),S&&h.jsx($e,{icon:((N=t==null?void 0:t.value)==null?void 0:N.sortKey)===S?((j=t==null?void 0:t.value)==null?void 0:j.sortDirection)==="asc"?d7:n7:a7,className:"my-auto me-8",size:"xs"})]})},O)}),l&&h.jsx(IW,{rootClose:!0,trigger:"click",overlay:E,children:h.jsx("td",{className:"border-0 pe-24 py-16 cursor-pointer","aria-label":"Column Filters",children:h.jsx("div",{className:"w-100 d-flex justify-content-end",children:h.jsx($e,{icon:p7})})})})]})}),h.jsxs("tbody",{children:[!s.length&&!((T=e.value)!=null&&T.isTableLoading)&&h.jsx("tr",{children:h.jsx("td",{className:"border-0 w-100",colSpan:i.length+(l?2:1),children:"No records found"})}),((R=e.value)==null?void 0:R.isTableLoading)&&h.jsx("tr",{children:h.jsx("td",{colSpan:i.length+(l?2:1),className:"text-center border-0",children:h.jsx(Que,{length:y})})}),!((D=e.value)!=null&&D.isTableLoading)&&s.map((O,x)=>{var S,A,P;return h.jsxs("tr",{onClick:()=>n(O),style:{cursor:"pointer",visibility:(S=e.value)!=null&&S.isTableLoading?"hidden":"visible"},className:_,children:[o&&h.jsx("td",{className:"border-0 py-16",children:h.jsx(he,{type:"checkbox",name:`row_${O.id}`,checked:(P=(A=e.value)==null?void 0:A.selectedItems)==null?void 0:P.some(({id:N})=>N===O.id),customOnChange:N=>{var C;N.stopPropagation();let j=((C=e.value)==null?void 0:C.selectedItems)||[];N.target.checked?j.push(O):j=j.filter(({id:ue})=>ue!==O.id),e.update({selectedItems:j,lastCheckedIndex:x,isShiftKey:N.shiftKey})}})}),i.map(({key:N,isHidden:j},C)=>j?null:h.jsx("td",{className:`border-0 ${C===i.length-1?"text-right":""}`,children:typeof(O==null?void 0:O[N])=="function"?O[N]():O[N]},C)),l&&h.jsx("td",{})]},x)})]})]}),a&&h.jsx(Yue,{itemsPerPageAmount:m,paginationMaxButtonAmount:m,totalItemsCount:u,currentPageItemsCount:f||0,currentPage:p})]})},ke=(t,e="info")=>{const n=gt.value.notificationArray||[];n.push({id:Date.now(),displayMessage:t,displayType:"toast",variant:e}),gt.update({notificationArray:n})},f1=async()=>{try{xi.loadingStart(),of.update({isTableLoading:!0});const t=await ws.getAll();xi.update({list:t})}catch{ke("Error loading events","error")}finally{xi.loadingEnd(),of.update({isTableLoading:!1})}},Jue=async(t,e)=>{if(t.stopPropagation(),!!window.confirm("Are you sure you want to delete this event?"))try{await ws.delete(e),ke("Event deleted successfully","success"),f1()}catch{ke("Error deleting event","error")}},Xue=async(t,e,n)=>{t.stopPropagation();try{n==="PUBLISHED"?(await ws.unpublish(e),ke("Event unpublished","success")):(await ws.publish(e),ke("Event published successfully","success")),f1()}catch{ke("Error updating event status","error")}},Zue=t=>({variant:{DRAFT:"secondary",PUBLISHED:"success",CANCELLED:"danger"}[t]||"secondary",text:t});function ede(){const t=Li(),e=xi.value.list;er(async()=>{await f1()},[]);const n=[{key:"title",value:"Title",sortKey:"title"},{key:"date",value:"Date",sortKey:"start_date"},{key:"location",value:"Location",sortKey:"location"},{key:"status",value:"Status",sortKey:"status"},{key:"actions",value:"Actions"}],r=e.map(s=>({id:s.id,title:()=>h.jsx("strong",{children:s.title}),date:()=>gu(new Date(s.start_date),"MMM d, yyyy"),location:s.location||"-",status:()=>{const o=Zue(s.status);return h.jsx(cs,{bg:o.variant,children:h.jsx("span",{className:`text-${o.variant}-900`,children:o.text})})},actions:()=>h.jsxs(Le,{children:[h.jsx(Le.Toggle,{variant:"link",size:"sm",className:"text-white",onClick:o=>o.stopPropagation(),children:h.jsx($e,{icon:Qv})}),h.jsxs(Le.Menu,{children:[h.jsx(Le.Item,{onClick:o=>{o.stopPropagation(),t(`/admin/events/${s.id}`)},children:"Manage Event"}),h.jsx(Le.Item,{onClick:o=>Xue(o,s.id,s.status),children:s.status==="PUBLISHED"?"Unpublish":"Publish"}),h.jsx(Le.Divider,{}),h.jsx(Le.Item,{className:"text-danger",onClick:o=>Jue(o,s.id),children:"Delete"})]})]})})),i=s=>{t(`/admin/events/${s.id}`)};return h.jsxs(Gt,{fluid:!0,className:"py-4",children:[h.jsx(ut,{className:"mb-32",children:h.jsx(ve,{children:h.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[h.jsx("h2",{children:"Events"}),h.jsx(fr,{to:"/admin/events/new",children:h.jsxs(be,{variant:"primary",children:[h.jsx($e,{icon:lf,className:"me-2"}),"Create Event"]})})]})})}),e.length===0&&!of.value.isTableLoading?h.jsx(de,{children:h.jsxs(de.Body,{className:"text-center py-5",children:[h.jsx("p",{className:"text-muted mb-24",children:"No events yet"}),h.jsx(fr,{to:"/admin/events/new",children:h.jsx(be,{variant:"primary",children:"Create Your First Event"})})]})}):h.jsx(de,{children:h.jsx(de.Body,{children:h.jsx(zU,{$filter:Ra,$view:of,headers:n,rows:r,onRowClick:i,hasPagination:!0,itemsPerPageAmount:10,totalCount:e.length,currentPageItemsCount:r.length,currentPage:Ra.value.page||1,paginationMaxButtonAmount:5})})})]})}function qU({signal:t,name:e="location",value:n="",required:r=!1,placeholder:i="Enter a location"}){const s=I.useRef(null),[o,a]=I.useState(n),[l,c]=I.useState(!1),[u,f]=I.useState(!1),p=qI("GOOGLE_MAPS_API_KEY");I.useEffect(()=>{if(!p){console.warn("Google Maps API key not configured. Set VITE_GOOGLE_MAPS_API_KEY in your environment."),f(!0);return}console.log("Loading Google Maps with API key:",p?"API key present":"No API key");const y=()=>window.google&&window.google.maps&&window.google.maps.places&&(window.google.maps.places.Autocomplete||window.google.maps.places.PlaceAutocompleteElement)?(console.log("Google Maps Places API is ready"),c(!0),!0):!1;if(y()){console.log("Google Maps already loaded");return}if(document.querySelector('script[src*="maps.googleapis.com"]')){console.log("Google Maps script already exists, waiting for load...");const w=setInterval(()=>{y()&&clearInterval(w)},100);setTimeout(()=>{clearInterval(w),y()||(console.error("Timeout waiting for Google Maps Places API"),f(!0))},1e4);return}const v=`initGoogleMaps_${Date.now()}`;window[v]=()=>{console.log("Google Maps callback triggered"),setTimeout(()=>{y()?console.log("Google Maps script loaded successfully"):(console.error("Places API not available after callback"),f(!0))},100)};const E=document.createElement("script");return E.src=`https://maps.googleapis.com/maps/api/js?key=${p}&libraries=places&v=weekly&callback=${v}`,E.async=!0,E.defer=!0,E.onerror=w=>{console.error("Error loading Google Maps script:",w),f(!0),delete window[v]},document.head.appendChild(E),()=>{delete window[v]}},[p]),I.useEffect(()=>{if(!l||!s.current||!window.google){console.log("Autocomplete initialization skipped:",{isLoaded:l,hasWidgetRef:!!s.current,hasGoogle:!!window.google});return}console.log("Initializing Google Places Autocomplete...");try{const y=s.current.querySelector("input");if(!y){console.error("Input element not found in widget");return}const _=new window.google.maps.places.Autocomplete(y,{fields:["formatted_address","geometry","place_id","name"],types:["establishment","geocode"]});console.log("Autocomplete initialized successfully"),_.addListener("place_changed",()=>{console.log("Place changed event triggered");const v=_.getPlace();console.log("Selected place:",v),v&&v.formatted_address&&v.geometry&&(a(v.formatted_address),t&&t.update({location:v.formatted_address,location_lat:v.geometry.location.lat(),location_lng:v.geometry.location.lng(),location_place_id:v.place_id||""}))})}catch(y){console.error("Error initializing Google Places Autocomplete:",y),f(!0)}},[l,t]),I.useEffect(()=>{a(n||"")},[n]);const m=y=>{const _=y.target.value;a(_),t&&t.update({location:_,location_lat:null,location_lng:null,location_place_id:null})};return u||!p?h.jsx(V.Control,{type:"text",name:e,value:o,onChange:m,placeholder:i,required:r}):l?h.jsx("div",{ref:s,children:h.jsx(V.Control,{type:"text",name:e,value:o,onChange:m,placeholder:i,required:r})}):h.jsx(V.Control,{type:"text",placeholder:"Loading...",disabled:!0})}const Ft=je({title:"",description:"",start_date:"",end_date:"",location:"",location_lat:null,location_lng:null,location_place_id:"",image_url:"",capacity:"",status:"DRAFT"}),WU=async t=>{try{Ft.loadingStart();const e=await ws.getById(t);Ft.update({title:e.title||"",description:e.description||"",start_date:e.start_date?new Date(e.start_date).toISOString().slice(0,16):"",end_date:e.end_date?new Date(e.end_date).toISOString().slice(0,16):"",location:e.location||"",location_lat:e.location_lat||null,location_lng:e.location_lng||null,location_place_id:e.location_place_id||"",image_url:e.image_url||"",capacity:e.capacity||"",status:e.status||"DRAFT"})}catch{ke("Error loading event","error")}finally{Ft.loadingEnd()}},Wl=t=>{const{name:e,value:n}=t.target;Ft.update({[e]:n})},HU=async(t,e,n)=>{t.preventDefault();const r=Ft.value;if(!r.title||!r.start_date||!r.end_date){ke("Please fill in all required fields","error");return}try{Ft.loadingStart();const i={title:r.title,description:r.description,start_date:r.start_date,end_date:r.end_date,location:r.location,location_lat:r.location_lat,location_lng:r.location_lng,location_place_id:r.location_place_id,image_url:r.image_url,capacity:r.capacity?parseInt(r.capacity,10):null,status:r.status};if(e)await ws.update(e,i),ke("Event updated successfully","success");else{const s=Yc.value;if(s!=null&&s.id)i.created_by=s.id;else throw new Error("User not authenticated. Please log in and try again.");await ws.create(i),ke("Event created successfully","success")}n("/admin/events")}catch(i){ke(i.message||`Error ${e?"updating":"creating"} event`,"error")}finally{Ft.loadingEnd()}};function tde(){const{id:t}=Vf(),e=Li(),n=Ft.value.isLoading;return er(async()=>{t?await WU(t):Ft.reset()},[t]),n&&t?h.jsx(Ho,{}):h.jsxs(Gt,{fluid:!0,className:"py-4",children:[h.jsx(ut,{className:"mb-32",children:h.jsx(ve,{children:h.jsx("h2",{children:t?"Edit Event":"Create Event"})})}),h.jsx(ut,{children:h.jsx(ve,{lg:8,children:h.jsx(de,{children:h.jsx(de.Body,{children:h.jsxs(V,{onSubmit:r=>HU(r,t,e),children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Title *"}),h.jsx(he,{type:"text",name:"title",signal:Ft,required:!0})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Description"}),h.jsx(he,{as:"textarea",rows:4,name:"description",signal:Ft})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Start Date *"}),h.jsx(he,{type:"datetime-local",name:"start_date",signal:Ft,required:!0})]})}),h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"End Date *"}),h.jsx(he,{type:"datetime-local",name:"end_date",signal:Ft,required:!0})]})})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Location"}),h.jsx(qU,{signal:Ft,name:"location",value:Ft.value.location,placeholder:"Search for a location"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Image URL"}),h.jsx(he,{type:"url",name:"image_url",signal:Ft,placeholder:"https://example.com/image.jpg"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Capacity"}),h.jsx(he,{type:"number",name:"capacity",signal:Ft,min:"1"}),h.jsx(V.Text,{className:"text-muted",children:"Leave empty for unlimited capacity"})]}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(be,{type:"submit",variant:"primary",disabled:n,children:n?"Saving...":t?"Update Event":"Create Event"}),h.jsx(be,{type:"button",variant:"outline-secondary",onClick:()=>e("/admin/events"),children:"Cancel"})]})]})})})})})]})}const vu={async getByEventId(t){return(await me.tickets.getByEventId(t)).data},async getById(t){return(await me.tickets.getById(t)).data},async create(t){return(await me.tickets.create(t)).data},async update(t,e){return(await me.tickets.update(t,e)).data},async delete(t){return await me.tickets.delete(t),!0},async checkAvailability(t,e){return await me.tickets.checkAvailability(t,e)}},cn=je({name:"",description:"",benefits:"",price:"",quantity:"",sales_start:"",sales_end:"",custom_fields:[]}),yu=je({showModal:!1,editingTicket:null}),LP=(t=null)=>{t?(yu.update({showModal:!0,editingTicket:t}),cn.update({name:t.name,description:t.description||"",benefits:t.benefits||"",price:t.price,quantity:t.quantity,sales_start:new Date(t.sales_start).toISOString().slice(0,16),sales_end:new Date(t.sales_end).toISOString().slice(0,16),custom_fields:Array.isArray(t.custom_fields)?t.custom_fields:[]})):(yu.update({showModal:!0,editingTicket:null}),cn.reset())},fE=()=>{yu.update({showModal:!1,editingTicket:null})},nde=async(t,e,n)=>{t.preventDefault();try{const r=cn.value,{editingTicket:i}=yu.value,s={name:r.name,description:r.description,benefits:r.benefits,price:parseFloat(r.price),quantity:parseInt(r.quantity,10),sales_start:r.sales_start,sales_end:r.sales_end,custom_fields:r.custom_fields,event_id:e};i?(await vu.update(i.id,s),ke("Ticket updated successfully","success")):(await vu.create(s),ke("Ticket created successfully","success")),fE(),n()}catch{ke("Error saving ticket","error")}},rde=async(t,e)=>{if(window.confirm("Are you sure you want to delete this ticket type?"))try{await vu.delete(t),ke("Ticket deleted successfully","success"),e()}catch{ke("Error deleting ticket","error")}},ide=()=>{const t=cn.value.custom_fields;cn.update({custom_fields:[...t,{label:"",type:"text",required:!1,placeholder:"",options:[]}]})},jd=(t,e)=>{const n=[...cn.value.custom_fields];n[t]={...n[t],...e},cn.update({custom_fields:n})},sde=t=>{const e=cn.value.custom_fields.filter((n,r)=>r!==t);cn.update({custom_fields:e})};function ode({eventId:t,tickets:e,onUpdate:n}){var o;const{showModal:r}=yu.value,{editingTicket:i}=yu.value,s=cn.value;return h.jsxs(h.Fragment,{children:[h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-24",children:[h.jsx("h5",{className:"mb-0",children:"Ticket Types"}),h.jsxs(be,{size:"sm",variant:"primary",onClick:()=>LP(),children:[h.jsx($e,{icon:lf,className:"me-2"}),"Add Ticket"]})]}),e.length===0?h.jsx("div",{className:"text-center py-4 text-muted",children:"No ticket types yet"}):h.jsxs($v,{responsive:!0,hover:!0,children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Name"}),h.jsx("th",{children:"Price"}),h.jsx("th",{children:"Sold / Quantity"}),h.jsx("th",{children:"Sales Period"}),h.jsx("th",{children:"Actions"})]})}),h.jsx("tbody",{children:e.map(a=>h.jsxs("tr",{children:[h.jsxs("td",{children:[h.jsx("strong",{children:a.name}),a.description&&h.jsx("div",{className:"small text-muted",children:a.description})]}),h.jsxs("td",{children:["$",parseFloat(a.price).toFixed(2)]}),h.jsxs("td",{children:[a.sold||0," / ",a.quantity]}),h.jsxs("td",{className:"small",children:[gu(new Date(a.sales_start),"MMM d")," - ",gu(new Date(a.sales_end),"MMM d")]}),h.jsx("td",{children:h.jsxs(Le,{children:[h.jsx(Le.Toggle,{variant:"link",size:"sm",className:"text-white",children:h.jsx($e,{icon:Qv})}),h.jsxs(Le.Menu,{children:[h.jsx(Le.Item,{onClick:()=>LP(a),children:"Edit"}),h.jsx(Le.Divider,{}),h.jsx(Le.Item,{className:"text-danger",onClick:()=>rde(a.id,n),children:"Delete"})]})]})})]},a.id))})]})]})}),h.jsxs(qt,{show:r,onHide:fE,size:"lg",children:[h.jsx(qt.Header,{closeButton:!0,children:h.jsx(qt.Title,{children:i?"Edit Ticket":"Add Ticket"})}),h.jsxs(V,{onSubmit:a=>nde(a,t,n),children:[h.jsxs(qt.Body,{children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Name *"}),h.jsx(he,{type:"text",name:"name",signal:cn,required:!0})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Description"}),h.jsx(he,{as:"textarea",rows:2,name:"description",signal:cn})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Benefits / Notes"}),h.jsx(he,{as:"textarea",rows:2,name:"benefits",signal:cn,placeholder:"E.g., Early entry, reserved seating, merch voucher"})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Price *"}),h.jsx(he,{type:"number",step:"0.01",min:"0",name:"price",signal:cn,required:!0})]})}),h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Quantity *"}),h.jsx(he,{type:"number",min:"1",name:"quantity",signal:cn,required:!0})]})})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Sales Start *"}),h.jsx(he,{type:"datetime-local",name:"sales_start",signal:cn,required:!0})]})}),h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Sales End *"}),h.jsx(he,{type:"datetime-local",name:"sales_end",signal:cn,required:!0})]})})]}),h.jsxs("div",{className:"mb-24",children:[h.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-8",children:[h.jsx(V.Label,{className:"mb-0",children:"Custom Fields"}),h.jsx(be,{size:"sm",variant:"outline-primary",type:"button",onClick:ide,children:"Add Field"})]}),((o=s.custom_fields)==null?void 0:o.length)>0&&h.jsx("div",{className:"d-flex flex-column gap-3",children:s.custom_fields.map((a,l)=>h.jsx(de,{className:"p-3",children:h.jsxs(ut,{className:"g-2 align-items-end",children:[h.jsx(ve,{md:4,children:h.jsxs(V.Group,{children:[h.jsx(V.Label,{children:"Label"}),h.jsx(he,{type:"text",name:`custom_field_label_${l}`,value:a.label,customOnChange:c=>jd(l,{label:c.target.value}),placeholder:"E.g., T-shirt size"})]})}),h.jsx(ve,{md:3,children:h.jsxs(V.Group,{children:[h.jsx(V.Label,{children:"Type"}),h.jsxs(he,{as:"select",name:`custom_field_type_${l}`,value:a.type,customOnChange:c=>jd(l,{type:c.target.value}),children:[h.jsx("option",{value:"text",children:"Text"}),h.jsx("option",{value:"email",children:"Email"}),h.jsx("option",{value:"number",children:"Number"}),h.jsx("option",{value:"textarea",children:"Textarea"}),h.jsx("option",{value:"select",children:"Select"}),h.jsx("option",{value:"checkbox",children:"Checkbox"}),h.jsx("option",{value:"radio",children:"Radio"})]})]})}),h.jsx(ve,{md:3,children:h.jsxs(V.Group,{children:[h.jsx(V.Label,{children:"Placeholder"}),h.jsx(he,{type:"text",name:`custom_field_placeholder_${l}`,value:a.placeholder||"",customOnChange:c=>jd(l,{placeholder:c.target.value})})]})}),h.jsx(ve,{md:2,children:h.jsx(V.Group,{className:"d-flex align-items-center gap-2",children:h.jsx(he,{type:"checkbox",name:`custom_field_required_${l}`,label:"Required",checked:!!a.required,customOnChange:c=>jd(l,{required:c.target.checked})})})}),h.jsx(ve,{md:12,children:(a.type==="select"||a.type==="radio")&&h.jsxs(V.Group,{className:"mt-2",children:[h.jsx(V.Label,{children:"Options (comma separated)"}),h.jsx(he,{type:"text",name:`custom_field_options_${l}`,value:(a.options||[]).join(", "),customOnChange:c=>jd(l,{value:c.target.value}),placeholder:"Small, Medium, Large"})]})}),h.jsx(ve,{md:12,className:"d-flex justify-content-end",children:h.jsx(be,{size:"sm",variant:"outline-danger",type:"button",onClick:()=>sde(l),children:"Remove"})})]})},l))})]})]}),h.jsxs(qt.Footer,{children:[h.jsx(be,{variant:"secondary",onClick:fE,children:"Cancel"}),h.jsx(be,{variant:"primary",type:"submit",children:i?"Update":"Create"})]})]})]})]})}const _u={async getByEventId(t){return(await me.discounts.getByEventId(t)).data},async getById(t){return(await me.discounts.getById(t)).data},async create(t){return(await me.discounts.create(t)).data},async update(t,e){return(await me.discounts.update(t,e)).data},async delete(t){return await me.discounts.delete(t),!0},async validateCode(t,e){return await me.discounts.validateCode(t,e)},async incrementUsage(t){return(await me.discounts.incrementUsage(t)).data}},qi=je({code:"",type:"PERCENT",value:"",max_uses:"",expires_at:"",is_active:!0}),wu=je({showModal:!1,editingDiscount:null}),zy=async t=>{try{hh.loadingStart();const e=await _u.getByEventId(t);hh.update({list:e})}catch{ke("Error loading discounts","error")}finally{hh.loadingEnd()}},MP=(t=null)=>{t?(wu.update({showModal:!0,editingDiscount:t}),qi.update({code:t.code,type:t.type,value:t.value,max_uses:t.max_uses||"",expires_at:t.expires_at?new Date(t.expires_at).toISOString().slice(0,16):"",is_active:t.is_active})):(wu.update({showModal:!0,editingDiscount:null}),qi.reset())},pE=()=>{wu.update({showModal:!1,editingDiscount:null})},ade=async(t,e)=>{t.preventDefault();try{const n=qi.value,{editingDiscount:r}=wu.value,i={code:n.code.toUpperCase(),type:n.type,value:parseFloat(n.value),max_uses:n.max_uses?parseInt(n.max_uses,10):null,expires_at:n.expires_at||null,is_active:n.is_active,event_id:e};r?(await _u.update(r.id,i),ke("Discount updated successfully","success")):(await _u.create(i),ke("Discount created successfully","success")),pE(),zy(e)}catch{ke("Error saving discount","error")}},lde=async(t,e)=>{if(window.confirm("Are you sure you want to delete this discount code?"))try{await _u.delete(t),ke("Discount deleted successfully","success"),zy(e)}catch{ke("Error deleting discount","error")}},cde=async(t,e)=>{try{await _u.update(t.id,{is_active:!t.is_active}),ke(`Discount ${t.is_active?"deactivated":"activated"}`,"success"),zy(e)}catch{ke("Error updating discount","error")}};function ude({eventId:t}){const e=hh.value.list,{showModal:n}=wu.value,{editingDiscount:r}=wu.value;return er(async()=>{await zy(t)},[t]),h.jsxs(h.Fragment,{children:[h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-24",children:[h.jsx("h5",{className:"mb-0",children:"Discount Codes"}),h.jsxs(be,{size:"sm",variant:"primary",onClick:()=>MP(),children:[h.jsx($e,{icon:lf,className:"me-2"}),"Add Discount"]})]}),e.length===0?h.jsx("div",{className:"text-center py-4 text-muted",children:"No discount codes yet"}):h.jsxs($v,{responsive:!0,hover:!0,children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Code"}),h.jsx("th",{children:"Type"}),h.jsx("th",{children:"Value"}),h.jsx("th",{children:"Usage"}),h.jsx("th",{children:"Expires"}),h.jsx("th",{children:"Status"}),h.jsx("th",{children:"Actions"})]})}),h.jsx("tbody",{children:e.map(i=>h.jsxs("tr",{children:[h.jsx("td",{children:h.jsx("strong",{children:i.code})}),h.jsx("td",{children:h.jsx(cs,{bg:"info",children:i.type})}),h.jsx("td",{children:i.type==="PERCENT"?`${i.value}%`:`$${i.value}`}),h.jsxs("td",{children:[i.used_count||0,i.max_uses?` / ${i.max_uses}`:" / "]}),h.jsx("td",{className:"small",children:i.expires_at?gu(new Date(i.expires_at),"MMM d, yyyy"):"Never"}),h.jsx("td",{children:h.jsx(cs,{bg:i.is_active?"success":"secondary",children:i.is_active?"Active":"Inactive"})}),h.jsx("td",{children:h.jsxs(Le,{children:[h.jsx(Le.Toggle,{variant:"link",size:"sm",className:"text-white",children:h.jsx($e,{icon:Qv})}),h.jsxs(Le.Menu,{children:[h.jsx(Le.Item,{onClick:()=>cde(i,t),children:i.is_active?"Deactivate":"Activate"}),h.jsx(Le.Item,{onClick:()=>MP(i),children:"Edit"}),h.jsx(Le.Divider,{}),h.jsx(Le.Item,{className:"text-danger",onClick:()=>lde(i.id,t),children:"Delete"})]})]})})]},i.id))})]})]})}),h.jsxs(qt,{show:n,onHide:pE,children:[h.jsx(qt.Header,{closeButton:!0,children:h.jsx(qt.Title,{children:r?"Edit Discount":"Add Discount"})}),h.jsxs(V,{onSubmit:i=>ade(i,t),children:[h.jsxs(qt.Body,{children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Code *"}),h.jsx(he,{type:"text",name:"code",signal:qi,style:{textTransform:"uppercase"},required:!0}),h.jsx(V.Text,{className:"text-muted",children:"Will be converted to uppercase"})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Type *"}),h.jsxs(he,{as:"select",name:"type",signal:qi,required:!0,children:[h.jsx("option",{value:"PERCENT",children:"Percentage"}),h.jsx("option",{value:"AMOUNT",children:"Fixed Amount"})]})]})}),h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Value *"}),h.jsx(he,{type:"number",step:"0.01",min:"0",name:"value",signal:qi,required:!0})]})})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Max Uses"}),h.jsx(he,{type:"number",min:"1",name:"max_uses",signal:qi}),h.jsx(V.Text,{className:"text-muted",children:"Leave empty for unlimited uses"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Expires At"}),h.jsx(he,{type:"datetime-local",name:"expires_at",signal:qi}),h.jsx(V.Text,{className:"text-muted",children:"Leave empty for no expiration"})]}),h.jsx(V.Group,{className:"mb-24",children:h.jsx(he,{type:"checkbox",name:"is_active",signal:qi,label:"Active"})})]}),h.jsxs(qt.Footer,{children:[h.jsx(be,{variant:"secondary",onClick:pE,children:"Cancel"}),h.jsx(be,{variant:"primary",type:"submit",children:r?"Update":"Create"})]})]})]})]})}const GU=I.createContext({dragDropManager:void 0});function xr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var VP=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ow=function(){return Math.random().toString(36).substring(7).split("").join(".")},FP={INIT:"@@redux/INIT"+Ow(),REPLACE:"@@redux/REPLACE"+Ow(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ow()}};function dde(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function KU(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xr(1));return n(KU)(t,e)}if(typeof t!="function")throw new Error(xr(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(xr(3));return s}function f(_){if(typeof _!="function")throw new Error(xr(4));if(l)throw new Error(xr(5));var v=!0;return c(),a.push(_),function(){if(v){if(l)throw new Error(xr(6));v=!1,c();var w=a.indexOf(_);a.splice(w,1),o=null}}}function p(_){if(!dde(_))throw new Error(xr(7));if(typeof _.type>"u")throw new Error(xr(8));if(l)throw new Error(xr(9));try{l=!0,s=i(s,_)}finally{l=!1}for(var v=o=a,E=0;E<v.length;E++){var w=v[E];w()}return _}function m(_){if(typeof _!="function")throw new Error(xr(10));i=_,p({type:FP.REPLACE})}function y(){var _,v=f;return _={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(xr(11));function T(){w.next&&w.next(u())}T();var R=v(T);return{unsubscribe:R}}},_[VP]=function(){return this},_}return p({type:FP.INIT}),r={dispatch:p,subscribe:f,getState:u,replaceReducer:m},r[VP]=y,r}function _e(t,e,...n){if(hde()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function hde(){return typeof process<"u"&&!0}function fde(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function pde(t,e){return t.filter(n=>n!==e)}function QU(t){return typeof t=="object"}function mde(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function gde(t,e){return t.filter(n=>e.indexOf(n)>-1)}const p1="dnd-core/INIT_COORDS",qy="dnd-core/BEGIN_DRAG",m1="dnd-core/PUBLISH_DRAG_SOURCE",Wy="dnd-core/HOVER",Hy="dnd-core/DROP",Gy="dnd-core/END_DRAG";function $P(t,e){return{type:p1,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const vde={type:p1,payload:{clientOffset:null,sourceClientOffset:null}};function yde(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch($P(s)),_de(n,a,l);const c=Ede(n,a);if(c==null){t.dispatch(vde);return}let u=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");wde(o),u=o(c)}t.dispatch($P(s,u));const p=l.getSource(c).beginDrag(a,c);if(p==null)return;bde(p),l.pinSource(c);const m=l.getSourceType(c);return{type:qy,payload:{itemType:m,item:p,sourceId:c,clientOffset:s||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function _de(t,e,n){_e(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){_e(n.getSource(r),"Expected sourceIds to be registered.")})}function wde(t){_e(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function bde(t){_e(QU(t),"Item must be an object.")}function Ede(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function Tde(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ide(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Tde(t,i,n[i])})}return t}function Sde(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();xde(r),Rde(r).forEach((o,a)=>{const l=kde(o,a,i,r),c={type:Hy,payload:{dropResult:Ide({},n,l)}};t.dispatch(c)})}}function xde(t){_e(t.isDragging(),"Cannot call drop while not dragging."),_e(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function kde(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return Ade(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function Ade(t){_e(typeof t>"u"||QU(t),"Drop result must either be an object or undefined.")}function Rde(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Cde(t){return function(){const n=t.getMonitor(),r=t.getRegistry();Pde(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:Gy}}}function Pde(t){_e(t.isDragging(),"Cannot call endDrag while not dragging.")}function mE(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function Ode(t){return function(n,{clientOffset:r}={}){Nde(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return jde(i,o,a),Dde(i,s,o),Lde(i,s,o),{type:Wy,payload:{targetIds:i,clientOffset:r||null}}}}function Nde(t){_e(Array.isArray(t),"Expected targetIds to be an array.")}function Dde(t,e,n){_e(e.isDragging(),"Cannot call hover while not dragging."),_e(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];_e(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);_e(s,"Expected targetIds to be registered.")}}function jde(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);mE(s,n)||t.splice(r,1)}}function Lde(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function Mde(t){return function(){if(t.getMonitor().isDragging())return{type:m1}}}function Vde(t){return{beginDrag:yde(t),publishDragSource:Mde(t),hover:Ode(t),drop:Sde(t),endDrag:Cde(t)}}class Fde{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=Vde(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function $de(t,e){return{x:t.x+e.x,y:t.y+e.y}}function YU(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Ude(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:YU($de(e,r),n)}function Bde(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:YU(e,n)}const Oh=[],g1=[];Oh.__IS_NONE__=!0;g1.__IS_ALL__=!0;function zde(t,e){return t===Oh?!1:t===g1||typeof e>"u"?!0:gde(e,t).length>0}class qde{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;_e(typeof e=="function","listener must be a function."),_e(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!zde(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){_e(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return _e(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(_e(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return mE(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(_e(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!mE(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return Ude(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return Bde(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const UP=typeof global<"u"?global:self,JU=UP.MutationObserver||UP.WebKitMutationObserver;function XU(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function Wde(t){let e=1;const n=new JU(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const Hde=typeof JU=="function"?Wde:XU;class Gde{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Hde(this.flush),this.requestErrorThrow=XU(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Kde{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Qde{create(e){const n=this.freeTasks,r=n.length?n.pop():new Kde(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const ZU=new Gde,Yde=new Qde(ZU.registerPendingError);function Jde(t){ZU.enqueueTask(Yde.create(t))}const v1="dnd-core/ADD_SOURCE",y1="dnd-core/ADD_TARGET",_1="dnd-core/REMOVE_SOURCE",Ky="dnd-core/REMOVE_TARGET";function Xde(t){return{type:v1,payload:{sourceId:t}}}function Zde(t){return{type:y1,payload:{targetId:t}}}function ehe(t){return{type:_1,payload:{sourceId:t}}}function the(t){return{type:Ky,payload:{targetId:t}}}function nhe(t){_e(typeof t.canDrag=="function","Expected canDrag to be a function."),_e(typeof t.beginDrag=="function","Expected beginDrag to be a function."),_e(typeof t.endDrag=="function","Expected endDrag to be a function.")}function rhe(t){_e(typeof t.canDrop=="function","Expected canDrop to be a function."),_e(typeof t.hover=="function","Expected hover to be a function."),_e(typeof t.drop=="function","Expected beginDrag to be a function.")}function gE(t,e){if(e&&Array.isArray(t)){t.forEach(n=>gE(n,!1));return}_e(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var Rr;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(Rr||(Rr={}));let ihe=0;function she(){return ihe++}function ohe(t){const e=she().toString();switch(t){case Rr.SOURCE:return`S${e}`;case Rr.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function BP(t){switch(t[0]){case"S":return Rr.SOURCE;case"T":return Rr.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function zP(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class ahe{addSource(e,n){gE(e),nhe(n);const r=this.addHandler(Rr.SOURCE,e,n);return this.store.dispatch(Xde(r)),r}addTarget(e,n){gE(e,!0),rhe(n);const r=this.addHandler(Rr.TARGET,e,n);return this.store.dispatch(Zde(r)),r}containsHandler(e){return zP(this.dragSources,e)||zP(this.dropTargets,e)}getSource(e,n=!1){return _e(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return _e(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return _e(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return _e(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return BP(e)===Rr.SOURCE}isTargetId(e){return BP(e)===Rr.TARGET}removeSource(e){_e(this.getSource(e),"Expected an existing source."),this.store.dispatch(ehe(e)),Jde(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){_e(this.getTarget(e),"Expected an existing target."),this.store.dispatch(the(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);_e(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){_e(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=ohe(e);return this.types.set(i,n),e===Rr.SOURCE?this.dragSources.set(i,r):e===Rr.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const lhe=(t,e)=>t===e;function che(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function uhe(t,e,n=lhe){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function dhe(t=Oh,e){switch(e.type){case Wy:break;case v1:case y1:case Ky:case _1:return Oh;case qy:case m1:case Gy:case Hy:default:return g1}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=mde(n,r);if(!(i.length>0||!uhe(n,r)))return Oh;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function hhe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){hhe(t,i,n[i])})}return t}const qP={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function phe(t=qP,e){const{payload:n}=e;switch(e.type){case p1:case qy:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Wy:return che(t.clientOffset,n.clientOffset)?t:fhe({},t,{clientOffset:n.clientOffset});case Gy:case Hy:return qP;default:return t}}function mhe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hl(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){mhe(t,i,n[i])})}return t}const ghe={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function vhe(t=ghe,e){const{payload:n}=e;switch(e.type){case qy:return Hl({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case m1:return Hl({},t,{isSourcePublic:!0});case Wy:return Hl({},t,{targetIds:n.targetIds});case Ky:return t.targetIds.indexOf(n.targetId)===-1?t:Hl({},t,{targetIds:pde(t.targetIds,n.targetId)});case Hy:return Hl({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case Gy:return Hl({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function yhe(t=0,e){switch(e.type){case v1:case y1:return t+1;case _1:case Ky:return t-1;default:return t}}function _he(t=0){return t+1}function whe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bhe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){whe(t,i,n[i])})}return t}function Ehe(t={},e){return{dirtyHandlerIds:dhe(t.dirtyHandlerIds,{type:e.type,payload:bhe({},e.payload,{prevTargetIds:fde(t,"dragOperation.targetIds",[])})}),dragOffset:phe(t.dragOffset,e),refCount:yhe(t.refCount,e),dragOperation:vhe(t.dragOperation,e),stateId:_he(t.stateId)}}function The(t,e=void 0,n={},r=!1){const i=Ihe(r),s=new qde(i,new ahe(i)),o=new Fde(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function Ihe(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return KU(Ehe,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function She(t,e){if(t==null)return{};var n=xhe(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function xhe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let WP=0;const ng=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var khe=I.memo(function(e){var{children:n}=e,r=She(e,["children"]);const[i,s]=Ahe(r);return I.useEffect(()=>{if(s){const o=e3();return++WP,()=>{--WP===0&&(o[ng]=null)}}},[]),h.jsx(GU.Provider,{value:i,children:n})});function Ahe(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Rhe(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function Rhe(t,e=e3(),n,r){const i=e;return i[ng]||(i[ng]={dragDropManager:The(t,e,n,r)}),i[ng]}function e3(){return typeof global<"u"?global:window}var Che=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Phe=$o(Che),hl=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Ohe(t,e,n){const[r,i]=I.useState(()=>e(t)),s=I.useCallback(()=>{const o=e(t);Phe(r,o)||(i(o),n&&n())},[r,t,n]);return hl(s),[r,s]}function Nhe(t,e,n){const[r,i]=Ohe(t,e,n);return hl(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function t3(t,e,n){return Nhe(e,t||(()=>({})),()=>n.reconnect())}function n3(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),I.useMemo(()=>typeof t=="function"?t():t,n)}function Dhe(t){return I.useMemo(()=>t.hooks.dragSource(),[t])}function jhe(t){return I.useMemo(()=>t.hooks.dragPreview(),[t])}let Nw=!1,Dw=!1;class Lhe{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){_e(!Nw,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Nw=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Nw=!1}}isDragging(){if(!this.sourceId)return!1;_e(!Dw,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Dw=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{Dw=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let jw=!1;class Mhe{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;_e(!jw,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return jw=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{jw=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Vhe(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function Fhe(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function vE(t,e,n,r){let i=n?n.call(r,t,e):void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const c=s[l];if(!a(c))return!1;const u=t[c],f=e[c];if(i=n?n.call(r,u,f,c):void 0,i===!1||i===void 0&&u!==f)return!1}return!0}function yE(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function $he(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function Uhe(t){return(e=null,n=null)=>{if(!I.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return $he(r),Bhe(r,n?s=>t(s,n):t)}}function r3(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=Uhe(r);e[n]=()=>i}}),e}function HP(t,e){typeof t=="function"?t(e):t.current=e}function Bhe(t,e){const n=t.ref;return _e(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?I.cloneElement(t,{ref:r=>{HP(n,r),HP(e,r)}}):I.cloneElement(t,{ref:e})}class zhe{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!vE(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!vE(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=r3({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,yE(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,yE(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class qhe{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!vE(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=r3({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,yE(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Qu(){const{dragDropManager:t}=I.useContext(GU);return _e(t!=null,"Expected drag drop context"),t}function Whe(t,e){const n=Qu(),r=I.useMemo(()=>new zhe(n.getBackend()),[n]);return hl(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),hl(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function Hhe(){const t=Qu();return I.useMemo(()=>new Lhe(t),[t])}class Ghe{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function Khe(t,e,n){const r=I.useMemo(()=>new Ghe(t,e,n),[e,n]);return I.useEffect(()=>{r.spec=t},[t]),r}function Qhe(t){return I.useMemo(()=>{const e=t.type;return _e(e!=null,"spec.type must be defined"),e},[t])}function Yhe(t,e,n){const r=Qu(),i=Khe(t,e,n),s=Qhe(t);hl(function(){if(s!=null){const[a,l]=Fhe(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function Jhe(t,e){const n=n3(t,e);_e(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=Hhe(),i=Whe(n.options,n.previewOptions);return Yhe(n,r,i),[t3(n.collect,r,i),Dhe(i),jhe(i)]}function Xhe(t){return I.useMemo(()=>t.hooks.dropTarget(),[t])}function Zhe(t){const e=Qu(),n=I.useMemo(()=>new qhe(e.getBackend()),[e]);return hl(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function efe(){const t=Qu();return I.useMemo(()=>new Mhe(t),[t])}function tfe(t){const{accept:e}=t;return I.useMemo(()=>(_e(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class nfe{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function rfe(t,e){const n=I.useMemo(()=>new nfe(t,e),[e]);return I.useEffect(()=>{n.spec=t},[t]),n}function ife(t,e,n){const r=Qu(),i=rfe(t,e),s=tfe(t);hl(function(){const[a,l]=Vhe(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function sfe(t,e){const n=n3(t,e),r=efe(),i=Zhe(n.options);return ife(n,r,i),[t3(n.collect,r,i),Xhe(i)]}function i3(t){let e=null;return()=>(e==null&&(e=t()),e)}function ofe(t,e){return t.filter(n=>n!==e)}function afe(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class lfe{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=afe(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=ofe(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class cfe{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const s3="__NATIVE_FILE__",o3="__NATIVE_URL__",a3="__NATIVE_TEXT__",l3="__NATIVE_HTML__",GP=Object.freeze(Object.defineProperty({__proto__:null,FILE:s3,HTML:l3,TEXT:a3,URL:o3},Symbol.toStringTag,{value:"Module"}));function Lw(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const _E={[s3]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[l3]:{exposeProperties:{html:(t,e)=>Lw(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[o3]:{exposeProperties:{urls:(t,e)=>Lw(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[a3]:{exposeProperties:{text:(t,e)=>Lw(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function ufe(t,e){const n=_E[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new cfe(n);return r.loadDataTransfer(e),r}function Mw(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(_E).filter(n=>{const r=_E[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const dfe=i3(()=>/firefox/i.test(navigator.userAgent)),c3=i3(()=>!!window.safari);class KP{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,c=o.length-1,u;for(;l<=c;){u=Math.floor(.5*(l+c));const m=n[u];if(m<e)l=u+1;else if(m>e)c=u-1;else return r[u]}a=Math.max(0,c);const f=e-n[a],p=f*f;return r[a]+i[a]*f+s[a]*p+o[a]*f*p}constructor(e,n){const{length:r}=e,i=[];for(let m=0;m<r;m++)i.push(m);i.sort((m,y)=>e[m]<e[y]?-1:1);const s=[],o=[];let a,l;for(let m=0;m<r-1;m++)a=e[m+1]-e[m],l=n[m+1]-n[m],s.push(a),o.push(l/a);const c=[o[0]];for(let m=0;m<s.length-1;m++){const y=o[m],_=o[m+1];if(y*_<=0)c.push(0);else{a=s[m];const v=s[m+1],E=a+v;c.push(3*E/((E+v)/y+(E+a)/_))}}c.push(o[o.length-1]);const u=[],f=[];let p;for(let m=0;m<c.length-1;m++){p=o[m];const y=c[m],_=1/s[m],v=y+c[m+1]-p-p;u.push((p-y-v)*_),f.push(v*_*_)}this.xs=e,this.ys=n,this.c1s=c,this.c2s=u,this.c3s=f}}const hfe=1;function u3(t){const e=t.nodeType===hfe?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function Em(t){return{x:t.clientX,y:t.clientY}}function ffe(t){var e;return t.nodeName==="IMG"&&(dfe()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function pfe(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return c3()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function mfe(t,e,n,r,i){const s=ffe(e),a=u3(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:c,offsetHeight:u}=t,{anchorX:f,anchorY:p}=r,{dragPreviewWidth:m,dragPreviewHeight:y}=pfe(s,e,c,u),_=()=>{let O=new KP([0,.5,1],[l.y,l.y/u*y,l.y+y-u]).interpolate(p);return c3()&&s&&(O+=(window.devicePixelRatio-1)*y),O},v=()=>new KP([0,.5,1],[l.x,l.x/c*m,l.x+m-c]).interpolate(f),{offsetX:E,offsetY:w}=i,T=E===0||E,R=w===0||w;return{x:T?E:v(),y:R?w:_()}}class gfe{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function vfe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){vfe(t,i,n[i])})}return t}class yfe{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return QP({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return QP({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(GP).some(n=>GP[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=ufe(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&u3(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=Em(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=Mw(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const u=this.monitor.getSourceId(),f=this.sourceNodes.get(u),p=this.sourcePreviewNodes.get(u)||f;if(p){const{anchorX:m,anchorY:y,offsetX:_,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),T=mfe(f,p,o,{anchorX:m,anchorY:y},{offsetX:_,offsetY:v});a.setDragImage(p,T.x,T.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=Mw(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:Em(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=Em(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else Mw(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:Em(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new gfe(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new lfe(this.isNodeInDocument)}}const _fe=function(e,n,r){return new yfe(e,n,r)},wfe=je({page:1,sortKey:void 0,sortDirection:void 0}),wE=je({isTableLoading:!1,selectedItems:[],isSelectAllChecked:!1}),Be=je({name:"",description:"",available_ticket_ids:[],schema:[],is_published:!1,show_title:!0,show_description:!0,theme:"light"}),Fo=je({showModal:!1,showEmbedModal:!1,editingForm:null,embedCode:""}),Cr=je({type:"text",label:"",placeholder:"",required:!1,options:[]}),w1=async t=>{try{fh.loadingStart(),wE.update({isTableLoading:!0});const e=await bs.getAll({event_id:t});fh.update({list:e||[]})}catch(e){console.error("Error loading forms:",e),ke("Error loading forms","error")}finally{fh.loadingEnd(),wE.update({isTableLoading:!1})}},YP=(t=null)=>{t?(Be.update({name:t.name,description:t.description||"",available_ticket_ids:t.available_ticket_ids||[],schema:t.schema||[],is_published:t.is_published||!1,show_title:t.show_title!==void 0?t.show_title:!0,show_description:t.show_description!==void 0?t.show_description:!0,theme:t.theme||"light"}),Fo.update({showModal:!0,editingForm:t})):(Be.reset(),Fo.update({showModal:!0,editingForm:null}))},bE=()=>{Fo.update({showModal:!1,editingForm:null}),Be.reset(),Cr.reset()},bfe=t=>{const e=Be.value.available_ticket_ids,n=e.includes(t);console.log("handleTicketSelection called:",{ticketId:t,currentIds:e,isSelected:n});const r=n?e.filter(i=>i!==t):[...e,t];Be.value={...Be.value,available_ticket_ids:r},console.log("After ticket update:",Be.value.available_ticket_ids)},Efe=t=>{const e=t.split(`
`).filter(n=>n.trim());Cr.value={...Cr.value,options:e}},Tfe=()=>{const t=Cr.value;if(!t.label){ke("Please enter a field label","error");return}const e=Be.value.schema;Be.value={...Be.value,schema:[...e,t]},Cr.reset()},Ife=t=>{const e=Be.value.schema;Cr.value=e[t];const n=e.filter((r,i)=>i!==t);Be.value={...Be.value,schema:n}},Sfe=t=>{const e=Be.value.schema.filter((n,r)=>r!==t);Be.value={...Be.value,schema:e}},xfe=(t,e)=>{const n=[...Be.value.schema],[r]=n.splice(t,1);n.splice(e,0,r),Be.value={...Be.value,schema:n}},kfe=async(t,e,n)=>{t.preventDefault();const r=Be.value;if(!r.name){ke("Please enter a form name","error");return}try{Be.loadingStart();const i={name:r.name,description:r.description,event_id:e,available_ticket_ids:r.available_ticket_ids,schema:r.schema,is_published:r.is_published,show_title:r.show_title,show_description:r.show_description,theme:r.theme},{editingForm:s}=Fo.value;if(s)await bs.update(s.id,i),ke("Form updated successfully","success");else{const{$user:o}=await El(()=>Promise.resolve().then(()=>rH),void 0),a=o.value;if(a!=null&&a.id)i.created_by=a.id;else throw new Error("User not authenticated. Please log in and try again.");await bs.create(i),ke("Form created successfully","success")}bE(),n&&await n()}catch(i){ke(i.message||"Error saving form","error")}finally{Be.loadingEnd()}},Afe=async(t,e)=>{if(confirm("Are you sure you want to delete this form?"))try{await bs.delete(t),ke("Form deleted successfully","success"),await w1(e)}catch{ke("Error deleting form","error")}},Rfe=async(t,e,n)=>{try{e?(await bs.unpublish(t),ke("Form unpublished","success")):(await bs.publish(t),ke("Form published","success")),await w1(n)}catch{ke("Error updating form status","error")}},Cfe=t=>{const e=`<iframe 
  src="${window.location.origin}/embed/form/${t}" 
  width="100%" 
  height="800"
  frameborder="0"
  style="border: none; border-radius: 8px;">
</iframe>`;Fo.update({showEmbedModal:!0,embedCode:e})},Pfe=()=>{Fo.update({showEmbedModal:!1,embedCode:""})},Ofe=()=>{const{embedCode:t}=Fo.value;navigator.clipboard.writeText(t),ke("Embed code copied to clipboard","success")},Nfe=[{value:"text",label:"Text"},{value:"email",label:"Email"},{value:"number",label:"Number"},{value:"tel",label:"Phone"},{value:"textarea",label:"Textarea"},{value:"select",label:"Select"},{value:"checkbox",label:"Checkbox"},{value:"radio",label:"Radio"},{value:"date",label:"Date"}];function Dfe({field:t,index:e,onMoveField:n,onEdit:r,onDelete:i}){const[{isDragging:s},o]=Jhe({type:"field",item:{index:e},collect:l=>({isDragging:l.isDragging()})}),[,a]=sfe({accept:"field",hover:l=>{l.index!==e&&(n(l.index,e),l.index=e)}});return h.jsxs(fc.Item,{ref:l=>o(a(l)),style:{opacity:s?.5:1,cursor:"move"},className:"d-flex align-items-center justify-content-between",children:[h.jsxs("div",{className:"d-flex align-items-center gap-2",children:[h.jsx($e,{icon:v7,className:"text-muted"}),h.jsxs("div",{children:[h.jsx("strong",{children:t.label||"Untitled Field"}),h.jsx(cs,{bg:"secondary",className:"ms-2",children:t.type}),t.required&&h.jsx(cs,{bg:"danger",className:"ms-1",children:"Required"})]})]}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsx(be,{size:"sm",variant:"outline-primary",onClick:()=>r(e),children:"Edit"}),h.jsx(be,{size:"sm",variant:"outline-danger",onClick:()=>i(e),children:h.jsx($e,{icon:h7})})]})]})}function jfe({eventId:t,tickets:e,onUpdate:n}){const r=fh.value.list,{showModal:i,showEmbedModal:s,editingForm:o,embedCode:a}=Fo.value,l=Be.value,c=Cr.value;er(async()=>{await w1(t)},[t]);const u=["select","radio"].includes(c.type),f=[{key:"name",value:"Name",sortKey:"name"},{key:"instructions",value:"Instructions"},{key:"tickets",value:"Tickets"},{key:"fields",value:"Fields"},{key:"status",value:"Status"},{key:"actions",value:"Actions"}],p=r.map(m=>{var y,_,v,E;return{id:m.id,name:h.jsx("strong",{children:m.name}),instructions:h.jsx("span",{className:"small text-muted",children:m.description?m.description.length>50?`${m.description.substring(0,50)}...`:m.description:"-"}),tickets:`${((y=m.available_ticket_ids)==null?void 0:y.length)||0} ticket${((_=m.available_ticket_ids)==null?void 0:_.length)!==1?"s":""}`,fields:`${((v=m.schema)==null?void 0:v.length)||0} field${((E=m.schema)==null?void 0:E.length)!==1?"s":""}`,status:()=>h.jsx(cs,{bg:m.is_published?"success":"secondary",children:m.is_published?"Published":"Draft"}),actions:()=>h.jsxs(Le,{children:[h.jsx(Le.Toggle,{variant:"link",size:"sm",className:"text-light",children:h.jsx($e,{icon:Qv})}),h.jsxs(Le.Menu,{children:[h.jsx(Le.Item,{onClick:()=>YP(m),children:"Edit"}),h.jsx(Le.Item,{onClick:()=>Cfe(m.id),children:"Get Embed Code"}),h.jsx(Le.Item,{onClick:()=>window.open(`/embed/form/${m.id}`,"_blank","noopener,noreferrer"),children:"Open Form In New Tab"}),h.jsx(Le.Item,{onClick:()=>Rfe(m.id,m.is_published,t),children:m.is_published?"Unpublish":"Publish"}),h.jsx(Le.Divider,{}),h.jsx(Le.Item,{className:"text-danger",onClick:()=>Afe(m.id,t),children:"Delete"})]})]})}});return h.jsxs(khe,{backend:_fe,children:[h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-24",children:[h.jsx("h5",{className:"mb-0",children:"Purchase Forms"}),h.jsxs(be,{size:"sm",variant:"primary",onClick:()=>YP(),children:[h.jsx($e,{icon:lf,className:"me-2"}),"Add Form"]})]}),h.jsx(zU,{$filter:wfe,$view:wE,headers:f,rows:p,hasPagination:!1})]})}),h.jsxs(qt,{show:i,onHide:bE,size:"xl",children:[h.jsx(qt.Header,{closeButton:!0,children:h.jsx(qt.Title,{children:o?"Edit Form":"Create Form"})}),h.jsxs(V,{onSubmit:m=>kfe(m,t,n),children:[h.jsx(qt.Body,{children:h.jsxs(ut,{children:[h.jsxs(ve,{lg:6,children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Form Name *"}),h.jsx(he,{type:"text",name:"name",signal:Be,required:!0})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Form Instructions"}),h.jsx(he,{as:"textarea",rows:3,name:"description",signal:Be,placeholder:"Add custom instructions or context for this specific form embed..."}),h.jsx(V.Text,{className:"text-muted",children:"These instructions are unique to this form embed"})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx(V.Label,{className:"d-block mb-16",children:"Display Options"}),h.jsx(he,{type:"checkbox",name:"is_published",signal:Be,label:"Publish form (make it live)"}),h.jsx(he,{type:"checkbox",name:"show_title",signal:Be,label:"Show form title"}),h.jsx(he,{type:"checkbox",name:"show_description",signal:Be,label:"Show form instructions"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Theme"}),h.jsxs(he,{as:"select",name:"theme",signal:Be,children:[h.jsx("option",{value:"light",children:"Light"}),h.jsx("option",{value:"dark",children:"Dark"}),h.jsx("option",{value:"transparent",children:"Transparent"})]}),h.jsx(V.Text,{className:"text-muted",children:"Choose the theme for the embedded form"})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx(V.Label,{children:"Available Tickets"}),e.length===0?h.jsx("div",{className:"text-muted small",children:"No tickets available. Add tickets to this event first."}):h.jsx(h.Fragment,{children:e.map(m=>h.jsx(he,{type:"checkbox",name:`ticket_${m.id}`,signal:Be,checked:l.available_ticket_ids.includes(m.id),onChange:()=>{bfe(m.id)},label:`${m.name} - $${parseFloat(m.price).toFixed(2)}`,id:`ticket-${m.id}`}))})]})]}),h.jsxs(ve,{lg:6,children:[h.jsx("h6",{className:"mb-16",children:"Custom Fields"}),h.jsx(de,{className:"mb-24",children:h.jsxs(de.Body,{children:[h.jsxs(V.Group,{className:"mb-16",children:[h.jsx(V.Label,{children:"Field Type"}),h.jsx(he,{as:"select",name:"type",signal:Cr,children:Nfe.map(m=>h.jsx("option",{value:m.value,children:m.label},m.value))})]}),h.jsxs(V.Group,{className:"mb-16",children:[h.jsx(V.Label,{children:"Label *"}),h.jsx(he,{type:"text",name:"label",signal:Cr})]}),h.jsxs(V.Group,{className:"mb-16",children:[h.jsx(V.Label,{children:"Placeholder"}),h.jsx(he,{type:"text",name:"placeholder",signal:Cr})]}),u&&h.jsxs(V.Group,{className:"mb-16",children:[h.jsx(V.Label,{children:"Options (one per line)"}),h.jsx(he,{as:"textarea",rows:3,name:"options",signal:Cr,value:(c.options||[]).join(`
`),customOnChange:m=>Efe(m.target.value),placeholder:`Option 1
Option 2
Option 3`})]}),h.jsxs(V.Group,{className:"mb-16",children:[h.jsx(V.Label,{children:"Required?"}),h.jsx(he,{type:"checkbox",name:"required",signal:Cr,label:"Required field"})]}),h.jsxs(be,{variant:"outline-primary",size:"sm",onClick:Tfe,className:"w-100",type:"button",children:[h.jsx($e,{icon:lf,className:"me-2"}),"Add Field"]})]})}),l.schema.length>0&&h.jsxs("div",{children:[h.jsxs("div",{className:"small text-muted mb-8",children:[l.schema.length," custom field",l.schema.length!==1?"s":""," (drag to reorder)"]}),h.jsx(fc,{children:l.schema.map((m,y)=>h.jsx(Dfe,{field:m,index:y,moveField:xfe,onEdit:Ife,onDelete:Sfe},y))})]})]})]})}),h.jsxs(qt.Footer,{children:[h.jsx(be,{variant:"primary",type:"submit",children:"Save"}),h.jsx(be,{variant:"muted",onClick:bE,children:"Cancel"})]})]})]}),h.jsxs(qt,{show:s,onHide:Pfe,children:[h.jsx(qt.Header,{closeButton:!0,children:h.jsx(qt.Title,{children:"Embed Code"})}),h.jsxs(qt.Body,{children:[h.jsx("p",{className:"text-muted mb-16",children:"Copy and paste this code into your website to embed this form:"}),h.jsx(V.Control,{as:"textarea",rows:8,value:a,readOnly:!0,className:"font-monospace small mb-16"}),h.jsxs(be,{variant:"primary",onClick:Ofe,className:"w-100",children:[h.jsx($e,{icon:w7,className:"me-2"}),"Copy to Clipboard"]})]})]})]})}const Nh=je({orders:[],isLoading:!1}),Lfe=async t=>{try{Nh.loadingStart();const e=await mp.getByEventId(t);Nh.update({orders:e||[]})}catch(e){console.error("Error loading sales:",e),ke("Error loading sales data","error")}finally{Nh.loadingEnd()}};function Mfe({eventId:t}){const{orders:e}=Nh.value,n=Nh.value.isLoading;er(async()=>{await Lfe(t)},[t]);const r=i=>({PENDING:"warning",COMPLETED:"success",CANCELLED:"danger",REFUNDED:"secondary"})[i]||"secondary";return n?h.jsx(Ho,{}):h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-24",children:[h.jsx("h5",{className:"mb-0",children:"Sales & Orders"}),h.jsxs("div",{className:"text-muted small",children:[e.length," order",e.length!==1?"s":""]})]}),e.length===0?h.jsx("div",{className:"text-center py-5 text-muted",children:"No orders yet for this event"}):h.jsxs($v,{responsive:!0,hover:!0,children:[h.jsx("thead",{children:h.jsxs("tr",{children:[h.jsx("th",{children:"Order ID"}),h.jsx("th",{children:"Customer"}),h.jsx("th",{children:"Tickets"}),h.jsx("th",{children:"Total"}),h.jsx("th",{children:"Discount"}),h.jsx("th",{children:"Status"}),h.jsx("th",{children:"Date"})]})}),h.jsx("tbody",{children:e.map(i=>{var s;return h.jsxs("tr",{children:[h.jsxs("td",{className:"font-monospace small",children:[i.id.substring(0,8),"..."]}),h.jsxs("td",{children:[h.jsx("div",{children:h.jsx("strong",{children:i.customer_name||"N/A"})}),h.jsx("div",{className:"small text-muted",children:i.customer_email})]}),h.jsx("td",{children:((s=i.order_items)==null?void 0:s.map((o,a)=>{var l;return h.jsxs("div",{className:"small",children:[o.quantity,"x ",((l=o.ticket_types)==null?void 0:l.name)||"Ticket"]},a)}))||"-"}),h.jsxs("td",{children:[h.jsxs("strong",{children:["$",parseFloat(i.total||0).toFixed(2)]}),i.subtotal!==i.total&&h.jsxs("div",{className:"small text-muted",children:["(was $",parseFloat(i.subtotal||0).toFixed(2),")"]})]}),h.jsx("td",{children:i.discount_amount>0?h.jsxs("span",{className:"text-success",children:["-$",parseFloat(i.discount_amount).toFixed(2)]}):"-"}),h.jsx("td",{children:h.jsx(cs,{bg:r(i.status),children:i.status})}),h.jsxs("td",{className:"small",children:[gu(new Date(i.created_at),"MMM d, yyyy"),h.jsx("div",{className:"text-muted",children:gu(new Date(i.created_at),"h:mm a")})]})]},i.id)})})]}),e.length>0&&h.jsx("div",{className:"mt-24 pt-24 border-top",children:h.jsxs("div",{className:"row",children:[h.jsxs("div",{className:"col-md-3",children:[h.jsx("div",{className:"text-muted small",children:"Total Orders"}),h.jsx("div",{className:"h4 mb-0",children:e.length})]}),h.jsxs("div",{className:"col-md-3",children:[h.jsx("div",{className:"text-muted small",children:"Total Tickets Sold"}),h.jsx("div",{className:"h4 mb-0",children:e.reduce((i,s)=>{var o;return i+(((o=s.order_items)==null?void 0:o.reduce((a,l)=>a+l.quantity,0))||0)},0)})]}),h.jsxs("div",{className:"col-md-3",children:[h.jsx("div",{className:"text-muted small",children:"Total Revenue"}),h.jsxs("div",{className:"h4 mb-0",children:["$",e.reduce((i,s)=>i+parseFloat(s.total||0),0).toFixed(2)]})]}),h.jsxs("div",{className:"col-md-3",children:[h.jsx("div",{className:"text-muted small",children:"Total Discounts"}),h.jsxs("div",{className:"h4 mb-0 text-success",children:["$",e.reduce((i,s)=>i+parseFloat(s.discount_amount||0),0).toFixed(2)]})]})]})})]})})}const Tm=async t=>{try{xi.loadingStart();const[e,n]=await Promise.all([ws.getById(t),vu.getByEventId(t)]);xi.update({current:e}),tI.update({list:n})}catch(e){console.error("Error loading event:",e)}finally{xi.loadingEnd()}},JP=t=>({variant:{DRAFT:"secondary",PUBLISHED:"success",CANCELLED:"danger"}[t]||"secondary",text:t});function Vfe(){const{id:t}=Vf(),e=Li(),n=xi.value.current,r=tI.value.list,i=xi.value.isLoading,s=Ft.value,o=Ft.value.isLoading;er(async()=>{await Tm(t),await WU(t)},[t]);const a=async l=>{l.preventDefault(),await HU(l,t,()=>{}),await Tm(t)};return i?h.jsx(Ho,{}):n?h.jsxs(Gt,{fluid:!0,className:"py-4",children:[h.jsx(ut,{className:"mb-32",children:h.jsx(ve,{children:h.jsxs("div",{className:"d-flex align-items-center gap-3",children:[h.jsx(be,{variant:"outline-secondary",size:"sm",onClick:()=>e("/admin/events"),children:h.jsx($e,{icon:f7})}),h.jsxs("div",{children:[h.jsx("h2",{className:"mb-8",children:n.title}),h.jsx("div",{children:h.jsx(cs,{bg:JP(n.status).variant,children:JP(n.status).text})})]})]})})}),h.jsxs(ut,{children:[h.jsx(ve,{lg:8,children:h.jsxs(DW,{defaultActiveKey:"basic",className:"mb-24",children:[h.jsx(wd,{eventKey:"basic",title:"Basic Info",children:h.jsx(de,{children:h.jsx(de.Body,{children:h.jsxs(V,{onSubmit:a,children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Title *"}),h.jsx(V.Control,{type:"text",name:"title",value:s.title,onChange:Wl,required:!0})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Description"}),h.jsx(V.Control,{as:"textarea",rows:4,name:"description",value:s.description,onChange:Wl})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Start Date *"}),h.jsx(V.Control,{type:"datetime-local",name:"start_date",value:s.start_date,onChange:Wl,required:!0})]})}),h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"End Date *"}),h.jsx(V.Control,{type:"datetime-local",name:"end_date",value:s.end_date,onChange:Wl,required:!0})]})})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Location"}),h.jsx(qU,{signal:Ft,name:"location",value:s.location,placeholder:"Search for a location"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Image URL"}),h.jsx(V.Control,{type:"url",name:"image_url",value:s.image_url,onChange:Wl,placeholder:"https://example.com/image.jpg"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Capacity"}),h.jsx(V.Control,{type:"number",name:"capacity",value:s.capacity,onChange:Wl,min:"1"}),h.jsx(V.Text,{className:"text-muted",children:"Leave empty for unlimited capacity"})]}),h.jsxs(be,{type:"submit",variant:"primary",disabled:o,children:[h.jsx($e,{icon:u7,className:"me-2"}),o?"Saving...":"Save Changes"]})]})})})}),h.jsx(wd,{eventKey:"tickets",title:"Tickets",children:h.jsx(ode,{eventId:t,tickets:r,onUpdate:()=>Tm(t)})}),h.jsx(wd,{eventKey:"forms",title:"Forms",children:h.jsx(jfe,{eventId:t,tickets:r,onUpdate:()=>Tm(t)})}),h.jsx(wd,{eventKey:"discounts",title:"Discount Codes",children:h.jsx(ude,{eventId:t})}),h.jsx(wd,{eventKey:"sales",title:"Sales",children:h.jsx(Mfe,{eventId:t})})]})}),h.jsx(ve,{lg:4,children:h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsx("h5",{className:"mb-24",children:"Quick Stats"}),h.jsxs("div",{className:"mb-24",children:[h.jsx("div",{className:"text-muted small",children:"Total Tickets"}),h.jsx("div",{className:"h4 mb-0",children:r.length})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx("div",{className:"text-muted small",children:"Tickets Sold"}),h.jsx("div",{className:"h4 mb-0",children:r.reduce((l,c)=>l+(c.sold||0),0)})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-muted small",children:"Revenue"}),h.jsxs("div",{className:"h4 mb-0",children:["$",r.reduce((l,c)=>l+(c.sold||0)*parseFloat(c.price||0),0).toFixed(2)]})]})]})})})]})]}):h.jsx("div",{children:"Event not found"})}const Ffe=async(t,e)=>{try{if(Ie.loadingStart(),Ie.update({error:null}),t){const n=await bs.getById(t);if(Ie.update({form:n}),n.event_id){const r=await vu.getByEventId(n.event_id),i=new Date;let s=r||[];n.available_ticket_ids&&n.available_ticket_ids.length>0&&(s=s.filter(o=>n.available_ticket_ids.includes(o.id))),s=s.filter(o=>{const a=new Date(o.sales_start),l=new Date(o.sales_end),c=(o.quantity||0)-(o.sold||0);return a<=i&&i<=l&&c>0}),Ie.update({tickets:s})}}else if(e){const n=await vu.getByEventId(e),r=new Date,i=(n||[]).filter(s=>{const o=new Date(s.sales_start),a=new Date(s.sales_end),l=(s.quantity||0)-(s.sold||0);return o<=r&&r<=a&&l>0});Ie.update({tickets:i})}}catch{Ie.update({error:"Error loading form"})}finally{Ie.loadingEnd(),b1()}},d3=()=>{const{selectedTickets:t,appliedDiscount:e,tickets:n}=Ie.value;let r=0;Object.entries(t).forEach(([o,a])=>{if(a>0){const l=n.find(c=>c.id===o);l&&(r+=parseFloat(l.price)*a)}});let i=0;e&&(e.type==="PERCENT"?i=r*parseFloat(e.value)/100:i=parseFloat(e.value));const s=Math.max(0,r-i);Ie.update({totals:{subtotal:parseFloat(r.toFixed(2)),discount_amount:parseFloat(i.toFixed(2)),total:parseFloat(s.toFixed(2))}})},ca=(t,e)=>{const n={...Ie.value.formData};n[t]=e,Ie.update({formData:n}),b1()},$fe=(t,e)=>{const n={...Ie.value.selectedTickets};n[t]=parseInt(e,10)||0,Ie.update({selectedTickets:n}),d3(),b1()},Ufe=async(t,e)=>{const{discountCode:n}=Ie.value;if(n)try{const{form:r}=Ie.value,i=await _u.validateCode(n,(r==null?void 0:r.event_id)||e);i.valid?(Ie.update({appliedDiscount:i.discount,error:null}),d3()):Ie.update({error:i.error,appliedDiscount:null})}catch{Ie.update({error:"Error validating discount code"})}},Bfe=()=>{const{form:t,formData:e,selectedTickets:n,tickets:r}=Ie.value;if(t!=null&&t.schema){for(const s of t.schema)if(s.required&&!e[s.label])return`${s.label} is required`}const i=Object.values(n).some(s=>s>0);return r.length>0&&!i?"Please select at least one ticket":e.email?null:"Email is required"},b1=()=>{const{form:t,formData:e,selectedTickets:n,tickets:r}=Ie.value;if(!e.email||!e.email.trim()){Ie.update({isFormValid:!1});return}if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)){Ie.update({isFormValid:!1});return}if(t!=null&&t.schema){for(const s of t.schema)if(s.required){const o=e[s.label];if(!o||typeof o=="string"&&!o.trim()){Ie.update({isFormValid:!1});return}}}if(r.length>0&&!Object.values(n).some(o=>o>0)){Ie.update({isFormValid:!1});return}Ie.update({isFormValid:!0})},zfe=async(t,e,n,r)=>{t.preventDefault();const i=Bfe();if(i){Ie.update({error:i});return}try{Ie.loadingStart(),Ie.update({error:null});const{form:s,formData:o,selectedTickets:a,appliedDiscount:l,totals:c,tickets:u}=Ie.value;let f=null;if(s&&(f=(await bs.submitForm(s.id,o,o.email)).id),Object.values(a).some(m=>m>0)){const m=Object.entries(a).filter(([,v])=>v>0).map(([v,E])=>{const w=u.find(T=>T.id===v);return{ticket_type_id:v,quantity:E,unit_price:parseFloat(w.price)}}),y={event_id:(s==null?void 0:s.event_id)||n,form_submission_id:f,discount_code_id:(l==null?void 0:l.id)||null,subtotal:c.subtotal,discount_amount:c.discount_amount,total:c.total,status:"PENDING",customer_email:o.email,customer_name:o.name||null,items:m},_=await mp.create(y);r&&r({order:_,submission:f})}else r&&r({submission:f})}catch{Ie.update({error:"Error submitting form. Please try again."})}finally{Ie.loadingEnd()}},qfe=t=>{Ie.update({discountCode:t})};function Wfe({formId:t,eventId:e,onSubmitSuccess:n,theme:r="light"}){var _;const{form:i}=Ie.value,{tickets:s}=Ie.value,{isLoading:o}=Ie.value,{error:a,formData:l,selectedTickets:c,discountCode:u,appliedDiscount:f,totals:p,isFormValid:m}=Ie.value;er(()=>{document.body.className=""},[]),er(async()=>{await Ffe(t,e)},[t,e]);const y=(v,E)=>{var T,R;const w=l[v.label]||"";switch(v.type){case"textarea":return h.jsxs(V.Group,{className:"mb-24",children:[h.jsxs(V.Label,{children:[v.label," ",v.required&&h.jsx("span",{className:"text-danger",children:"*"})]}),h.jsx(he,{as:"textarea",rows:3,name:`field_${E}`,placeholder:v.placeholder,value:w,customOnChange:D=>ca(v.label,D.target.value),required:v.required})]},E);case"select":return h.jsxs(V.Group,{className:"mb-24",children:[h.jsxs(V.Label,{children:[v.label," ",v.required&&h.jsx("span",{className:"text-danger",children:"*"})]}),h.jsxs(he,{as:"select",name:`field_${E}`,value:w,customOnChange:D=>ca(v.label,D.target.value),required:v.required,children:[h.jsx("option",{value:"",children:"Select..."}),(T=v.options)==null?void 0:T.map((D,O)=>h.jsx("option",{value:D,children:D},O))]})]},E);case"checkbox":return h.jsx(V.Group,{className:"mb-24",children:h.jsx(he,{type:"checkbox",name:`field_${E}`,label:v.label,checked:!!w,customOnChange:D=>ca(v.label,D.target.checked),required:v.required})},E);case"radio":return h.jsxs(V.Group,{className:"mb-24",children:[h.jsxs(V.Label,{children:[v.label," ",v.required&&h.jsx("span",{className:"text-danger",children:"*"})]}),(R=v.options)==null?void 0:R.map((D,O)=>h.jsx(V.Check,{type:"radio",label:D,name:v.label,value:D,checked:w===D,onChange:x=>ca(v.label,x.target.value),required:v.required},O))]},E);default:return h.jsxs(V.Group,{className:"mb-24",children:[h.jsxs(V.Label,{children:[v.label," ",v.required&&h.jsx("span",{className:"text-danger",children:"*"})]}),h.jsx(he,{type:v.type,name:`field_${E}`,placeholder:v.placeholder,value:w,customOnChange:D=>ca(v.label,D.target.value),required:v.required})]},E)}};return o?h.jsx(Ho,{}):h.jsx(de,{className:`event-form-embed ${r} border-0`,children:h.jsxs(de.Body,{children:[i&&h.jsxs("div",{className:"mb-32",children:[i.show_title!==!1&&h.jsx("h3",{children:i.name}),i.show_description!==!1&&i.description&&h.jsx("p",{className:"text-muted",children:i.description})]}),a&&h.jsx(Yt,{variant:"danger",children:a}),h.jsxs(V,{onSubmit:v=>zfe(v,t,e,n),children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Email *"}),h.jsx(he,{type:"email",name:"email",placeholder:"your@email.com",value:l.email||"",customOnChange:v=>ca("email",v.target.value),required:!0})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Name"}),h.jsx(he,{type:"text",name:"name",placeholder:"Your name",value:l.name||"",customOnChange:v=>ca("name",v.target.value)})]}),(_=i==null?void 0:i.schema)==null?void 0:_.map((v,E)=>y(v,E)),s.length>0&&h.jsxs("div",{className:"mb-32",children:[h.jsx("h5",{className:"mb-24",children:"Select Tickets"}),s.map(v=>{const E=v.quantity-(v.sold||0);return h.jsx(de,{className:"mb-24 border-0 shadow-none bg-transparent",children:h.jsx(de.Body,{children:h.jsxs(ut,{className:"align-items-center",children:[h.jsxs(ve,{md:6,children:[h.jsx("h6",{className:"mb-8",children:v.name}),v.description&&h.jsx("p",{className:"text-muted small mb-0",children:v.description}),v.benefits&&h.jsx("p",{className:"text-muted small mb-0",children:v.benefits}),h.jsxs("strong",{children:["$",parseFloat(v.price).toFixed(2)]})]}),h.jsx(ve,{md:3,className:"text-muted small",children:E>0?`${E} available`:"Sold out"}),h.jsxs(ve,{md:3,children:[h.jsx(V.Label,{children:"Quantity"}),h.jsx(he,{as:"select",name:`ticket_${v.id}`,value:c[v.id]||0,customOnChange:w=>$fe(v.id,Number(w.target.value)),disabled:E===0,children:[...Array(E+1).keys()].map(w=>h.jsx("option",{value:w,children:w},w))})]})]})})},v.id)}),h.jsxs("div",{className:"mb-24",children:[h.jsx(V.Label,{children:"Discount Code"}),h.jsx(he,{type:"text",name:"discountCode",placeholder:"Enter code",value:u,customOnChange:v=>qfe(v.target.value.toUpperCase()),className:"flex-grow-1",style:{minWidth:0}}),h.jsx("div",{className:"mt-8",children:h.jsx(be,{variant:"dark",onClick:()=>Ufe(t,e),style:{whiteSpace:"nowrap"},children:"Apply"})}),f&&h.jsxs("small",{className:"text-success",children:["Discount applied: ",f.code]})]}),p.subtotal>0&&h.jsx(de,{className:"bg-transparent",children:h.jsxs(de.Body,{children:[h.jsxs("div",{className:"d-flex justify-content-between mb-16",children:[h.jsx("span",{children:"Subtotal:"}),h.jsxs("strong",{children:["$",p.subtotal.toFixed(2)]})]}),p.discount_amount>0&&h.jsxs("div",{className:"d-flex justify-content-between mb-16 text-success",children:[h.jsx("span",{children:"Discount:"}),h.jsxs("strong",{children:["-$",p.discount_amount.toFixed(2)]})]}),h.jsxs("div",{className:"d-flex justify-content-between pt-2 border-top",children:[h.jsx("strong",{children:"Total:"}),h.jsxs("strong",{className:"text-primary",children:["$",p.total.toFixed(2)]})]})]})})]}),h.jsx(be,{type:"submit",variant:"dark",size:"lg",className:"w-100",disabled:o||!m,children:o?"Submitting...":"Proceed to Payment"})]})]})})}function Hfe(){const{formId:t}=Vf(),{form:e}=Ie.value,n=r=>{r.order?window.location.href=`/embed/checkout/${r.order.id}`:alert("Form submitted successfully!")};return h.jsx(Gt,{className:"py-5",style:{maxWidth:"800px"},children:h.jsx(Wfe,{formId:t,onSubmitSuccess:n,theme:(e==null?void 0:e.theme)||"light"})})}var XP={exports:{}},Ld={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZP;function Gfe(){if(ZP)return Ld;ZP=1;var t=mt,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var u,f={},p=null,m=null;c!==void 0&&(p=""+c),l.key!==void 0&&(p=""+l.key),l.ref!==void 0&&(m=l.ref);for(u in l)r.call(l,u)&&!s.hasOwnProperty(u)&&(f[u]=l[u]);if(a&&a.defaultProps)for(u in l=a.defaultProps,l)f[u]===void 0&&(f[u]=l[u]);return{$$typeof:e,type:a,key:p,ref:m,props:f,_owner:i.current}}return Ld.Fragment=n,Ld.jsx=o,Ld.jsxs=o,Ld}var eO;function Kfe(){return eO||(eO=1,XP.exports=Gfe()),XP.exports}var ri=Kfe();async function Qfe(t){return new Promise((e,n)=>{if(document.querySelector(`script[src="${t}"]`)){e();return}const r=Object.assign(document.createElement("script"),{type:"text/javascript",defer:!0,src:t,onerror:i=>{n(i)}});r.onload=()=>{e()},document.body.appendChild(r)})}function Yfe(t){return t.charAt(0).toUpperCase()+t.slice(1)}function Jfe(t){const{text:e,onSuccess:n,onError:r,onComplete:i,submitPayment:s,...o}=t;return ri.jsx("button",{onClick:async()=>(o.onSubmit&&await o.onSubmit(),s({onSuccess:n||(()=>{}),onError:r||(()=>{}),onComplete:i||(()=>{})})),...o,children:e})}function Xfe(t){const{onChange:e,...n}=t;return ri.jsx("input",{onChange:e,...n})}const Zfe="https://cdn.safecharge.com/safecharge_resources/v1/websdk/safecharge.js",h3=I.createContext(void 0);async function epe(t,e){return new Promise(function(n,r){t.createPayment(e,i=>{if(i.result==="APPROVED")n(i);else{const s=i.errorDescription?String(i.errorDescription).toLowerCase():"",o=i.transactionStatus?String(i.transactionStatus).toLowerCase():"failed";r(new Error(`Transaction ${o}.${o.includes(s)?"":` Reason: ${Yfe(s)}.`}`))}})})}function tpe({children:t,sessionToken:e,config:n}){const[r,i]=I.useState({cardNumber:null,cardExpiry:null,cardCvc:null,cardHolderName:""}),[s,o]=I.useState(),[a,l]=I.useState();if(!n)throw new Error("config missing");I.useEffect(()=>{Qfe(Zfe).then(()=>{window.SafeCharge!==void 0&&o(window.SafeCharge({env:n.env,merchantId:n.merchantId,merchantSiteId:n.merchantSiteId}))})},[]),I.useEffect(()=>{if(s&&!a){const f=s.fields({});l(f)}},[s,a]);function c(f,p){i(m=>({...m,[f]:p}))}async function u(f){try{if(!r.cardHolderName)throw new Error("Card holder name is required.");if(!r.cardNumber.parentElm.classList.contains(r.cardNumber.stateClass.complete))throw new Error("Invalid card number.");if(!r.cardExpiry.parentElm.classList.contains(r.cardExpiry.stateClass.complete))throw new Error("Invalid card expiry.");if(!r.cardCvc.parentElm.classList.contains(r.cardCvc.stateClass.complete))throw new Error("Invalid card cvc.")}catch(p){console.error(p),f.onError(p),f.onComplete();return}try{const p=await epe(s,{cardHolderName:r.cardHolderName,sessionToken:e,paymentOption:r.cardNumber});f.onSuccess(p)}catch(p){console.error(p),f.onError(p)}f.onComplete()}return!s||!a||!e?null:ri.jsx(h3.Provider,{value:{submitPayment:u,form:r,updateField:c,safeCharge:s,safeChargeFields:a},children:t})}function E1(){return I.useContext(h3)}function npe(t){switch(t){case"cardNumber":return"ccNumber";case"cardExpiry":return"ccExpiration";case"cardCvc":return"ccCvc"}}const T1=I.memo(({fieldType:t})=>{const{updateField:e,safeChargeFields:n}=E1(),r=`accru-payment-form-${t}-container`;return I.useEffect(()=>{const i=npe(t);if(!n.instances.map(s=>s.type).includes(i)){const s=n.create(i,{});s.attach(`#${r}`),e(t,s)}},[]),ri.jsx("div",{id:r})});function rpe(){return ri.jsx(T1,{fieldType:"cardNumber"})}function ipe(){return ri.jsx(T1,{fieldType:"cardExpiry"})}function spe(){return ri.jsx(T1,{fieldType:"cardCvc"})}function ope({initialValue:t,...e}){const{form:n,updateField:r}=E1();I.useEffect(()=>{t&&r("cardHolderName",t)},[]);function i(s){return r("cardHolderName",s.target.value)}return ri.jsx(Xfe,{...e,onChange:i,value:n.cardHolderName})}function ape(t){const{submitPayment:e}=E1();return ri.jsx(Jfe,{...t,submitPayment:e})}const lpe={CardHolderName:ope,CreditCardNumber:rpe,CreditCardExpiration:ipe,CreditCardCvc:spe,SubmitBtn:ape};function cpe(t,e){return e.find(n=>n.name===t).config}function upe(t){const[e,n]=I.useState(!1),[r]=I.useState(t.preferredProvider),[i,s]=I.useState([]);if(I.useEffect(()=>{async function a(){const l=await t.preReleaseGetProviders();if(!l.map(c=>c.name).includes(r))throw new Error("Provider not found.");s(l),n(!0)}a()},[]),e===!1)return null;const o=cpe(r,i);return r==="nuvei"?t.sessionToken?ri.jsx(tpe,{sessionToken:t.sessionToken,config:o,children:t.children}):ri.jsx("div",{children:"Missing sessionToken"}):null}function dpe(t){return t==="nuvei"?lpe:null}const f3={async createPaymentSession(t){return(await me.payments.createPaymentSession(t)).data},async confirmPayment(t,e){return(await me.payments.confirmPayment(t,e)).data},async handleWebhook(t){return(await me.payments.handleWebhook(t)).data}},hpe=async t=>{var e;try{Ut.loadingStart(),Ut.update({error:null});const n=await mp.getById(t);if(!n)throw new Error("Order not found");if(n.status==="PAID"){Ut.update({order:n,paymentStatus:"completed"});return}if(n.status==="CANCELLED")throw new Error("This order has been cancelled");const r=((e=n.form_submissions)==null?void 0:e.forms)||null;Ut.update({order:n,form:r})}catch(n){Ut.update({error:n.message||"Error loading order"})}finally{Ut.loadingEnd()}},fpe=async t=>{try{const e=await f3.createPaymentSession(t);return Ut.update({paymentSession:e}),e}catch(e){throw Ut.update({error:e.message||"Error initializing payment"}),e}},Lc=Bv(!1),ppe=async t=>{try{Lc.value=!0,Ut.update({error:null});const{order:e}=Ut.value;await f3.confirmPayment(e.id,t),Ut.update({paymentStatus:"completed"}),setTimeout(()=>{window.location.href=`/embed/order-confirmation/${e.id}`},2e3)}catch(e){Ut.update({error:e.message||"Payment confirmation failed",paymentStatus:"failed"})}finally{Lc.value=!1}},mpe=t=>{Ut.update({error:t.message||"Payment processing failed. Please try again.",paymentStatus:"failed"}),Lc.value=!1},tO=()=>{Ut.update({error:null,paymentStatus:null})},p3="nuvei";function gpe(){const t=dpe(p3),{order:e}=Ut.value;return h.jsxs(V,{children:[h.jsxs(V.Group,{className:"mb-24",controlId:"cardholderName",children:[h.jsx(V.Label,{children:"Cardholder Name"}),h.jsx(t.CardHolderName,{className:"form-control",placeholder:"Enter cardholder name"})]}),h.jsxs(V.Group,{className:"mb-24",controlId:"cardNumber",children:[h.jsx(V.Label,{children:"Credit Card Number"}),h.jsx("div",{className:"form-control",children:h.jsx(t.CreditCardNumber,{})})]}),h.jsxs(ut,{children:[h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",controlId:"cardExpiration",children:[h.jsx(V.Label,{children:"Expiration Date"}),h.jsx("div",{className:"form-control",children:h.jsx(t.CreditCardExpiration,{})})]})}),h.jsx(ve,{md:6,children:h.jsxs(V.Group,{className:"mb-24",controlId:"cardCvc",children:[h.jsx(V.Label,{children:"CVV"}),h.jsx("div",{className:"form-control",children:h.jsx(t.CreditCardCvc,{})})]})})]}),h.jsx("div",{className:"d-grid",children:h.jsx(t.SubmitBtn,{className:"btn btn-primary btn-lg",text:`Pay $${parseFloat(e.total).toFixed(2)}`,onSubmit:()=>{Lc.value=!0},onSuccess:ppe,onError:mpe,onComplete:()=>{Lc.value=!1},disabled:Lc.value})})]})}function vpe(){var c;const{orderId:t}=Vf(),{order:e,error:n,paymentStatus:r,paymentSession:i}=Ut.value,{isLoading:s}=Ut.value,o=((c=Ut.value.form)==null?void 0:c.theme)||"light";er(()=>{document.body.className=""},[]),er(async()=>{t&&await hpe(t)},[t]),er(async()=>{const{order:u}=Ut.value;if(console.log("orderData",u.status),u&&u.status==="PENDING"&&!i){console.log("initializing payment session");try{await fpe(t)}catch{}}},[e,t,i]);const a=()=>{var u,f,p;return e?h.jsx(de,{className:"mb-24",children:h.jsxs(de.Body,{children:[h.jsx("h5",{className:"mb-24",children:"Order Summary"}),h.jsxs("div",{className:"mb-24",children:[h.jsx("strong",{children:"Event:"})," ",((u=e.events)==null?void 0:u.title)||"N/A"]}),h.jsxs("div",{className:"mb-24",children:[h.jsx("strong",{children:"Customer:"}),h.jsx("div",{children:e.customer_name||"Guest"}),h.jsx("div",{className:"text-muted",children:e.customer_email})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx("strong",{children:"Tickets:"}),(f=e.order_items)==null?void 0:f.map((m,y)=>{var _;return h.jsxs("div",{className:"d-flex justify-content-between mt-8",children:[h.jsxs("span",{children:[((_=m.ticket_types)==null?void 0:_.name)||"Ticket"," x ",m.quantity]}),h.jsxs("span",{children:["$",parseFloat(m.subtotal).toFixed(2)]})]},y)})]}),h.jsxs("div",{className:"border-top pt-16 mt-16",children:[h.jsxs("div",{className:"d-flex justify-content-between mb-8",children:[h.jsx("span",{children:"Subtotal:"}),h.jsxs("strong",{children:["$",parseFloat(e.subtotal).toFixed(2)]})]}),e.discount_amount>0&&h.jsxs("div",{className:"d-flex justify-content-between mb-8 text-success",children:[h.jsxs("span",{children:["Discount (",(p=e.discount_codes)==null?void 0:p.code,"):"]}),h.jsxs("strong",{children:["-$",parseFloat(e.discount_amount).toFixed(2)]})]}),h.jsxs("div",{className:"d-flex justify-content-between pt-16 border-top",children:[h.jsx("strong",{children:"Total:"}),h.jsxs("strong",{className:"text-primary",children:["$",parseFloat(e.total).toFixed(2)]})]})]})]})}):null},l=()=>r==="completed"?h.jsxs(Yt,{variant:"success",children:[h.jsx(Yt.Heading,{children:"Payment Successful!"}),h.jsxs("p",{children:["Your payment has been processed successfully. You will receive a confirmation email shortly at ",e==null?void 0:e.customer_email,"."]}),h.jsx("p",{className:"mb-0",children:"Redirecting to confirmation page..."})]}):r==="failed"?h.jsxs(Yt,{variant:"danger",children:[h.jsx(Yt.Heading,{children:"Payment Failed"}),h.jsx("p",{children:n||"There was an error processing your payment."}),h.jsx(be,{variant:"danger",onClick:tO,children:"Try Again"})]}):r==="cancelled"?h.jsxs(Yt,{variant:"warning",children:[h.jsx(Yt.Heading,{children:"Payment Cancelled"}),h.jsx("p",{children:"You cancelled the payment process."}),h.jsx(be,{variant:"primary",onClick:tO,children:"Resume Payment"})]}):null;return s?h.jsx(Ho,{}):n&&!e?h.jsx(Gt,{className:`py-5 ${o}`,style:{maxWidth:"800px"},children:h.jsx(Yt,{variant:"danger",children:n})}):(e==null?void 0:e.status)==="PAID"?h.jsxs(Gt,{className:`py-5 ${o}`,style:{maxWidth:"800px"},children:[h.jsxs(Yt,{variant:"info",children:[h.jsx(Yt.Heading,{children:"Order Already Paid"}),h.jsx("p",{children:"This order has already been paid."})]}),a()]}):h.jsxs(Gt,{className:`py-5 ${o}`,style:{maxWidth:"800px"},children:[n&&h.jsx(Yt,{variant:"danger",className:"mb-24",children:n}),l(),h.jsx(ut,{children:h.jsxs(ve,{md:12,children:[a(),e&&i&&!r&&h.jsx(de,{children:h.jsxs(de.Body,{children:[h.jsx("h5",{className:"mb-24",children:"Payment Information"}),i.sessionToken?h.jsx(upe,{sessionToken:i.sessionToken,preferredProvider:p3,children:h.jsx(gpe,{})}):h.jsx(Yt,{variant:"warning",children:"Payment session could not be initialized. Please contact support."})]})})]})})]})}const Gl=Bv({order:null,error:null});function ype(){var i,s,o;const{orderId:t}=Vf(),{order:e,error:n}=Gl.value,{isLoading:r}=Gl.value;return er(async()=>{try{Gl.loadingStart();const a=await mp.getById(t);Gl.update({order:a,error:null})}catch(a){Gl.update({error:a.message||"Error loading order confirmation"})}finally{Gl.loadingEnd()}},[t]),r?h.jsx(Ho,{}):n?h.jsx(Gt,{className:"py-5",style:{maxWidth:"800px"},children:h.jsx(Yt,{variant:"danger",children:n})}):e?h.jsxs(Gt,{className:"py-5",style:{maxWidth:"800px"},children:[h.jsxs(Yt,{variant:"success",className:"mb-32",children:[h.jsxs(Yt.Heading,{children:[h.jsx("i",{className:"fas fa-check-circle me-2"}),"Payment Successful!"]}),h.jsxs("p",{className:"mb-0",children:["Your order has been confirmed. A confirmation email has been sent to"," ",h.jsx("strong",{children:e.customer_email}),"."]})]}),h.jsx(de,{className:"mb-24",children:h.jsxs(de.Body,{children:[h.jsx("h5",{className:"mb-24",children:"Order Details"}),h.jsxs("div",{className:"mb-16",children:[h.jsx("small",{className:"text-muted",children:"Order ID"}),h.jsx("div",{className:"font-monospace",children:e.id})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx("small",{className:"text-muted",children:"Event"}),h.jsx("div",{children:h.jsx("strong",{children:((i=e.events)==null?void 0:i.title)||"N/A"})})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx("small",{className:"text-muted",children:"Customer"}),h.jsx("div",{children:e.customer_name||"Guest"}),h.jsx("div",{className:"text-muted",children:e.customer_email})]}),h.jsxs("div",{className:"mb-24",children:[h.jsx("small",{className:"text-muted",children:"Tickets"}),(s=e.order_items)==null?void 0:s.map((a,l)=>{var c;return h.jsxs("div",{className:"d-flex justify-content-between mt-8",children:[h.jsxs("span",{children:[((c=a.ticket_types)==null?void 0:c.name)||"Ticket"," x ",a.quantity]}),h.jsxs("span",{children:["$",parseFloat(a.subtotal).toFixed(2)]})]},l)})]}),h.jsxs("div",{className:"border-top pt-16",children:[h.jsxs("div",{className:"d-flex justify-content-between mb-8",children:[h.jsx("span",{children:"Subtotal:"}),h.jsxs("span",{children:["$",parseFloat(e.subtotal).toFixed(2)]})]}),e.discount_amount>0&&h.jsxs("div",{className:"d-flex justify-content-between mb-8 text-success",children:[h.jsxs("span",{children:["Discount (",(o=e.discount_codes)==null?void 0:o.code,"):"]}),h.jsxs("span",{children:["-$",parseFloat(e.discount_amount).toFixed(2)]})]}),h.jsxs("div",{className:"d-flex justify-content-between pt-8 border-top",children:[h.jsx("strong",{children:"Total Paid:"}),h.jsxs("strong",{className:"text-success",children:["$",parseFloat(e.total).toFixed(2)]})]})]})]})}),h.jsxs("div",{className:"d-flex gap-2",children:[h.jsxs(be,{variant:"outline-primary",onClick:()=>window.print(),children:[h.jsx("i",{className:"fas fa-print me-2"}),"Print Receipt"]}),h.jsx(be,{variant:"primary",onClick:()=>{window.location.href="/"},children:"Return to Home"})]})]}):h.jsx(Gt,{className:"py-5",style:{maxWidth:"800px"},children:h.jsx(Yt,{variant:"warning",children:"Order not found"})})}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const m3={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},ga=Is({}),Dh=(t,e)=>e?t!==e?"Passwords must match":!1:t?(t==null?void 0:t.length)<8?"Must be at least 8 characters":/[A-Z]/.test(t)?/[a-z]/.test(t)?/\d/.test(t)?/[*@!#%&()^~{}]+/.test(t)?!1:"Must contain a special character":"Must contain a number":"Must contain a lower case letter":"Must contain an upper case letter":!1,_pe=(t,e,n)=>{const{[`${t}Hover`]:r,[`${t}Focus`]:i}=ga.value;return e&&!Dh(e,n)?"success":e&&Dh(e,n)?"danger":r?"primary":i?"focus":"grey"},EE=({name:t,signal:e=qf,className:n,placeholder:r,value:i,customOnChange:s,inputFormatCallback:o,passwordToMatch:a,...l})=>{const{[`${t}Password`]:c=!1}=ga.value,{[t]:u}=e.value,f=u&&Dh(u,a);return h.jsxs(h.Fragment,{children:[h.jsxs(nA,{className:`
          ${n} ${f?"":"mb-16"}
          border border-${_pe(t,u,a)}
        `,onMouseEnter:()=>ga.update({[`${t}Hover`]:!0}),onMouseLeave:()=>ga.update({[`${t}Hover`]:!1}),style:{borderRadius:"0.375rem"},children:[h.jsx(V.Control,{name:t,type:c?"text":"password",placeholder:r||"Password",value:i,onChange:s||(p=>e.update({[t]:o?o(p.target.value):p.target.value})),className:"form-control border-0 shadow-none py-8 ps-16",onFocus:()=>ga.update({[`${t}Focus`]:!0}),onBlur:()=>ga.update({[`${t}Focus`]:!1}),isValid:u&&!Dh(u,a),isInvalid:u&&Dh(u,a),style:{borderRadius:"0.375rem"},...l}),h.jsx(nA.Text,{className:"bg-white border-0 p-0 pe-8",onClick:()=>ga.update({[`${t}Password`]:!c}),style:{cursor:"pointer",borderTopRightRadius:"0.375rem",borderBottomRightRadius:"0.375rem"},children:h.jsx($e,{icon:c?l7:s7,className:"text-dark-400",style:{height:"14px",width:"18px"}})})]}),f&&h.jsx("p",{className:"xsmall text-danger ms-8 mb-0",children:f})]})},TE=je({email:"",password:""}),Mc=je({isLoading:!1}),wpe=async(t,e,n)=>{t.preventDefault(),Mc.update({isLoading:!0});try{const{email:r,password:i}=TE.value;if(!r||!i){gt.update({message:"Please enter both email and password",variant:"danger"}),Mc.update({isLoading:!1});return}await oce(r,i),gt.update({message:"Successfully logged in!",variant:"success"}),e(n)}catch(r){gt.update({message:r.message||"Failed to log in. Please check your credentials.",variant:"danger"}),Mc.update({isLoading:!1})}},bpe=async(t,e)=>{Mc.update({isLoading:!0});try{await VU(),t(e)}catch(n){gt.update({message:n.message||"Failed to sign in with Google.",variant:"danger"}),Mc.update({isLoading:!1})}},Epe=()=>{const t=Li(),[e]=v9(),{isLoading:n}=Mc.value,r=e.get("redirect")||"/admin";return h.jsx(Gt,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:h.jsx(ut,{className:"w-100",children:h.jsx(ve,{xs:12,md:6,lg:5,xl:4,className:"mx-auto",children:h.jsx(de,{className:"shadow",children:h.jsxs(de.Body,{className:"p-4",children:[h.jsx("h2",{className:"text-center mb-32",children:"Login"}),h.jsxs(V,{onSubmit:i=>wpe(i,t,r),children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Email"}),h.jsx(he,{type:"email",name:"email",signal:TE,placeholder:"Enter your email",autoComplete:"email",disabled:n})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Password"}),h.jsx(EE,{name:"password",signal:TE,placeholder:"Enter your password",autoComplete:"current-password",disabled:n})]}),h.jsx("div",{className:"d-flex justify-content-between align-items-center mb-24",children:h.jsx(fr,{to:"/forgot-password",className:"text-decoration-none small",children:"Forgot Password?"})}),h.jsx(be,{variant:"primary",type:"submit",className:"w-100 mb-24",disabled:n,children:n?"Logging in...":"Login"}),h.jsx("div",{className:"text-center mb-24",children:h.jsx("span",{className:"text-muted",children:"or"})}),h.jsxs(be,{variant:"outline-secondary",className:"w-100 mb-24",onClick:()=>bpe(t,r),disabled:n,children:[h.jsx($e,{icon:m3,className:"me-2"}),"Sign in with Google"]}),h.jsxs("div",{className:"text-center",children:[h.jsx("span",{className:"text-muted",children:"Don't have an account? "}),h.jsx(fr,{to:"/signup",className:"text-decoration-none",children:"Sign up"})]})]})]})})})})})},yc=je({email:"",password:"",confirmPassword:""}),Ba=je({isLoading:!1,showVerificationMessage:!1}),Tpe=()=>{const{email:t,password:e,confirmPassword:n}=yc.value;return!t||!e||!n?(gt.update({message:"Please fill in all fields",variant:"danger"}),!1):e.length<6?(gt.update({message:"Password must be at least 6 characters long",variant:"danger"}),!1):e!==n?(gt.update({message:"Passwords do not match",variant:"danger"}),!1):!0},Ipe=async t=>{if(t.preventDefault(),!!Tpe()){Ba.update({isLoading:!0});try{const{email:e,password:n}=yc.value;await lce(e,n),Ba.update({showVerificationMessage:!0,isLoading:!1}),gt.update({message:"Account created! Please check your email to verify your account.",variant:"success"})}catch(e){let n="Failed to create account. Please try again.";e.code==="auth/email-already-in-use"?n="This email is already registered.":e.code==="auth/invalid-email"?n="Invalid email address.":e.code==="auth/weak-password"&&(n="Password is too weak. Please use a stronger password."),gt.update({message:n,variant:"danger"}),Ba.update({isLoading:!1})}}},Spe=async t=>{Ba.update({isLoading:!0});try{await VU(),t("/admin")}catch(e){gt.update({message:e.message||"Failed to sign up with Google.",variant:"danger"}),Ba.update({isLoading:!1})}},xpe=()=>{const t=Li(),{isLoading:e}=Ba.value,{showVerificationMessage:n}=Ba.value;return h.jsx(Gt,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:h.jsx(ut,{className:"w-100",children:h.jsx(ve,{xs:12,md:6,lg:5,xl:4,className:"mx-auto",children:h.jsx(de,{className:"shadow",children:h.jsxs(de.Body,{className:"p-4",children:[h.jsx("h2",{className:"text-center mb-32",children:"Sign Up"}),n&&h.jsxs(Yt,{variant:"info",className:"mb-24",children:[h.jsx("strong",{children:"Email Verification Sent!"}),h.jsx("p",{className:"mb-0 mt-16 small",children:"We've sent a verification email to your address. Please verify your email before logging in."})]}),h.jsxs(V,{onSubmit:Ipe,children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Email"}),h.jsx(he,{type:"email",name:"email",signal:yc,placeholder:"Enter your email",autoComplete:"email",disabled:e||n})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Password"}),h.jsx(EE,{name:"password",signal:yc,placeholder:"Enter your password",autoComplete:"new-password",disabled:e||n}),h.jsx(V.Text,{className:"text-muted small",children:"Password must be at least 6 characters long"})]}),h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Confirm Password"}),h.jsx(EE,{name:"confirmPassword",signal:yc,placeholder:"Confirm your password",passwordToMatch:yc.value.password,autoComplete:"new-password",disabled:e||n})]}),h.jsx(be,{variant:"primary",type:"submit",className:"w-100 mb-24",disabled:e||n,children:e?"Creating Account...":"Sign Up"}),!n&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"text-center mb-24",children:h.jsx("span",{className:"text-muted",children:"or"})}),h.jsxs(be,{variant:"outline-secondary",className:"w-100 mb-24",onClick:()=>Spe(t),disabled:e,children:[h.jsx($e,{icon:m3,className:"me-2"}),"Sign up with Google"]})]}),h.jsxs("div",{className:"text-center",children:[h.jsx("span",{className:"text-muted",children:"Already have an account? "}),h.jsx(fr,{to:"/login",className:"text-decoration-none",children:"Login"})]})]})]})})})})})},IE=je({email:""}),_c=je({isLoading:!1,emailSent:!1}),kpe=async t=>{t.preventDefault(),_c.update({isLoading:!0});try{const{email:e}=IE.value;if(!e){gt.update({message:"Please enter your email address",variant:"danger"}),_c.update({isLoading:!1});return}await cce(e),_c.update({emailSent:!0}),gt.update({message:"Password reset email sent! Please check your inbox.",variant:"success"}),IE.reset()}catch(e){let n="Failed to send password reset email. Please try again.";e.code==="auth/user-not-found"?n="No account found with this email address.":e.code==="auth/invalid-email"&&(n="Invalid email address."),gt.update({message:n,variant:"danger"})}finally{_c.update({isLoading:!1})}},Ape=()=>{const{isLoading:t}=_c.value,{emailSent:e}=_c.value;return h.jsx(Gt,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:h.jsx(ut,{className:"w-100",children:h.jsx(ve,{xs:12,md:6,lg:5,xl:4,className:"mx-auto",children:h.jsx(de,{className:"shadow",children:h.jsxs(de.Body,{className:"p-4",children:[h.jsx("h2",{className:"text-center mb-32",children:"Reset Password"}),e&&h.jsxs(Yt,{variant:"success",className:"mb-24",children:[h.jsx("strong",{children:"Email Sent!"}),h.jsx("p",{className:"mb-0 mt-16 small",children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions."})]}),h.jsx("p",{className:"text-muted text-center mb-32",children:"Enter your email address and we'll send you a link to reset your password."}),h.jsxs(V,{onSubmit:kpe,children:[h.jsxs(V.Group,{className:"mb-24",children:[h.jsx(V.Label,{children:"Email"}),h.jsx(he,{type:"email",name:"email",signal:IE,placeholder:"Enter your email",autoComplete:"email",disabled:t})]}),h.jsx(be,{variant:"primary",type:"submit",className:"w-100 mb-24",disabled:t,children:t?"Sending...":"Send Reset Link"}),h.jsx("div",{className:"text-center",children:h.jsx(fr,{to:"/login",className:"text-decoration-none",children:"Back to Login"})})]})]})})})})})};function Rpe(){return h.jsxs(h.Fragment,{children:[h.jsx(jce,{}),h.jsx(f9,{children:h.jsx(o9,{children:h.jsxs(In,{element:h.jsx(Pce,{}),children:[h.jsx(In,{path:"/",element:h.jsx(iH,{})}),h.jsxs(In,{element:h.jsx(sH,{}),children:[h.jsx(In,{path:"/login",element:h.jsx(Epe,{})}),h.jsx(In,{path:"/signup",element:h.jsx(xpe,{})}),h.jsx(In,{path:"/forgot-password",element:h.jsx(Ape,{})}),h.jsx(In,{path:"/embed/form/:formId",element:h.jsx(Hfe,{})}),h.jsx(In,{path:"/embed/checkout/:orderId",element:h.jsx(vpe,{})}),h.jsx(In,{path:"/embed/order-confirmation/:orderId",element:h.jsx(ype,{})})]}),h.jsxs(In,{element:h.jsx(vce,{}),children:[h.jsx(In,{path:"/admin",element:h.jsx(Mce,{})}),h.jsx(In,{path:"/admin/events",element:h.jsx(ede,{})}),h.jsx(In,{path:"/admin/events/new",element:h.jsx(tde,{})}),h.jsx(In,{path:"/admin/events/:id",element:h.jsx(Vfe,{})})]}),h.jsx(In,{path:"*",element:h.jsx(jW,{})})]})})})]})}Vw.createRoot(document.getElementById("root")).render(h.jsx(mt.StrictMode,{children:h.jsx(Rpe,{})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
