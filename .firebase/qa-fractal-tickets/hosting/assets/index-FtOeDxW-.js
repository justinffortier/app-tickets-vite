function AU(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function So(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ZC(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var eP={exports:{}},Ng={},tP={exports:{}},Oe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kh=Symbol.for("react.element"),RU=Symbol.for("react.portal"),kU=Symbol.for("react.fragment"),CU=Symbol.for("react.strict_mode"),PU=Symbol.for("react.profiler"),OU=Symbol.for("react.provider"),NU=Symbol.for("react.context"),DU=Symbol.for("react.forward_ref"),jU=Symbol.for("react.suspense"),LU=Symbol.for("react.memo"),MU=Symbol.for("react.lazy"),E1=Symbol.iterator;function VU(t){return t===null||typeof t!="object"?null:(t=E1&&t[E1]||t["@@iterator"],typeof t=="function"?t:null)}var nP={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rP=Object.assign,iP={};function Qc(t,e,n){this.props=t,this.context=e,this.refs=iP,this.updater=n||nP}Qc.prototype.isReactComponent={};Qc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Qc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sP(){}sP.prototype=Qc.prototype;function NE(t,e,n){this.props=t,this.context=e,this.refs=iP,this.updater=n||nP}var DE=NE.prototype=new sP;DE.constructor=NE;rP(DE,Qc.prototype);DE.isPureReactComponent=!0;var b1=Array.isArray,oP=Object.prototype.hasOwnProperty,jE={current:null},aP={key:!0,ref:!0,__self:!0,__source:!0};function lP(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)oP.call(e,r)&&!aP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Kh,type:t,key:s,ref:o,props:i,_owner:jE.current}}function FU(t,e){return{$$typeof:Kh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function LE(t){return typeof t=="object"&&t!==null&&t.$$typeof===Kh}function $U(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var T1=/\/+/g;function Iy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$U(""+t.key):e.toString(36)}function Up(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Kh:case RU:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Iy(o,0):r,b1(i)?(n="",t!=null&&(n=t.replace(T1,"$&/")+"/"),Up(i,e,n,"",function(c){return c})):i!=null&&(LE(i)&&(i=FU(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(T1,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",b1(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+Iy(s,a);o+=Up(s,e,n,l,i)}else if(l=VU(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+Iy(s,a++),o+=Up(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Yf(t,e,n){if(t==null)return t;var r=[],i=0;return Up(t,r,"","",function(s){return e.call(n,s,i++)}),r}function UU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Cn={current:null},Bp={transition:null},BU={ReactCurrentDispatcher:Cn,ReactCurrentBatchConfig:Bp,ReactCurrentOwner:jE};Oe.Children={map:Yf,forEach:function(t,e,n){Yf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Yf(t,function(){e++}),e},toArray:function(t){return Yf(t,function(e){return e})||[]},only:function(t){if(!LE(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Oe.Component=Qc;Oe.Fragment=kU;Oe.Profiler=PU;Oe.PureComponent=NE;Oe.StrictMode=CU;Oe.Suspense=jU;Oe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=BU;Oe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=rP({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=jE.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)oP.call(e,l)&&!aP.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Kh,type:t.type,key:i,ref:s,props:r,_owner:o}};Oe.createContext=function(t){return t={$$typeof:NU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:OU,_context:t},t.Consumer=t};Oe.createElement=lP;Oe.createFactory=function(t){var e=lP.bind(null,t);return e.type=t,e};Oe.createRef=function(){return{current:null}};Oe.forwardRef=function(t){return{$$typeof:DU,render:t}};Oe.isValidElement=LE;Oe.lazy=function(t){return{$$typeof:MU,_payload:{_status:-1,_result:t},_init:UU}};Oe.memo=function(t,e){return{$$typeof:LU,type:t,compare:e===void 0?null:e}};Oe.startTransition=function(t){var e=Bp.transition;Bp.transition={};try{t()}finally{Bp.transition=e}};Oe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Oe.useCallback=function(t,e){return Cn.current.useCallback(t,e)};Oe.useContext=function(t){return Cn.current.useContext(t)};Oe.useDebugValue=function(){};Oe.useDeferredValue=function(t){return Cn.current.useDeferredValue(t)};Oe.useEffect=function(t,e){return Cn.current.useEffect(t,e)};Oe.useId=function(){return Cn.current.useId()};Oe.useImperativeHandle=function(t,e,n){return Cn.current.useImperativeHandle(t,e,n)};Oe.useInsertionEffect=function(t,e){return Cn.current.useInsertionEffect(t,e)};Oe.useLayoutEffect=function(t,e){return Cn.current.useLayoutEffect(t,e)};Oe.useMemo=function(t,e){return Cn.current.useMemo(t,e)};Oe.useReducer=function(t,e,n){return Cn.current.useReducer(t,e,n)};Oe.useRef=function(t){return Cn.current.useRef(t)};Oe.useState=function(t){return Cn.current.useState(t)};Oe.useSyncExternalStore=function(t,e,n){return Cn.current.useSyncExternalStore(t,e,n)};Oe.useTransition=function(){return Cn.current.useTransition()};Oe.version="18.2.0";tP.exports=Oe;var I=tP.exports;const Et=So(I),zU=AU({__proto__:null,default:Et},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qU=I,WU=Symbol.for("react.element"),HU=Symbol.for("react.fragment"),GU=Object.prototype.hasOwnProperty,KU=qU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,QU={key:!0,ref:!0,__self:!0,__source:!0};function cP(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)GU.call(e,r)&&!QU.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WU,type:t,key:s,ref:o,props:i,_owner:KU.current}}Ng.Fragment=HU;Ng.jsx=cP;Ng.jsxs=cP;eP.exports=Ng;var f=eP.exports;const YU=So(f);var rw={},uP={exports:{}},lr={},dP={exports:{}},hP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,G){var J=U.length;U.push(G);e:for(;0<J;){var fe=J-1>>>1,se=U[fe];if(0<i(se,G))U[fe]=G,U[J]=se,J=fe;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var G=U[0],J=U.pop();if(J!==G){U[0]=J;e:for(var fe=0,se=U.length,me=se>>>1;fe<me;){var Ne=2*(fe+1)-1,Ie=U[Ne],Ke=Ne+1,vt=U[Ke];if(0>i(Ie,J))Ke<se&&0>i(vt,Ie)?(U[fe]=vt,U[Ke]=J,fe=Ke):(U[fe]=Ie,U[Ne]=J,fe=Ne);else if(Ke<se&&0>i(vt,J))U[fe]=vt,U[Ke]=J,fe=Ke;else break e}}return G}function i(U,G){var J=U.sortIndex-G.sortIndex;return J!==0?J:U.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,p=3,m=!1,v=!1,w=!1,y=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var G=n(c);G!==null;){if(G.callback===null)r(c);else if(G.startTime<=U)r(c),G.sortIndex=G.expirationTime,e(l,G);else break;G=n(c)}}function k(U){if(w=!1,b(U),!v)if(n(l)!==null)v=!0,ke(D);else{var G=n(c);G!==null&&B(k,G.startTime-U)}}function D(U,G){v=!1,w&&(w=!1,T(S),S=-1),m=!0;var J=p;try{for(b(G),h=n(l);h!==null&&(!(h.expirationTime>G)||U&&!O());){var fe=h.callback;if(typeof fe=="function"){h.callback=null,p=h.priorityLevel;var se=fe(h.expirationTime<=G);G=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(l)&&r(l),b(G)}else r(l);h=n(l)}if(h!==null)var me=!0;else{var Ne=n(c);Ne!==null&&B(k,Ne.startTime-G),me=!1}return me}finally{h=null,p=J,m=!1}}var N=!1,x=null,S=-1,C=5,R=-1;function O(){return!(t.unstable_now()-R<C)}function j(){if(x!==null){var U=t.unstable_now();R=U;var G=!0;try{G=x(!0,U)}finally{G?P():(N=!1,x=null)}}else N=!1}var P;if(typeof E=="function")P=function(){E(j)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Re=ge.port2;ge.port1.onmessage=j,P=function(){Re.postMessage(null)}}else P=function(){y(j,0)};function ke(U){x=U,N||(N=!0,P())}function B(U,G){S=y(function(){U(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,ke(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(U){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var J=p;p=G;try{return U()}finally{p=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,G){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=p;p=U;try{return G()}finally{p=J}},t.unstable_scheduleCallback=function(U,G,J){var fe=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?fe+J:fe):J=fe,U){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=J+se,U={id:u++,callback:G,priorityLevel:U,startTime:J,expirationTime:se,sortIndex:-1},J>fe?(U.sortIndex=J,e(c,U),n(l)===null&&U===n(c)&&(w?(T(S),S=-1):w=!0,B(k,J-fe))):(U.sortIndex=se,e(l,U),v||m||(v=!0,ke(D))),U},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(U){var G=p;return function(){var J=p;p=G;try{return U.apply(this,arguments)}finally{p=J}}}})(hP);dP.exports=hP;var JU=dP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fP=I,ir=JU;function H(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pP=new Set,th={};function Qa(t,e){vc(t,e),vc(t+"Capture",e)}function vc(t,e){for(th[t]=e,t=0;t<e.length;t++)pP.add(e[t])}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),iw=Object.prototype.hasOwnProperty,XU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I1={},S1={};function ZU(t){return iw.call(S1,t)?!0:iw.call(I1,t)?!1:XU.test(t)?S1[t]=!0:(I1[t]=!0,!1)}function e3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function t3(t,e,n,r){if(e===null||typeof e>"u"||e3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){sn[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];sn[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){sn[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){sn[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){sn[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){sn[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){sn[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){sn[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){sn[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ME=/[\-:]([a-z])/g;function VE(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ME,VE);sn[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ME,VE);sn[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ME,VE);sn[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){sn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});sn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){sn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function FE(t,e,n,r){var i=sn.hasOwnProperty(e)?sn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(t3(e,n,i,r)&&(n=null),r||i===null?ZU(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ss=fP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jf=Symbol.for("react.element"),Ml=Symbol.for("react.portal"),Vl=Symbol.for("react.fragment"),$E=Symbol.for("react.strict_mode"),sw=Symbol.for("react.profiler"),mP=Symbol.for("react.provider"),gP=Symbol.for("react.context"),UE=Symbol.for("react.forward_ref"),ow=Symbol.for("react.suspense"),aw=Symbol.for("react.suspense_list"),BE=Symbol.for("react.memo"),Ns=Symbol.for("react.lazy"),vP=Symbol.for("react.offscreen"),x1=Symbol.iterator;function Vu(t){return t===null||typeof t!="object"?null:(t=x1&&t[x1]||t["@@iterator"],typeof t=="function"?t:null)}var pt=Object.assign,Sy;function ld(t){if(Sy===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Sy=e&&e[1]||""}return`
`+Sy+t}var xy=!1;function Ay(t,e){if(!t||xy)return"";xy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{xy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ld(t):""}function n3(t){switch(t.tag){case 5:return ld(t.type);case 16:return ld("Lazy");case 13:return ld("Suspense");case 19:return ld("SuspenseList");case 0:case 2:case 15:return t=Ay(t.type,!1),t;case 11:return t=Ay(t.type.render,!1),t;case 1:return t=Ay(t.type,!0),t;default:return""}}function lw(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vl:return"Fragment";case Ml:return"Portal";case sw:return"Profiler";case $E:return"StrictMode";case ow:return"Suspense";case aw:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gP:return(t.displayName||"Context")+".Consumer";case mP:return(t._context.displayName||"Context")+".Provider";case UE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case BE:return e=t.displayName||null,e!==null?e:lw(t.type)||"Memo";case Ns:e=t._payload,t=t._init;try{return lw(t(e))}catch{}}return null}function r3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lw(e);case 8:return e===$E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function oo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i3(t){var e=yP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Xf(t){t._valueTracker||(t._valueTracker=i3(t))}function _P(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _m(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function cw(t,e){var n=e.checked;return pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function A1(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=oo(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wP(t,e){e=e.checked,e!=null&&FE(t,"checked",e,!1)}function uw(t,e){wP(t,e);var n=oo(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?dw(t,e.type,n):e.hasOwnProperty("defaultValue")&&dw(t,e.type,oo(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function R1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function dw(t,e,n){(e!=="number"||_m(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var cd=Array.isArray;function ec(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+oo(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function hw(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(H(91));return pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function k1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(H(92));if(cd(n)){if(1<n.length)throw Error(H(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:oo(n)}}function EP(t,e){var n=oo(e.value),r=oo(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function C1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function bP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fw(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?bP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Zf,TP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Zf=Zf||document.createElement("div"),Zf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function nh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Td={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s3=["Webkit","ms","Moz","O"];Object.keys(Td).forEach(function(t){s3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Td[e]=Td[t]})});function IP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Td.hasOwnProperty(t)&&Td[t]?(""+e).trim():e+"px"}function SP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=IP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var o3=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pw(t,e){if(e){if(o3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(H(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(H(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(H(61))}if(e.style!=null&&typeof e.style!="object")throw Error(H(62))}}function mw(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gw=null;function zE(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vw=null,tc=null,nc=null;function P1(t){if(t=Jh(t)){if(typeof vw!="function")throw Error(H(280));var e=t.stateNode;e&&(e=Vg(e),vw(t.stateNode,t.type,e))}}function xP(t){tc?nc?nc.push(t):nc=[t]:tc=t}function AP(){if(tc){var t=tc,e=nc;if(nc=tc=null,P1(t),e)for(t=0;t<e.length;t++)P1(e[t])}}function RP(t,e){return t(e)}function kP(){}var Ry=!1;function CP(t,e,n){if(Ry)return t(e,n);Ry=!0;try{return RP(t,e,n)}finally{Ry=!1,(tc!==null||nc!==null)&&(kP(),AP())}}function rh(t,e){var n=t.stateNode;if(n===null)return null;var r=Vg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(H(231,e,typeof n));return n}var yw=!1;if(Wi)try{var Fu={};Object.defineProperty(Fu,"passive",{get:function(){yw=!0}}),window.addEventListener("test",Fu,Fu),window.removeEventListener("test",Fu,Fu)}catch{yw=!1}function a3(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Id=!1,wm=null,Em=!1,_w=null,l3={onError:function(t){Id=!0,wm=t}};function c3(t,e,n,r,i,s,o,a,l){Id=!1,wm=null,a3.apply(l3,arguments)}function u3(t,e,n,r,i,s,o,a,l){if(c3.apply(this,arguments),Id){if(Id){var c=wm;Id=!1,wm=null}else throw Error(H(198));Em||(Em=!0,_w=c)}}function Ya(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function O1(t){if(Ya(t)!==t)throw Error(H(188))}function d3(t){var e=t.alternate;if(!e){if(e=Ya(t),e===null)throw Error(H(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return O1(i),t;if(s===r)return O1(i),e;s=s.sibling}throw Error(H(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(H(189))}}if(n.alternate!==r)throw Error(H(190))}if(n.tag!==3)throw Error(H(188));return n.stateNode.current===n?t:e}function OP(t){return t=d3(t),t!==null?NP(t):null}function NP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=NP(t);if(e!==null)return e;t=t.sibling}return null}var DP=ir.unstable_scheduleCallback,N1=ir.unstable_cancelCallback,h3=ir.unstable_shouldYield,f3=ir.unstable_requestPaint,At=ir.unstable_now,p3=ir.unstable_getCurrentPriorityLevel,qE=ir.unstable_ImmediatePriority,jP=ir.unstable_UserBlockingPriority,bm=ir.unstable_NormalPriority,m3=ir.unstable_LowPriority,LP=ir.unstable_IdlePriority,Dg=null,pi=null;function g3(t){if(pi&&typeof pi.onCommitFiberRoot=="function")try{pi.onCommitFiberRoot(Dg,t,void 0,(t.current.flags&128)===128)}catch{}}var zr=Math.clz32?Math.clz32:_3,v3=Math.log,y3=Math.LN2;function _3(t){return t>>>=0,t===0?32:31-(v3(t)/y3|0)|0}var ep=64,tp=4194304;function ud(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ud(a):(s&=o,s!==0&&(r=ud(s)))}else o=n&~i,o!==0?r=ud(o):s!==0&&(r=ud(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-zr(e),i=1<<n,r|=t[n],e&=~i;return r}function w3(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function E3(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-zr(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=w3(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function ww(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function MP(){var t=ep;return ep<<=1,!(ep&4194240)&&(ep=64),t}function ky(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Qh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-zr(e),t[e]=n}function b3(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-zr(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function WE(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-zr(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ue=0;function VP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var FP,HE,$P,UP,BP,Ew=!1,np=[],Gs=null,Ks=null,Qs=null,ih=new Map,sh=new Map,Ls=[],T3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function D1(t,e){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":ih.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sh.delete(e.pointerId)}}function $u(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Jh(e),e!==null&&HE(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function I3(t,e,n,r,i){switch(e){case"focusin":return Gs=$u(Gs,t,e,n,r,i),!0;case"dragenter":return Ks=$u(Ks,t,e,n,r,i),!0;case"mouseover":return Qs=$u(Qs,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ih.set(s,$u(ih.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sh.set(s,$u(sh.get(s)||null,t,e,n,r,i)),!0}return!1}function zP(t){var e=ca(t.target);if(e!==null){var n=Ya(e);if(n!==null){if(e=n.tag,e===13){if(e=PP(n),e!==null){t.blockedOn=e,BP(t.priority,function(){$P(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function zp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=bw(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);gw=r,n.target.dispatchEvent(r),gw=null}else return e=Jh(n),e!==null&&HE(e),t.blockedOn=n,!1;e.shift()}return!0}function j1(t,e,n){zp(t)&&n.delete(e)}function S3(){Ew=!1,Gs!==null&&zp(Gs)&&(Gs=null),Ks!==null&&zp(Ks)&&(Ks=null),Qs!==null&&zp(Qs)&&(Qs=null),ih.forEach(j1),sh.forEach(j1)}function Uu(t,e){t.blockedOn===e&&(t.blockedOn=null,Ew||(Ew=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,S3)))}function oh(t){function e(i){return Uu(i,t)}if(0<np.length){Uu(np[0],t);for(var n=1;n<np.length;n++){var r=np[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gs!==null&&Uu(Gs,t),Ks!==null&&Uu(Ks,t),Qs!==null&&Uu(Qs,t),ih.forEach(e),sh.forEach(e),n=0;n<Ls.length;n++)r=Ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ls.length&&(n=Ls[0],n.blockedOn===null);)zP(n),n.blockedOn===null&&Ls.shift()}var rc=ss.ReactCurrentBatchConfig,Im=!0;function x3(t,e,n,r){var i=Ue,s=rc.transition;rc.transition=null;try{Ue=1,GE(t,e,n,r)}finally{Ue=i,rc.transition=s}}function A3(t,e,n,r){var i=Ue,s=rc.transition;rc.transition=null;try{Ue=4,GE(t,e,n,r)}finally{Ue=i,rc.transition=s}}function GE(t,e,n,r){if(Im){var i=bw(t,e,n,r);if(i===null)Fy(t,e,r,Sm,n),D1(t,r);else if(I3(i,t,e,n,r))r.stopPropagation();else if(D1(t,r),e&4&&-1<T3.indexOf(t)){for(;i!==null;){var s=Jh(i);if(s!==null&&FP(s),s=bw(t,e,n,r),s===null&&Fy(t,e,r,Sm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Fy(t,e,r,null,n)}}var Sm=null;function bw(t,e,n,r){if(Sm=null,t=zE(r),t=ca(t),t!==null)if(e=Ya(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Sm=t,null}function qP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(p3()){case qE:return 1;case jP:return 4;case bm:case m3:return 16;case LP:return 536870912;default:return 16}default:return 16}}var Us=null,KE=null,qp=null;function WP(){if(qp)return qp;var t,e=KE,n=e.length,r,i="value"in Us?Us.value:Us.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return qp=i.slice(t,1<r?1-r:void 0)}function Wp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rp(){return!0}function L1(){return!1}function cr(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rp:L1,this.isPropagationStopped=L1,this}return pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rp)},persist:function(){},isPersistent:rp}),e}var Yc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},QE=cr(Yc),Yh=pt({},Yc,{view:0,detail:0}),R3=cr(Yh),Cy,Py,Bu,jg=pt({},Yh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YE,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Bu&&(Bu&&t.type==="mousemove"?(Cy=t.screenX-Bu.screenX,Py=t.screenY-Bu.screenY):Py=Cy=0,Bu=t),Cy)},movementY:function(t){return"movementY"in t?t.movementY:Py}}),M1=cr(jg),k3=pt({},jg,{dataTransfer:0}),C3=cr(k3),P3=pt({},Yh,{relatedTarget:0}),Oy=cr(P3),O3=pt({},Yc,{animationName:0,elapsedTime:0,pseudoElement:0}),N3=cr(O3),D3=pt({},Yc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j3=cr(D3),L3=pt({},Yc,{data:0}),V1=cr(L3),M3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},F3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $3(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=F3[t])?!!e[t]:!1}function YE(){return $3}var U3=pt({},Yh,{key:function(t){if(t.key){var e=M3[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Wp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?V3[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YE,charCode:function(t){return t.type==="keypress"?Wp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Wp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),B3=cr(U3),z3=pt({},jg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),F1=cr(z3),q3=pt({},Yh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YE}),W3=cr(q3),H3=pt({},Yc,{propertyName:0,elapsedTime:0,pseudoElement:0}),G3=cr(H3),K3=pt({},jg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Q3=cr(K3),Y3=[9,13,27,32],JE=Wi&&"CompositionEvent"in window,Sd=null;Wi&&"documentMode"in document&&(Sd=document.documentMode);var J3=Wi&&"TextEvent"in window&&!Sd,HP=Wi&&(!JE||Sd&&8<Sd&&11>=Sd),$1=" ",U1=!1;function GP(t,e){switch(t){case"keyup":return Y3.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fl=!1;function X3(t,e){switch(t){case"compositionend":return KP(e);case"keypress":return e.which!==32?null:(U1=!0,$1);case"textInput":return t=e.data,t===$1&&U1?null:t;default:return null}}function Z3(t,e){if(Fl)return t==="compositionend"||!JE&&GP(t,e)?(t=WP(),qp=KE=Us=null,Fl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return HP&&e.locale!=="ko"?null:e.data;default:return null}}var eB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function B1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eB[t.type]:e==="textarea"}function QP(t,e,n,r){xP(r),e=xm(e,"onChange"),0<e.length&&(n=new QE("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xd=null,ah=null;function tB(t){oO(t,0)}function Lg(t){var e=Bl(t);if(_P(e))return t}function nB(t,e){if(t==="change")return e}var YP=!1;if(Wi){var Ny;if(Wi){var Dy="oninput"in document;if(!Dy){var z1=document.createElement("div");z1.setAttribute("oninput","return;"),Dy=typeof z1.oninput=="function"}Ny=Dy}else Ny=!1;YP=Ny&&(!document.documentMode||9<document.documentMode)}function q1(){xd&&(xd.detachEvent("onpropertychange",JP),ah=xd=null)}function JP(t){if(t.propertyName==="value"&&Lg(ah)){var e=[];QP(e,ah,t,zE(t)),CP(tB,e)}}function rB(t,e,n){t==="focusin"?(q1(),xd=e,ah=n,xd.attachEvent("onpropertychange",JP)):t==="focusout"&&q1()}function iB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Lg(ah)}function sB(t,e){if(t==="click")return Lg(e)}function oB(t,e){if(t==="input"||t==="change")return Lg(e)}function aB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Wr=typeof Object.is=="function"?Object.is:aB;function lh(t,e){if(Wr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!iw.call(e,i)||!Wr(t[i],e[i]))return!1}return!0}function W1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function H1(t,e){var n=W1(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=W1(n)}}function XP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?XP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ZP(){for(var t=window,e=_m();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_m(t.document)}return e}function XE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lB(t){var e=ZP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&XP(n.ownerDocument.documentElement,n)){if(r!==null&&XE(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=H1(n,s);var o=H1(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var cB=Wi&&"documentMode"in document&&11>=document.documentMode,$l=null,Tw=null,Ad=null,Iw=!1;function G1(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Iw||$l==null||$l!==_m(r)||(r=$l,"selectionStart"in r&&XE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ad&&lh(Ad,r)||(Ad=r,r=xm(Tw,"onSelect"),0<r.length&&(e=new QE("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$l)))}function ip(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ul={animationend:ip("Animation","AnimationEnd"),animationiteration:ip("Animation","AnimationIteration"),animationstart:ip("Animation","AnimationStart"),transitionend:ip("Transition","TransitionEnd")},jy={},eO={};Wi&&(eO=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function Mg(t){if(jy[t])return jy[t];if(!Ul[t])return t;var e=Ul[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eO)return jy[t]=e[n];return t}var tO=Mg("animationend"),nO=Mg("animationiteration"),rO=Mg("animationstart"),iO=Mg("transitionend"),sO=new Map,K1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(t,e){sO.set(t,e),Qa(e,[t])}for(var Ly=0;Ly<K1.length;Ly++){var My=K1[Ly],uB=My.toLowerCase(),dB=My[0].toUpperCase()+My.slice(1);xo(uB,"on"+dB)}xo(tO,"onAnimationEnd");xo(nO,"onAnimationIteration");xo(rO,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(iO,"onTransitionEnd");vc("onMouseEnter",["mouseout","mouseover"]);vc("onMouseLeave",["mouseout","mouseover"]);vc("onPointerEnter",["pointerout","pointerover"]);vc("onPointerLeave",["pointerout","pointerover"]);Qa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var dd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hB=new Set("cancel close invalid load scroll toggle".split(" ").concat(dd));function Q1(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,u3(r,e,void 0,t),t.currentTarget=null}function oO(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Q1(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Q1(i,a,c),s=l}}}if(Em)throw t=_w,Em=!1,_w=null,t}function Ye(t,e){var n=e[kw];n===void 0&&(n=e[kw]=new Set);var r=t+"__bubble";n.has(r)||(aO(e,t,2,!1),n.add(r))}function Vy(t,e,n){var r=0;e&&(r|=4),aO(n,t,r,e)}var sp="_reactListening"+Math.random().toString(36).slice(2);function ch(t){if(!t[sp]){t[sp]=!0,pP.forEach(function(n){n!=="selectionchange"&&(hB.has(n)||Vy(n,!1,t),Vy(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sp]||(e[sp]=!0,Vy("selectionchange",!1,e))}}function aO(t,e,n,r){switch(qP(e)){case 1:var i=x3;break;case 4:i=A3;break;default:i=GE}n=i.bind(null,e,n,t),i=void 0,!yw||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Fy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=ca(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}CP(function(){var c=s,u=zE(n),h=[];e:{var p=sO.get(t);if(p!==void 0){var m=QE,v=t;switch(t){case"keypress":if(Wp(n)===0)break e;case"keydown":case"keyup":m=B3;break;case"focusin":v="focus",m=Oy;break;case"focusout":v="blur",m=Oy;break;case"beforeblur":case"afterblur":m=Oy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=M1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=C3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=W3;break;case tO:case nO:case rO:m=N3;break;case iO:m=G3;break;case"scroll":m=R3;break;case"wheel":m=Q3;break;case"copy":case"cut":case"paste":m=j3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=F1}var w=(e&4)!==0,y=!w&&t==="scroll",T=w?p!==null?p+"Capture":null:p;w=[];for(var E=c,b;E!==null;){b=E;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,T!==null&&(k=rh(E,T),k!=null&&w.push(uh(E,k,b)))),y)break;E=E.return}0<w.length&&(p=new m(p,v,null,n,u),h.push({event:p,listeners:w}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&n!==gw&&(v=n.relatedTarget||n.fromElement)&&(ca(v)||v[Hi]))break e;if((m||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=c,v=v?ca(v):null,v!==null&&(y=Ya(v),v!==y||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(w=M1,k="onMouseLeave",T="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(w=F1,k="onPointerLeave",T="onPointerEnter",E="pointer"),y=m==null?p:Bl(m),b=v==null?p:Bl(v),p=new w(k,E+"leave",m,n,u),p.target=y,p.relatedTarget=b,k=null,ca(u)===c&&(w=new w(T,E+"enter",v,n,u),w.target=b,w.relatedTarget=y,k=w),y=k,m&&v)t:{for(w=m,T=v,E=0,b=w;b;b=hl(b))E++;for(b=0,k=T;k;k=hl(k))b++;for(;0<E-b;)w=hl(w),E--;for(;0<b-E;)T=hl(T),b--;for(;E--;){if(w===T||T!==null&&w===T.alternate)break t;w=hl(w),T=hl(T)}w=null}else w=null;m!==null&&Y1(h,p,m,w,!1),v!==null&&y!==null&&Y1(h,y,v,w,!0)}}e:{if(p=c?Bl(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var D=nB;else if(B1(p))if(YP)D=oB;else{D=iB;var N=rB}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=sB);if(D&&(D=D(t,c))){QP(h,D,n,u);break e}N&&N(t,p,c),t==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&dw(p,"number",p.value)}switch(N=c?Bl(c):window,t){case"focusin":(B1(N)||N.contentEditable==="true")&&($l=N,Tw=c,Ad=null);break;case"focusout":Ad=Tw=$l=null;break;case"mousedown":Iw=!0;break;case"contextmenu":case"mouseup":case"dragend":Iw=!1,G1(h,n,u);break;case"selectionchange":if(cB)break;case"keydown":case"keyup":G1(h,n,u)}var x;if(JE)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Fl?GP(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(HP&&n.locale!=="ko"&&(Fl||S!=="onCompositionStart"?S==="onCompositionEnd"&&Fl&&(x=WP()):(Us=u,KE="value"in Us?Us.value:Us.textContent,Fl=!0)),N=xm(c,S),0<N.length&&(S=new V1(S,t,null,n,u),h.push({event:S,listeners:N}),x?S.data=x:(x=KP(n),x!==null&&(S.data=x)))),(x=J3?X3(t,n):Z3(t,n))&&(c=xm(c,"onBeforeInput"),0<c.length&&(u=new V1("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=x))}oO(h,e)})}function uh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function xm(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rh(t,n),s!=null&&r.unshift(uh(t,s,i)),s=rh(t,e),s!=null&&r.push(uh(t,s,i))),t=t.return}return r}function hl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Y1(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=rh(n,s),l!=null&&o.unshift(uh(n,l,a))):i||(l=rh(n,s),l!=null&&o.push(uh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fB=/\r\n?/g,pB=/\u0000|\uFFFD/g;function J1(t){return(typeof t=="string"?t:""+t).replace(fB,`
`).replace(pB,"")}function op(t,e,n){if(e=J1(e),J1(t)!==e&&n)throw Error(H(425))}function Am(){}var Sw=null,xw=null;function Aw(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rw=typeof setTimeout=="function"?setTimeout:void 0,mB=typeof clearTimeout=="function"?clearTimeout:void 0,X1=typeof Promise=="function"?Promise:void 0,gB=typeof queueMicrotask=="function"?queueMicrotask:typeof X1<"u"?function(t){return X1.resolve(null).then(t).catch(vB)}:Rw;function vB(t){setTimeout(function(){throw t})}function $y(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),oh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oh(e)}function Ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Z1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Jc=Math.random().toString(36).slice(2),ni="__reactFiber$"+Jc,dh="__reactProps$"+Jc,Hi="__reactContainer$"+Jc,kw="__reactEvents$"+Jc,yB="__reactListeners$"+Jc,_B="__reactHandles$"+Jc;function ca(t){var e=t[ni];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Hi]||n[ni]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Z1(t);t!==null;){if(n=t[ni])return n;t=Z1(t)}return e}t=n,n=t.parentNode}return null}function Jh(t){return t=t[ni]||t[Hi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(H(33))}function Vg(t){return t[dh]||null}var Cw=[],zl=-1;function Ao(t){return{current:t}}function Xe(t){0>zl||(t.current=Cw[zl],Cw[zl]=null,zl--)}function He(t,e){zl++,Cw[zl]=t.current,t.current=e}var ao={},_n=Ao(ao),$n=Ao(!1),Ia=ao;function yc(t,e){var n=t.type.contextTypes;if(!n)return ao;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Un(t){return t=t.childContextTypes,t!=null}function Rm(){Xe($n),Xe(_n)}function ex(t,e,n){if(_n.current!==ao)throw Error(H(168));He(_n,e),He($n,n)}function lO(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(H(108,r3(t)||"Unknown",i));return pt({},n,r)}function km(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ao,Ia=_n.current,He(_n,t),He($n,$n.current),!0}function tx(t,e,n){var r=t.stateNode;if(!r)throw Error(H(169));n?(t=lO(t,e,Ia),r.__reactInternalMemoizedMergedChildContext=t,Xe($n),Xe(_n),He(_n,t)):Xe($n),He($n,n)}var Pi=null,Fg=!1,Uy=!1;function cO(t){Pi===null?Pi=[t]:Pi.push(t)}function wB(t){Fg=!0,cO(t)}function Ro(){if(!Uy&&Pi!==null){Uy=!0;var t=0,e=Ue;try{var n=Pi;for(Ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pi=null,Fg=!1}catch(i){throw Pi!==null&&(Pi=Pi.slice(t+1)),DP(qE,Ro),i}finally{Ue=e,Uy=!1}}return null}var ql=[],Wl=0,Cm=null,Pm=0,vr=[],yr=0,Sa=null,ji=1,Li="";function Ko(t,e){ql[Wl++]=Pm,ql[Wl++]=Cm,Cm=t,Pm=e}function uO(t,e,n){vr[yr++]=ji,vr[yr++]=Li,vr[yr++]=Sa,Sa=t;var r=ji;t=Li;var i=32-zr(r)-1;r&=~(1<<i),n+=1;var s=32-zr(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,ji=1<<32-zr(e)+i|n<<i|r,Li=s+t}else ji=1<<s|n<<i|r,Li=t}function ZE(t){t.return!==null&&(Ko(t,1),uO(t,1,0))}function eb(t){for(;t===Cm;)Cm=ql[--Wl],ql[Wl]=null,Pm=ql[--Wl],ql[Wl]=null;for(;t===Sa;)Sa=vr[--yr],vr[yr]=null,Li=vr[--yr],vr[yr]=null,ji=vr[--yr],vr[yr]=null}var nr=null,er=null,it=!1,Fr=null;function dO(t,e){var n=wr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function nx(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,nr=t,er=Ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,nr=t,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sa!==null?{id:ji,overflow:Li}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,nr=t,er=null,!0):!1;default:return!1}}function Pw(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ow(t){if(it){var e=er;if(e){var n=e;if(!nx(t,e)){if(Pw(t))throw Error(H(418));e=Ys(n.nextSibling);var r=nr;e&&nx(t,e)?dO(r,n):(t.flags=t.flags&-4097|2,it=!1,nr=t)}}else{if(Pw(t))throw Error(H(418));t.flags=t.flags&-4097|2,it=!1,nr=t}}}function rx(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nr=t}function ap(t){if(t!==nr)return!1;if(!it)return rx(t),it=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Aw(t.type,t.memoizedProps)),e&&(e=er)){if(Pw(t))throw hO(),Error(H(418));for(;e;)dO(t,e),e=Ys(e.nextSibling)}if(rx(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(H(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){er=Ys(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}er=null}}else er=nr?Ys(t.stateNode.nextSibling):null;return!0}function hO(){for(var t=er;t;)t=Ys(t.nextSibling)}function _c(){er=nr=null,it=!1}function tb(t){Fr===null?Fr=[t]:Fr.push(t)}var EB=ss.ReactCurrentBatchConfig;function jr(t,e){if(t&&t.defaultProps){e=pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Om=Ao(null),Nm=null,Hl=null,nb=null;function rb(){nb=Hl=Nm=null}function ib(t){var e=Om.current;Xe(Om),t._currentValue=e}function Nw(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ic(t,e){Nm=t,nb=Hl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ln=!0),t.firstContext=null)}function Sr(t){var e=t._currentValue;if(nb!==t)if(t={context:t,memoizedValue:e,next:null},Hl===null){if(Nm===null)throw Error(H(308));Hl=t,Nm.dependencies={lanes:0,firstContext:t}}else Hl=Hl.next=t;return e}var ua=null;function sb(t){ua===null?ua=[t]:ua.push(t)}function fO(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,sb(e)):(n.next=i.next,i.next=n),e.interleaved=n,Gi(t,r)}function Gi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ds=!1;function ob(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $i(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Js(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,je&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Gi(t,n)}return i=r.interleaved,i===null?(e.next=e,sb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Gi(t,n)}function Hp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,WE(t,n)}}function ix(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dm(t,e,n,r){var i=t.updateQueue;Ds=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,u=c=l=null,a=s;do{var p=a.lane,m=a.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(p=e,m=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(m,h,p);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,p=typeof v=="function"?v.call(m,h,p):v,p==null)break e;h=pt({},h,p);break e;case 2:Ds=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[a]:p.push(a))}else m={eventTime:m,lane:p,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=m,l=h):u=u.next=m,o|=p;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;p=a,a=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Aa|=o,t.lanes=o,t.memoizedState=h}}function sx(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(H(191,i));i.call(r)}}}var mO=new fP.Component().refs;function Dw(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $g={isMounted:function(t){return(t=t._reactInternals)?Ya(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=An(),i=Zs(t),s=$i(r,i);s.payload=e,n!=null&&(s.callback=n),e=Js(t,s,i),e!==null&&(qr(e,t,i,r),Hp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=An(),i=Zs(t),s=$i(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Js(t,s,i),e!==null&&(qr(e,t,i,r),Hp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=An(),r=Zs(t),i=$i(n,r);i.tag=2,e!=null&&(i.callback=e),e=Js(t,i,r),e!==null&&(qr(e,t,r,n),Hp(e,t,r))}};function ox(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!lh(n,r)||!lh(i,s):!0}function gO(t,e,n){var r=!1,i=ao,s=e.contextType;return typeof s=="object"&&s!==null?s=Sr(s):(i=Un(e)?Ia:_n.current,r=e.contextTypes,s=(r=r!=null)?yc(t,i):ao),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$g,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function ax(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$g.enqueueReplaceState(e,e.state,null)}function jw(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=mO,ob(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Sr(s):(s=Un(e)?Ia:_n.current,i.context=yc(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Dw(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$g.enqueueReplaceState(i,i.state,null),Dm(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(H(309));var r=n.stateNode}if(!r)throw Error(H(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===mO&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(H(284));if(!n._owner)throw Error(H(290,t))}return t}function lp(t,e){throw t=Object.prototype.toString.call(e),Error(H(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function lx(t){var e=t._init;return e(t._payload)}function vO(t){function e(T,E){if(t){var b=T.deletions;b===null?(T.deletions=[E],T.flags|=16):b.push(E)}}function n(T,E){if(!t)return null;for(;E!==null;)e(T,E),E=E.sibling;return null}function r(T,E){for(T=new Map;E!==null;)E.key!==null?T.set(E.key,E):T.set(E.index,E),E=E.sibling;return T}function i(T,E){return T=eo(T,E),T.index=0,T.sibling=null,T}function s(T,E,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<E?(T.flags|=2,E):b):(T.flags|=2,E)):(T.flags|=1048576,E)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,E,b,k){return E===null||E.tag!==6?(E=Ky(b,T.mode,k),E.return=T,E):(E=i(E,b),E.return=T,E)}function l(T,E,b,k){var D=b.type;return D===Vl?u(T,E,b.props.children,k,b.key):E!==null&&(E.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ns&&lx(D)===E.type)?(k=i(E,b.props),k.ref=zu(T,E,b),k.return=T,k):(k=Xp(b.type,b.key,b.props,null,T.mode,k),k.ref=zu(T,E,b),k.return=T,k)}function c(T,E,b,k){return E===null||E.tag!==4||E.stateNode.containerInfo!==b.containerInfo||E.stateNode.implementation!==b.implementation?(E=Qy(b,T.mode,k),E.return=T,E):(E=i(E,b.children||[]),E.return=T,E)}function u(T,E,b,k,D){return E===null||E.tag!==7?(E=_a(b,T.mode,k,D),E.return=T,E):(E=i(E,b),E.return=T,E)}function h(T,E,b){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Ky(""+E,T.mode,b),E.return=T,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jf:return b=Xp(E.type,E.key,E.props,null,T.mode,b),b.ref=zu(T,null,E),b.return=T,b;case Ml:return E=Qy(E,T.mode,b),E.return=T,E;case Ns:var k=E._init;return h(T,k(E._payload),b)}if(cd(E)||Vu(E))return E=_a(E,T.mode,b,null),E.return=T,E;lp(T,E)}return null}function p(T,E,b,k){var D=E!==null?E.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:a(T,E,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Jf:return b.key===D?l(T,E,b,k):null;case Ml:return b.key===D?c(T,E,b,k):null;case Ns:return D=b._init,p(T,E,D(b._payload),k)}if(cd(b)||Vu(b))return D!==null?null:u(T,E,b,k,null);lp(T,b)}return null}function m(T,E,b,k,D){if(typeof k=="string"&&k!==""||typeof k=="number")return T=T.get(b)||null,a(E,T,""+k,D);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Jf:return T=T.get(k.key===null?b:k.key)||null,l(E,T,k,D);case Ml:return T=T.get(k.key===null?b:k.key)||null,c(E,T,k,D);case Ns:var N=k._init;return m(T,E,b,N(k._payload),D)}if(cd(k)||Vu(k))return T=T.get(b)||null,u(E,T,k,D,null);lp(E,k)}return null}function v(T,E,b,k){for(var D=null,N=null,x=E,S=E=0,C=null;x!==null&&S<b.length;S++){x.index>S?(C=x,x=null):C=x.sibling;var R=p(T,x,b[S],k);if(R===null){x===null&&(x=C);break}t&&x&&R.alternate===null&&e(T,x),E=s(R,E,S),N===null?D=R:N.sibling=R,N=R,x=C}if(S===b.length)return n(T,x),it&&Ko(T,S),D;if(x===null){for(;S<b.length;S++)x=h(T,b[S],k),x!==null&&(E=s(x,E,S),N===null?D=x:N.sibling=x,N=x);return it&&Ko(T,S),D}for(x=r(T,x);S<b.length;S++)C=m(x,T,S,b[S],k),C!==null&&(t&&C.alternate!==null&&x.delete(C.key===null?S:C.key),E=s(C,E,S),N===null?D=C:N.sibling=C,N=C);return t&&x.forEach(function(O){return e(T,O)}),it&&Ko(T,S),D}function w(T,E,b,k){var D=Vu(b);if(typeof D!="function")throw Error(H(150));if(b=D.call(b),b==null)throw Error(H(151));for(var N=D=null,x=E,S=E=0,C=null,R=b.next();x!==null&&!R.done;S++,R=b.next()){x.index>S?(C=x,x=null):C=x.sibling;var O=p(T,x,R.value,k);if(O===null){x===null&&(x=C);break}t&&x&&O.alternate===null&&e(T,x),E=s(O,E,S),N===null?D=O:N.sibling=O,N=O,x=C}if(R.done)return n(T,x),it&&Ko(T,S),D;if(x===null){for(;!R.done;S++,R=b.next())R=h(T,R.value,k),R!==null&&(E=s(R,E,S),N===null?D=R:N.sibling=R,N=R);return it&&Ko(T,S),D}for(x=r(T,x);!R.done;S++,R=b.next())R=m(x,T,S,R.value,k),R!==null&&(t&&R.alternate!==null&&x.delete(R.key===null?S:R.key),E=s(R,E,S),N===null?D=R:N.sibling=R,N=R);return t&&x.forEach(function(j){return e(T,j)}),it&&Ko(T,S),D}function y(T,E,b,k){if(typeof b=="object"&&b!==null&&b.type===Vl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Jf:e:{for(var D=b.key,N=E;N!==null;){if(N.key===D){if(D=b.type,D===Vl){if(N.tag===7){n(T,N.sibling),E=i(N,b.props.children),E.return=T,T=E;break e}}else if(N.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ns&&lx(D)===N.type){n(T,N.sibling),E=i(N,b.props),E.ref=zu(T,N,b),E.return=T,T=E;break e}n(T,N);break}else e(T,N);N=N.sibling}b.type===Vl?(E=_a(b.props.children,T.mode,k,b.key),E.return=T,T=E):(k=Xp(b.type,b.key,b.props,null,T.mode,k),k.ref=zu(T,E,b),k.return=T,T=k)}return o(T);case Ml:e:{for(N=b.key;E!==null;){if(E.key===N)if(E.tag===4&&E.stateNode.containerInfo===b.containerInfo&&E.stateNode.implementation===b.implementation){n(T,E.sibling),E=i(E,b.children||[]),E.return=T,T=E;break e}else{n(T,E);break}else e(T,E);E=E.sibling}E=Qy(b,T.mode,k),E.return=T,T=E}return o(T);case Ns:return N=b._init,y(T,E,N(b._payload),k)}if(cd(b))return v(T,E,b,k);if(Vu(b))return w(T,E,b,k);lp(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,E!==null&&E.tag===6?(n(T,E.sibling),E=i(E,b),E.return=T,T=E):(n(T,E),E=Ky(b,T.mode,k),E.return=T,T=E),o(T)):n(T,E)}return y}var wc=vO(!0),yO=vO(!1),Xh={},mi=Ao(Xh),hh=Ao(Xh),fh=Ao(Xh);function da(t){if(t===Xh)throw Error(H(174));return t}function ab(t,e){switch(He(fh,e),He(hh,t),He(mi,Xh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fw(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=fw(e,t)}Xe(mi),He(mi,e)}function Ec(){Xe(mi),Xe(hh),Xe(fh)}function _O(t){da(fh.current);var e=da(mi.current),n=fw(e,t.type);e!==n&&(He(hh,t),He(mi,n))}function lb(t){hh.current===t&&(Xe(mi),Xe(hh))}var ut=Ao(0);function jm(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var By=[];function cb(){for(var t=0;t<By.length;t++)By[t]._workInProgressVersionPrimary=null;By.length=0}var Gp=ss.ReactCurrentDispatcher,zy=ss.ReactCurrentBatchConfig,xa=0,ht=null,Ft=null,qt=null,Lm=!1,Rd=!1,ph=0,bB=0;function dn(){throw Error(H(321))}function ub(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Wr(t[n],e[n]))return!1;return!0}function db(t,e,n,r,i,s){if(xa=s,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Gp.current=t===null||t.memoizedState===null?xB:AB,t=n(r,i),Rd){s=0;do{if(Rd=!1,ph=0,25<=s)throw Error(H(301));s+=1,qt=Ft=null,e.updateQueue=null,Gp.current=RB,t=n(r,i)}while(Rd)}if(Gp.current=Mm,e=Ft!==null&&Ft.next!==null,xa=0,qt=Ft=ht=null,Lm=!1,e)throw Error(H(300));return t}function hb(){var t=ph!==0;return ph=0,t}function Zr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?ht.memoizedState=qt=t:qt=qt.next=t,qt}function xr(){if(Ft===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=qt===null?ht.memoizedState:qt.next;if(e!==null)qt=e,Ft=t;else{if(t===null)throw Error(H(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},qt===null?ht.memoizedState=qt=t:qt=qt.next=t}return qt}function mh(t,e){return typeof e=="function"?e(t):e}function qy(t){var e=xr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=Ft,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((xa&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,ht.lanes|=u,Aa|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,Wr(r,e.memoizedState)||(Ln=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ht.lanes|=s,Aa|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wy(t){var e=xr(),n=e.queue;if(n===null)throw Error(H(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Wr(s,e.memoizedState)||(Ln=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function wO(){}function EO(t,e){var n=ht,r=xr(),i=e(),s=!Wr(r.memoizedState,i);if(s&&(r.memoizedState=i,Ln=!0),r=r.queue,fb(IO.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||qt!==null&&qt.memoizedState.tag&1){if(n.flags|=2048,gh(9,TO.bind(null,n,r,i,e),void 0,null),Ht===null)throw Error(H(349));xa&30||bO(n,e,i)}return i}function bO(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function TO(t,e,n,r){e.value=n,e.getSnapshot=r,SO(e)&&xO(t)}function IO(t,e,n){return n(function(){SO(e)&&xO(t)})}function SO(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Wr(t,n)}catch{return!0}}function xO(t){var e=Gi(t,1);e!==null&&qr(e,t,1,-1)}function cx(t){var e=Zr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mh,lastRenderedState:t},e.queue=t,t=t.dispatch=SB.bind(null,ht,t),[e.memoizedState,t]}function gh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AO(){return xr().memoizedState}function Kp(t,e,n,r){var i=Zr();ht.flags|=t,i.memoizedState=gh(1|e,n,void 0,r===void 0?null:r)}function Ug(t,e,n,r){var i=xr();r=r===void 0?null:r;var s=void 0;if(Ft!==null){var o=Ft.memoizedState;if(s=o.destroy,r!==null&&ub(r,o.deps)){i.memoizedState=gh(e,n,s,r);return}}ht.flags|=t,i.memoizedState=gh(1|e,n,s,r)}function ux(t,e){return Kp(8390656,8,t,e)}function fb(t,e){return Ug(2048,8,t,e)}function RO(t,e){return Ug(4,2,t,e)}function kO(t,e){return Ug(4,4,t,e)}function CO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function PO(t,e,n){return n=n!=null?n.concat([t]):null,Ug(4,4,CO.bind(null,e,t),n)}function pb(){}function OO(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ub(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function NO(t,e){var n=xr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ub(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function DO(t,e,n){return xa&21?(Wr(n,e)||(n=MP(),ht.lanes|=n,Aa|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ln=!0),t.memoizedState=n)}function TB(t,e){var n=Ue;Ue=n!==0&&4>n?n:4,t(!0);var r=zy.transition;zy.transition={};try{t(!1),e()}finally{Ue=n,zy.transition=r}}function jO(){return xr().memoizedState}function IB(t,e,n){var r=Zs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},LO(t))MO(e,n);else if(n=fO(t,e,n,r),n!==null){var i=An();qr(n,t,r,i),VO(n,e,r)}}function SB(t,e,n){var r=Zs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(LO(t))MO(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Wr(a,o)){var l=e.interleaved;l===null?(i.next=i,sb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=fO(t,e,i,r),n!==null&&(i=An(),qr(n,t,r,i),VO(n,e,r))}}function LO(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function MO(t,e){Rd=Lm=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function VO(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,WE(t,n)}}var Mm={readContext:Sr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},xB={readContext:Sr,useCallback:function(t,e){return Zr().memoizedState=[t,e===void 0?null:e],t},useContext:Sr,useEffect:ux,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kp(4194308,4,CO.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kp(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kp(4,2,t,e)},useMemo:function(t,e){var n=Zr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IB.bind(null,ht,t),[r.memoizedState,t]},useRef:function(t){var e=Zr();return t={current:t},e.memoizedState=t},useState:cx,useDebugValue:pb,useDeferredValue:function(t){return Zr().memoizedState=t},useTransition:function(){var t=cx(!1),e=t[0];return t=TB.bind(null,t[1]),Zr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ht,i=Zr();if(it){if(n===void 0)throw Error(H(407));n=n()}else{if(n=e(),Ht===null)throw Error(H(349));xa&30||bO(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,ux(IO.bind(null,r,s,t),[t]),r.flags|=2048,gh(9,TO.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zr(),e=Ht.identifierPrefix;if(it){var n=Li,r=ji;n=(r&~(1<<32-zr(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ph++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AB={readContext:Sr,useCallback:OO,useContext:Sr,useEffect:fb,useImperativeHandle:PO,useInsertionEffect:RO,useLayoutEffect:kO,useMemo:NO,useReducer:qy,useRef:AO,useState:function(){return qy(mh)},useDebugValue:pb,useDeferredValue:function(t){var e=xr();return DO(e,Ft.memoizedState,t)},useTransition:function(){var t=qy(mh)[0],e=xr().memoizedState;return[t,e]},useMutableSource:wO,useSyncExternalStore:EO,useId:jO,unstable_isNewReconciler:!1},RB={readContext:Sr,useCallback:OO,useContext:Sr,useEffect:fb,useImperativeHandle:PO,useInsertionEffect:RO,useLayoutEffect:kO,useMemo:NO,useReducer:Wy,useRef:AO,useState:function(){return Wy(mh)},useDebugValue:pb,useDeferredValue:function(t){var e=xr();return Ft===null?e.memoizedState=t:DO(e,Ft.memoizedState,t)},useTransition:function(){var t=Wy(mh)[0],e=xr().memoizedState;return[t,e]},useMutableSource:wO,useSyncExternalStore:EO,useId:jO,unstable_isNewReconciler:!1};function bc(t,e){try{var n="",r=e;do n+=n3(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Hy(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Lw(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kB=typeof WeakMap=="function"?WeakMap:Map;function FO(t,e,n){n=$i(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fm||(Fm=!0,Hw=r),Lw(t,e)},n}function $O(t,e,n){n=$i(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Lw(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Lw(t,e),typeof r!="function"&&(Xs===null?Xs=new Set([this]):Xs.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function dx(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=zB.bind(null,t,e,n),e.then(t,t))}function hx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function fx(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=$i(-1,1),e.tag=2,Js(n,e,1))),n.lanes|=1),t)}var CB=ss.ReactCurrentOwner,Ln=!1;function Tn(t,e,n,r){e.child=t===null?yO(e,null,n,r):wc(e,t.child,n,r)}function px(t,e,n,r,i){n=n.render;var s=e.ref;return ic(e,i),r=db(t,e,n,r,s,i),n=hb(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ki(t,e,i)):(it&&n&&ZE(e),e.flags|=1,Tn(t,e,r,i),e.child)}function mx(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!bb(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,UO(t,e,s,r,i)):(t=Xp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:lh,n(o,r)&&t.ref===e.ref)return Ki(t,e,i)}return e.flags|=1,t=eo(s,r),t.ref=e.ref,t.return=e,e.child=t}function UO(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(lh(s,r)&&t.ref===e.ref)if(Ln=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ln=!0);else return e.lanes=t.lanes,Ki(t,e,i)}return Mw(t,e,n,r,i)}function BO(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Kl,Yn),Yn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Kl,Yn),Yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,He(Kl,Yn),Yn|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,He(Kl,Yn),Yn|=r;return Tn(t,e,i,n),e.child}function zO(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mw(t,e,n,r,i){var s=Un(n)?Ia:_n.current;return s=yc(e,s),ic(e,i),n=db(t,e,n,r,s,i),r=hb(),t!==null&&!Ln?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ki(t,e,i)):(it&&r&&ZE(e),e.flags|=1,Tn(t,e,n,i),e.child)}function gx(t,e,n,r,i){if(Un(n)){var s=!0;km(e)}else s=!1;if(ic(e,i),e.stateNode===null)Qp(t,e),gO(e,n,r),jw(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Sr(c):(c=Un(n)?Ia:_n.current,c=yc(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&ax(e,o,r,c),Ds=!1;var p=e.memoizedState;o.state=p,Dm(e,r,o,i),l=e.memoizedState,a!==r||p!==l||$n.current||Ds?(typeof u=="function"&&(Dw(e,n,u,r),l=e.memoizedState),(a=Ds||ox(e,n,a,r,p,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pO(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:jr(e.type,a),o.props=c,h=e.pendingProps,p=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Sr(l):(l=Un(n)?Ia:_n.current,l=yc(e,l));var m=n.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||p!==l)&&ax(e,o,r,l),Ds=!1,p=e.memoizedState,o.state=p,Dm(e,r,o,i);var v=e.memoizedState;a!==h||p!==v||$n.current||Ds?(typeof m=="function"&&(Dw(e,n,m,r),v=e.memoizedState),(c=Ds||ox(e,n,c,r,p,v,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Vw(t,e,n,r,s,i)}function Vw(t,e,n,r,i,s){zO(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&tx(e,n,!1),Ki(t,e,s);r=e.stateNode,CB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=wc(e,t.child,null,s),e.child=wc(e,null,a,s)):Tn(t,e,a,s),e.memoizedState=r.state,i&&tx(e,n,!0),e.child}function qO(t){var e=t.stateNode;e.pendingContext?ex(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ex(t,e.context,!1),ab(t,e.containerInfo)}function vx(t,e,n,r,i){return _c(),tb(i),e.flags|=256,Tn(t,e,n,r),e.child}var Fw={dehydrated:null,treeContext:null,retryLane:0};function $w(t){return{baseLanes:t,cachePool:null,transitions:null}}function WO(t,e,n){var r=e.pendingProps,i=ut.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(ut,i&1),t===null)return Ow(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qg(o,r,0,null),t=_a(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=$w(n),e.memoizedState=Fw,t):mb(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return PB(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=eo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=eo(a,s):(s=_a(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?$w(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fw,r}return s=t.child,t=s.sibling,r=eo(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function mb(t,e){return e=qg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cp(t,e,n,r){return r!==null&&tb(r),wc(e,t.child,null,n),t=mb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PB(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Hy(Error(H(422))),cp(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qg({mode:"visible",children:r.children},i,0,null),s=_a(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&wc(e,t.child,null,o),e.child.memoizedState=$w(o),e.memoizedState=Fw,s);if(!(e.mode&1))return cp(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(H(419)),r=Hy(s,r,void 0),cp(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ln||a){if(r=Ht,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Gi(t,i),qr(r,t,i,-1))}return Eb(),r=Hy(Error(H(421))),cp(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qB.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,er=Ys(i.nextSibling),nr=e,it=!0,Fr=null,t!==null&&(vr[yr++]=ji,vr[yr++]=Li,vr[yr++]=Sa,ji=t.id,Li=t.overflow,Sa=e),e=mb(e,r.children),e.flags|=4096,e)}function yx(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nw(t.return,e,n)}function Gy(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function HO(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Tn(t,e,r.children,n),r=ut.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yx(t,n,e);else if(t.tag===19)yx(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(ut,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&jm(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Gy(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&jm(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Gy(e,!0,n,null,s);break;case"together":Gy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Qp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ki(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Aa|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(H(153));if(e.child!==null){for(t=e.child,n=eo(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=eo(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function OB(t,e,n){switch(e.tag){case 3:qO(e),_c();break;case 5:_O(e);break;case 1:Un(e.type)&&km(e);break;case 4:ab(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(Om,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?WO(t,e,n):(He(ut,ut.current&1),t=Ki(t,e,n),t!==null?t.sibling:null);He(ut,ut.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return HO(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(ut,ut.current),r)break;return null;case 22:case 23:return e.lanes=0,BO(t,e,n)}return Ki(t,e,n)}var GO,Uw,KO,QO;GO=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uw=function(){};KO=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,da(mi.current);var s=null;switch(n){case"input":i=cw(t,i),r=cw(t,r),s=[];break;case"select":i=pt({},i,{value:void 0}),r=pt({},r,{value:void 0}),s=[];break;case"textarea":i=hw(t,i),r=hw(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Am)}pw(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(th.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(th.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ye("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};QO=function(t,e,n,r){n!==r&&(e.flags|=4)};function qu(t,e){if(!it)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NB(t,e,n){var r=e.pendingProps;switch(eb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return hn(e),null;case 1:return Un(e.type)&&Rm(),hn(e),null;case 3:return r=e.stateNode,Ec(),Xe($n),Xe(_n),cb(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ap(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Fr!==null&&(Qw(Fr),Fr=null))),Uw(t,e),hn(e),null;case 5:lb(e);var i=da(fh.current);if(n=e.type,t!==null&&e.stateNode!=null)KO(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(H(166));return hn(e),null}if(t=da(mi.current),ap(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[ni]=e,r[dh]=s,t=(e.mode&1)!==0,n){case"dialog":Ye("cancel",r),Ye("close",r);break;case"iframe":case"object":case"embed":Ye("load",r);break;case"video":case"audio":for(i=0;i<dd.length;i++)Ye(dd[i],r);break;case"source":Ye("error",r);break;case"img":case"image":case"link":Ye("error",r),Ye("load",r);break;case"details":Ye("toggle",r);break;case"input":A1(r,s),Ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ye("invalid",r);break;case"textarea":k1(r,s),Ye("invalid",r)}pw(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&op(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&op(r.textContent,a,t),i=["children",""+a]):th.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ye("scroll",r)}switch(n){case"input":Xf(r),R1(r,s,!0);break;case"textarea":Xf(r),C1(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Am)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=bP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ni]=e,t[dh]=r,GO(t,e,!1,!1),e.stateNode=t;e:{switch(o=mw(n,r),n){case"dialog":Ye("cancel",t),Ye("close",t),i=r;break;case"iframe":case"object":case"embed":Ye("load",t),i=r;break;case"video":case"audio":for(i=0;i<dd.length;i++)Ye(dd[i],t);i=r;break;case"source":Ye("error",t),i=r;break;case"img":case"image":case"link":Ye("error",t),Ye("load",t),i=r;break;case"details":Ye("toggle",t),i=r;break;case"input":A1(t,r),i=cw(t,r),Ye("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=pt({},r,{value:void 0}),Ye("invalid",t);break;case"textarea":k1(t,r),i=hw(t,r),Ye("invalid",t);break;default:i=r}pw(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?SP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&TP(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&nh(t,l):typeof l=="number"&&nh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(th.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Ye("scroll",t):l!=null&&FE(t,s,l,o))}switch(n){case"input":Xf(t),R1(t,r,!1);break;case"textarea":Xf(t),C1(t);break;case"option":r.value!=null&&t.setAttribute("value",""+oo(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ec(t,!!r.multiple,s,!1):r.defaultValue!=null&&ec(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Am)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return hn(e),null;case 6:if(t&&e.stateNode!=null)QO(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(H(166));if(n=da(fh.current),da(mi.current),ap(e)){if(r=e.stateNode,n=e.memoizedProps,r[ni]=e,(s=r.nodeValue!==n)&&(t=nr,t!==null))switch(t.tag){case 3:op(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&op(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ni]=e,e.stateNode=r}return hn(e),null;case 13:if(Xe(ut),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(it&&er!==null&&e.mode&1&&!(e.flags&128))hO(),_c(),e.flags|=98560,s=!1;else if(s=ap(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(H(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(H(317));s[ni]=e}else _c(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;hn(e),s=!1}else Fr!==null&&(Qw(Fr),Fr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?$t===0&&($t=3):Eb())),e.updateQueue!==null&&(e.flags|=4),hn(e),null);case 4:return Ec(),Uw(t,e),t===null&&ch(e.stateNode.containerInfo),hn(e),null;case 10:return ib(e.type._context),hn(e),null;case 17:return Un(e.type)&&Rm(),hn(e),null;case 19:if(Xe(ut),s=e.memoizedState,s===null)return hn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)qu(s,!1);else{if($t!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=jm(t),o!==null){for(e.flags|=128,qu(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(ut,ut.current&1|2),e.child}t=t.sibling}s.tail!==null&&At()>Tc&&(e.flags|=128,r=!0,qu(s,!1),e.lanes=4194304)}else{if(!r)if(t=jm(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qu(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!it)return hn(e),null}else 2*At()-s.renderingStartTime>Tc&&n!==1073741824&&(e.flags|=128,r=!0,qu(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=At(),e.sibling=null,n=ut.current,He(ut,r?n&1|2:n&1),e):(hn(e),null);case 22:case 23:return wb(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Yn&1073741824&&(hn(e),e.subtreeFlags&6&&(e.flags|=8192)):hn(e),null;case 24:return null;case 25:return null}throw Error(H(156,e.tag))}function DB(t,e){switch(eb(e),e.tag){case 1:return Un(e.type)&&Rm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ec(),Xe($n),Xe(_n),cb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return lb(e),null;case 13:if(Xe(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(H(340));_c()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Xe(ut),null;case 4:return Ec(),null;case 10:return ib(e.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var up=!1,mn=!1,jB=typeof WeakSet=="function"?WeakSet:Set,te=null;function Gl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(t,e,r)}else n.current=null}function Bw(t,e,n){try{n()}catch(r){wt(t,e,r)}}var _x=!1;function LB(t,e){if(Sw=Im,t=ZP(),XE(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,p=null;t:for(;;){for(var m;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)p=h,h=m;for(;;){if(h===t)break t;if(p===n&&++c===i&&(a=o),p===s&&++u===r&&(l=o),(m=h.nextSibling)!==null)break;h=p,p=h.parentNode}h=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xw={focusedElem:t,selectionRange:n},Im=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,y=v.memoizedState,T=e.stateNode,E=T.getSnapshotBeforeUpdate(e.elementType===e.type?w:jr(e.type,w),y);T.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(H(163))}}catch(k){wt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return v=_x,_x=!1,v}function kd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Bw(e,n,s)}i=i.next}while(i!==r)}}function Bg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function YO(t){var e=t.alternate;e!==null&&(t.alternate=null,YO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ni],delete e[dh],delete e[kw],delete e[yB],delete e[_B])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function JO(t){return t.tag===5||t.tag===3||t.tag===4}function wx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||JO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function qw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Am));else if(r!==4&&(t=t.child,t!==null))for(qw(t,e,n),t=t.sibling;t!==null;)qw(t,e,n),t=t.sibling}function Ww(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Ww(t,e,n),t=t.sibling;t!==null;)Ww(t,e,n),t=t.sibling}var Xt=null,Mr=!1;function Is(t,e,n){for(n=n.child;n!==null;)XO(t,e,n),n=n.sibling}function XO(t,e,n){if(pi&&typeof pi.onCommitFiberUnmount=="function")try{pi.onCommitFiberUnmount(Dg,n)}catch{}switch(n.tag){case 5:mn||Gl(n,e);case 6:var r=Xt,i=Mr;Xt=null,Is(t,e,n),Xt=r,Mr=i,Xt!==null&&(Mr?(t=Xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xt.removeChild(n.stateNode));break;case 18:Xt!==null&&(Mr?(t=Xt,n=n.stateNode,t.nodeType===8?$y(t.parentNode,n):t.nodeType===1&&$y(t,n),oh(t)):$y(Xt,n.stateNode));break;case 4:r=Xt,i=Mr,Xt=n.stateNode.containerInfo,Mr=!0,Is(t,e,n),Xt=r,Mr=i;break;case 0:case 11:case 14:case 15:if(!mn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Bw(n,e,o),i=i.next}while(i!==r)}Is(t,e,n);break;case 1:if(!mn&&(Gl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){wt(n,e,a)}Is(t,e,n);break;case 21:Is(t,e,n);break;case 22:n.mode&1?(mn=(r=mn)||n.memoizedState!==null,Is(t,e,n),mn=r):Is(t,e,n);break;default:Is(t,e,n)}}function Ex(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jB),e.forEach(function(r){var i=WB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Xt=a.stateNode,Mr=!1;break e;case 3:Xt=a.stateNode.containerInfo,Mr=!0;break e;case 4:Xt=a.stateNode.containerInfo,Mr=!0;break e}a=a.return}if(Xt===null)throw Error(H(160));XO(s,o,i),Xt=null,Mr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){wt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ZO(e,t),e=e.sibling}function ZO(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nr(e,t),Xr(t),r&4){try{kd(3,t,t.return),Bg(3,t)}catch(w){wt(t,t.return,w)}try{kd(5,t,t.return)}catch(w){wt(t,t.return,w)}}break;case 1:Nr(e,t),Xr(t),r&512&&n!==null&&Gl(n,n.return);break;case 5:if(Nr(e,t),Xr(t),r&512&&n!==null&&Gl(n,n.return),t.flags&32){var i=t.stateNode;try{nh(i,"")}catch(w){wt(t,t.return,w)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&wP(i,s),mw(a,o);var c=mw(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?SP(i,h):u==="dangerouslySetInnerHTML"?TP(i,h):u==="children"?nh(i,h):FE(i,u,h,c)}switch(a){case"input":uw(i,s);break;case"textarea":EP(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?ec(i,!!s.multiple,m,!1):p!==!!s.multiple&&(s.defaultValue!=null?ec(i,!!s.multiple,s.defaultValue,!0):ec(i,!!s.multiple,s.multiple?[]:"",!1))}i[dh]=s}catch(w){wt(t,t.return,w)}}break;case 6:if(Nr(e,t),Xr(t),r&4){if(t.stateNode===null)throw Error(H(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(w){wt(t,t.return,w)}}break;case 3:if(Nr(e,t),Xr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oh(e.containerInfo)}catch(w){wt(t,t.return,w)}break;case 4:Nr(e,t),Xr(t);break;case 13:Nr(e,t),Xr(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yb=At())),r&4&&Ex(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(mn=(c=mn)||u,Nr(e,t),mn=c):Nr(e,t),Xr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(te=t,u=t.child;u!==null;){for(h=te=u;te!==null;){switch(p=te,m=p.child,p.tag){case 0:case 11:case 14:case 15:kd(4,p,p.return);break;case 1:Gl(p,p.return);var v=p.stateNode;if(typeof v.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){wt(r,n,w)}}break;case 5:Gl(p,p.return);break;case 22:if(p.memoizedState!==null){Tx(h);continue}}m!==null?(m.return=p,te=m):Tx(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{i=h.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=IP("display",o))}catch(w){wt(t,t.return,w)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(w){wt(t,t.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Nr(e,t),Xr(t),r&4&&Ex(t);break;case 21:break;default:Nr(e,t),Xr(t)}}function Xr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(JO(n)){var r=n;break e}n=n.return}throw Error(H(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nh(i,""),r.flags&=-33);var s=wx(t);Ww(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=wx(t);qw(t,a,o);break;default:throw Error(H(161))}}catch(l){wt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MB(t,e,n){te=t,eN(t)}function eN(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var i=te,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||up;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||mn;a=up;var c=mn;if(up=o,(mn=l)&&!c)for(te=i;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?Ix(i):l!==null?(l.return=o,te=l):Ix(i);for(;s!==null;)te=s,eN(s),s=s.sibling;te=i,up=a,mn=c}bx(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,te=s):bx(t)}}function bx(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mn||Bg(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:jr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&sx(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sx(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&oh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(H(163))}mn||e.flags&512&&zw(e)}catch(p){wt(e,e.return,p)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function Tx(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function Ix(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bg(4,e)}catch(l){wt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){wt(e,i,l)}}var s=e.return;try{zw(e)}catch(l){wt(e,s,l)}break;case 5:var o=e.return;try{zw(e)}catch(l){wt(e,o,l)}}}catch(l){wt(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var VB=Math.ceil,Vm=ss.ReactCurrentDispatcher,gb=ss.ReactCurrentOwner,Tr=ss.ReactCurrentBatchConfig,je=0,Ht=null,Lt=null,tn=0,Yn=0,Kl=Ao(0),$t=0,vh=null,Aa=0,zg=0,vb=0,Cd=null,Dn=null,yb=0,Tc=1/0,ki=null,Fm=!1,Hw=null,Xs=null,dp=!1,Bs=null,$m=0,Pd=0,Gw=null,Yp=-1,Jp=0;function An(){return je&6?At():Yp!==-1?Yp:Yp=At()}function Zs(t){return t.mode&1?je&2&&tn!==0?tn&-tn:EB.transition!==null?(Jp===0&&(Jp=MP()),Jp):(t=Ue,t!==0||(t=window.event,t=t===void 0?16:qP(t.type)),t):1}function qr(t,e,n,r){if(50<Pd)throw Pd=0,Gw=null,Error(H(185));Qh(t,n,r),(!(je&2)||t!==Ht)&&(t===Ht&&(!(je&2)&&(zg|=n),$t===4&&Ms(t,tn)),Bn(t,r),n===1&&je===0&&!(e.mode&1)&&(Tc=At()+500,Fg&&Ro()))}function Bn(t,e){var n=t.callbackNode;E3(t,e);var r=Tm(t,t===Ht?tn:0);if(r===0)n!==null&&N1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&N1(n),e===1)t.tag===0?wB(Sx.bind(null,t)):cO(Sx.bind(null,t)),gB(function(){!(je&6)&&Ro()}),n=null;else{switch(VP(r)){case 1:n=qE;break;case 4:n=jP;break;case 16:n=bm;break;case 536870912:n=LP;break;default:n=bm}n=lN(n,tN.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tN(t,e){if(Yp=-1,Jp=0,je&6)throw Error(H(327));var n=t.callbackNode;if(sc()&&t.callbackNode!==n)return null;var r=Tm(t,t===Ht?tn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Um(t,r);else{e=r;var i=je;je|=2;var s=rN();(Ht!==t||tn!==e)&&(ki=null,Tc=At()+500,ya(t,e));do try{UB();break}catch(a){nN(t,a)}while(!0);rb(),Vm.current=s,je=i,Lt!==null?e=0:(Ht=null,tn=0,e=$t)}if(e!==0){if(e===2&&(i=ww(t),i!==0&&(r=i,e=Kw(t,i))),e===1)throw n=vh,ya(t,0),Ms(t,r),Bn(t,At()),n;if(e===6)Ms(t,r);else{if(i=t.current.alternate,!(r&30)&&!FB(i)&&(e=Um(t,r),e===2&&(s=ww(t),s!==0&&(r=s,e=Kw(t,s))),e===1))throw n=vh,ya(t,0),Ms(t,r),Bn(t,At()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(H(345));case 2:Qo(t,Dn,ki);break;case 3:if(Ms(t,r),(r&130023424)===r&&(e=yb+500-At(),10<e)){if(Tm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){An(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rw(Qo.bind(null,t,Dn,ki),e);break}Qo(t,Dn,ki);break;case 4:if(Ms(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-zr(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=At()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*VB(r/1960))-r,10<r){t.timeoutHandle=Rw(Qo.bind(null,t,Dn,ki),r);break}Qo(t,Dn,ki);break;case 5:Qo(t,Dn,ki);break;default:throw Error(H(329))}}}return Bn(t,At()),t.callbackNode===n?tN.bind(null,t):null}function Kw(t,e){var n=Cd;return t.current.memoizedState.isDehydrated&&(ya(t,e).flags|=256),t=Um(t,e),t!==2&&(e=Dn,Dn=n,e!==null&&Qw(e)),t}function Qw(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function FB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Wr(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ms(t,e){for(e&=~vb,e&=~zg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-zr(e),r=1<<n;t[n]=-1,e&=~r}}function Sx(t){if(je&6)throw Error(H(327));sc();var e=Tm(t,0);if(!(e&1))return Bn(t,At()),null;var n=Um(t,e);if(t.tag!==0&&n===2){var r=ww(t);r!==0&&(e=r,n=Kw(t,r))}if(n===1)throw n=vh,ya(t,0),Ms(t,e),Bn(t,At()),n;if(n===6)throw Error(H(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Qo(t,Dn,ki),Bn(t,At()),null}function _b(t,e){var n=je;je|=1;try{return t(e)}finally{je=n,je===0&&(Tc=At()+500,Fg&&Ro())}}function Ra(t){Bs!==null&&Bs.tag===0&&!(je&6)&&sc();var e=je;je|=1;var n=Tr.transition,r=Ue;try{if(Tr.transition=null,Ue=1,t)return t()}finally{Ue=r,Tr.transition=n,je=e,!(je&6)&&Ro()}}function wb(){Yn=Kl.current,Xe(Kl)}function ya(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mB(n)),Lt!==null)for(n=Lt.return;n!==null;){var r=n;switch(eb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rm();break;case 3:Ec(),Xe($n),Xe(_n),cb();break;case 5:lb(r);break;case 4:Ec();break;case 13:Xe(ut);break;case 19:Xe(ut);break;case 10:ib(r.type._context);break;case 22:case 23:wb()}n=n.return}if(Ht=t,Lt=t=eo(t.current,null),tn=Yn=e,$t=0,vh=null,vb=zg=Aa=0,Dn=Cd=null,ua!==null){for(e=0;e<ua.length;e++)if(n=ua[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ua=null}return t}function nN(t,e){do{var n=Lt;try{if(rb(),Gp.current=Mm,Lm){for(var r=ht.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Lm=!1}if(xa=0,qt=Ft=ht=null,Rd=!1,ph=0,gb.current=null,n===null||n.return===null){$t=1,vh=e,Lt=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=tn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=hx(o);if(m!==null){m.flags&=-257,fx(m,o,a,s,e),m.mode&1&&dx(s,c,e),e=m,l=c;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){dx(s,c,e),Eb();break e}l=Error(H(426))}}else if(it&&a.mode&1){var y=hx(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),fx(y,o,a,s,e),tb(bc(l,a));break e}}s=l=bc(l,a),$t!==4&&($t=2),Cd===null?Cd=[s]:Cd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=FO(s,l,e);ix(s,T);break e;case 1:a=l;var E=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof E.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Xs===null||!Xs.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var k=$O(s,a,e);ix(s,k);break e}}s=s.return}while(s!==null)}sN(n)}catch(D){e=D,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function rN(){var t=Vm.current;return Vm.current=Mm,t===null?Mm:t}function Eb(){($t===0||$t===3||$t===2)&&($t=4),Ht===null||!(Aa&268435455)&&!(zg&268435455)||Ms(Ht,tn)}function Um(t,e){var n=je;je|=2;var r=rN();(Ht!==t||tn!==e)&&(ki=null,ya(t,e));do try{$B();break}catch(i){nN(t,i)}while(!0);if(rb(),je=n,Vm.current=r,Lt!==null)throw Error(H(261));return Ht=null,tn=0,$t}function $B(){for(;Lt!==null;)iN(Lt)}function UB(){for(;Lt!==null&&!h3();)iN(Lt)}function iN(t){var e=aN(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?sN(t):Lt=e,gb.current=null}function sN(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DB(n,e),n!==null){n.flags&=32767,Lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$t=6,Lt=null;return}}else if(n=NB(n,e,Yn),n!==null){Lt=n;return}if(e=e.sibling,e!==null){Lt=e;return}Lt=e=t}while(e!==null);$t===0&&($t=5)}function Qo(t,e,n){var r=Ue,i=Tr.transition;try{Tr.transition=null,Ue=1,BB(t,e,n,r)}finally{Tr.transition=i,Ue=r}return null}function BB(t,e,n,r){do sc();while(Bs!==null);if(je&6)throw Error(H(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(H(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(b3(t,s),t===Ht&&(Lt=Ht=null,tn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dp||(dp=!0,lN(bm,function(){return sc(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tr.transition,Tr.transition=null;var o=Ue;Ue=1;var a=je;je|=4,gb.current=null,LB(t,n),ZO(n,t),lB(xw),Im=!!Sw,xw=Sw=null,t.current=n,MB(n),f3(),je=a,Ue=o,Tr.transition=s}else t.current=n;if(dp&&(dp=!1,Bs=t,$m=i),s=t.pendingLanes,s===0&&(Xs=null),g3(n.stateNode),Bn(t,At()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Fm)throw Fm=!1,t=Hw,Hw=null,t;return $m&1&&t.tag!==0&&sc(),s=t.pendingLanes,s&1?t===Gw?Pd++:(Pd=0,Gw=t):Pd=0,Ro(),null}function sc(){if(Bs!==null){var t=VP($m),e=Tr.transition,n=Ue;try{if(Tr.transition=null,Ue=16>t?16:t,Bs===null)var r=!1;else{if(t=Bs,Bs=null,$m=0,je&6)throw Error(H(331));var i=je;for(je|=4,te=t.current;te!==null;){var s=te,o=s.child;if(te.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(te=c;te!==null;){var u=te;switch(u.tag){case 0:case 11:case 15:kd(8,u,s)}var h=u.child;if(h!==null)h.return=u,te=h;else for(;te!==null;){u=te;var p=u.sibling,m=u.return;if(YO(u),u===c){te=null;break}if(p!==null){p.return=m,te=p;break}te=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var y=w.sibling;w.sibling=null,w=y}while(w!==null)}}te=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,te=o;else e:for(;te!==null;){if(s=te,s.flags&2048)switch(s.tag){case 0:case 11:case 15:kd(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,te=T;break e}te=s.return}}var E=t.current;for(te=E;te!==null;){o=te;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,te=b;else e:for(o=E;te!==null;){if(a=te,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Bg(9,a)}}catch(D){wt(a,a.return,D)}if(a===o){te=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,te=k;break e}te=a.return}}if(je=i,Ro(),pi&&typeof pi.onPostCommitFiberRoot=="function")try{pi.onPostCommitFiberRoot(Dg,t)}catch{}r=!0}return r}finally{Ue=n,Tr.transition=e}}return!1}function xx(t,e,n){e=bc(n,e),e=FO(t,e,1),t=Js(t,e,1),e=An(),t!==null&&(Qh(t,1,e),Bn(t,e))}function wt(t,e,n){if(t.tag===3)xx(t,t,n);else for(;e!==null;){if(e.tag===3){xx(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xs===null||!Xs.has(r))){t=bc(n,t),t=$O(e,t,1),e=Js(e,t,1),t=An(),e!==null&&(Qh(e,1,t),Bn(e,t));break}}e=e.return}}function zB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=An(),t.pingedLanes|=t.suspendedLanes&n,Ht===t&&(tn&n)===n&&($t===4||$t===3&&(tn&130023424)===tn&&500>At()-yb?ya(t,0):vb|=n),Bn(t,e)}function oN(t,e){e===0&&(t.mode&1?(e=tp,tp<<=1,!(tp&130023424)&&(tp=4194304)):e=1);var n=An();t=Gi(t,e),t!==null&&(Qh(t,e,n),Bn(t,n))}function qB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oN(t,n)}function WB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(H(314))}r!==null&&r.delete(e),oN(t,n)}var aN;aN=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Ln=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ln=!1,OB(t,e,n);Ln=!!(t.flags&131072)}else Ln=!1,it&&e.flags&1048576&&uO(e,Pm,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Qp(t,e),t=e.pendingProps;var i=yc(e,_n.current);ic(e,n),i=db(null,e,r,t,i,n);var s=hb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Un(r)?(s=!0,km(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ob(e),i.updater=$g,e.stateNode=i,i._reactInternals=e,jw(e,r,t,n),e=Vw(null,e,r,!0,s,n)):(e.tag=0,it&&s&&ZE(e),Tn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Qp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=GB(r),t=jr(r,t),i){case 0:e=Mw(null,e,r,t,n);break e;case 1:e=gx(null,e,r,t,n);break e;case 11:e=px(null,e,r,t,n);break e;case 14:e=mx(null,e,r,jr(r.type,t),n);break e}throw Error(H(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),Mw(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),gx(t,e,r,i,n);case 3:e:{if(qO(e),t===null)throw Error(H(387));r=e.pendingProps,s=e.memoizedState,i=s.element,pO(t,e),Dm(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bc(Error(H(423)),e),e=vx(t,e,r,n,i);break e}else if(r!==i){i=bc(Error(H(424)),e),e=vx(t,e,r,n,i);break e}else for(er=Ys(e.stateNode.containerInfo.firstChild),nr=e,it=!0,Fr=null,n=yO(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_c(),r===i){e=Ki(t,e,n);break e}Tn(t,e,r,n)}e=e.child}return e;case 5:return _O(e),t===null&&Ow(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Aw(r,i)?o=null:s!==null&&Aw(r,s)&&(e.flags|=32),zO(t,e),Tn(t,e,o,n),e.child;case 6:return t===null&&Ow(e),null;case 13:return WO(t,e,n);case 4:return ab(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=wc(e,null,r,n):Tn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),px(t,e,r,i,n);case 7:return Tn(t,e,e.pendingProps,n),e.child;case 8:return Tn(t,e,e.pendingProps.children,n),e.child;case 12:return Tn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,He(Om,r._currentValue),r._currentValue=o,s!==null)if(Wr(s.value,o)){if(s.children===i.children&&!$n.current){e=Ki(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=$i(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Nw(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(H(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nw(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Tn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ic(e,n),i=Sr(i),r=r(i),e.flags|=1,Tn(t,e,r,n),e.child;case 14:return r=e.type,i=jr(r,e.pendingProps),i=jr(r.type,i),mx(t,e,r,i,n);case 15:return UO(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:jr(r,i),Qp(t,e),e.tag=1,Un(r)?(t=!0,km(e)):t=!1,ic(e,n),gO(e,r,i),jw(e,r,i,n),Vw(null,e,r,!0,t,n);case 19:return HO(t,e,n);case 22:return BO(t,e,n)}throw Error(H(156,e.tag))};function lN(t,e){return DP(t,e)}function HB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wr(t,e,n,r){return new HB(t,e,n,r)}function bb(t){return t=t.prototype,!(!t||!t.isReactComponent)}function GB(t){if(typeof t=="function")return bb(t)?1:0;if(t!=null){if(t=t.$$typeof,t===UE)return 11;if(t===BE)return 14}return 2}function eo(t,e){var n=t.alternate;return n===null?(n=wr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")bb(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vl:return _a(n.children,i,s,e);case $E:o=8,i|=8;break;case sw:return t=wr(12,n,e,i|2),t.elementType=sw,t.lanes=s,t;case ow:return t=wr(13,n,e,i),t.elementType=ow,t.lanes=s,t;case aw:return t=wr(19,n,e,i),t.elementType=aw,t.lanes=s,t;case vP:return qg(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mP:o=10;break e;case gP:o=9;break e;case UE:o=11;break e;case BE:o=14;break e;case Ns:o=16,r=null;break e}throw Error(H(130,t==null?t:typeof t,""))}return e=wr(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function _a(t,e,n,r){return t=wr(7,t,r,e),t.lanes=n,t}function qg(t,e,n,r){return t=wr(22,t,r,e),t.elementType=vP,t.lanes=n,t.stateNode={isHidden:!1},t}function Ky(t,e,n){return t=wr(6,t,null,e),t.lanes=n,t}function Qy(t,e,n){return e=wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function KB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ky(0),this.expirationTimes=ky(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ky(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tb(t,e,n,r,i,s,o,a,l){return t=new KB(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=wr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ob(s),t}function QB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ml,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cN(t){if(!t)return ao;t=t._reactInternals;e:{if(Ya(t)!==t||t.tag!==1)throw Error(H(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Un(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(H(171))}if(t.tag===1){var n=t.type;if(Un(n))return lO(t,n,e)}return e}function uN(t,e,n,r,i,s,o,a,l){return t=Tb(n,r,!0,t,i,s,o,a,l),t.context=cN(null),n=t.current,r=An(),i=Zs(n),s=$i(r,i),s.callback=e??null,Js(n,s,i),t.current.lanes=i,Qh(t,i,r),Bn(t,r),t}function Wg(t,e,n,r){var i=e.current,s=An(),o=Zs(i);return n=cN(n),e.context===null?e.context=n:e.pendingContext=n,e=$i(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Js(i,e,o),t!==null&&(qr(t,i,o,s),Hp(t,i,o)),o}function Bm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ax(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ib(t,e){Ax(t,e),(t=t.alternate)&&Ax(t,e)}function YB(){return null}var dN=typeof reportError=="function"?reportError:function(t){console.error(t)};function Sb(t){this._internalRoot=t}Hg.prototype.render=Sb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(H(409));Wg(t,e,null,null)};Hg.prototype.unmount=Sb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ra(function(){Wg(null,t,null,null)}),e[Hi]=null}};function Hg(t){this._internalRoot=t}Hg.prototype.unstable_scheduleHydration=function(t){if(t){var e=UP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ls.length&&e!==0&&e<Ls[n].priority;n++);Ls.splice(n,0,t),n===0&&zP(t)}};function xb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Gg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rx(){}function JB(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=Bm(o);s.call(c)}}var o=uN(e,r,t,0,null,!1,!1,"",Rx);return t._reactRootContainer=o,t[Hi]=o.current,ch(t.nodeType===8?t.parentNode:t),Ra(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=Bm(l);a.call(c)}}var l=Tb(t,0,!1,null,null,!1,!1,"",Rx);return t._reactRootContainer=l,t[Hi]=l.current,ch(t.nodeType===8?t.parentNode:t),Ra(function(){Wg(e,l,n,r)}),l}function Kg(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Bm(o);a.call(l)}}Wg(e,o,t,i)}else o=JB(n,e,t,i,r);return Bm(o)}FP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ud(e.pendingLanes);n!==0&&(WE(e,n|1),Bn(e,At()),!(je&6)&&(Tc=At()+500,Ro()))}break;case 13:Ra(function(){var r=Gi(t,1);if(r!==null){var i=An();qr(r,t,1,i)}}),Ib(t,1)}};HE=function(t){if(t.tag===13){var e=Gi(t,134217728);if(e!==null){var n=An();qr(e,t,134217728,n)}Ib(t,134217728)}};$P=function(t){if(t.tag===13){var e=Zs(t),n=Gi(t,e);if(n!==null){var r=An();qr(n,t,e,r)}Ib(t,e)}};UP=function(){return Ue};BP=function(t,e){var n=Ue;try{return Ue=t,e()}finally{Ue=n}};vw=function(t,e,n){switch(e){case"input":if(uw(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Vg(r);if(!i)throw Error(H(90));_P(r),uw(r,i)}}}break;case"textarea":EP(t,n);break;case"select":e=n.value,e!=null&&ec(t,!!n.multiple,e,!1)}};RP=_b;kP=Ra;var XB={usingClientEntryPoint:!1,Events:[Jh,Bl,Vg,xP,AP,_b]},Wu={findFiberByHostInstance:ca,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZB={bundleType:Wu.bundleType,version:Wu.version,rendererPackageName:Wu.rendererPackageName,rendererConfig:Wu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ss.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OP(t),t===null?null:t.stateNode},findFiberByHostInstance:Wu.findFiberByHostInstance||YB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hp.isDisabled&&hp.supportsFiber)try{Dg=hp.inject(ZB),pi=hp}catch{}}lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XB;lr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xb(e))throw Error(H(200));return QB(t,e,null,n)};lr.createRoot=function(t,e){if(!xb(t))throw Error(H(299));var n=!1,r="",i=dN;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Tb(t,1,!1,null,null,n,!1,r,i),t[Hi]=e.current,ch(t.nodeType===8?t.parentNode:t),new Sb(e)};lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(H(188)):(t=Object.keys(t).join(","),Error(H(268,t)));return t=OP(e),t=t===null?null:t.stateNode,t};lr.flushSync=function(t){return Ra(t)};lr.hydrate=function(t,e,n){if(!Gg(e))throw Error(H(200));return Kg(null,t,e,!0,n)};lr.hydrateRoot=function(t,e,n){if(!xb(t))throw Error(H(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dN;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uN(e,null,t,1,n??null,i,!1,s,o),t[Hi]=e.current,ch(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hg(e)};lr.render=function(t,e,n){if(!Gg(e))throw Error(H(200));return Kg(null,t,e,!1,n)};lr.unmountComponentAtNode=function(t){if(!Gg(t))throw Error(H(40));return t._reactRootContainer?(Ra(function(){Kg(null,null,t,!1,function(){t._reactRootContainer=null,t[Hi]=null})}),!0):!1};lr.unstable_batchedUpdates=_b;lr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Gg(n))throw Error(H(200));if(t==null||t._reactInternals===void 0)throw Error(H(38));return Kg(t,e,n,!1,r)};lr.version="18.2.0-next-9e3b772b8-20220608";function hN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hN)}catch(t){console.error(t)}}hN(),uP.exports=lr;var fN=uP.exports;const Ql=So(fN);var kx=fN;rw.createRoot=kx.createRoot,rw.hydrateRoot=kx.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yh(){return yh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yh.apply(this,arguments)}var zs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(zs||(zs={}));const Cx="popstate";function e6(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Yw("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:zm(i)}return n6(e,n,null,t)}function kt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ab(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function t6(){return Math.random().toString(36).substr(2,8)}function Px(t,e){return{usr:t.state,key:t.key,idx:e}}function Yw(t,e,n,r){return n===void 0&&(n=null),yh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xc(e):e,{state:n,key:e&&e.key||r||t6()})}function zm(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xc(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function n6(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=zs.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(yh({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=zs.Pop;let y=u(),T=y==null?null:y-c;c=y,l&&l({action:a,location:w.location,delta:T})}function p(y,T){a=zs.Push;let E=Yw(w.location,y,T);n&&n(E,y),c=u()+1;let b=Px(E,c),k=w.createHref(E);try{o.pushState(b,"",k)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(k)}s&&l&&l({action:a,location:w.location,delta:1})}function m(y,T){a=zs.Replace;let E=Yw(w.location,y,T);n&&n(E,y),c=u();let b=Px(E,c),k=w.createHref(E);o.replaceState(b,"",k),s&&l&&l({action:a,location:w.location,delta:0})}function v(y){let T=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof y=="string"?y:zm(y);return kt(T,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,T)}let w={get action(){return a},get location(){return t(i,o)},listen(y){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Cx,h),l=y,()=>{i.removeEventListener(Cx,h),l=null}},createHref(y){return e(i,y)},createURL:v,encodeLocation(y){let T=v(y);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:m,go(y){return o.go(y)}};return w}var Ox;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ox||(Ox={}));function r6(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xc(e):e,i=Rb(r.pathname||"/",n);if(i==null)return null;let s=pN(t);i6(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=f6(s[a],g6(i));return o}function pN(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(kt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=to([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(kt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),pN(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:d6(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of mN(s.path))i(s,o,l)}),e}function mN(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=mN(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function i6(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:h6(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s6=/^:[\w-]+$/,o6=3,a6=2,l6=1,c6=10,u6=-2,Nx=t=>t==="*";function d6(t,e){let n=t.split("/"),r=n.length;return n.some(Nx)&&(r+=u6),e&&(r+=a6),n.filter(i=>!Nx(i)).reduce((i,s)=>i+(s6.test(s)?o6:s===""?l6:c6),r)}function h6(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function f6(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=p6({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let h=a.route;s.push({params:r,pathname:to([i,u.pathname]),pathnameBase:E6(to([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=to([i,u.pathnameBase]))}return s}function p6(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=m6(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,h)=>{let{paramName:p,isOptional:m}=u;if(p==="*"){let w=a[h]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[h];return m&&!v?c[p]=void 0:c[p]=v6(v||"",p),c},{}),pathname:s,pathnameBase:o,pattern:t}}function m6(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ab(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function g6(t){try{return decodeURI(t)}catch(e){return Ab(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function v6(t,e){try{return decodeURIComponent(t)}catch(n){return Ab(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Rb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function y6(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xc(t):t;return{pathname:n?n.startsWith("/")?n:_6(n,e):e,search:b6(r),hash:T6(i)}}function _6(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Yy(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w6(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function kb(t,e){let n=w6(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Cb(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xc(t):(i=yh({},t),kt(!i.pathname||!i.pathname.includes("?"),Yy("?","pathname","search",i)),kt(!i.pathname||!i.pathname.includes("#"),Yy("#","pathname","hash",i)),kt(!i.search||!i.search.includes("#"),Yy("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),h-=1;i.pathname=p.join("/")}a=h>=0?e[h]:"/"}let l=y6(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const to=t=>t.join("/").replace(/\/\/+/g,"/"),E6=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),b6=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,T6=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function I6(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const gN=["post","put","patch","delete"];new Set(gN);const S6=["get",...gN];new Set(S6);/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_h.apply(this,arguments)}const Pb=I.createContext(null),x6=I.createContext(null),ko=I.createContext(null),Qg=I.createContext(null),xi=I.createContext({outlet:null,matches:[],isDataRoute:!1}),vN=I.createContext(null);function A6(t,e){let{relative:n}=e===void 0?{}:e;Zc()||kt(!1);let{basename:r,navigator:i}=I.useContext(ko),{hash:s,pathname:o,search:a}=_N(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:to([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Zc(){return I.useContext(Qg)!=null}function eu(){return Zc()||kt(!1),I.useContext(Qg).location}function yN(t){I.useContext(ko).static||I.useLayoutEffect(t)}function Gr(){let{isDataRoute:t}=I.useContext(xi);return t?B6():R6()}function R6(){Zc()||kt(!1);let t=I.useContext(Pb),{basename:e,future:n,navigator:r}=I.useContext(ko),{matches:i}=I.useContext(xi),{pathname:s}=eu(),o=JSON.stringify(kb(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return yN(()=>{a.current=!0}),I.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let h=Cb(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:to([e,h.pathname])),(u.replace?r.replace:r.push)(h,u.state,u)},[e,r,o,s,t])}const k6=I.createContext(null);function C6(t){let e=I.useContext(xi).outlet;return e&&I.createElement(k6.Provider,{value:t},e)}function Zh(){let{matches:t}=I.useContext(xi),e=t[t.length-1];return e?e.params:{}}function _N(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=I.useContext(ko),{matches:i}=I.useContext(xi),{pathname:s}=eu(),o=JSON.stringify(kb(i,r.v7_relativeSplatPath));return I.useMemo(()=>Cb(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function P6(t,e){return O6(t,e)}function O6(t,e,n,r){Zc()||kt(!1);let{navigator:i}=I.useContext(ko),{matches:s}=I.useContext(xi),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=eu(),u;if(e){var h;let y=typeof e=="string"?Xc(e):e;l==="/"||(h=y.pathname)!=null&&h.startsWith(l)||kt(!1),u=y}else u=c;let p=u.pathname||"/",m=l==="/"?p:p.slice(l.length)||"/",v=r6(t,{pathname:m}),w=M6(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:to([l,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?l:to([l,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return e&&w?I.createElement(Qg.Provider,{value:{location:_h({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:zs.Pop}},w):w}function N6(){let t=U6(),e=I6(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},e),n?I.createElement("pre",{style:i},n):null,null)}const D6=I.createElement(N6,null);class j6 extends I.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?I.createElement(xi.Provider,{value:this.props.routeContext},I.createElement(vN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function L6(t){let{routeContext:e,match:n,children:r}=t,i=I.useContext(Pb);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(xi.Provider,{value:e},r)}function M6(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id]));u>=0||kt(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:p,errors:m}=n,v=h.route.loader&&p[h.route.id]===void 0&&(!m||m[h.route.id]===void 0);if(h.route.lazy||v){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,p)=>{let m,v=!1,w=null,y=null;n&&(m=a&&h.route.id?a[h.route.id]:void 0,w=h.route.errorElement||D6,l&&(c<0&&p===0?(z6("route-fallback",!1),v=!0,y=null):c===p&&(v=!0,y=h.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,p+1)),E=()=>{let b;return m?b=w:v?b=y:h.route.Component?b=I.createElement(h.route.Component,null):h.route.element?b=h.route.element:b=u,I.createElement(L6,{match:h,routeContext:{outlet:u,matches:T,isDataRoute:n!=null},children:b})};return n&&(h.route.ErrorBoundary||h.route.errorElement||p===0)?I.createElement(j6,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:E(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):E()},null)}var wN=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(wN||{}),qm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(qm||{});function V6(t){let e=I.useContext(Pb);return e||kt(!1),e}function F6(t){let e=I.useContext(x6);return e||kt(!1),e}function $6(t){let e=I.useContext(xi);return e||kt(!1),e}function EN(t){let e=$6(),n=e.matches[e.matches.length-1];return n.route.id||kt(!1),n.route.id}function U6(){var t;let e=I.useContext(vN),n=F6(qm.UseRouteError),r=EN(qm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function B6(){let{router:t}=V6(wN.UseNavigateStable),e=EN(qm.UseNavigateStable),n=I.useRef(!1);return yN(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,_h({fromRouteId:e},s)))},[t,e])}const Dx={};function z6(t,e,n){!e&&!Dx[t]&&(Dx[t]=!0)}function bN(t){let{to:e,replace:n,state:r,relative:i}=t;Zc()||kt(!1);let{future:s,static:o}=I.useContext(ko),{matches:a}=I.useContext(xi),{pathname:l}=eu(),c=Gr(),u=Cb(e,kb(a,s.v7_relativeSplatPath),l,i==="path"),h=JSON.stringify(u);return I.useEffect(()=>c(JSON.parse(h),{replace:n,state:r,relative:i}),[c,h,i,n,r]),null}function Ob(t){return C6(t.context)}function Mt(t){kt(!1)}function q6(t){let{basename:e="/",children:n=null,location:r,navigationType:i=zs.Pop,navigator:s,static:o=!1,future:a}=t;Zc()&&kt(!1);let l=e.replace(/^\/*/,"/"),c=I.useMemo(()=>({basename:l,navigator:s,static:o,future:_h({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Xc(r));let{pathname:u="/",search:h="",hash:p="",state:m=null,key:v="default"}=r,w=I.useMemo(()=>{let y=Rb(u,l);return y==null?null:{location:{pathname:y,search:h,hash:p,state:m,key:v},navigationType:i}},[l,u,h,p,m,v,i]);return w==null?null:I.createElement(ko.Provider,{value:c},I.createElement(Qg.Provider,{children:n,value:w}))}function W6(t){let{children:e,location:n}=t;return P6(Jw(e),n)}new Promise(()=>{});function Jw(t,e){e===void 0&&(e=[]);let n=[];return I.Children.forEach(t,(r,i)=>{if(!I.isValidElement(r))return;let s=[...e,i];if(r.type===I.Fragment){n.push.apply(n,Jw(r.props.children,s));return}r.type!==Mt&&kt(!1),!r.props.index||!r.props.children||kt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Jw(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xw(){return Xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xw.apply(this,arguments)}function H6(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function G6(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function K6(t,e){return t.button===0&&(!e||e==="_self")&&!G6(t)}function Zw(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function Q6(t,e){let n=Zw(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const Y6=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],J6="startTransition",jx=zU[J6];function X6(t){let{basename:e,children:n,future:r,window:i}=t,s=I.useRef();s.current==null&&(s.current=e6({window:i,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=I.useCallback(h=>{c&&jx?jx(()=>l(h)):l(h)},[l,c]);return I.useLayoutEffect(()=>o.listen(u),[o,u]),I.createElement(q6,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Z6=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",e5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,dt=I.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:h}=e,p=H6(e,Y6),{basename:m}=I.useContext(ko),v,w=!1;if(typeof c=="string"&&e5.test(c)&&(v=c,Z6))try{let b=new URL(window.location.href),k=c.startsWith("//")?new URL(b.protocol+c):new URL(c),D=Rb(k.pathname,m);k.origin===b.origin&&D!=null?c=D+k.search+k.hash:w=!0}catch{}let y=A6(c,{relative:i}),T=t5(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:h});function E(b){r&&r(b),b.defaultPrevented||T(b)}return I.createElement("a",Xw({},p,{href:v||y,onClick:w||s?r:E,ref:n,target:l}))});var Lx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Lx||(Lx={}));var Mx;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Mx||(Mx={}));function t5(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Gr(),c=eu(),u=_N(t,{relative:o});return I.useCallback(h=>{if(K6(h,n)){h.preventDefault();let p=r!==void 0?r:zm(c)===zm(u);l(t,{replace:p,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}function TN(t){let e=I.useRef(Zw(t)),n=I.useRef(!1),r=eu(),i=I.useMemo(()=>Q6(r.search,n.current?null:e.current),[r.search]),s=Gr(),o=I.useCallback((a,l)=>{const c=Zw(typeof a=="function"?a(i):a);n.current=!0,s("?"+c,l)},[s,i]);return[i,o]}var IN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=i(s,r(a)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=i(o,a));return o}function i(s,o){return o?s?s+" "+o:s+o:s}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(IN);var n5=IN.exports;const X=So(n5);function e0(){return e0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},e0.apply(this,arguments)}function SN(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Vx(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function r5(t){var e=i5(t,"string");return typeof e=="symbol"?e:String(e)}function i5(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s5(t,e,n){var r=I.useRef(t!==void 0),i=I.useState(e),s=i[0],o=i[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&s!==e&&o(e),[a?t:s,I.useCallback(function(c){for(var u=arguments.length,h=new Array(u>1?u-1:0),p=1;p<u;p++)h[p-1]=arguments[p];n&&n.apply(void 0,[c].concat(h)),o(c)},[n])]}function tu(t,e){return Object.keys(e).reduce(function(n,r){var i,s=n,o=s[Vx(r)],a=s[r],l=SN(s,[Vx(r),r].map(r5)),c=e[r],u=s5(a,o,t[c]),h=u[0],p=u[1];return e0({},l,(i={},i[r]=h,i[c]=p,i))},t)}function t0(t,e){return t0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},t0(t,e)}function o5(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t0(t,e)}const a5=["xxl","xl","lg","md","sm","xs"],l5="xs",Yg=I.createContext({prefixes:{},breakpoints:a5,minBreakpoint:l5});function ie(t,e){const{prefixes:n}=I.useContext(Yg);return t||n[e]||e}function xN(){const{breakpoints:t}=I.useContext(Yg);return t}function AN(){const{minBreakpoint:t}=I.useContext(Yg);return t}function RN(){const{dir:t}=I.useContext(Yg);return t==="rtl"}function ef(t){return t&&t.ownerDocument||document}function c5(t){var e=ef(t);return e&&e.defaultView||window}function u5(t,e){return c5(t).getComputedStyle(t,e)}var d5=/([A-Z])/g;function h5(t){return t.replace(d5,"-$1").toLowerCase()}var f5=/^ms-/;function fp(t){return h5(t).replace(f5,"-ms-")}var p5=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function m5(t){return!!(t&&p5.test(t))}function Ui(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(fp(e))||u5(t).getPropertyValue(fp(e));Object.keys(e).forEach(function(i){var s=e[i];!s&&s!==0?t.style.removeProperty(fp(i)):m5(i)?r+=i+"("+s+") ":n+=fp(i)+": "+s+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var kN={exports:{}},g5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",v5=g5,y5=v5;function CN(){}function PN(){}PN.resetWarningCache=CN;var _5=function(){function t(r,i,s,o,a,l){if(l!==y5){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:PN,resetWarningCache:CN};return n.PropTypes=n,n};kN.exports=_5();var w5=kN.exports;const ce=So(w5),Fx={disabled:!1},ON=Et.createContext(null);var E5=function(e){return e.scrollTop},hd="unmounted",js="exited",$r="entering",Ni="entered",wh="exiting",os=function(t){o5(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=js,s.appearStatus=$r):l=Ni:r.unmountOnExit||r.mountOnEnter?l=hd:l=js,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===hd?{status:js}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==$r&&o!==Ni&&(s=$r):(o===$r||o===Ni)&&(s=wh)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===$r){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Ql.findDOMNode(this);o&&E5(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===js&&this.setState({status:hd})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Ql.findDOMNode(this),a],c=l[0],u=l[1],h=this.getTimeouts(),p=a?h.appear:h.enter;if(!i&&!o||Fx.disabled){this.safeSetState({status:Ni},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:$r},function(){s.props.onEntering(c,u),s.onTransitionEnd(p,function(){s.safeSetState({status:Ni},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Ql.findDOMNode(this);if(!s||Fx.disabled){this.safeSetState({status:js},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:wh},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:js},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Ql.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===hd)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=SN(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Et.createElement(ON.Provider,{value:null},typeof o=="function"?o(i,a):Et.cloneElement(Et.Children.only(o),a))},e}(Et.Component);os.contextType=ON;os.propTypes={};function fl(){}os.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fl,onEntering:fl,onEntered:fl,onExit:fl,onExiting:fl,onExited:fl};os.UNMOUNTED=hd;os.EXITED=js;os.ENTERING=$r;os.ENTERED=Ni;os.EXITING=wh;const b5=os,nu=!!(typeof window<"u"&&window.document&&window.document.createElement);var n0=!1,r0=!1;try{var Jy={get passive(){return n0=!0},get once(){return r0=n0=!0}};nu&&(window.addEventListener("test",Jy,Jy),window.removeEventListener("test",Jy,!0))}catch{}function Nb(t,e,n,r){if(r&&typeof r!="boolean"&&!r0){var i=r.once,s=r.capture,o=n;!r0&&i&&(o=n.__once||function a(l){this.removeEventListener(e,a,s),n.call(this,l)},n.__once=o),t.addEventListener(e,o,n0?r:s)}t.addEventListener(e,n,r)}function i0(t,e,n,r){var i=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,i),n.__once&&t.removeEventListener(e,n.__once,i)}function qs(t,e,n,r){return Nb(t,e,n,r),function(){i0(t,e,n,r)}}function T5(t,e,n,r){if(n===void 0&&(n=!1),r===void 0&&(r=!0),t){var i=document.createEvent("HTMLEvents");i.initEvent(e,n,r),t.dispatchEvent(i)}}function I5(t){var e=Ui(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function S5(t,e,n){n===void 0&&(n=5);var r=!1,i=setTimeout(function(){r||T5(t,"transitionend",!0)},e+n),s=qs(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(i),s()}}function NN(t,e,n,r){n==null&&(n=I5(t)||0);var i=S5(t,n,r),s=qs(t,"transitionend",e);return function(){i(),s()}}function $x(t,e){const n=Ui(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function Db(t,e){const n=$x(t,"transitionDuration"),r=$x(t,"transitionDelay"),i=NN(t,s=>{s.target===t&&(i(),e(s))},n+r)}function Hu(...t){return t.filter(e=>e!=null).reduce((e,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return e===null?n:function(...i){e.apply(this,i),n.apply(this,i)}},null)}function DN(t){t.offsetHeight}const Ux=t=>!t||typeof t=="function"?t:e=>{t.current=e};function x5(t,e){const n=Ux(t),r=Ux(e);return i=>{n&&n(i),r&&r(i)}}function Ja(t,e){return I.useMemo(()=>x5(t,e),[t,e])}function A5(t){return t&&"setState"in t?Ql.findDOMNode(t):t??null}const R5=Et.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,onExited:s,addEndListener:o,children:a,childRef:l,...c},u)=>{const h=I.useRef(null),p=Ja(h,l),m=N=>{p(A5(N))},v=N=>x=>{N&&h.current&&N(h.current,x)},w=I.useCallback(v(t),[t]),y=I.useCallback(v(e),[e]),T=I.useCallback(v(n),[n]),E=I.useCallback(v(r),[r]),b=I.useCallback(v(i),[i]),k=I.useCallback(v(s),[s]),D=I.useCallback(v(o),[o]);return f.jsx(b5,{ref:u,...c,onEnter:w,onEntered:T,onEntering:y,onExit:E,onExited:k,onExiting:b,addEndListener:D,nodeRef:h,children:typeof a=="function"?(N,x)=>a(N,{...x,ref:m}):Et.cloneElement(a,{ref:m})})}),jb=R5,k5={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function C5(t,e){const n=`offset${t[0].toUpperCase()}${t.slice(1)}`,r=e[n],i=k5[t];return r+parseInt(Ui(e,i[0]),10)+parseInt(Ui(e,i[1]),10)}const P5={[js]:"collapse",[wh]:"collapsing",[$r]:"collapsing",[Ni]:"collapse show"},O5=Et.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:i,className:s,children:o,dimension:a="height",in:l=!1,timeout:c=300,mountOnEnter:u=!1,unmountOnExit:h=!1,appear:p=!1,getDimensionValue:m=C5,...v},w)=>{const y=typeof a=="function"?a():a,T=I.useMemo(()=>Hu(N=>{N.style[y]="0"},t),[y,t]),E=I.useMemo(()=>Hu(N=>{const x=`scroll${y[0].toUpperCase()}${y.slice(1)}`;N.style[y]=`${N[x]}px`},e),[y,e]),b=I.useMemo(()=>Hu(N=>{N.style[y]=null},n),[y,n]),k=I.useMemo(()=>Hu(N=>{N.style[y]=`${m(y,N)}px`,DN(N)},r),[r,m,y]),D=I.useMemo(()=>Hu(N=>{N.style[y]=null},i),[y,i]);return f.jsx(jb,{ref:w,addEndListener:Db,...v,"aria-expanded":v.role?l:null,onEnter:T,onEntering:E,onEntered:b,onExit:k,onExiting:D,childRef:o.ref,in:l,timeout:c,mountOnEnter:u,unmountOnExit:h,appear:p,children:(N,x)=>Et.cloneElement(o,{...x,className:X(s,o.props.className,P5[N],y==="width"&&"collapse-horizontal")})})}),N5=O5;function D5(t){const e=I.useRef(t);return I.useEffect(()=>{e.current=t},[t]),e}function st(t){const e=D5(t);return I.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const tf=t=>I.forwardRef((e,n)=>f.jsx("div",{...e,ref:n,className:X(e.className,t)})),jN=tf("h4");jN.displayName="DivStyledAsH4";const LN=I.forwardRef(({className:t,bsPrefix:e,as:n=jN,...r},i)=>(e=ie(e,"alert-heading"),f.jsx(n,{ref:i,className:X(t,e),...r})));LN.displayName="AlertHeading";const j5=LN;function MN(){return I.useState(null)}function L5(t,e,n,r=!1){const i=st(n);I.useEffect(()=>{const s=typeof t=="function"?t():t;return s.addEventListener(e,i,r),()=>s.removeEventListener(e,i,r)},[t])}function VN(){const t=I.useRef(!0),e=I.useRef(()=>t.current);return I.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function FN(t){const e=I.useRef(null);return I.useEffect(()=>{e.current=t}),e.current}const M5=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",V5=typeof document<"u",Wm=V5||M5?I.useLayoutEffect:I.useEffect,F5=["as","disabled"];function $5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function U5(t){return!t||t.trim()==="#"}function Lb({tagName:t,disabled:e,href:n,target:r,rel:i,role:s,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||i!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=p=>{if((e||t==="a"&&U5(n))&&p.preventDefault(),e){p.stopPropagation();return}o==null||o(p)},h=p=>{p.key===" "&&(p.preventDefault(),u(p))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:s??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?i:void 0,onClick:u,onKeyDown:h},c]}const Mb=I.forwardRef((t,e)=>{let{as:n,disabled:r}=t,i=$5(t,F5);const[s,{tagName:o}]=Lb(Object.assign({tagName:n,disabled:r},i));return f.jsx(o,Object.assign({},i,s,{ref:e}))});Mb.displayName="Button";const B5=["onKeyDown"];function z5(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function q5(t){return!t||t.trim()==="#"}const $N=I.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=z5(t,B5);const[i]=Lb(Object.assign({tagName:"a"},r)),s=st(o=>{i.onKeyDown(o),n==null||n(o)});return q5(r.href)||r.role==="button"?f.jsx("a",Object.assign({ref:e},r,i,{onKeyDown:s})):f.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});$N.displayName="Anchor";const Vb=$N,UN=I.forwardRef(({className:t,bsPrefix:e,as:n=Vb,...r},i)=>(e=ie(e,"alert-link"),f.jsx(n,{ref:i,className:X(t,e),...r})));UN.displayName="AlertLink";const W5=UN,H5={[$r]:"show",[Ni]:"show"},BN=I.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...i},s)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...i},a=I.useCallback((l,c)=>{DN(l),r==null||r(l,c)},[r]);return f.jsx(jb,{ref:s,addEndListener:Db,...o,onEnter:a,childRef:e.ref,children:(l,c)=>I.cloneElement(e,{...c,className:X("fade",t,e.props.className,H5[l],n[l])})})});BN.displayName="Fade";const ka=BN,G5={"aria-label":ce.string,onClick:ce.func,variant:ce.oneOf(["white"])},Fb=I.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},i)=>f.jsx("button",{ref:i,type:"button",className:X("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));Fb.displayName="CloseButton";Fb.propTypes=G5;const zN=Fb,qN=I.forwardRef((t,e)=>{const{bsPrefix:n,show:r=!0,closeLabel:i="Close alert",closeVariant:s,className:o,children:a,variant:l="primary",onClose:c,dismissible:u,transition:h=ka,...p}=tu(t,{show:"onClose"}),m=ie(n,"alert"),v=st(T=>{c&&c(!1,T)}),w=h===!0?ka:h,y=f.jsxs("div",{role:"alert",...w?void 0:p,ref:e,className:X(o,m,l&&`${m}-${l}`,u&&`${m}-dismissible`),children:[u&&f.jsx(zN,{onClick:v,"aria-label":i,variant:s}),a]});return w?f.jsx(w,{unmountOnExit:!0,...p,ref:void 0,in:r,children:y}):r?y:null});qN.displayName="Alert";const Jg=Object.assign(qN,{Link:W5,Heading:j5}),WN=I.forwardRef(({bsPrefix:t,bg:e="primary",pill:n=!1,text:r,className:i,as:s="span",...o},a)=>{const l=ie(t,"badge");return f.jsx(s,{ref:a,...o,className:X(i,l,n&&"rounded-pill",r&&`text-${r}`,e&&`bg-${e}`)})});WN.displayName="Badge";const lo=WN,HN=I.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:i=!1,disabled:s=!1,className:o,...a},l)=>{const c=ie(e,"btn"),[u,{tagName:h}]=Lb({tagName:t,disabled:s,...a}),p=h;return f.jsx(p,{...u,...a,ref:l,disabled:s,className:X(o,c,i&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,a.href&&s&&"disabled")})});HN.displayName="Button";const de=HN,GN=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"card-body"),f.jsx(n,{ref:i,className:X(t,e),...r})));GN.displayName="CardBody";const KN=GN,QN=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"card-footer"),f.jsx(n,{ref:i,className:X(t,e),...r})));QN.displayName="CardFooter";const K5=QN,YN=I.createContext(null);YN.displayName="CardHeaderContext";const JN=YN,XN=I.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=ie(t,"card-header"),o=I.useMemo(()=>({cardHeaderBsPrefix:s}),[s]);return f.jsx(JN.Provider,{value:o,children:f.jsx(n,{ref:i,...r,className:X(e,s)})})});XN.displayName="CardHeader";const Q5=XN,ZN=I.forwardRef(({bsPrefix:t,className:e,variant:n,as:r="img",...i},s)=>{const o=ie(t,"card-img");return f.jsx(r,{ref:s,className:X(n?`${o}-${n}`:o,e),...i})});ZN.displayName="CardImg";const Y5=ZN,eD=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"card-img-overlay"),f.jsx(n,{ref:i,className:X(t,e),...r})));eD.displayName="CardImgOverlay";const J5=eD,tD=I.forwardRef(({className:t,bsPrefix:e,as:n="a",...r},i)=>(e=ie(e,"card-link"),f.jsx(n,{ref:i,className:X(t,e),...r})));tD.displayName="CardLink";const X5=tD,Z5=tf("h6"),nD=I.forwardRef(({className:t,bsPrefix:e,as:n=Z5,...r},i)=>(e=ie(e,"card-subtitle"),f.jsx(n,{ref:i,className:X(t,e),...r})));nD.displayName="CardSubtitle";const e9=nD,rD=I.forwardRef(({className:t,bsPrefix:e,as:n="p",...r},i)=>(e=ie(e,"card-text"),f.jsx(n,{ref:i,className:X(t,e),...r})));rD.displayName="CardText";const t9=rD,n9=tf("h5"),iD=I.forwardRef(({className:t,bsPrefix:e,as:n=n9,...r},i)=>(e=ie(e,"card-title"),f.jsx(n,{ref:i,className:X(t,e),...r})));iD.displayName="CardTitle";const r9=iD,sD=I.forwardRef(({bsPrefix:t,className:e,bg:n,text:r,border:i,body:s=!1,children:o,as:a="div",...l},c)=>{const u=ie(t,"card");return f.jsx(a,{ref:c,...l,className:X(e,u,n&&`bg-${n}`,r&&`text-${r}`,i&&`border-${i}`),children:s?f.jsx(KN,{children:o}):o})});sD.displayName="Card";const ae=Object.assign(sD,{Img:Y5,Title:r9,Subtitle:e9,Body:KN,Link:X5,Text:t9,Header:Q5,Footer:K5,ImgOverlay:J5});function i9(t){const e=I.useRef(t);return e.current=t,e}function oD(t){const e=i9(t);I.useEffect(()=>()=>e.current(),[])}function Bx(t,e){let n=0;return I.Children.map(t,r=>I.isValidElement(r)?e(r,n++):r)}function s9(t,e){let n=0;I.Children.forEach(t,r=>{I.isValidElement(r)&&e(r,n++)})}function o9(t,e){return I.Children.toArray(t).some(n=>I.isValidElement(n)&&n.type===e)}function aD({as:t,bsPrefix:e,className:n,...r}){e=ie(e,"col");const i=xN(),s=AN(),o=[],a=[];return i.forEach(l=>{const c=r[l];delete r[l];let u,h,p;typeof c=="object"&&c!=null?{span:u,offset:h,order:p}=c:u=c;const m=l!==s?`-${l}`:"";u&&o.push(u===!0?`${e}${m}`:`${e}${m}-${u}`),p!=null&&a.push(`order${m}-${p}`),h!=null&&a.push(`offset${m}-${h}`)}),[{...r,className:X(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const lD=I.forwardRef((t,e)=>{const[{className:n,...r},{as:i="div",bsPrefix:s,spans:o}]=aD(t);return f.jsx(i,{...r,ref:e,className:X(n,!o.length&&s)})});lD.displayName="Col";const be=lD,cD=I.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...i},s)=>{const o=ie(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return f.jsx(n,{ref:s,...i,className:X(r,e?`${o}${a}`:o)})});cD.displayName="Container";const On=cD;var a9=Function.prototype.bind.call(Function.prototype.call,[].slice);function Oi(t,e){return a9(t.querySelectorAll(e))}function uD(t,e,n){const r=I.useRef(t!==void 0),[i,s]=I.useState(e),o=t!==void 0,a=r.current;return r.current=o,!o&&a&&i!==e&&s(e),[o?t:i,I.useCallback((...l)=>{const[c,...u]=l;let h=n==null?void 0:n(c,...u);return s(c),h},[n])]}function dD(){const[,t]=I.useReducer(e=>!e,!1);return t}const l9=I.createContext(null),Xg=l9;var zx=Object.prototype.hasOwnProperty;function qx(t,e,n){for(n of t.keys())if(Od(n,e))return n}function Od(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&Od(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(i=r,i&&typeof i=="object"&&(i=qx(e,i),!i)||!e.has(i))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(i=r[0],i&&typeof i=="object"&&(i=qx(e,i),!i)||!Od(r[1],e.get(i)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if(zx.call(t,n)&&++r&&!zx.call(e,n)||!(n in e)||!Od(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function c9(t){const e=VN();return[t[0],I.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var zn="top",Ar="bottom",Rr="right",qn="left",$b="auto",nf=[zn,Ar,Rr,qn],Ic="start",Eh="end",u9="clippingParents",hD="viewport",Gu="popper",d9="reference",Wx=nf.reduce(function(t,e){return t.concat([e+"-"+Ic,e+"-"+Eh])},[]),fD=[].concat(nf,[$b]).reduce(function(t,e){return t.concat([e,e+"-"+Ic,e+"-"+Eh])},[]),h9="beforeRead",f9="read",p9="afterRead",m9="beforeMain",g9="main",v9="afterMain",y9="beforeWrite",_9="write",w9="afterWrite",E9=[h9,f9,p9,m9,g9,v9,y9,_9,w9];function gi(t){return t.split("-")[0]}function sr(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Ca(t){var e=sr(t).Element;return t instanceof e||t instanceof Element}function vi(t){var e=sr(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function Ub(t){if(typeof ShadowRoot>"u")return!1;var e=sr(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var wa=Math.max,Hm=Math.min,Sc=Math.round;function s0(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function pD(){return!/^((?!chrome|android).)*safari/i.test(s0())}function xc(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&vi(t)&&(i=t.offsetWidth>0&&Sc(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Sc(r.height)/t.offsetHeight||1);var o=Ca(t)?sr(t):window,a=o.visualViewport,l=!pD()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,h=r.width/i,p=r.height/s;return{width:h,height:p,top:u,right:c+h,bottom:u+p,left:c,x:c,y:u}}function Bb(t){var e=xc(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function mD(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&Ub(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function co(t){return t?(t.nodeName||"").toLowerCase():null}function Qi(t){return sr(t).getComputedStyle(t)}function b9(t){return["table","td","th"].indexOf(co(t))>=0}function Co(t){return((Ca(t)?t.ownerDocument:t.document)||window.document).documentElement}function Zg(t){return co(t)==="html"?t:t.assignedSlot||t.parentNode||(Ub(t)?t.host:null)||Co(t)}function Hx(t){return!vi(t)||Qi(t).position==="fixed"?null:t.offsetParent}function T9(t){var e=/firefox/i.test(s0()),n=/Trident/i.test(s0());if(n&&vi(t)){var r=Qi(t);if(r.position==="fixed")return null}var i=Zg(t);for(Ub(i)&&(i=i.host);vi(i)&&["html","body"].indexOf(co(i))<0;){var s=Qi(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function rf(t){for(var e=sr(t),n=Hx(t);n&&b9(n)&&Qi(n).position==="static";)n=Hx(n);return n&&(co(n)==="html"||co(n)==="body"&&Qi(n).position==="static")?e:n||T9(t)||e}function zb(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Nd(t,e,n){return wa(t,Hm(e,n))}function I9(t,e,n){var r=Nd(t,e,n);return r>n?n:r}function gD(){return{top:0,right:0,bottom:0,left:0}}function vD(t){return Object.assign({},gD(),t)}function yD(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var S9=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,vD(typeof e!="number"?e:yD(e,nf))};function x9(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=gi(n.placement),l=zb(a),c=[qn,Rr].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var h=S9(i.padding,n),p=Bb(s),m=l==="y"?zn:qn,v=l==="y"?Ar:Rr,w=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],y=o[l]-n.rects.reference[l],T=rf(s),E=T?l==="y"?T.clientHeight||0:T.clientWidth||0:0,b=w/2-y/2,k=h[m],D=E-p[u]-h[v],N=E/2-p[u]/2+b,x=Nd(k,N,D),S=l;n.modifiersData[r]=(e={},e[S]=x,e.centerOffset=x-N,e)}}function A9(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||mD(e.elements.popper,i)&&(e.elements.arrow=i))}const R9={name:"arrow",enabled:!0,phase:"main",fn:x9,effect:A9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ac(t){return t.split("-")[1]}var k9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function C9(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Sc(n*i)/i||0,y:Sc(r*i)/i||0}}function Gx(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,p=o.x,m=p===void 0?0:p,v=o.y,w=v===void 0?0:v,y=typeof u=="function"?u({x:m,y:w}):{x:m,y:w};m=y.x,w=y.y;var T=o.hasOwnProperty("x"),E=o.hasOwnProperty("y"),b=qn,k=zn,D=window;if(c){var N=rf(n),x="clientHeight",S="clientWidth";if(N===sr(n)&&(N=Co(n),Qi(N).position!=="static"&&a==="absolute"&&(x="scrollHeight",S="scrollWidth")),N=N,i===zn||(i===qn||i===Rr)&&s===Eh){k=Ar;var C=h&&N===D&&D.visualViewport?D.visualViewport.height:N[x];w-=C-r.height,w*=l?1:-1}if(i===qn||(i===zn||i===Ar)&&s===Eh){b=Rr;var R=h&&N===D&&D.visualViewport?D.visualViewport.width:N[S];m-=R-r.width,m*=l?1:-1}}var O=Object.assign({position:a},c&&k9),j=u===!0?C9({x:m,y:w},sr(n)):{x:m,y:w};if(m=j.x,w=j.y,l){var P;return Object.assign({},O,(P={},P[k]=E?"0":"",P[b]=T?"0":"",P.transform=(D.devicePixelRatio||1)<=1?"translate("+m+"px, "+w+"px)":"translate3d("+m+"px, "+w+"px, 0)",P))}return Object.assign({},O,(e={},e[k]=E?w+"px":"",e[b]=T?m+"px":"",e.transform="",e))}function P9(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:gi(e.placement),variation:Ac(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Gx(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Gx(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const O9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:P9,data:{}};var pp={passive:!0};function N9(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=sr(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,pp)}),a&&l.addEventListener("resize",n.update,pp),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,pp)}),a&&l.removeEventListener("resize",n.update,pp)}}const D9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:N9,data:{}};var j9={left:"right",right:"left",bottom:"top",top:"bottom"};function Zp(t){return t.replace(/left|right|bottom|top/g,function(e){return j9[e]})}var L9={start:"end",end:"start"};function Kx(t){return t.replace(/start|end/g,function(e){return L9[e]})}function qb(t){var e=sr(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function Wb(t){return xc(Co(t)).left+qb(t).scrollLeft}function M9(t,e){var n=sr(t),r=Co(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=pD();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+Wb(t),y:l}}function V9(t){var e,n=Co(t),r=qb(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=wa(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=wa(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+Wb(t),l=-r.scrollTop;return Qi(i||n).direction==="rtl"&&(a+=wa(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function Hb(t){var e=Qi(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function _D(t){return["html","body","#document"].indexOf(co(t))>=0?t.ownerDocument.body:vi(t)&&Hb(t)?t:_D(Zg(t))}function Dd(t,e){var n;e===void 0&&(e=[]);var r=_D(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=sr(r),o=i?[s].concat(s.visualViewport||[],Hb(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Dd(Zg(o)))}function o0(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function F9(t,e){var n=xc(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Qx(t,e,n){return e===hD?o0(M9(t,n)):Ca(e)?F9(e,n):o0(V9(Co(t)))}function $9(t){var e=Dd(Zg(t)),n=["absolute","fixed"].indexOf(Qi(t).position)>=0,r=n&&vi(t)?rf(t):t;return Ca(r)?e.filter(function(i){return Ca(i)&&mD(i,r)&&co(i)!=="body"}):[]}function U9(t,e,n,r){var i=e==="clippingParents"?$9(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=Qx(t,c,r);return l.top=wa(u.top,l.top),l.right=Hm(u.right,l.right),l.bottom=Hm(u.bottom,l.bottom),l.left=wa(u.left,l.left),l},Qx(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function wD(t){var e=t.reference,n=t.element,r=t.placement,i=r?gi(r):null,s=r?Ac(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case zn:l={x:o,y:e.y-n.height};break;case Ar:l={x:o,y:e.y+e.height};break;case Rr:l={x:e.x+e.width,y:a};break;case qn:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?zb(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Ic:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Eh:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function bh(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?u9:a,c=n.rootBoundary,u=c===void 0?hD:c,h=n.elementContext,p=h===void 0?Gu:h,m=n.altBoundary,v=m===void 0?!1:m,w=n.padding,y=w===void 0?0:w,T=vD(typeof y!="number"?y:yD(y,nf)),E=p===Gu?d9:Gu,b=t.rects.popper,k=t.elements[v?E:p],D=U9(Ca(k)?k:k.contextElement||Co(t.elements.popper),l,u,o),N=xc(t.elements.reference),x=wD({reference:N,element:b,strategy:"absolute",placement:i}),S=o0(Object.assign({},b,x)),C=p===Gu?S:N,R={top:D.top-C.top+T.top,bottom:C.bottom-D.bottom+T.bottom,left:D.left-C.left+T.left,right:C.right-D.right+T.right},O=t.modifiersData.offset;if(p===Gu&&O){var j=O[i];Object.keys(R).forEach(function(P){var ge=[Rr,Ar].indexOf(P)>=0?1:-1,Re=[zn,Ar].indexOf(P)>=0?"y":"x";R[P]+=j[Re]*ge})}return R}function B9(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?fD:l,u=Ac(r),h=u?a?Wx:Wx.filter(function(v){return Ac(v)===u}):nf,p=h.filter(function(v){return c.indexOf(v)>=0});p.length===0&&(p=h);var m=p.reduce(function(v,w){return v[w]=bh(t,{placement:w,boundary:i,rootBoundary:s,padding:o})[gi(w)],v},{});return Object.keys(m).sort(function(v,w){return m[v]-m[w]})}function z9(t){if(gi(t)===$b)return[];var e=Zp(t);return[Kx(t),e,Kx(e)]}function q9(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,p=n.altBoundary,m=n.flipVariations,v=m===void 0?!0:m,w=n.allowedAutoPlacements,y=e.options.placement,T=gi(y),E=T===y,b=l||(E||!v?[Zp(y)]:z9(y)),k=[y].concat(b).reduce(function(Ne,Ie){return Ne.concat(gi(Ie)===$b?B9(e,{placement:Ie,boundary:u,rootBoundary:h,padding:c,flipVariations:v,allowedAutoPlacements:w}):Ie)},[]),D=e.rects.reference,N=e.rects.popper,x=new Map,S=!0,C=k[0],R=0;R<k.length;R++){var O=k[R],j=gi(O),P=Ac(O)===Ic,ge=[zn,Ar].indexOf(j)>=0,Re=ge?"width":"height",ke=bh(e,{placement:O,boundary:u,rootBoundary:h,altBoundary:p,padding:c}),B=ge?P?Rr:qn:P?Ar:zn;D[Re]>N[Re]&&(B=Zp(B));var U=Zp(B),G=[];if(s&&G.push(ke[j]<=0),a&&G.push(ke[B]<=0,ke[U]<=0),G.every(function(Ne){return Ne})){C=O,S=!1;break}x.set(O,G)}if(S)for(var J=v?3:1,fe=function(Ie){var Ke=k.find(function(vt){var Wn=x.get(vt);if(Wn)return Wn.slice(0,Ie).every(function(Cr){return Cr})});if(Ke)return C=Ke,"break"},se=J;se>0;se--){var me=fe(se);if(me==="break")break}e.placement!==C&&(e.modifiersData[r]._skip=!0,e.placement=C,e.reset=!0)}}const W9={name:"flip",enabled:!0,phase:"main",fn:q9,requiresIfExists:["offset"],data:{_skip:!1}};function Yx(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Jx(t){return[zn,Rr,Ar,qn].some(function(e){return t[e]>=0})}function H9(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=bh(e,{elementContext:"reference"}),a=bh(e,{altBoundary:!0}),l=Yx(o,r),c=Yx(a,i,s),u=Jx(l),h=Jx(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}const G9={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:H9};function K9(t,e,n){var r=gi(t),i=[qn,zn].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[qn,Rr].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function Q9(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=fD.reduce(function(u,h){return u[h]=K9(h,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Y9={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Q9};function J9(t){var e=t.state,n=t.name;e.modifiersData[n]=wD({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const X9={name:"popperOffsets",enabled:!0,phase:"read",fn:J9,data:{}};function Z9(t){return t==="x"?"y":"x"}function ez(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,p=n.tether,m=p===void 0?!0:p,v=n.tetherOffset,w=v===void 0?0:v,y=bh(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),T=gi(e.placement),E=Ac(e.placement),b=!E,k=zb(T),D=Z9(k),N=e.modifiersData.popperOffsets,x=e.rects.reference,S=e.rects.popper,C=typeof w=="function"?w(Object.assign({},e.rects,{placement:e.placement})):w,R=typeof C=="number"?{mainAxis:C,altAxis:C}:Object.assign({mainAxis:0,altAxis:0},C),O=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,j={x:0,y:0};if(N){if(s){var P,ge=k==="y"?zn:qn,Re=k==="y"?Ar:Rr,ke=k==="y"?"height":"width",B=N[k],U=B+y[ge],G=B-y[Re],J=m?-S[ke]/2:0,fe=E===Ic?x[ke]:S[ke],se=E===Ic?-S[ke]:-x[ke],me=e.elements.arrow,Ne=m&&me?Bb(me):{width:0,height:0},Ie=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:gD(),Ke=Ie[ge],vt=Ie[Re],Wn=Nd(0,x[ke],Ne[ke]),Cr=b?x[ke]/2-J-Wn-Ke-R.mainAxis:fe-Wn-Ke-R.mainAxis,Hn=b?-x[ke]/2+J+Wn+vt+R.mainAxis:se+Wn+vt+R.mainAxis,Gn=e.elements.arrow&&rf(e.elements.arrow),hr=Gn?k==="y"?Gn.clientTop||0:Gn.clientLeft||0:0,fr=(P=O==null?void 0:O[k])!=null?P:0,pr=B+Cr-fr-hr,Ve=B+Hn-fr,Qr=Nd(m?Hm(U,pr):U,B,m?wa(G,Ve):G);N[k]=Qr,j[k]=Qr-B}if(a){var Pr,Iu=k==="x"?zn:qn,ol=k==="x"?Ar:Rr,mr=N[D],Yr=D==="y"?"height":"width",Vo=mr+y[Iu],al=mr-y[ol],Jr=[zn,qn].indexOf(T)!==-1,ws=(Pr=O==null?void 0:O[D])!=null?Pr:0,Se=Jr?Vo:mr-x[Yr]-S[Yr]-ws+R.altAxis,qe=Jr?mr+x[Yr]+S[Yr]-ws-R.altAxis:al,xt=m&&Jr?I9(Se,mr,qe):Nd(m?Se:Vo,mr,m?qe:al);N[D]=xt,j[D]=xt-mr}e.modifiersData[r]=j}}const tz={name:"preventOverflow",enabled:!0,phase:"main",fn:ez,requiresIfExists:["offset"]};function nz(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function rz(t){return t===sr(t)||!vi(t)?qb(t):nz(t)}function iz(t){var e=t.getBoundingClientRect(),n=Sc(e.width)/t.offsetWidth||1,r=Sc(e.height)/t.offsetHeight||1;return n!==1||r!==1}function sz(t,e,n){n===void 0&&(n=!1);var r=vi(e),i=vi(e)&&iz(e),s=Co(e),o=xc(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((co(e)!=="body"||Hb(s))&&(a=rz(e)),vi(e)?(l=xc(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Wb(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function oz(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function az(t){var e=oz(t);return E9.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function lz(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function cz(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Xx={placement:"bottom",modifiers:[],strategy:"absolute"};function Zx(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function uz(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Xx:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Xx,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],p=!1,m={state:u,setOptions:function(T){var E=typeof T=="function"?T(u.options):T;w(),u.options=Object.assign({},s,u.options,E),u.scrollParents={reference:Ca(a)?Dd(a):a.contextElement?Dd(a.contextElement):[],popper:Dd(l)};var b=az(cz([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(k){return k.enabled}),v(),m.update()},forceUpdate:function(){if(!p){var T=u.elements,E=T.reference,b=T.popper;if(Zx(E,b)){u.rects={reference:sz(E,rf(b),u.options.strategy==="fixed"),popper:Bb(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var k=0;k<u.orderedModifiers.length;k++){if(u.reset===!0){u.reset=!1,k=-1;continue}var D=u.orderedModifiers[k],N=D.fn,x=D.options,S=x===void 0?{}:x,C=D.name;typeof N=="function"&&(u=N({state:u,options:S,name:C,instance:m})||u)}}}},update:lz(function(){return new Promise(function(y){m.forceUpdate(),y(u)})}),destroy:function(){w(),p=!0}};if(!Zx(a,l))return m;m.setOptions(c).then(function(y){!p&&c.onFirstUpdate&&c.onFirstUpdate(y)});function v(){u.orderedModifiers.forEach(function(y){var T=y.name,E=y.options,b=E===void 0?{}:E,k=y.effect;if(typeof k=="function"){var D=k({state:u,name:T,instance:m,options:b}),N=function(){};h.push(D||N)}})}function w(){h.forEach(function(y){return y()}),h=[]}return m}}const dz=uz({defaultModifiers:[G9,X9,O9,D9,Y9,W9,tz,R9]}),hz=["enabled","placement","strategy","modifiers"];function fz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const pz={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},mz={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(i=>i.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,i=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&i==="tooltip"&&"setAttribute"in r){const s=r.getAttribute("aria-describedby");if(s&&s.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",s?`${s},${n.id}`:n.id)}}},gz=[];function vz(t,e,n={}){let{enabled:r=!0,placement:i="bottom",strategy:s="absolute",modifiers:o=gz}=n,a=fz(n,hz);const l=I.useRef(o),c=I.useRef(),u=I.useCallback(()=>{var y;(y=c.current)==null||y.update()},[]),h=I.useCallback(()=>{var y;(y=c.current)==null||y.forceUpdate()},[]),[p,m]=c9(I.useState({placement:i,update:u,forceUpdate:h,attributes:{},styles:{popper:{},arrow:{}}})),v=I.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:y})=>{const T={},E={};Object.keys(y.elements).forEach(b=>{T[b]=y.styles[b],E[b]=y.attributes[b]}),m({state:y,styles:T,attributes:E,update:u,forceUpdate:h,placement:y.placement})}}),[u,h,m]),w=I.useMemo(()=>(Od(l.current,o)||(l.current=o),l.current),[o]);return I.useEffect(()=>{!c.current||!r||c.current.setOptions({placement:i,strategy:s,modifiers:[...w,v,pz]})},[s,i,v,r,w]),I.useEffect(()=>{if(!(!r||t==null||e==null))return c.current=dz(t,e,Object.assign({},a,{placement:i,strategy:s,modifiers:[...w,mz,v]})),()=>{c.current!=null&&(c.current.destroy(),c.current=void 0,m(y=>Object.assign({},y,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),p}function Gm(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var yz=function(){},_z=yz;const wz=So(_z),eA=()=>{};function Ez(t){return t.button===0}function bz(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const Xy=t=>t&&("current"in t?t.current:t),tA={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function Tz(t,e=eA,{disabled:n,clickTrigger:r="click"}={}){const i=I.useRef(!1),s=I.useRef(!1),o=I.useCallback(c=>{const u=Xy(t);wz(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),i.current=!u||bz(c)||!Ez(c)||!!Gm(u,c.target)||s.current,s.current=!1},[t]),a=st(c=>{const u=Xy(t);u&&Gm(u,c.target)&&(s.current=!0)}),l=st(c=>{i.current||e(c)});I.useEffect(()=>{var c,u;if(n||t==null)return;const h=ef(Xy(t)),p=h.defaultView||window;let m=(c=p.event)!=null?c:(u=p.parent)==null?void 0:u.event,v=null;tA[r]&&(v=qs(h,tA[r],a,!0));const w=qs(h,r,o,!0),y=qs(h,r,E=>{if(E===m){m=void 0;return}l(E)});let T=[];return"ontouchstart"in h.documentElement&&(T=[].slice.call(h.body.children).map(E=>qs(E,"mousemove",eA))),()=>{v==null||v(),w(),y(),T.forEach(E=>E())}},[t,n,r,o,a,l])}function Iz(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function Sz(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function xz({enabled:t,enableEvents:e,placement:n,flip:r,offset:i,fixed:s,containerPadding:o,arrowElement:a,popperConfig:l={}}){var c,u,h,p,m;const v=Iz(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:s?"fixed":l.strategy,modifiers:Sz(Object.assign({},v,{eventListeners:{enabled:e,options:(c=v.eventListeners)==null?void 0:c.options},preventOverflow:Object.assign({},v.preventOverflow,{options:o?Object.assign({padding:o},(u=v.preventOverflow)==null?void 0:u.options):(h=v.preventOverflow)==null?void 0:h.options}),offset:{options:Object.assign({offset:i},(p=v.offset)==null?void 0:p.options)},arrow:Object.assign({},v.arrow,{enabled:!!a,options:Object.assign({},(m=v.arrow)==null?void 0:m.options,{element:a})}),flip:Object.assign({enabled:!!r},v.flip)}))})}const Az=["children"];function Rz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const kz=()=>{};function ED(t={}){const e=I.useContext(Xg),[n,r]=MN(),i=I.useRef(!1),{flip:s,offset:o,rootCloseEvent:a,fixed:l=!1,placement:c,popperConfig:u={},enableEventListeners:h=!0,usePopper:p=!!e}=t,m=(e==null?void 0:e.show)==null?!!t.show:e.show;m&&!i.current&&(i.current=!0);const v=N=>{e==null||e.toggle(!1,N)},{placement:w,setMenu:y,menuElement:T,toggleElement:E}=e||{},b=vz(E,T,xz({placement:c||w||"bottom-start",enabled:p,enableEvents:h??m,offset:o,flip:s,fixed:l,arrowElement:n,popperConfig:u})),k=Object.assign({ref:y||kz,"aria-labelledby":E==null?void 0:E.id},b.attributes.popper,{style:b.styles.popper}),D={show:m,placement:w,hasShown:i.current,toggle:e==null?void 0:e.toggle,popper:p?b:null,arrowProps:p?Object.assign({ref:r},b.attributes.arrow,{style:b.styles.arrow}):{}};return Tz(T,v,{clickTrigger:a,disabled:!m}),[k,D]}const Cz={usePopper:!0};function Gb(t){let{children:e}=t,n=Rz(t,Az);const[r,i]=ED(n);return f.jsx(f.Fragment,{children:e(r,i)})}Gb.displayName="DropdownMenu";Gb.defaultProps=Cz;const Km={prefix:String(Math.round(Math.random()*1e10)),current:0},bD=Et.createContext(Km),Pz=Et.createContext(!1);let Oz=!!(typeof window<"u"&&window.document&&window.document.createElement),Zy=new WeakMap;function Nz(t=!1){let e=I.useContext(bD),n=I.useRef(null);if(n.current===null&&!t){var r,i;let s=(i=Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||i===void 0||(r=i.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(s){let o=Zy.get(s);o==null?Zy.set(s,{id:e.current,state:s.memoizedState}):s.memoizedState!==o.state&&(e.current=o.id,Zy.delete(s))}n.current=++e.current}return n.current}function Dz(t){let e=I.useContext(bD);e===Km&&!Oz&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=Nz(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function jz(t){let e=Et.useId(),[n]=I.useState(Fz()),r=n?"react-aria":`react-aria${Km.prefix}`;return t||`${r}-${e}`}const TD=typeof Et.useId=="function"?jz:Dz;function Lz(){return!1}function Mz(){return!0}function Vz(t){return()=>{}}function Fz(){return typeof Et.useSyncExternalStore=="function"?Et.useSyncExternalStore(Vz,Lz,Mz):I.useContext(Pz)}const ID=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},nA=()=>{};function SD(){const t=TD(),{show:e=!1,toggle:n=nA,setToggle:r,menuElement:i}=I.useContext(Xg)||{},s=I.useCallback(a=>{n(!e,a)},[e,n]),o={id:t,ref:r||nA,onClick:s,"aria-expanded":!!e};return i&&ID(i)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function xD({children:t}){const[e,n]=SD();return f.jsx(f.Fragment,{children:t(e,n)})}xD.displayName="DropdownToggle";const $z=I.createContext(null),uo=(t,e=null)=>t!=null?String(t):e||null,Ei=$z,AD=I.createContext(null);AD.displayName="NavContext";const Kb=AD,Uz="data-rr-ui-",Bz="rrUi";function ru(t){return`${Uz}${t}`}function zz(t){return`${Bz}${t}`}const qz=["eventKey","disabled","onClick","active","as"];function Wz(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function RD({key:t,href:e,active:n,disabled:r,onClick:i}){const s=I.useContext(Ei),o=I.useContext(Kb),{activeKey:a}=o||{},l=uo(t,e),c=n==null&&t!=null?uo(a)===l:n;return[{onClick:st(h=>{r||(i==null||i(h),s&&!h.isPropagationStopped()&&s(l,h))}),"aria-disabled":r||void 0,"aria-selected":c,[ru("dropdown-item")]:""},{isActive:c}]}const kD=I.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:i,active:s,as:o=Mb}=t,a=Wz(t,qz);const[l]=RD({key:n,href:a.href,disabled:r,onClick:i,active:s});return f.jsx(o,Object.assign({},a,{ref:e},l))});kD.displayName="DropdownItem";const CD=I.createContext(nu?window:void 0);CD.Provider;function ev(){return I.useContext(CD)}function rA(){const t=dD(),e=I.useRef(null),n=I.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function sf({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:i=`* [${ru("dropdown-item")}]`,focusFirstItemOnShow:s,placement:o="bottom-start",children:a}){const l=ev(),[c,u]=uD(e,t,r),[h,p]=rA(),m=h.current,[v,w]=rA(),y=v.current,T=FN(c),E=I.useRef(null),b=I.useRef(!1),k=I.useContext(Ei),D=I.useCallback((O,j,P=j==null?void 0:j.type)=>{u(O,{originalEvent:j,source:P})},[u]),N=st((O,j)=>{n==null||n(O,j),D(!1,j,"select"),j.isPropagationStopped()||k==null||k(O,j)}),x=I.useMemo(()=>({toggle:D,placement:o,show:c,menuElement:m,toggleElement:y,setMenu:p,setToggle:w}),[D,o,c,m,y,p,w]);m&&T&&!c&&(b.current=m.contains(m.ownerDocument.activeElement));const S=st(()=>{y&&y.focus&&y.focus()}),C=st(()=>{const O=E.current;let j=s;if(j==null&&(j=h.current&&ID(h.current)?"keyboard":!1),j===!1||j==="keyboard"&&!/^key.+$/.test(O))return;const P=Oi(h.current,i)[0];P&&P.focus&&P.focus()});I.useEffect(()=>{c?C():b.current&&(b.current=!1,S())},[c,b,S,C]),I.useEffect(()=>{E.current=null});const R=(O,j)=>{if(!h.current)return null;const P=Oi(h.current,i);let ge=P.indexOf(O)+j;return ge=Math.max(0,Math.min(ge,P.length)),P[ge]};return L5(I.useCallback(()=>l.document,[l]),"keydown",O=>{var j,P;const{key:ge}=O,Re=O.target,ke=(j=h.current)==null?void 0:j.contains(Re),B=(P=v.current)==null?void 0:P.contains(Re);if(/input|textarea/i.test(Re.tagName)&&(ge===" "||ge!=="Escape"&&ke||ge==="Escape"&&Re.type==="search")||!ke&&!B||ge==="Tab"&&(!h.current||!c))return;E.current=O.type;const G={originalEvent:O,source:O.type};switch(ge){case"ArrowUp":{const J=R(Re,-1);J&&J.focus&&J.focus(),O.preventDefault();return}case"ArrowDown":if(O.preventDefault(),!c)u(!0,G);else{const J=R(Re,1);J&&J.focus&&J.focus()}return;case"Tab":Nb(Re.ownerDocument,"keyup",J=>{var fe;(J.key==="Tab"&&!J.target||!((fe=h.current)!=null&&fe.contains(J.target)))&&u(!1,G)},{once:!0});break;case"Escape":ge==="Escape"&&(O.preventDefault(),O.stopPropagation()),u(!1,G);break}}),f.jsx(Ei.Provider,{value:N,children:f.jsx(Xg.Provider,{value:x,children:a})})}sf.displayName="Dropdown";sf.Menu=Gb;sf.Toggle=xD;sf.Item=kD;const PD=I.createContext({});PD.displayName="DropdownContext";const OD=PD,ND=I.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:r="separator",...i},s)=>(e=ie(e,"dropdown-divider"),f.jsx(n,{ref:s,className:X(t,e),role:r,...i})));ND.displayName="DropdownDivider";const Hz=ND,DD=I.forwardRef(({className:t,bsPrefix:e,as:n="div",role:r="heading",...i},s)=>(e=ie(e,"dropdown-header"),f.jsx(n,{ref:s,className:X(t,e),role:r,...i})));DD.displayName="DropdownHeader";const Gz=DD,jD=I.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:i,active:s,as:o=Vb,...a},l)=>{const c=ie(t,"dropdown-item"),[u,h]=RD({key:n,href:a.href,disabled:r,onClick:i,active:s});return f.jsx(o,{...a,...u,ref:l,className:X(e,c,h.isActive&&"active",r&&"disabled")})});jD.displayName="DropdownItem";const Kz=jD,LD=I.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=ie(e,"dropdown-item-text"),f.jsx(n,{ref:i,className:X(t,e),...r})));LD.displayName="DropdownItemText";const Qz=LD,MD=I.createContext(null);MD.displayName="InputGroupContext";const Qb=MD,VD=I.createContext(null);VD.displayName="NavbarContext";const Xa=VD;function FD(t,e){return t}function $D(t,e,n){const r=n?"top-end":"top-start",i=n?"top-start":"top-end",s=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",l=n?"right-end":"left-end",c=n?"left-start":"right-start",u=n?"left-end":"right-end";let h=t?o:s;return e==="up"?h=t?i:r:e==="end"?h=t?u:c:e==="start"?h=t?l:a:e==="down-centered"?h="bottom":e==="up-centered"&&(h="top"),h}const UD=I.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:i=!0,show:s,renderOnMount:o,as:a="div",popperConfig:l,variant:c,...u},h)=>{let p=!1;const m=I.useContext(Xa),v=ie(t,"dropdown-menu"),{align:w,drop:y,isRTL:T}=I.useContext(OD);n=n||w;const E=I.useContext(Qb),b=[];if(n)if(typeof n=="object"){const O=Object.keys(n);if(O.length){const j=O[0],P=n[j];p=P==="start",b.push(`${v}-${j}-${P}`)}}else n==="end"&&(p=!0);const k=$D(p,y,T),[D,{hasShown:N,popper:x,show:S,toggle:C}]=ED({flip:i,rootCloseEvent:r,show:s,usePopper:!m&&b.length===0,offset:[0,2],popperConfig:l,placement:k});if(D.ref=Ja(FD(h),D.ref),Wm(()=>{S&&(x==null||x.update())},[S]),!N&&!o&&!E)return null;typeof a!="string"&&(D.show=S,D.close=()=>C==null?void 0:C(!1),D.align=n);let R=u.style;return x!=null&&x.placement&&(R={...u.style,...D.style},u["x-placement"]=x.placement),f.jsx(a,{...u,...D,style:R,...(b.length||m)&&{"data-bs-popper":"static"},className:X(e,v,S&&"show",p&&`${v}-end`,c&&`${v}-${c}`,...b)})});UD.displayName="DropdownMenu";const Yz=UD,BD=I.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:i=de,...s},o)=>{const a=ie(t,"dropdown-toggle"),l=I.useContext(Xg);r!==void 0&&(s.bsPrefix=r);const[c]=SD();return c.ref=Ja(c.ref,FD(o)),f.jsx(i,{className:X(n,a,e&&`${a}-split`,(l==null?void 0:l.show)&&"show"),...c,...s})});BD.displayName="DropdownToggle";const Jz=BD,zD=I.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:i,className:s,align:o="start",onSelect:a,onToggle:l,focusFirstItemOnShow:c,as:u="div",navbar:h,autoClose:p=!0,...m}=tu(t,{show:"onToggle"}),v=I.useContext(Qb),w=ie(n,"dropdown"),y=RN(),T=x=>p===!1?x==="click":p==="inside"?x!=="rootClose":p==="outside"?x!=="select":!0,E=st((x,S)=>{var C,R;!((C=S.originalEvent)==null||(R=C.target)==null)&&R.classList.contains("dropdown-toggle")&&S.source==="mousedown"||(S.originalEvent.currentTarget===document&&(S.source!=="keydown"||S.originalEvent.key==="Escape")&&(S.source="rootClose"),T(S.source)&&(l==null||l(x,S)))}),k=$D(o==="end",r,y),D=I.useMemo(()=>({align:o,drop:r,isRTL:y}),[o,r,y]),N={down:w,"down-centered":`${w}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return f.jsx(OD.Provider,{value:D,children:f.jsx(sf,{placement:k,show:i,onSelect:a,onToggle:E,focusFirstItemOnShow:c,itemSelector:`.${w}-item:not(.disabled):not(:disabled)`,children:v?m.children:f.jsx(u,{...m,ref:e,className:X(s,i&&"show",N[r])})})})});zD.displayName="Dropdown";const mp=Object.assign(zD,{Toggle:Jz,Menu:Yz,Item:Kz,ItemText:Qz,Divider:Hz,Header:Gz}),Xz={type:ce.string,tooltip:ce.bool,as:ce.elementType},Yb=I.forwardRef(({as:t="div",className:e,type:n="valid",tooltip:r=!1,...i},s)=>f.jsx(t,{...i,ref:s,className:X(e,`${n}-${r?"tooltip":"feedback"}`)}));Yb.displayName="Feedback";Yb.propTypes=Xz;const qD=Yb,Zz=I.createContext({}),Yi=Zz,WD=I.forwardRef(({id:t,bsPrefix:e,className:n,type:r="checkbox",isValid:i=!1,isInvalid:s=!1,as:o="input",...a},l)=>{const{controlId:c}=I.useContext(Yi);return e=ie(e,"form-check-input"),f.jsx(o,{...a,ref:l,type:r,id:t||c,className:X(n,e,i&&"is-valid",s&&"is-invalid")})});WD.displayName="FormCheckInput";const tv=WD,HD=I.forwardRef(({bsPrefix:t,className:e,htmlFor:n,...r},i)=>{const{controlId:s}=I.useContext(Yi);return t=ie(t,"form-check-label"),f.jsx("label",{...r,ref:i,htmlFor:n||s,className:X(e,t)})});HD.displayName="FormCheckLabel";const a0=HD,GD=I.forwardRef(({id:t,bsPrefix:e,bsSwitchPrefix:n,inline:r=!1,reverse:i=!1,disabled:s=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:u,className:h,style:p,title:m="",type:v="checkbox",label:w,children:y,as:T="input",...E},b)=>{e=ie(e,"form-check"),n=ie(n,"form-switch");const{controlId:k}=I.useContext(Yi),D=I.useMemo(()=>({controlId:t||k}),[k,t]),N=!y&&w!=null&&w!==!1||o9(y,a0),x=f.jsx(tv,{...E,type:v==="switch"?"checkbox":v,ref:b,isValid:o,isInvalid:a,disabled:s,as:T});return f.jsx(Yi.Provider,{value:D,children:f.jsx("div",{style:p,className:X(h,N&&e,r&&`${e}-inline`,i&&`${e}-reverse`,v==="switch"&&n),children:y||f.jsxs(f.Fragment,{children:[x,N&&f.jsx(a0,{title:m,children:w}),c&&f.jsx(qD,{type:u,tooltip:l,children:c})]})})})});GD.displayName="FormCheck";const Qm=Object.assign(GD,{Input:tv,Label:a0}),KD=I.forwardRef(({bsPrefix:t,type:e,size:n,htmlSize:r,id:i,className:s,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:c,as:u="input",...h},p)=>{const{controlId:m}=I.useContext(Yi);return t=ie(t,"form-control"),f.jsx(u,{...h,type:e,size:r,ref:p,readOnly:c,id:i||m,className:X(s,l?`${t}-plaintext`:t,n&&`${t}-${n}`,e==="color"&&`${t}-color`,o&&"is-valid",a&&"is-invalid")})});KD.displayName="FormControl";const e8=Object.assign(KD,{Feedback:qD}),QD=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"form-floating"),f.jsx(n,{ref:i,className:X(t,e),...r})));QD.displayName="FormFloating";const t8=QD,YD=I.forwardRef(({controlId:t,as:e="div",...n},r)=>{const i=I.useMemo(()=>({controlId:t}),[t]);return f.jsx(Yi.Provider,{value:i,children:f.jsx(e,{...n,ref:r})})});YD.displayName="FormGroup";const JD=YD,XD=I.forwardRef(({as:t="label",bsPrefix:e,column:n=!1,visuallyHidden:r=!1,className:i,htmlFor:s,...o},a)=>{const{controlId:l}=I.useContext(Yi);e=ie(e,"form-label");let c="col-form-label";typeof n=="string"&&(c=`${c} ${c}-${n}`);const u=X(i,e,r&&"visually-hidden",n&&c);return s=s||l,n?f.jsx(be,{ref:a,as:"label",className:u,htmlFor:s,...o}):f.jsx(t,{ref:a,className:u,htmlFor:s,...o})});XD.displayName="FormLabel";const n8=XD,ZD=I.forwardRef(({bsPrefix:t,className:e,id:n,...r},i)=>{const{controlId:s}=I.useContext(Yi);return t=ie(t,"form-range"),f.jsx("input",{...r,type:"range",ref:i,className:X(e,t),id:n||s})});ZD.displayName="FormRange";const r8=ZD,e2=I.forwardRef(({bsPrefix:t,size:e,htmlSize:n,className:r,isValid:i=!1,isInvalid:s=!1,id:o,...a},l)=>{const{controlId:c}=I.useContext(Yi);return t=ie(t,"form-select"),f.jsx("select",{...a,size:n,ref:l,className:X(r,t,e&&`${t}-${e}`,i&&"is-valid",s&&"is-invalid"),id:o||c})});e2.displayName="FormSelect";const i8=e2,t2=I.forwardRef(({bsPrefix:t,className:e,as:n="small",muted:r,...i},s)=>(t=ie(t,"form-text"),f.jsx(n,{...i,ref:s,className:X(e,t,r&&"text-muted")})));t2.displayName="FormText";const s8=t2,n2=I.forwardRef((t,e)=>f.jsx(Qm,{...t,ref:e,type:"switch"}));n2.displayName="Switch";const o8=Object.assign(n2,{Input:Qm.Input,Label:Qm.Label}),r2=I.forwardRef(({bsPrefix:t,className:e,children:n,controlId:r,label:i,...s},o)=>(t=ie(t,"form-floating"),f.jsxs(JD,{ref:o,className:X(e,t),controlId:r,...s,children:[n,f.jsx("label",{htmlFor:r,children:i})]})));r2.displayName="FloatingLabel";const a8=r2,l8={_ref:ce.any,validated:ce.bool,as:ce.elementType},Jb=I.forwardRef(({className:t,validated:e,as:n="form",...r},i)=>f.jsx(n,{...r,ref:i,className:X(t,e&&"was-validated")}));Jb.displayName="Form";Jb.propTypes=l8;const $=Object.assign(Jb,{Group:JD,Control:e8,Floating:t8,Check:Qm,Switch:o8,Label:n8,Text:s8,Range:r8,Select:i8,FloatingLabel:a8}),i2=I.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=ie(e,"input-group-text"),f.jsx(n,{ref:i,className:X(t,e),...r})));i2.displayName="InputGroupText";const Xb=i2,c8=t=>f.jsx(Xb,{children:f.jsx(tv,{type:"checkbox",...t})}),u8=t=>f.jsx(Xb,{children:f.jsx(tv,{type:"radio",...t})}),s2=I.forwardRef(({bsPrefix:t,size:e,hasValidation:n,className:r,as:i="div",...s},o)=>{t=ie(t,"input-group");const a=I.useMemo(()=>({}),[]);return f.jsx(Qb.Provider,{value:a,children:f.jsx(i,{ref:o,...s,className:X(r,t,e&&`${t}-${e}`,n&&"has-validation")})})});s2.displayName="InputGroup";const iA=Object.assign(s2,{Text:Xb,Radio:u8,Checkbox:c8}),d8=I.createContext(null),iu=d8,h8=["as","active","eventKey"];function f8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Zb({key:t,onClick:e,active:n,id:r,role:i,disabled:s}){const o=I.useContext(Ei),a=I.useContext(Kb),l=I.useContext(iu);let c=n;const u={role:i};if(a){!i&&a.role==="tablist"&&(u.role="tab");const h=a.getControllerId(t??null),p=a.getControlledId(t??null);u[ru("event-key")]=t,u.id=h||r,c=n==null&&t!=null?a.activeKey===t:n,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=p)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),s&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=st(h=>{s||(e==null||e(h),t!=null&&o&&!h.isPropagationStopped()&&o(t,h))}),[u,{isActive:c}]}const o2=I.forwardRef((t,e)=>{let{as:n=Mb,active:r,eventKey:i}=t,s=f8(t,h8);const[o,a]=Zb(Object.assign({key:uo(i,s.href),active:r},s));return o[ru("active")]=a.isActive,f.jsx(n,Object.assign({},s,o,{ref:e}))});o2.displayName="NavItem";const p8=o2,m8=["as","onSelect","activeKey","role","onKeyDown"];function g8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}const sA=()=>{},oA=ru("event-key"),a2=I.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:i,role:s,onKeyDown:o}=t,a=g8(t,m8);const l=dD(),c=I.useRef(!1),u=I.useContext(Ei),h=I.useContext(iu);let p,m;h&&(s=s||"tablist",i=h.activeKey,p=h.getControlledId,m=h.getControllerId);const v=I.useRef(null),w=b=>{const k=v.current;if(!k)return null;const D=Oi(k,`[${oA}]:not([aria-disabled=true])`),N=k.querySelector("[aria-selected=true]");if(!N||N!==document.activeElement)return null;const x=D.indexOf(N);if(x===-1)return null;let S=x+b;return S>=D.length&&(S=0),S<0&&(S=D.length-1),D[S]},y=(b,k)=>{b!=null&&(r==null||r(b,k),u==null||u(b,k))},T=b=>{if(o==null||o(b),!h)return;let k;switch(b.key){case"ArrowLeft":case"ArrowUp":k=w(-1);break;case"ArrowRight":case"ArrowDown":k=w(1);break;default:return}k&&(b.preventDefault(),y(k.dataset[zz("EventKey")]||null,b),c.current=!0,l())};I.useEffect(()=>{if(v.current&&c.current){const b=v.current.querySelector(`[${oA}][aria-selected=true]`);b==null||b.focus()}c.current=!1});const E=Ja(e,v);return f.jsx(Ei.Provider,{value:y,children:f.jsx(Kb.Provider,{value:{role:s,activeKey:uo(i),getControlledId:p||sA,getControllerId:m||sA},children:f.jsx(n,Object.assign({},a,{onKeyDown:T,ref:E,role:s}))})})});a2.displayName="Nav";const l2=Object.assign(a2,{Item:p8}),c2=I.forwardRef(({bsPrefix:t,active:e,disabled:n,eventKey:r,className:i,variant:s,action:o,as:a,...l},c)=>{t=ie(t,"list-group-item");const[u,h]=Zb({key:uo(r,l.href),active:e,...l}),p=st(v=>{if(n){v.preventDefault(),v.stopPropagation();return}u.onClick(v)});n&&l.tabIndex===void 0&&(l.tabIndex=-1,l["aria-disabled"]=!0);const m=a||(o?l.href?"a":"button":"div");return f.jsx(m,{ref:c,...l,...u,onClick:p,className:X(i,t,h.isActive&&"active",n&&"disabled",s&&`${t}-${s}`,o&&`${t}-action`)})});c2.displayName="ListGroupItem";const v8=c2,u2=I.forwardRef((t,e)=>{const{className:n,bsPrefix:r,variant:i,horizontal:s,numbered:o,as:a="div",...l}=tu(t,{activeKey:"onSelect"}),c=ie(r,"list-group");let u;return s&&(u=s===!0?"horizontal":`horizontal-${s}`),f.jsx(l2,{ref:e,...l,as:a,className:X(n,c,i&&`${c}-${i}`,u&&`${c}-${u}`,o&&`${c}-numbered`)})});u2.displayName="ListGroup";const d2=Object.assign(u2,{Item:v8});var gp;function aA(t){if((!gp&&gp!==0||t)&&nu){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),gp=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return gp}function e_(t){t===void 0&&(t=ef());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function y8(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const lA=ru("modal-open");class _8{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return y8(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",i=this.getElement();e.style={overflow:i.style.overflow,[r]:i.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(Ui(i,r)||"0",10)+e.scrollBarWidth}px`),i.setAttribute(lA,""),Ui(i,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(lA),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const eT=_8,t_=(t,e)=>nu?t==null?(e||ef()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function w8(t,e){const n=ev(),[r,i]=I.useState(()=>t_(t,n==null?void 0:n.document));if(!r){const s=t_(t);s&&i(s)}return I.useEffect(()=>{e&&r&&e(r)},[e,r]),I.useEffect(()=>{const s=t_(t);s!==r&&i(s)},[t,r]),r}function tT({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:i}){const s=I.useRef(null),o=I.useRef(e),a=st(n);I.useEffect(()=>{e?o.current=!0:a(s.current)},[e,a]);const l=Ja(s,t.ref),c=I.cloneElement(t,{ref:l});return e?c:i||!o.current&&r?null:c}function E8({in:t,onTransition:e}){const n=I.useRef(null),r=I.useRef(!0),i=st(e);return Wm(()=>{if(!n.current)return;let s=!1;return i({in:t,element:n.current,initial:r.current,isStale:()=>s}),()=>{s=!0}},[t,i]),Wm(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function b8({children:t,in:e,onExited:n,onEntered:r,transition:i}){const[s,o]=I.useState(!e);e&&s&&o(!1);const a=E8({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(o(!0),n==null||n(c.element)))};Promise.resolve(i(c)).then(u,h=>{throw c.in||o(!0),h})}}),l=Ja(a,t.ref);return s&&!e?null:I.cloneElement(t,{ref:l})}function cA(t,e,n){return t?f.jsx(t,Object.assign({},n)):e?f.jsx(b8,Object.assign({},n,{transition:e})):f.jsx(tT,Object.assign({},n))}function T8(t){return t.code==="Escape"||t.keyCode===27}const I8=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function S8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let n_;function x8(t){return n_||(n_=new eT({ownerDocument:t==null?void 0:t.document})),n_}function A8(t){const e=ev(),n=t||x8(e),r=I.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:I.useCallback(i=>{r.current.dialog=i},[]),setBackdropRef:I.useCallback(i=>{r.current.backdrop=i},[])})}const h2=I.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:i,style:s,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:h,runTransition:p,backdropTransition:m,runBackdropTransition:v,autoFocus:w=!0,enforceFocus:y=!0,restoreFocus:T=!0,restoreFocusOptions:E,renderDialog:b,renderBackdrop:k=Ve=>f.jsx("div",Object.assign({},Ve)),manager:D,container:N,onShow:x,onHide:S=()=>{},onExit:C,onExited:R,onExiting:O,onEnter:j,onEntering:P,onEntered:ge}=t,Re=S8(t,I8);const ke=ev(),B=w8(N),U=A8(D),G=VN(),J=FN(n),[fe,se]=I.useState(!n),me=I.useRef(null);I.useImperativeHandle(e,()=>U,[U]),nu&&!J&&n&&(me.current=e_(ke==null?void 0:ke.document)),n&&fe&&se(!1);const Ne=st(()=>{if(U.add(),Hn.current=qs(document,"keydown",Wn),Cr.current=qs(document,"focus",()=>setTimeout(Ke),!0),x&&x(),w){var Ve,Qr;const Pr=e_((Ve=(Qr=U.dialog)==null?void 0:Qr.ownerDocument)!=null?Ve:ke==null?void 0:ke.document);U.dialog&&Pr&&!Gm(U.dialog,Pr)&&(me.current=Pr,U.dialog.focus())}}),Ie=st(()=>{if(U.remove(),Hn.current==null||Hn.current(),Cr.current==null||Cr.current(),T){var Ve;(Ve=me.current)==null||Ve.focus==null||Ve.focus(E),me.current=null}});I.useEffect(()=>{!n||!B||Ne()},[n,B,Ne]),I.useEffect(()=>{fe&&Ie()},[fe,Ie]),oD(()=>{Ie()});const Ke=st(()=>{if(!y||!G()||!U.isTopModal())return;const Ve=e_(ke==null?void 0:ke.document);U.dialog&&Ve&&!Gm(U.dialog,Ve)&&U.dialog.focus()}),vt=st(Ve=>{Ve.target===Ve.currentTarget&&(c==null||c(Ve),a===!0&&S())}),Wn=st(Ve=>{l&&T8(Ve)&&U.isTopModal()&&(u==null||u(Ve),Ve.defaultPrevented||S())}),Cr=I.useRef(),Hn=I.useRef(),Gn=(...Ve)=>{se(!0),R==null||R(...Ve)};if(!B)return null;const hr=Object.assign({role:r,ref:U.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},Re,{style:s,className:i,tabIndex:-1});let fr=b?b(hr):f.jsx("div",Object.assign({},hr,{children:I.cloneElement(o,{role:"document"})}));fr=cA(h,p,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:C,onExiting:O,onExited:Gn,onEnter:j,onEntering:P,onEntered:ge,children:fr});let pr=null;return a&&(pr=k({ref:U.setBackdropRef,onClick:vt}),pr=cA(m,v,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:pr})),f.jsx(f.Fragment,{children:Ql.createPortal(f.jsxs(f.Fragment,{children:[pr,fr]}),B)})});h2.displayName="Modal";const f2=Object.assign(h2,{Manager:eT});function R8(t,e){return t.classList?!!e&&t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function k8(t,e){t.classList?t.classList.add(e):R8(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function uA(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function C8(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=uA(t.className,e):t.setAttribute("class",uA(t.className&&t.className.baseVal||"",e))}const pl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class p2 extends eT{adjustAndStore(e,n,r){const i=n.style[e];n.dataset[e]=i,Ui(n,{[e]:`${parseFloat(Ui(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],Ui(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(k8(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Oi(n,pl.FIXED_CONTENT).forEach(s=>this.adjustAndStore(r,s,e.scrollBarWidth)),Oi(n,pl.STICKY_CONTENT).forEach(s=>this.adjustAndStore(i,s,-e.scrollBarWidth)),Oi(n,pl.NAVBAR_TOGGLER).forEach(s=>this.adjustAndStore(i,s,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();C8(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",i=this.isRTL?"marginLeft":"marginRight";Oi(n,pl.FIXED_CONTENT).forEach(s=>this.restore(r,s)),Oi(n,pl.STICKY_CONTENT).forEach(s=>this.restore(i,s)),Oi(n,pl.NAVBAR_TOGGLER).forEach(s=>this.restore(i,s))}}let r_;function m2(t){return r_||(r_=new p2(t)),r_}const g2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"modal-body"),f.jsx(n,{ref:i,className:X(t,e),...r})));g2.displayName="ModalBody";const P8=g2,O8=I.createContext({onHide(){}}),nT=O8,v2=I.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:i,fullscreen:s,children:o,scrollable:a,...l},c)=>{t=ie(t,"modal");const u=`${t}-dialog`,h=typeof s=="string"?`${t}-fullscreen-${s}`:`${t}-fullscreen`;return f.jsx("div",{...l,ref:c,className:X(u,e,i&&`${t}-${i}`,r&&`${u}-centered`,a&&`${u}-scrollable`,s&&h),children:f.jsx("div",{className:X(`${t}-content`,n),children:o})})});v2.displayName="ModalDialog";const y2=v2,_2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"modal-footer"),f.jsx(n,{ref:i,className:X(t,e),...r})));_2.displayName="ModalFooter";const N8=_2,D8=I.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:i,...s},o)=>{const a=I.useContext(nT),l=st(()=>{a==null||a.onHide(),r==null||r()});return f.jsxs("div",{ref:o,...s,children:[i,n&&f.jsx(zN,{"aria-label":t,variant:e,onClick:l})]})}),w2=D8,E2=I.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=ie(t,"modal-header"),f.jsx(w2,{ref:s,...i,className:X(e,t),closeLabel:n,closeButton:r})));E2.displayName="ModalHeader";const j8=E2,L8=tf("h4"),b2=I.forwardRef(({className:t,bsPrefix:e,as:n=L8,...r},i)=>(e=ie(e,"modal-title"),f.jsx(n,{ref:i,className:X(t,e),...r})));b2.displayName="ModalTitle";const M8=b2;function V8(t){return f.jsx(ka,{...t,timeout:null})}function F8(t){return f.jsx(ka,{...t,timeout:null})}const T2=I.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:i,children:s,dialogAs:o=y2,"data-bs-theme":a,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:h=!1,animation:p=!0,backdrop:m=!0,keyboard:v=!0,onEscapeKeyDown:w,onShow:y,onHide:T,container:E,autoFocus:b=!0,enforceFocus:k=!0,restoreFocus:D=!0,restoreFocusOptions:N,onEntered:x,onExit:S,onExiting:C,onEnter:R,onEntering:O,onExited:j,backdropClassName:P,manager:ge,...Re},ke)=>{const[B,U]=I.useState({}),[G,J]=I.useState(!1),fe=I.useRef(!1),se=I.useRef(!1),me=I.useRef(null),[Ne,Ie]=MN(),Ke=Ja(ke,Ie),vt=st(T),Wn=RN();t=ie(t,"modal");const Cr=I.useMemo(()=>({onHide:vt}),[vt]);function Hn(){return ge||m2({isRTL:Wn})}function Gn(Se){if(!nu)return;const qe=Hn().getScrollbarWidth()>0,xt=Se.scrollHeight>ef(Se).documentElement.clientHeight;U({paddingRight:qe&&!xt?aA():void 0,paddingLeft:!qe&&xt?aA():void 0})}const hr=st(()=>{Ne&&Gn(Ne.dialog)});oD(()=>{i0(window,"resize",hr),me.current==null||me.current()});const fr=()=>{fe.current=!0},pr=Se=>{fe.current&&Ne&&Se.target===Ne.dialog&&(se.current=!0),fe.current=!1},Ve=()=>{J(!0),me.current=NN(Ne.dialog,()=>{J(!1)})},Qr=Se=>{Se.target===Se.currentTarget&&Ve()},Pr=Se=>{if(m==="static"){Qr(Se);return}if(se.current||Se.target!==Se.currentTarget){se.current=!1;return}T==null||T()},Iu=Se=>{v?w==null||w(Se):(Se.preventDefault(),m==="static"&&Ve())},ol=(Se,qe)=>{Se&&Gn(Se),R==null||R(Se,qe)},mr=Se=>{me.current==null||me.current(),S==null||S(Se)},Yr=(Se,qe)=>{O==null||O(Se,qe),Nb(window,"resize",hr)},Vo=Se=>{Se&&(Se.style.display=""),j==null||j(Se),i0(window,"resize",hr)},al=I.useCallback(Se=>f.jsx("div",{...Se,className:X(`${t}-backdrop`,P,!p&&"show")}),[p,P,t]),Jr={...n,...B};Jr.display="block";const ws=Se=>f.jsx("div",{role:"dialog",...Se,style:Jr,className:X(e,t,G&&`${t}-static`,!p&&"show"),onClick:m?Pr:void 0,onMouseUp:pr,"data-bs-theme":a,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:f.jsx(o,{...Re,onMouseDown:fr,className:r,contentClassName:i,children:s})});return f.jsx(nT.Provider,{value:Cr,children:f.jsx(f2,{show:h,ref:Ke,backdrop:m,container:E,keyboard:!0,autoFocus:b,enforceFocus:k,restoreFocus:D,restoreFocusOptions:N,onEscapeKeyDown:Iu,onShow:y,onHide:T,onEnter:ol,onEntering:Yr,onEntered:x,onExit:mr,onExiting:C,onExited:Vo,manager:Hn(),transition:p?V8:void 0,backdropTransition:p?F8:void 0,renderBackdrop:al,renderDialog:ws})})});T2.displayName="Modal";const ri=Object.assign(T2,{Body:P8,Header:j8,Title:M8,Footer:N8,Dialog:y2,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var dA={exports:{}},l0={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function i(o,a,l,c,u,h){var p=c||"<<anonymous>>",m=h||l;if(a[l]==null)return o?new Error("Required "+u+" `"+m+"` was not specified "+("in `"+p+"`.")):null;for(var v=arguments.length,w=Array(v>6?v-6:0),y=6;y<v;y++)w[y-6]=arguments[y];return r.apply(void 0,[a,l,p,u,m].concat(w))}var s=i.bind(null,!1);return s.isRequired=i.bind(null,!0),s}t.exports=e.default})(l0,l0.exports);var $8=l0.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var n=$8,r=i(n);function i(o){return o&&o.__esModule?o:{default:o}}function s(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function c(){for(var u=arguments.length,h=Array(u),p=0;p<u;p++)h[p]=arguments[p];var m=null;return a.forEach(function(v){if(m==null){var w=v.apply(void 0,h);w!=null&&(m=w)}}),m}return(0,r.default)(c)}t.exports=e.default})(dA,dA.exports);const I2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"nav-item"),f.jsx(n,{ref:i,className:X(t,e),...r})));I2.displayName="NavItem";const S2=I2,x2=I.forwardRef(({bsPrefix:t,className:e,as:n=Vb,active:r,eventKey:i,disabled:s=!1,...o},a)=>{t=ie(t,"nav-link");const[l,c]=Zb({key:uo(i,o.href),active:r,disabled:s,...o});return f.jsx(n,{...o,...l,ref:a,disabled:s,className:X(e,t,s&&"disabled",c.isActive&&"active")})});x2.displayName="NavLink";const A2=x2,R2=I.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:i,fill:s=!1,justify:o=!1,navbar:a,navbarScroll:l,className:c,activeKey:u,...h}=tu(t,{activeKey:"onSelect"}),p=ie(r,"nav");let m,v,w=!1;const y=I.useContext(Xa),T=I.useContext(JN);return y?(m=y.bsPrefix,w=a??!0):T&&({cardHeaderBsPrefix:v}=T),f.jsx(l2,{as:n,ref:e,activeKey:u,className:X(c,{[p]:!w,[`${m}-nav`]:w,[`${m}-nav-scroll`]:w&&l,[`${v}-${i}`]:!!v,[`${p}-${i}`]:!!i,[`${p}-fill`]:s,[`${p}-justified`]:o}),...h})});R2.displayName="Nav";const Rl=Object.assign(R2,{Item:S2,Link:A2}),k2=I.forwardRef(({bsPrefix:t,className:e,as:n,...r},i)=>{t=ie(t,"navbar-brand");const s=n||(r.href?"a":"span");return f.jsx(s,{...r,ref:i,className:X(e,t)})});k2.displayName="NavbarBrand";const U8=k2,C2=I.forwardRef(({children:t,bsPrefix:e,...n},r)=>{e=ie(e,"navbar-collapse");const i=I.useContext(Xa);return f.jsx(N5,{in:!!(i&&i.expanded),...n,children:f.jsx("div",{ref:r,className:e,children:t})})});C2.displayName="NavbarCollapse";const B8=C2,P2=I.forwardRef(({bsPrefix:t,className:e,children:n,label:r="Toggle navigation",as:i="button",onClick:s,...o},a)=>{t=ie(t,"navbar-toggler");const{onToggle:l,expanded:c}=I.useContext(Xa)||{},u=st(h=>{s&&s(h),l&&l()});return i==="button"&&(o.type="button"),f.jsx(i,{...o,ref:a,onClick:u,"aria-label":r,className:X(e,t,!c&&"collapsed"),children:n||f.jsx("span",{className:`${t}-icon`})})});P2.displayName="NavbarToggle";const z8=P2,c0=new WeakMap,hA=(t,e)=>{if(!t||!e)return;const n=c0.get(e)||new Map;c0.set(e,n);let r=n.get(t);return r||(r=e.matchMedia(t),r.refCount=0,n.set(r.media,r)),r};function q8(t,e=typeof window>"u"?void 0:window){const n=hA(t,e),[r,i]=I.useState(()=>n?n.matches:!1);return Wm(()=>{let s=hA(t,e);if(!s)return i(!1);let o=c0.get(e);const a=()=>{i(s.matches)};return s.refCount++,s.addListener(a),a(),()=>{s.removeListener(a),s.refCount--,s.refCount<=0&&(o==null||o.delete(s.media)),s=void 0}},[t]),r}function W8(t){const e=Object.keys(t);function n(a,l){return a===l?l:a?`${a} and ${l}`:l}function r(a){return e[Math.min(e.indexOf(a)+1,e.length-1)]}function i(a){const l=r(a);let c=t[l];return typeof c=="number"?c=`${c-.2}px`:c=`calc(${c} - 0.2px)`,`(max-width: ${c})`}function s(a){let l=t[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,c){let u;typeof a=="object"?(u=a,c=l,l=!0):(l=l||!0,u={[a]:l});let h=I.useMemo(()=>Object.entries(u).reduce((p,[m,v])=>((v==="up"||v===!0)&&(p=n(p,s(m))),(v==="down"||v===!0)&&(p=n(p,i(m))),p),""),[JSON.stringify(u)]);return q8(h,c)}return o}const H8=W8({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),O2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"offcanvas-body"),f.jsx(n,{ref:i,className:X(t,e),...r})));O2.displayName="OffcanvasBody";const G8=O2,K8={[$r]:"show",[Ni]:"show"},N2=I.forwardRef(({bsPrefix:t,className:e,children:n,in:r=!1,mountOnEnter:i=!1,unmountOnExit:s=!1,appear:o=!1,...a},l)=>(t=ie(t,"offcanvas"),f.jsx(jb,{ref:l,addEndListener:Db,in:r,mountOnEnter:i,unmountOnExit:s,appear:o,...a,childRef:n.ref,children:(c,u)=>I.cloneElement(n,{...u,className:X(e,n.props.className,(c===$r||c===wh)&&`${t}-toggling`,K8[c])})})));N2.displayName="OffcanvasToggling";const Q8=N2,D2=I.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...i},s)=>(t=ie(t,"offcanvas-header"),f.jsx(w2,{ref:s,...i,className:X(e,t),closeLabel:n,closeButton:r})));D2.displayName="OffcanvasHeader";const Y8=D2,J8=tf("h5"),j2=I.forwardRef(({className:t,bsPrefix:e,as:n=J8,...r},i)=>(e=ie(e,"offcanvas-title"),f.jsx(n,{ref:i,className:X(t,e),...r})));j2.displayName="OffcanvasTitle";const X8=j2;function Z8(t){return f.jsx(Q8,{...t})}function eq(t){return f.jsx(ka,{...t})}const L2=I.forwardRef(({bsPrefix:t,className:e,children:n,"aria-labelledby":r,placement:i="start",responsive:s,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:c=!1,onEscapeKeyDown:u,onShow:h,onHide:p,container:m,autoFocus:v=!0,enforceFocus:w=!0,restoreFocus:y=!0,restoreFocusOptions:T,onEntered:E,onExit:b,onExiting:k,onEnter:D,onEntering:N,onExited:x,backdropClassName:S,manager:C,renderStaticNode:R=!1,...O},j)=>{const P=I.useRef();t=ie(t,"offcanvas");const{onToggle:ge}=I.useContext(Xa)||{},[Re,ke]=I.useState(!1),B=H8(s||"xs","up");I.useEffect(()=>{ke(s?o&&!B:o)},[o,s,B]);const U=st(()=>{ge==null||ge(),p==null||p()}),G=I.useMemo(()=>({onHide:U}),[U]);function J(){return C||(c?(P.current||(P.current=new p2({handleContainerOverflow:!1})),P.current):m2())}const fe=(Ie,...Ke)=>{Ie&&(Ie.style.visibility="visible"),D==null||D(Ie,...Ke)},se=(Ie,...Ke)=>{Ie&&(Ie.style.visibility=""),x==null||x(...Ke)},me=I.useCallback(Ie=>f.jsx("div",{...Ie,className:X(`${t}-backdrop`,S)}),[S,t]),Ne=Ie=>f.jsx("div",{...Ie,...O,className:X(e,s?`${t}-${s}`:t,`${t}-${i}`),"aria-labelledby":r,children:n});return f.jsxs(f.Fragment,{children:[!Re&&(s||R)&&Ne({}),f.jsx(nT.Provider,{value:G,children:f.jsx(f2,{show:Re,ref:j,backdrop:a,container:m,keyboard:l,autoFocus:v,enforceFocus:w&&!c,restoreFocus:y,restoreFocusOptions:T,onEscapeKeyDown:u,onShow:h,onHide:U,onEnter:fe,onEntering:N,onEntered:E,onExit:b,onExiting:k,onExited:se,manager:J(),transition:Z8,backdropTransition:eq,renderBackdrop:me,renderDialog:Ne})})]})});L2.displayName="Offcanvas";const tq=Object.assign(L2,{Body:G8,Header:Y8,Title:X8}),M2=I.forwardRef((t,e)=>{const n=I.useContext(Xa);return f.jsx(tq,{ref:e,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0})});M2.displayName="NavbarOffcanvas";const nq=M2,V2=I.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},i)=>(e=ie(e,"navbar-text"),f.jsx(n,{ref:i,className:X(t,e),...r})));V2.displayName="NavbarText";const rq=V2,F2=I.forwardRef((t,e)=>{const{bsPrefix:n,expand:r=!0,variant:i="light",bg:s,fixed:o,sticky:a,className:l,as:c="nav",expanded:u,onToggle:h,onSelect:p,collapseOnSelect:m=!1,...v}=tu(t,{expanded:"onToggle"}),w=ie(n,"navbar"),y=I.useCallback((...b)=>{p==null||p(...b),m&&u&&(h==null||h(!1))},[p,m,u,h]);v.role===void 0&&c!=="nav"&&(v.role="navigation");let T=`${w}-expand`;typeof r=="string"&&(T=`${T}-${r}`);const E=I.useMemo(()=>({onToggle:()=>h==null?void 0:h(!u),bsPrefix:w,expanded:!!u,expand:r}),[w,u,r,h]);return f.jsx(Xa.Provider,{value:E,children:f.jsx(Ei.Provider,{value:y,children:f.jsx(c,{ref:e,...v,className:X(l,w,r&&T,i&&`${w}-${i}`,s&&`bg-${s}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});F2.displayName="Navbar";const vp=Object.assign(F2,{Brand:U8,Collapse:B8,Offcanvas:nq,Text:rq,Toggle:z8});function $2({animation:t,bg:e,bsPrefix:n,size:r,...i}){n=ie(n,"placeholder");const[{className:s,...o}]=aD(i);return{...o,className:X(s,t?`${n}-${t}`:n,r&&`${n}-${r}`,e&&`bg-${e}`)}}const U2=I.forwardRef((t,e)=>{const n=$2(t);return f.jsx(de,{...n,ref:e,disabled:!0,tabIndex:-1})});U2.displayName="PlaceholderButton";const iq=U2,B2=I.forwardRef(({as:t="span",...e},n)=>{const r=$2(e);return f.jsx(t,{...r,ref:n})});B2.displayName="Placeholder";const fA=Object.assign(B2,{Button:iq}),z2=I.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},i)=>{const s=ie(t,"row"),o=xN(),a=AN(),l=`${s}-cols`,c=[];return o.forEach(u=>{const h=r[u];delete r[u];let p;h!=null&&typeof h=="object"?{cols:p}=h:p=h;const m=u!==a?`-${u}`:"";p!=null&&c.push(`${l}${m}-${p}`)}),f.jsx(n,{ref:i,...r,className:X(e,s,...c)})});z2.displayName="Row";const et=z2,sq=["active","eventKey","mountOnEnter","transition","unmountOnExit","role","onEnter","onEntering","onEntered","onExit","onExiting","onExited"],oq=["activeKey","getControlledId","getControllerId"],aq=["as"];function u0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function q2(t){let{active:e,eventKey:n,mountOnEnter:r,transition:i,unmountOnExit:s,role:o="tabpanel",onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:h,onExited:p}=t,m=u0(t,sq);const v=I.useContext(iu);if(!v)return[Object.assign({},m,{role:o}),{eventKey:n,isActive:e,mountOnEnter:r,transition:i,unmountOnExit:s,onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:h,onExited:p}];const{activeKey:w,getControlledId:y,getControllerId:T}=v,E=u0(v,oq),b=uo(n);return[Object.assign({},m,{role:o,id:y(n),"aria-labelledby":T(n)}),{eventKey:n,isActive:e==null&&b!=null?uo(w)===b:e,transition:i||E.transition,mountOnEnter:r??E.mountOnEnter,unmountOnExit:s??E.unmountOnExit,onEnter:a,onEntering:l,onEntered:c,onExit:u,onExiting:h,onExited:p}]}const W2=I.forwardRef((t,e)=>{let{as:n="div"}=t,r=u0(t,aq);const[i,{isActive:s,onEnter:o,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:h,mountOnEnter:p,unmountOnExit:m,transition:v=tT}]=q2(r);return f.jsx(iu.Provider,{value:null,children:f.jsx(Ei.Provider,{value:null,children:f.jsx(v,{in:s,onEnter:o,onEntering:a,onEntered:l,onExit:c,onExiting:u,onExited:h,mountOnEnter:p,unmountOnExit:m,children:f.jsx(n,Object.assign({},i,{ref:e,hidden:!s,"aria-hidden":!s}))})})})});W2.displayName="TabPanel";const H2=t=>{const{id:e,generateChildId:n,onSelect:r,activeKey:i,defaultActiveKey:s,transition:o,mountOnEnter:a,unmountOnExit:l,children:c}=t,[u,h]=uD(i,s,r),p=TD(e),m=I.useMemo(()=>n||((w,y)=>p?`${p}-${y}-${w}`:null),[p,n]),v=I.useMemo(()=>({onSelect:h,activeKey:u,transition:o,mountOnEnter:a||!1,unmountOnExit:l||!1,getControlledId:w=>m(w,"tabpane"),getControllerId:w=>m(w,"tab")}),[h,u,o,a,l,m]);return f.jsx(iu.Provider,{value:v,children:f.jsx(Ei.Provider,{value:h||null,children:c})})};H2.Panel=W2;const G2=H2;function rT(t){return typeof t=="boolean"?t?ka:tT:t}const K2=({transition:t,...e})=>f.jsx(G2,{...e,transition:rT(t)});K2.displayName="TabContainer";const lq=K2,Q2=I.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},i)=>(e=ie(e,"tab-content"),f.jsx(n,{ref:i,className:X(t,e),...r})));Q2.displayName="TabContent";const Y2=Q2,J2=I.forwardRef(({bsPrefix:t,transition:e,...n},r)=>{const[{className:i,as:s="div",...o},{isActive:a,onEnter:l,onEntering:c,onEntered:u,onExit:h,onExiting:p,onExited:m,mountOnEnter:v,unmountOnExit:w,transition:y=ka}]=q2({...n,transition:rT(e)}),T=ie(t,"tab-pane");return f.jsx(iu.Provider,{value:null,children:f.jsx(Ei.Provider,{value:null,children:f.jsx(y,{in:a,onEnter:l,onEntering:c,onEntered:u,onExit:h,onExiting:p,onExited:m,mountOnEnter:v,unmountOnExit:w,children:f.jsx(s,{...o,ref:r,className:X(i,T,a&&"active")})})})})});J2.displayName="TabPane";const X2=J2,cq={eventKey:ce.oneOfType([ce.string,ce.number]),title:ce.node.isRequired,disabled:ce.bool,tabClassName:ce.string,tabAttrs:ce.object},Z2=()=>{throw new Error("ReactBootstrap: The `Tab` component is not meant to be rendered! It's an abstract component that is only valid as a direct Child of the `Tabs` Component. For custom tabs components use TabPane and TabsContainer directly")};Z2.propTypes=cq;const i_=Object.assign(Z2,{Container:lq,Content:Y2,Pane:X2}),uq=I.forwardRef(({bsPrefix:t,className:e,striped:n,bordered:r,borderless:i,hover:s,size:o,variant:a,responsive:l,...c},u)=>{const h=ie(t,"table"),p=X(e,h,a&&`${h}-${a}`,o&&`${h}-${o}`,n&&`${h}-${typeof n=="string"?`striped-${n}`:"striped"}`,r&&`${h}-bordered`,i&&`${h}-borderless`,s&&`${h}-hover`),m=f.jsx("table",{...c,className:p,ref:u});if(l){let v=`${h}-responsive`;return typeof l=="string"&&(v=`${v}-${l}`),f.jsx("div",{className:v,children:m})}return m}),nv=uq;function dq(t){let e;return s9(t,n=>{e==null&&(e=n.props.eventKey)}),e}function hq(t){const{title:e,eventKey:n,disabled:r,tabClassName:i,tabAttrs:s,id:o}=t.props;return e==null?null:f.jsx(S2,{as:"li",role:"presentation",children:f.jsx(A2,{as:"button",type:"button",eventKey:n,disabled:r,id:o,className:i,...s,children:e})})}const ej=t=>{const{id:e,onSelect:n,transition:r,mountOnEnter:i=!1,unmountOnExit:s=!1,variant:o="tabs",children:a,activeKey:l=dq(a),...c}=tu(t,{activeKey:"onSelect"});return f.jsxs(G2,{id:e,activeKey:l,onSelect:n,transition:rT(r),mountOnEnter:i,unmountOnExit:s,children:[f.jsx(Rl,{...c,role:"tablist",as:"ul",variant:o,children:Bx(a,hq)}),f.jsx(Y2,{children:Bx(a,u=>{const h={...u.props};return delete h.title,delete h.disabled,delete h.tabClassName,delete h.tabAttrs,f.jsx(X2,{...h})})})]})};ej.displayName="Tabs";const fq=ej;function pq(){return f.jsx(On,{fluid:!0,className:"d-flex align-items-center justify-content-center vh-100 text-center",children:f.jsx(et,{children:f.jsxs(be,{children:[f.jsx("h1",{children:"Oops something went wrong!"}),f.jsx("h3",{children:"Page not found"}),f.jsx(dt,{to:"/",className:"fs-5",children:"Go back to Home"})]})})})}function rv(){throw new Error("Cycle detected")}var mq=Symbol.for("preact-signals");function iT(){if(oc>1)oc--;else{for(var t,e=!1;jd!==void 0;){var n=jd;for(jd=void 0,d0++;n!==void 0;){var r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&rj(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=r}}if(d0=0,oc--,e)throw t}}var _t=void 0,jd=void 0,oc=0,d0=0,Ym=0;function tj(t){if(_t!==void 0){var e=t.n;if(e===void 0||e.t!==_t)return e={i:0,S:t,p:_t.s,n:void 0,t:_t,e:void 0,x:void 0,r:e},_t.s!==void 0&&(_t.s.n=e),_t.s=e,t.n=e,32&_t.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=_t.s,e.n=void 0,_t.s.n=e,_t.s=e),e}}function ln(t){this.v=t,this.i=0,this.n=void 0,this.t=void 0}ln.prototype.brand=mq;ln.prototype.h=function(){return!0};ln.prototype.S=function(t){this.t!==t&&t.e===void 0&&(t.x=this.t,this.t!==void 0&&(this.t.e=t),this.t=t)};ln.prototype.U=function(t){if(this.t!==void 0){var e=t.e,n=t.x;e!==void 0&&(e.x=n,t.e=void 0),n!==void 0&&(n.e=e,t.x=void 0),t===this.t&&(this.t=n)}};ln.prototype.subscribe=function(t){var e=this;return aj(function(){var n=e.value,r=32&this.f;this.f&=-33;try{t(n)}finally{this.f|=r}})};ln.prototype.valueOf=function(){return this.value};ln.prototype.toString=function(){return this.value+""};ln.prototype.toJSON=function(){return this.value};ln.prototype.peek=function(){return this.v};Object.defineProperty(ln.prototype,"value",{get:function(){var t=tj(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(_t instanceof Za&&function(){throw new Error("Computed cannot have side-effects")}(),t!==this.v){d0>100&&rv(),this.v=t,this.i++,Ym++,oc++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{iT()}}}});function nj(t){return new ln(t)}function rj(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function ij(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function sj(t){for(var e=t.s,n=void 0;e!==void 0;){var r=e.p;e.i===-1?(e.S.U(e),r!==void 0&&(r.n=e.n),e.n!==void 0&&(e.n.p=r)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=r}t.s=n}function Za(t){ln.call(this,void 0),this.x=t,this.s=void 0,this.g=Ym-1,this.f=4}(Za.prototype=new ln).h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ym))return!0;if(this.g=Ym,this.f|=1,this.i>0&&!rj(this))return this.f&=-2,!0;var t=_t;try{ij(this),_t=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return _t=t,sj(this),this.f&=-2,!0};Za.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}ln.prototype.S.call(this,t)};Za.prototype.U=function(t){if(this.t!==void 0&&(ln.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};Za.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Za.prototype.peek=function(){if(this.h()||rv(),16&this.f)throw this.v;return this.v};Object.defineProperty(Za.prototype,"value",{get:function(){1&this.f&&rv();var t=tj(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function oj(t){var e=t.u;if(t.u=void 0,typeof e=="function"){oc++;var n=_t;_t=void 0;try{e()}catch(r){throw t.f&=-2,t.f|=8,sT(t),r}finally{_t=n,iT()}}}function sT(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,oj(t)}function gq(t){if(_t!==this)throw new Error("Out-of-order effect");sj(this),_t=t,this.f&=-2,8&this.f&&sT(this),iT()}function of(t){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32}of.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};of.prototype.S=function(){1&this.f&&rv(),this.f|=1,this.f&=-9,oj(this),ij(this),oc++;var t=_t;return _t=this,gq.bind(this,t)};of.prototype.N=function(){2&this.f||(this.f|=2,this.o=jd,jd=this)};of.prototype.d=function(){this.f|=8,1&this.f||sT(this)};function aj(t){var e=new of(t);try{e.c()}catch(n){throw e.d(),n}return e.d.bind(e)}var lj={exports:{}},cj={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rc=I;function vq(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yq=typeof Object.is=="function"?Object.is:vq,_q=Rc.useState,wq=Rc.useEffect,Eq=Rc.useLayoutEffect,bq=Rc.useDebugValue;function Tq(t,e){var n=e(),r=_q({inst:{value:n,getSnapshot:e}}),i=r[0].inst,s=r[1];return Eq(function(){i.value=n,i.getSnapshot=e,s_(i)&&s({inst:i})},[t,n,e]),wq(function(){return s_(i)&&s({inst:i}),t(function(){s_(i)&&s({inst:i})})},[t]),bq(n),n}function s_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!yq(t,n)}catch{return!0}}function Iq(t,e){return e()}var Sq=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Iq:Tq;cj.useSyncExternalStore=Rc.useSyncExternalStore!==void 0?Rc.useSyncExternalStore:Sq;lj.exports=cj;var xq=lj.exports,uj={exports:{}},oT={};/**
 * @license React
 * react-jsx-dev-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aq=Symbol.for("react.fragment");oT.Fragment=Aq;oT.jsxDEV=void 0;uj.exports=oT;var Rq=uj.exports;const kq=So(Rq);var Ku=null,Qu=!1,yp=null,pA=new Map;function mA(t){if(!t)return 1;var e,n=pA.get(t);if(n!==void 0)return n;var r=t.useCallback.toString();if(t.useReducer===t.useEffect)e=1;else if(t.useEffect===t.useImperativeHandle)e=32;else if(/Invalid/.test(r))e=2;else if(/updateCallback/.test(r)||/\[0\]/.test(r)&&/\[1\]/.test(r)){var i=t.useReducer.toString();/rerenderReducer/.test(i)||/return\s*\[\w+,/.test(i)?e=16:e=8}else e=4;return pA.set(t,e),e}var Cq=Symbol.for("react.element");function zo(t){return typeof t!="function"?t:function(e,n){if(typeof e=="string"&&n)for(var r in n){var i=n[r];r!=="children"&&i instanceof ln&&(n[r]=i.value)}return t.call.apply(t,[t,e,n].concat([].slice.call(arguments,2)))}}var ta,o_,Pq=Symbol.dispose||Symbol.for("Symbol.dispose");function a_(t,e){var n=e.effect.S();return ta=e,Oq.bind(e,t,n)}function Oq(t,e){e(),ta=t}var Nq=Promise.prototype.then.bind(Promise.resolve());function h0(t){t===void 0&&(t=0),function(){o_||(o_=Nq(function(){var r;o_=void 0,(r=ta)==null||r.f()}))}();var e=I.useRef();e.current==null&&(e.current=function(r){var i,s,o,a,l=0,c=aj(function(){s=this});return s.c=function(){l=l+1|0,a&&a()},(i={u:r,effect:s,subscribe:function(u){return a=u,function(){l=l+1|0,a=void 0,c()}},getSnapshot:function(){return l},S:function(){if(ta!=null){var u=ta.u,h=this.u;u==0&&h==0||u==0&&h==1?(ta.f(),o=a_(void 0,this)):u==1&&h==0||u==2&&h==0||(o=a_(ta,this))}else o=a_(void 0,this)},f:function(){o==null||o(),o=void 0}})[Pq]=function(){this.f()},i}(t));var n=e.current;return xq.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getSnapshot),n.S(),n}Object.defineProperties(ln.prototype,{$$typeof:{configurable:!0,value:Cq},type:{configurable:!0,value:function(t){var e=t.data,n=h0(1);try{return e.value}finally{n.f()}}},props:{configurable:!0,get:function(){return{data:this}}},ref:{configurable:!0,value:null}});(function(){Object.defineProperty(I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher,"current",{get:function(){return yp},set:function(t){if(Qu)yp=t;else{var e=mA(yp),n=mA(t);if(yp=t,function(s,o){return 1&s&&28&o?!0:(2&s||2&o,!1)}(e,n))Qu=!0,Ku=h0(1),Qu=!1;else if(function(s,o){return!!(28&s&&16&o)}(e,n)){var r;(r=Ku)==null||r.f(),Qu=!0,Ku=h0(1),Qu=!1}else if(function(s,o){return!!(28&s&&1&o)}(e,n)){var i;(i=Ku)==null||i.f(),Ku=null}}}}),function(){var t=YU,e=kq;Et.createElement=zo(Et.createElement),e.jsx&&(e.jsx=zo(e.jsx)),t.jsx&&(t.jsx=zo(t.jsx)),e.jsxs&&(e.jsxs=zo(e.jsxs)),t.jsxs&&(t.jsxs=zo(t.jsxs)),e.jsxDEV&&(e.jsxDEV=zo(e.jsxDEV)),t.jsxDEV&&(t.jsxDEV=zo(t.jsxDEV))}()})();const l_=(t,e)=>{if(t.previousValue=t.value,!t)throw new Error("Signal is not defined");return Array.isArray(t.value)?t.value=[...e]:typeof t.value=="object"?t.value={...t.value,...e}:t.value=e,nj},as=t=>{const e=nj(t);return e.previousState=null,e.update=n=>l_(e,n),e.reset=()=>{e.value=t},e.loadingStart=()=>{l_(e,{isLoading:!0})},e.loadingEnd=()=>{l_(e,{isLoading:!1})},e};as({activeTab:"dash"});as();as();as();as();as();as();const ur=as,gn=ur({isLoading:!0,isSignedIn:!1});ur({});const aT=ur({}),Jm=ur({});ur({});ur({});const iv=ur({});ur({page:1});const rt=ur({}),Dq=()=>{const t=Gr();return I.useEffect(()=>{gn.value.isLoading||(gn.value.isSignedIn?t("/admin"):t("/login"))},[gn.value.isLoading,gn.value.isSignedIn,t]),null},jq=()=>gn.value.isSignedIn&&!gn.value.isLoading&&!window.location.pathname.startsWith("/embed")?f.jsx(bN,{to:"/admin"}):f.jsx(Ob,{}),ls=({message:t="",className:e})=>f.jsx("div",{className:e,children:f.jsx("h4",{className:"mt-16",children:t??"Loading..."})});/*!
 * Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2022 Fonticons, Inc.
 */function gA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gA(Object(n),!0).forEach(function(r){Vq(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Xm(t){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xm(t)}function Lq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vA(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mq(t,e,n){return e&&vA(t.prototype,e),n&&vA(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Vq(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lT(t,e){return $q(t)||Bq(t,e)||dj(t,e)||qq()}function sv(t){return Fq(t)||Uq(t)||dj(t)||zq()}function Fq(t){if(Array.isArray(t))return f0(t)}function $q(t){if(Array.isArray(t))return t}function Uq(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Bq(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],i=!0,s=!1,o,a;try{for(n=n.call(t);!(i=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));i=!0);}catch(l){s=!0,a=l}finally{try{!i&&n.return!=null&&n.return()}finally{if(s)throw a}}return r}}function dj(t,e){if(t){if(typeof t=="string")return f0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f0(t,e)}}function f0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zq(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qq(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var yA=function(){},cT={},hj={},fj=null,pj={mark:yA,measure:yA};try{typeof window<"u"&&(cT=window),typeof document<"u"&&(hj=document),typeof MutationObserver<"u"&&(fj=MutationObserver),typeof performance<"u"&&(pj=performance)}catch{}var Wq=cT.navigator||{},_A=Wq.userAgent,wA=_A===void 0?"":_A,ho=cT,Ze=hj,EA=fj,_p=pj;ho.document;var cs=!!Ze.documentElement&&!!Ze.head&&typeof Ze.addEventListener=="function"&&typeof Ze.createElement=="function",mj=~wA.indexOf("MSIE")||~wA.indexOf("Trident/"),Ji="___FONT_AWESOME___",p0=16,gj="fa",vj="svg-inline--fa",Pa="data-fa-i2svg",m0="data-fa-pseudo-element",Hq="data-fa-pseudo-element-pending",uT="data-prefix",dT="data-icon",bA="fontawesome-i2svg",Gq="async",Kq=["HTML","HEAD","STYLE","SCRIPT"],yj=function(){try{return!0}catch{return!1}}(),hT={fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit",fa:"solid"},Zm={solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"},_j={fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},Qq={"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},Yq=/fa[srltdbk\-\ ]/,wj="fa-layers-text",Jq=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Kit)?.*/i,Xq={900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},Ej=[1,2,3,4,5,6,7,8,9,10],Zq=Ej.concat([11,12,13,14,15,16,17,18,19,20]),eW=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],ha={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},tW=[].concat(sv(Object.keys(Zm)),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",ha.GROUP,ha.SWAP_OPACITY,ha.PRIMARY,ha.SECONDARY]).concat(Ej.map(function(t){return"".concat(t,"x")})).concat(Zq.map(function(t){return"w-".concat(t)})),bj=ho.FontAwesomeConfig||{};function nW(t){var e=Ze.querySelector("script["+t+"]");if(e)return e.getAttribute(t)}function rW(t){return t===""?!0:t==="false"?!1:t==="true"?!0:t}if(Ze&&typeof Ze.querySelector=="function"){var iW=[["data-family-prefix","familyPrefix"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];iW.forEach(function(t){var e=lT(t,2),n=e[0],r=e[1],i=rW(nW(n));i!=null&&(bj[r]=i)})}var sW={familyPrefix:gj,styleDefault:"solid",replacementClass:vj,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},Ld=ee(ee({},sW),bj);Ld.autoReplaceSvg||(Ld.observeMutations=!1);var he={};Object.keys(Ld).forEach(function(t){Object.defineProperty(he,t,{enumerable:!0,set:function(n){Ld[t]=n,em.forEach(function(r){return r(he)})},get:function(){return Ld[t]}})});ho.FontAwesomeConfig=he;var em=[];function oW(t){return em.push(t),function(){em.splice(em.indexOf(t),1)}}var Ss=p0,ci={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function aW(t){if(!(!t||!cs)){var e=Ze.createElement("style");e.setAttribute("type","text/css"),e.innerHTML=t;for(var n=Ze.head.childNodes,r=null,i=n.length-1;i>-1;i--){var s=n[i],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(r=s)}return Ze.head.insertBefore(e,r),t}}var lW="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function Th(){for(var t=12,e="";t-- >0;)e+=lW[Math.random()*62|0];return e}function su(t){for(var e=[],n=(t||[]).length>>>0;n--;)e[n]=t[n];return e}function fT(t){return t.classList?su(t.classList):(t.getAttribute("class")||"").split(" ").filter(function(e){return e})}function Tj(t){return"".concat(t).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function cW(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,'="').concat(Tj(t[n]),'" ')},"").trim()}function ov(t){return Object.keys(t||{}).reduce(function(e,n){return e+"".concat(n,": ").concat(t[n].trim(),";")},"")}function pT(t){return t.size!==ci.size||t.x!==ci.x||t.y!==ci.y||t.rotate!==ci.rotate||t.flipX||t.flipY}function uW(t){var e=t.transform,n=t.containerWidth,r=t.iconWidth,i={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(e.x*32,", ").concat(e.y*32,") "),o="scale(".concat(e.size/16*(e.flipX?-1:1),", ").concat(e.size/16*(e.flipY?-1:1),") "),a="rotate(".concat(e.rotate," 0 0)"),l={transform:"".concat(s," ").concat(o," ").concat(a)},c={transform:"translate(".concat(r/2*-1," -256)")};return{outer:i,inner:l,path:c}}function dW(t){var e=t.transform,n=t.width,r=n===void 0?p0:n,i=t.height,s=i===void 0?p0:i,o=t.startCentered,a=o===void 0?!1:o,l="";return a&&mj?l+="translate(".concat(e.x/Ss-r/2,"em, ").concat(e.y/Ss-s/2,"em) "):a?l+="translate(calc(-50% + ".concat(e.x/Ss,"em), calc(-50% + ").concat(e.y/Ss,"em)) "):l+="translate(".concat(e.x/Ss,"em, ").concat(e.y/Ss,"em) "),l+="scale(".concat(e.size/Ss*(e.flipX?-1:1),", ").concat(e.size/Ss*(e.flipY?-1:1),") "),l+="rotate(".concat(e.rotate,"deg) "),l}var hW=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0);
          animation-delay: var(--fa-animation-delay, 0);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    transition-delay: 0s;
    transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function Ij(){var t=gj,e=vj,n=he.familyPrefix,r=he.replacementClass,i=hW;if(n!==t||r!==e){var s=new RegExp("\\.".concat(t,"\\-"),"g"),o=new RegExp("\\--".concat(t,"\\-"),"g"),a=new RegExp("\\.".concat(e),"g");i=i.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(r))}return i}var TA=!1;function c_(){he.autoAddCss&&!TA&&(aW(Ij()),TA=!0)}var fW={mixout:function(){return{dom:{css:Ij,insertCss:c_}}},hooks:function(){return{beforeDOMElementCreation:function(){c_()},beforeI2svg:function(){c_()}}}},Xi=ho||{};Xi[Ji]||(Xi[Ji]={});Xi[Ji].styles||(Xi[Ji].styles={});Xi[Ji].hooks||(Xi[Ji].hooks={});Xi[Ji].shims||(Xi[Ji].shims=[]);var Ur=Xi[Ji],Sj=[],pW=function t(){Ze.removeEventListener("DOMContentLoaded",t),eg=1,Sj.map(function(e){return e()})},eg=!1;cs&&(eg=(Ze.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(Ze.readyState),eg||Ze.addEventListener("DOMContentLoaded",pW));function mW(t){cs&&(eg?setTimeout(t,0):Sj.push(t))}function af(t){var e=t.tag,n=t.attributes,r=n===void 0?{}:n,i=t.children,s=i===void 0?[]:i;return typeof t=="string"?Tj(t):"<".concat(e," ").concat(cW(r),">").concat(s.map(af).join(""),"</").concat(e,">")}function IA(t,e,n){if(t&&t[e]&&t[e][n])return{prefix:e,iconName:n,icon:t[e][n]}}var gW=function(e,n){return function(r,i,s,o){return e.call(n,r,i,s,o)}},u_=function(e,n,r,i){var s=Object.keys(e),o=s.length,a=i!==void 0?gW(n,i):n,l,c,u;for(r===void 0?(l=1,u=e[s[0]]):(l=0,u=r);l<o;l++)c=s[l],u=a(u,e[c],c,e);return u};function vW(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var s=t.charCodeAt(n++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),n--)}else e.push(i)}return e}function g0(t){var e=vW(t);return e.length===1?e[0].toString(16):null}function yW(t,e){var n=t.length,r=t.charCodeAt(e),i;return r>=55296&&r<=56319&&n>e+1&&(i=t.charCodeAt(e+1),i>=56320&&i<=57343)?(r-55296)*1024+i-56320+65536:r}function SA(t){return Object.keys(t).reduce(function(e,n){var r=t[n],i=!!r.icon;return i?e[r.iconName]=r.icon:e[n]=r,e},{})}function v0(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.skipHooks,i=r===void 0?!1:r,s=SA(e);typeof Ur.hooks.addPack=="function"&&!i?Ur.hooks.addPack(t,SA(e)):Ur.styles[t]=ee(ee({},Ur.styles[t]||{}),s),t==="fas"&&v0("fa",e)}var Md=Ur.styles,_W=Ur.shims,wW=Object.values(_j),mT=null,xj={},Aj={},Rj={},kj={},Cj={},EW=Object.keys(hT);function bW(t){return~tW.indexOf(t)}function TW(t,e){var n=e.split("-"),r=n[0],i=n.slice(1).join("-");return r===t&&i!==""&&!bW(i)?i:null}var Pj=function(){var e=function(s){return u_(Md,function(o,a,l){return o[l]=u_(a,s,{}),o},{})};xj=e(function(i,s,o){if(s[3]&&(i[s[3]]=o),s[2]){var a=s[2].filter(function(l){return typeof l=="number"});a.forEach(function(l){i[l.toString(16)]=o})}return i}),Aj=e(function(i,s,o){if(i[o]=o,s[2]){var a=s[2].filter(function(l){return typeof l=="string"});a.forEach(function(l){i[l]=o})}return i}),Cj=e(function(i,s,o){var a=s[2];return i[o]=o,a.forEach(function(l){i[l]=o}),i});var n="far"in Md||he.autoFetchSvg,r=u_(_W,function(i,s){var o=s[0],a=s[1],l=s[2];return a==="far"&&!n&&(a="fas"),typeof o=="string"&&(i.names[o]={prefix:a,iconName:l}),typeof o=="number"&&(i.unicodes[o.toString(16)]={prefix:a,iconName:l}),i},{names:{},unicodes:{}});Rj=r.names,kj=r.unicodes,mT=av(he.styleDefault)};oW(function(t){mT=av(t.styleDefault)});Pj();function gT(t,e){return(xj[t]||{})[e]}function IW(t,e){return(Aj[t]||{})[e]}function Yl(t,e){return(Cj[t]||{})[e]}function Oj(t){return Rj[t]||{prefix:null,iconName:null}}function SW(t){var e=kj[t],n=gT("fas",t);return e||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}function fo(){return mT}var vT=function(){return{prefix:null,iconName:null,rest:[]}};function av(t){var e=hT[t],n=Zm[t]||Zm[e],r=t in Ur.styles?t:null;return n||r||null}function lv(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.skipLookups,r=n===void 0?!1:n,i=null,s=t.reduce(function(o,a){var l=TW(he.familyPrefix,a);if(Md[a]?(a=wW.includes(a)?Qq[a]:a,i=a,o.prefix=a):EW.indexOf(a)>-1?(i=a,o.prefix=av(a)):l?o.iconName=l:a!==he.replacementClass&&o.rest.push(a),!r&&o.prefix&&o.iconName){var c=i==="fa"?Oj(o.iconName):{},u=Yl(o.prefix,o.iconName);c.prefix&&(i=null),o.iconName=c.iconName||u||o.iconName,o.prefix=c.prefix||o.prefix,o.prefix==="far"&&!Md.far&&Md.fas&&!he.autoFetchSvg&&(o.prefix="fas")}return o},vT());return(s.prefix==="fa"||i==="fa")&&(s.prefix=fo()||"fas"),s}var xW=function(){function t(){Lq(this,t),this.definitions={}}return Mq(t,[{key:"add",value:function(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var o=i.reduce(this._pullDefinitions,{});Object.keys(o).forEach(function(a){n.definitions[a]=ee(ee({},n.definitions[a]||{}),o[a]),v0(a,o[a]);var l=_j[a];l&&v0(l,o[a]),Pj()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(n,r){var i=r.prefix&&r.iconName&&r.icon?{0:r}:r;return Object.keys(i).map(function(s){var o=i[s],a=o.prefix,l=o.iconName,c=o.icon,u=c[2];n[a]||(n[a]={}),u.length>0&&u.forEach(function(h){typeof h=="string"&&(n[a][h]=c)}),n[a][l]=c}),n}}]),t}(),xA=[],Jl={},ac={},AW=Object.keys(ac);function RW(t,e){var n=e.mixoutsTo;return xA=t,Jl={},Object.keys(ac).forEach(function(r){AW.indexOf(r)===-1&&delete ac[r]}),xA.forEach(function(r){var i=r.mixout?r.mixout():{};if(Object.keys(i).forEach(function(o){typeof i[o]=="function"&&(n[o]=i[o]),Xm(i[o])==="object"&&Object.keys(i[o]).forEach(function(a){n[o]||(n[o]={}),n[o][a]=i[o][a]})}),r.hooks){var s=r.hooks();Object.keys(s).forEach(function(o){Jl[o]||(Jl[o]=[]),Jl[o].push(s[o])})}r.provides&&r.provides(ac)}),n}function y0(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var s=Jl[t]||[];return s.forEach(function(o){e=o.apply(null,[e].concat(r))}),e}function Oa(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=Jl[t]||[];i.forEach(function(s){s.apply(null,n)})}function Zi(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return ac[t]?ac[t].apply(null,e):void 0}function _0(t){t.prefix==="fa"&&(t.prefix="fas");var e=t.iconName,n=t.prefix||fo();if(e)return e=Yl(n,e)||e,IA(Nj.definitions,n,e)||IA(Ur.styles,n,e)}var Nj=new xW,kW=function(){he.autoReplaceSvg=!1,he.observeMutations=!1,Oa("noAuto")},CW={i2svg:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return cs?(Oa("beforeI2svg",e),Zi("pseudoElements2svg",e),Zi("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot;he.autoReplaceSvg===!1&&(he.autoReplaceSvg=!0),he.observeMutations=!0,mW(function(){OW({autoReplaceSvgRoot:n}),Oa("watch",e)})}},PW={icon:function(e){if(e===null)return null;if(Xm(e)==="object"&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:Yl(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&e.length===2){var n=e[1].indexOf("fa-")===0?e[1].slice(3):e[1],r=av(e[0]);return{prefix:r,iconName:Yl(r,n)||n}}if(typeof e=="string"&&(e.indexOf("".concat(he.familyPrefix,"-"))>-1||e.match(Yq))){var i=lv(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||fo(),iconName:Yl(i.prefix,i.iconName)||i.iconName}}if(typeof e=="string"){var s=fo();return{prefix:s,iconName:Yl(s,e)||e}}}},dr={noAuto:kW,config:he,dom:CW,parse:PW,library:Nj,findIconDefinition:_0,toHtml:af},OW=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.autoReplaceSvgRoot,r=n===void 0?Ze:n;(Object.keys(Ur.styles).length>0||he.autoFetchSvg)&&cs&&he.autoReplaceSvg&&dr.dom.i2svg({node:r})};function cv(t,e){return Object.defineProperty(t,"abstract",{get:e}),Object.defineProperty(t,"html",{get:function(){return t.abstract.map(function(r){return af(r)})}}),Object.defineProperty(t,"node",{get:function(){if(cs){var r=Ze.createElement("div");return r.innerHTML=t.html,r.children}}}),t}function NW(t){var e=t.children,n=t.main,r=t.mask,i=t.attributes,s=t.styles,o=t.transform;if(pT(o)&&n.found&&!r.found){var a=n.width,l=n.height,c={x:a/l/2,y:.5};i.style=ov(ee(ee({},s),{},{"transform-origin":"".concat(c.x+o.x/16,"em ").concat(c.y+o.y/16,"em")}))}return[{tag:"svg",attributes:i,children:e}]}function DW(t){var e=t.prefix,n=t.iconName,r=t.children,i=t.attributes,s=t.symbol,o=s===!0?"".concat(e,"-").concat(he.familyPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:ee(ee({},i),{},{id:o}),children:r}]}]}function yT(t){var e=t.icons,n=e.main,r=e.mask,i=t.prefix,s=t.iconName,o=t.transform,a=t.symbol,l=t.title,c=t.maskId,u=t.titleId,h=t.extra,p=t.watchable,m=p===void 0?!1:p,v=r.found?r:n,w=v.width,y=v.height,T=i==="fak",E=[he.replacementClass,s?"".concat(he.familyPrefix,"-").concat(s):""].filter(function(C){return h.classes.indexOf(C)===-1}).filter(function(C){return C!==""||!!C}).concat(h.classes).join(" "),b={children:[],attributes:ee(ee({},h.attributes),{},{"data-prefix":i,"data-icon":s,class:E,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(w," ").concat(y)})},k=T&&!~h.classes.indexOf("fa-fw")?{width:"".concat(w/y*16*.0625,"em")}:{};m&&(b.attributes[Pa]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||Th())},children:[l]}),delete b.attributes.title);var D=ee(ee({},b),{},{prefix:i,iconName:s,main:n,mask:r,maskId:c,transform:o,symbol:a,styles:ee(ee({},k),h.styles)}),N=r.found&&n.found?Zi("generateAbstractMask",D)||{children:[],attributes:{}}:Zi("generateAbstractIcon",D)||{children:[],attributes:{}},x=N.children,S=N.attributes;return D.children=x,D.attributes=S,a?DW(D):NW(D)}function AA(t){var e=t.content,n=t.width,r=t.height,i=t.transform,s=t.title,o=t.extra,a=t.watchable,l=a===void 0?!1:a,c=ee(ee(ee({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[Pa]="");var u=ee({},o.styles);pT(i)&&(u.transform=dW({transform:i,startCentered:!0,width:n,height:r}),u["-webkit-transform"]=u.transform);var h=ov(u);h.length>0&&(c.style=h);var p=[];return p.push({tag:"span",attributes:c,children:[e]}),s&&p.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),p}function jW(t){var e=t.content,n=t.title,r=t.extra,i=ee(ee(ee({},r.attributes),n?{title:n}:{}),{},{class:r.classes.join(" ")}),s=ov(r.styles);s.length>0&&(i.style=s);var o=[];return o.push({tag:"span",attributes:i,children:[e]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}var d_=Ur.styles;function w0(t){var e=t[0],n=t[1],r=t.slice(4),i=lT(r,1),s=i[0],o=null;return Array.isArray(s)?o={tag:"g",attributes:{class:"".concat(he.familyPrefix,"-").concat(ha.GROUP)},children:[{tag:"path",attributes:{class:"".concat(he.familyPrefix,"-").concat(ha.SECONDARY),fill:"currentColor",d:s[0]}},{tag:"path",attributes:{class:"".concat(he.familyPrefix,"-").concat(ha.PRIMARY),fill:"currentColor",d:s[1]}}]}:o={tag:"path",attributes:{fill:"currentColor",d:s}},{found:!0,width:e,height:n,icon:o}}var LW={found:!1,width:512,height:512};function MW(t,e){!yj&&!he.showMissingIcons&&t&&console.error('Icon with name "'.concat(t,'" and prefix "').concat(e,'" is missing.'))}function E0(t,e){var n=e;return e==="fa"&&he.styleDefault!==null&&(e=fo()),new Promise(function(r,i){if(Zi("missingIconAbstract"),n==="fa"){var s=Oj(t)||{};t=s.iconName||t,e=s.prefix||e}if(t&&e&&d_[e]&&d_[e][t]){var o=d_[e][t];return r(w0(o))}MW(t,e),r(ee(ee({},LW),{},{icon:he.showMissingIcons&&t?Zi("missingIconAbstract")||{}:{}}))})}var RA=function(){},b0=he.measurePerformance&&_p&&_p.mark&&_p.measure?_p:{mark:RA,measure:RA},fd='FA "6.0.0"',VW=function(e){return b0.mark("".concat(fd," ").concat(e," begins")),function(){return Dj(e)}},Dj=function(e){b0.mark("".concat(fd," ").concat(e," ends")),b0.measure("".concat(fd," ").concat(e),"".concat(fd," ").concat(e," begins"),"".concat(fd," ").concat(e," ends"))},_T={begin:VW,end:Dj},tm=function(){};function kA(t){var e=t.getAttribute?t.getAttribute(Pa):null;return typeof e=="string"}function FW(t){var e=t.getAttribute?t.getAttribute(uT):null,n=t.getAttribute?t.getAttribute(dT):null;return e&&n}function $W(t){return t&&t.classList&&t.classList.contains&&t.classList.contains(he.replacementClass)}function UW(){if(he.autoReplaceSvg===!0)return nm.replace;var t=nm[he.autoReplaceSvg];return t||nm.replace}function BW(t){return Ze.createElementNS("http://www.w3.org/2000/svg",t)}function zW(t){return Ze.createElement(t)}function jj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.ceFn,r=n===void 0?t.tag==="svg"?BW:zW:n;if(typeof t=="string")return Ze.createTextNode(t);var i=r(t.tag);Object.keys(t.attributes||[]).forEach(function(o){i.setAttribute(o,t.attributes[o])});var s=t.children||[];return s.forEach(function(o){i.appendChild(jj(o,{ceFn:r}))}),i}function qW(t){var e=" ".concat(t.outerHTML," ");return e="".concat(e,"Font Awesome fontawesome.com "),e}var nm={replace:function(e){var n=e[0];if(n.parentNode)if(e[1].forEach(function(i){n.parentNode.insertBefore(jj(i),n)}),n.getAttribute(Pa)===null&&he.keepOriginalSource){var r=Ze.createComment(qW(n));n.parentNode.replaceChild(r,n)}else n.remove()},nest:function(e){var n=e[0],r=e[1];if(~fT(n).indexOf(he.replacementClass))return nm.replace(e);var i=new RegExp("".concat(he.familyPrefix,"-.*"));if(delete r[0].attributes.id,r[0].attributes.class){var s=r[0].attributes.class.split(" ").reduce(function(a,l){return l===he.replacementClass||l.match(i)?a.toSvg.push(l):a.toNode.push(l),a},{toNode:[],toSvg:[]});r[0].attributes.class=s.toSvg.join(" "),s.toNode.length===0?n.removeAttribute("class"):n.setAttribute("class",s.toNode.join(" "))}var o=r.map(function(a){return af(a)}).join(`
`);n.setAttribute(Pa,""),n.innerHTML=o}};function CA(t){t()}function Lj(t,e){var n=typeof e=="function"?e:tm;if(t.length===0)n();else{var r=CA;he.mutateApproach===Gq&&(r=ho.requestAnimationFrame||CA),r(function(){var i=UW(),s=_T.begin("mutate");t.map(i),s(),n()})}}var wT=!1;function Mj(){wT=!0}function T0(){wT=!1}var tg=null;function PA(t){if(EA&&he.observeMutations){var e=t.treeCallback,n=e===void 0?tm:e,r=t.nodeCallback,i=r===void 0?tm:r,s=t.pseudoElementsCallback,o=s===void 0?tm:s,a=t.observeMutationsRoot,l=a===void 0?Ze:a;tg=new EA(function(c){if(!wT){var u=fo();su(c).forEach(function(h){if(h.type==="childList"&&h.addedNodes.length>0&&!kA(h.addedNodes[0])&&(he.searchPseudoElements&&o(h.target),n(h.target)),h.type==="attributes"&&h.target.parentNode&&he.searchPseudoElements&&o(h.target.parentNode),h.type==="attributes"&&kA(h.target)&&~eW.indexOf(h.attributeName))if(h.attributeName==="class"&&FW(h.target)){var p=lv(fT(h.target)),m=p.prefix,v=p.iconName;h.target.setAttribute(uT,m||u),v&&h.target.setAttribute(dT,v)}else $W(h.target)&&i(h.target)})}}),cs&&tg.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function WW(){tg&&tg.disconnect()}function HW(t){var e=t.getAttribute("style"),n=[];return e&&(n=e.split(";").reduce(function(r,i){var s=i.split(":"),o=s[0],a=s.slice(1);return o&&a.length>0&&(r[o]=a.join(":").trim()),r},{})),n}function GW(t){var e=t.getAttribute("data-prefix"),n=t.getAttribute("data-icon"),r=t.innerText!==void 0?t.innerText.trim():"",i=lv(fT(t));return i.prefix||(i.prefix=fo()),e&&n&&(i.prefix=e,i.iconName=n),i.iconName&&i.prefix||i.prefix&&r.length>0&&(i.iconName=IW(i.prefix,t.innerText)||gT(i.prefix,g0(t.innerText))),i}function KW(t){var e=su(t.attributes).reduce(function(i,s){return i.name!=="class"&&i.name!=="style"&&(i[s.name]=s.value),i},{}),n=t.getAttribute("title"),r=t.getAttribute("data-fa-title-id");return he.autoA11y&&(n?e["aria-labelledby"]="".concat(he.replacementClass,"-title-").concat(r||Th()):(e["aria-hidden"]="true",e.focusable="false")),e}function QW(){return{iconName:null,title:null,titleId:null,prefix:null,transform:ci,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function OA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},n=GW(t),r=n.iconName,i=n.prefix,s=n.rest,o=KW(t),a=y0("parseNodeAttributes",{},t),l=e.styleParser?HW(t):[];return ee({iconName:r,title:t.getAttribute("title"),titleId:t.getAttribute("data-fa-title-id"),prefix:i,transform:ci,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var YW=Ur.styles;function Vj(t){var e=he.autoReplaceSvg==="nest"?OA(t,{styleParser:!1}):OA(t);return~e.extra.classes.indexOf(wj)?Zi("generateLayersText",t,e):Zi("generateSvgReplacementMutation",t,e)}function NA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!cs)return Promise.resolve();var n=Ze.documentElement.classList,r=function(h){return n.add("".concat(bA,"-").concat(h))},i=function(h){return n.remove("".concat(bA,"-").concat(h))},s=he.autoFetchSvg?Object.keys(hT):Object.keys(YW),o=[".".concat(wj,":not([").concat(Pa,"])")].concat(s.map(function(u){return".".concat(u,":not([").concat(Pa,"])")})).join(", ");if(o.length===0)return Promise.resolve();var a=[];try{a=su(t.querySelectorAll(o))}catch{}if(a.length>0)r("pending"),i("complete");else return Promise.resolve();var l=_T.begin("onTree"),c=a.reduce(function(u,h){try{var p=Vj(h);p&&u.push(p)}catch(m){yj||m.name==="MissingIcon"&&console.error(m)}return u},[]);return new Promise(function(u,h){Promise.all(c).then(function(p){Lj(p,function(){r("active"),r("complete"),i("pending"),typeof e=="function"&&e(),l(),u()})}).catch(function(p){l(),h(p)})})}function JW(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;Vj(t).then(function(n){n&&Lj([n],e)})}function XW(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=(e||{}).icon?e:_0(e||{}),i=n.mask;return i&&(i=(i||{}).icon?i:_0(i||{})),t(r,ee(ee({},n),{},{mask:i}))}}var ZW=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.transform,i=r===void 0?ci:r,s=n.symbol,o=s===void 0?!1:s,a=n.mask,l=a===void 0?null:a,c=n.maskId,u=c===void 0?null:c,h=n.title,p=h===void 0?null:h,m=n.titleId,v=m===void 0?null:m,w=n.classes,y=w===void 0?[]:w,T=n.attributes,E=T===void 0?{}:T,b=n.styles,k=b===void 0?{}:b;if(e){var D=e.prefix,N=e.iconName,x=e.icon;return cv(ee({type:"icon"},e),function(){return Oa("beforeDOMElementCreation",{iconDefinition:e,params:n}),he.autoA11y&&(p?E["aria-labelledby"]="".concat(he.replacementClass,"-title-").concat(v||Th()):(E["aria-hidden"]="true",E.focusable="false")),yT({icons:{main:w0(x),mask:l?w0(l.icon):{found:!1,width:null,height:null,icon:{}}},prefix:D,iconName:N,transform:ee(ee({},ci),i),symbol:o,title:p,maskId:u,titleId:v,extra:{attributes:E,styles:k,classes:y}})})}},eH={mixout:function(){return{icon:XW(ZW)}},hooks:function(){return{mutationObserverCallbacks:function(n){return n.treeCallback=NA,n.nodeCallback=JW,n}}},provides:function(e){e.i2svg=function(n){var r=n.node,i=r===void 0?Ze:r,s=n.callback,o=s===void 0?function(){}:s;return NA(i,o)},e.generateSvgReplacementMutation=function(n,r){var i=r.iconName,s=r.title,o=r.titleId,a=r.prefix,l=r.transform,c=r.symbol,u=r.mask,h=r.maskId,p=r.extra;return new Promise(function(m,v){Promise.all([E0(i,a),u.iconName?E0(u.iconName,u.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(w){var y=lT(w,2),T=y[0],E=y[1];m([n,yT({icons:{main:T,mask:E},prefix:a,iconName:i,transform:l,symbol:c,maskId:h,title:s,titleId:o,extra:p,watchable:!0})])}).catch(v)})},e.generateAbstractIcon=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.transform,a=n.styles,l=ov(a);l.length>0&&(i.style=l);var c;return pT(o)&&(c=Zi("generateAbstractTransformGrouping",{main:s,transform:o,containerWidth:s.width,iconWidth:s.width})),r.push(c||s.icon),{children:r,attributes:i}}}},tH={mixout:function(){return{layer:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.classes,s=i===void 0?[]:i;return cv({type:"layer"},function(){Oa("beforeDOMElementCreation",{assembler:n,params:r});var o=[];return n(function(a){Array.isArray(a)?a.map(function(l){o=o.concat(l.abstract)}):o=o.concat(a.abstract)}),[{tag:"span",attributes:{class:["".concat(he.familyPrefix,"-layers")].concat(sv(s)).join(" ")},children:o}]})}}}},nH={mixout:function(){return{counter:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.title,s=i===void 0?null:i,o=r.classes,a=o===void 0?[]:o,l=r.attributes,c=l===void 0?{}:l,u=r.styles,h=u===void 0?{}:u;return cv({type:"counter",content:n},function(){return Oa("beforeDOMElementCreation",{content:n,params:r}),jW({content:n.toString(),title:s,extra:{attributes:c,styles:h,classes:["".concat(he.familyPrefix,"-layers-counter")].concat(sv(a))}})})}}}},rH={mixout:function(){return{text:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=r.transform,s=i===void 0?ci:i,o=r.title,a=o===void 0?null:o,l=r.classes,c=l===void 0?[]:l,u=r.attributes,h=u===void 0?{}:u,p=r.styles,m=p===void 0?{}:p;return cv({type:"text",content:n},function(){return Oa("beforeDOMElementCreation",{content:n,params:r}),AA({content:n,transform:ee(ee({},ci),s),title:a,extra:{attributes:h,styles:m,classes:["".concat(he.familyPrefix,"-layers-text")].concat(sv(c))}})})}}},provides:function(e){e.generateLayersText=function(n,r){var i=r.title,s=r.transform,o=r.extra,a=null,l=null;if(mj){var c=parseInt(getComputedStyle(n).fontSize,10),u=n.getBoundingClientRect();a=u.width/c,l=u.height/c}return he.autoA11y&&!i&&(o.attributes["aria-hidden"]="true"),Promise.resolve([n,AA({content:n.innerHTML,width:a,height:l,transform:s,title:i,extra:o,watchable:!0})])}}},iH=new RegExp('"',"ug"),DA=[1105920,1112319];function sH(t){var e=t.replace(iH,""),n=yW(e,0),r=n>=DA[0]&&n<=DA[1],i=e.length===2?e[0]===e[1]:!1;return{value:g0(i?e[0]:e),isSecondary:r||i}}function jA(t,e){var n="".concat(Hq).concat(e.replace(":","-"));return new Promise(function(r,i){if(t.getAttribute(n)!==null)return r();var s=su(t.children),o=s.filter(function(N){return N.getAttribute(m0)===e})[0],a=ho.getComputedStyle(t,e),l=a.getPropertyValue("font-family").match(Jq),c=a.getPropertyValue("font-weight"),u=a.getPropertyValue("content");if(o&&!l)return t.removeChild(o),r();if(l&&u!=="none"&&u!==""){var h=a.getPropertyValue("content"),p=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(l[2])?Zm[l[2].toLowerCase()]:Xq[c],m=sH(h),v=m.value,w=m.isSecondary,y=l[0].startsWith("FontAwesome"),T=gT(p,v),E=T;if(y){var b=SW(v);b.iconName&&b.prefix&&(T=b.iconName,p=b.prefix)}if(T&&!w&&(!o||o.getAttribute(uT)!==p||o.getAttribute(dT)!==E)){t.setAttribute(n,E),o&&t.removeChild(o);var k=QW(),D=k.extra;D.attributes[m0]=e,E0(T,p).then(function(N){var x=yT(ee(ee({},k),{},{icons:{main:N,mask:vT()},prefix:p,iconName:E,extra:D,watchable:!0})),S=Ze.createElement("svg");e==="::before"?t.insertBefore(S,t.firstChild):t.appendChild(S),S.outerHTML=x.map(function(C){return af(C)}).join(`
`),t.removeAttribute(n),r()}).catch(i)}else r()}else r()})}function oH(t){return Promise.all([jA(t,"::before"),jA(t,"::after")])}function aH(t){return t.parentNode!==document.head&&!~Kq.indexOf(t.tagName.toUpperCase())&&!t.getAttribute(m0)&&(!t.parentNode||t.parentNode.tagName!=="svg")}function LA(t){if(cs)return new Promise(function(e,n){var r=su(t.querySelectorAll("*")).filter(aH).map(oH),i=_T.begin("searchPseudoElements");Mj(),Promise.all(r).then(function(){i(),T0(),e()}).catch(function(){i(),T0(),n()})})}var lH={hooks:function(){return{mutationObserverCallbacks:function(n){return n.pseudoElementsCallback=LA,n}}},provides:function(e){e.pseudoElements2svg=function(n){var r=n.node,i=r===void 0?Ze:r;he.searchPseudoElements&&LA(i)}}},MA=!1,cH={mixout:function(){return{dom:{unwatch:function(){Mj(),MA=!0}}}},hooks:function(){return{bootstrap:function(){PA(y0("mutationObserverCallbacks",{}))},noAuto:function(){WW()},watch:function(n){var r=n.observeMutationsRoot;MA?T0():PA(y0("mutationObserverCallbacks",{observeMutationsRoot:r}))}}}},VA=function(e){var n={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return e.toLowerCase().split(" ").reduce(function(r,i){var s=i.toLowerCase().split("-"),o=s[0],a=s.slice(1).join("-");if(o&&a==="h")return r.flipX=!0,r;if(o&&a==="v")return r.flipY=!0,r;if(a=parseFloat(a),isNaN(a))return r;switch(o){case"grow":r.size=r.size+a;break;case"shrink":r.size=r.size-a;break;case"left":r.x=r.x-a;break;case"right":r.x=r.x+a;break;case"up":r.y=r.y-a;break;case"down":r.y=r.y+a;break;case"rotate":r.rotate=r.rotate+a;break}return r},n)},uH={mixout:function(){return{parse:{transform:function(n){return VA(n)}}}},hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-transform");return i&&(n.transform=VA(i)),n}}},provides:function(e){e.generateAbstractTransformGrouping=function(n){var r=n.main,i=n.transform,s=n.containerWidth,o=n.iconWidth,a={transform:"translate(".concat(s/2," 256)")},l="translate(".concat(i.x*32,", ").concat(i.y*32,") "),c="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),u="rotate(".concat(i.rotate," 0 0)"),h={transform:"".concat(l," ").concat(c," ").concat(u)},p={transform:"translate(".concat(o/2*-1," -256)")},m={outer:a,inner:h,path:p};return{tag:"g",attributes:ee({},m.outer),children:[{tag:"g",attributes:ee({},m.inner),children:[{tag:r.icon.tag,children:r.icon.children,attributes:ee(ee({},r.icon.attributes),m.path)}]}]}}}},h_={x:0,y:0,width:"100%",height:"100%"};function FA(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return t.attributes&&(t.attributes.fill||e)&&(t.attributes.fill="black"),t}function dH(t){return t.tag==="g"?t.children:[t]}var hH={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-mask"),s=i?lv(i.split(" ").map(function(o){return o.trim()})):vT();return s.prefix||(s.prefix=fo()),n.mask=s,n.maskId=r.getAttribute("data-fa-mask-id"),n}}},provides:function(e){e.generateAbstractMask=function(n){var r=n.children,i=n.attributes,s=n.main,o=n.mask,a=n.maskId,l=n.transform,c=s.width,u=s.icon,h=o.width,p=o.icon,m=uW({transform:l,containerWidth:h,iconWidth:c}),v={tag:"rect",attributes:ee(ee({},h_),{},{fill:"white"})},w=u.children?{children:u.children.map(FA)}:{},y={tag:"g",attributes:ee({},m.inner),children:[FA(ee({tag:u.tag,attributes:ee(ee({},u.attributes),m.path)},w))]},T={tag:"g",attributes:ee({},m.outer),children:[y]},E="mask-".concat(a||Th()),b="clip-".concat(a||Th()),k={tag:"mask",attributes:ee(ee({},h_),{},{id:E,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[v,T]},D={tag:"defs",children:[{tag:"clipPath",attributes:{id:b},children:dH(p)},k]};return r.push(D,{tag:"rect",attributes:ee({fill:"currentColor","clip-path":"url(#".concat(b,")"),mask:"url(#".concat(E,")")},h_)}),{children:r,attributes:i}}}},fH={provides:function(e){var n=!1;ho.matchMedia&&(n=ho.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var r=[],i={fill:"currentColor"},s={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};r.push({tag:"path",attributes:ee(ee({},i),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var o=ee(ee({},s),{},{attributeName:"opacity"}),a={tag:"circle",attributes:ee(ee({},i),{},{cx:"256",cy:"364",r:"28"}),children:[]};return n||a.children.push({tag:"animate",attributes:ee(ee({},s),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:ee(ee({},o),{},{values:"1;0;1;1;0;1;"})}),r.push(a),r.push({tag:"path",attributes:ee(ee({},i),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:n?[]:[{tag:"animate",attributes:ee(ee({},o),{},{values:"1;0;0;0;0;1;"})}]}),n||r.push({tag:"path",attributes:ee(ee({},i),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:ee(ee({},o),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:r}}}},pH={hooks:function(){return{parseNodeAttributes:function(n,r){var i=r.getAttribute("data-fa-symbol"),s=i===null?!1:i===""?!0:i;return n.symbol=s,n}}}},mH=[fW,eH,tH,nH,rH,lH,cH,uH,hH,fH,pH];RW(mH,{mixoutsTo:dr});dr.noAuto;dr.config;dr.library;dr.dom;var I0=dr.parse;dr.findIconDefinition;dr.toHtml;var gH=dr.icon;dr.layer;dr.text;dr.counter;function $A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ti(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$A(Object(n),!0).forEach(function(r){Xl(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ng(t){"@babel/helpers - typeof";return ng=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ng(t)}function Xl(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vH(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function yH(t,e){if(t==null)return{};var n=vH(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function S0(t){return _H(t)||wH(t)||EH(t)||bH()}function _H(t){if(Array.isArray(t))return x0(t)}function wH(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function EH(t,e){if(t){if(typeof t=="string")return x0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x0(t,e)}}function x0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function TH(t){var e,n=t.beat,r=t.fade,i=t.beatFade,s=t.bounce,o=t.shake,a=t.flash,l=t.spin,c=t.spinPulse,u=t.spinReverse,h=t.pulse,p=t.fixedWidth,m=t.inverse,v=t.border,w=t.listItem,y=t.flip,T=t.size,E=t.rotation,b=t.pull,k=(e={"fa-beat":n,"fa-fade":r,"fa-beat-fade":i,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":p,"fa-inverse":m,"fa-border":v,"fa-li":w,"fa-flip":y===!0,"fa-flip-horizontal":y==="horizontal"||y==="both","fa-flip-vertical":y==="vertical"||y==="both"},Xl(e,"fa-".concat(T),typeof T<"u"&&T!==null),Xl(e,"fa-rotate-".concat(E),typeof E<"u"&&E!==null&&E!==0),Xl(e,"fa-pull-".concat(b),typeof b<"u"&&b!==null),Xl(e,"fa-swap-opacity",t.swapOpacity),e);return Object.keys(k).map(function(D){return k[D]?D:null}).filter(function(D){return D})}function IH(t){return t=t-0,t===t}function Fj(t){return IH(t)?t:(t=t.replace(/[\-_\s]+(.)?/g,function(e,n){return n?n.toUpperCase():""}),t.substr(0,1).toLowerCase()+t.substr(1))}var SH=["style"];function xH(t){return t.charAt(0).toUpperCase()+t.slice(1)}function AH(t){return t.split(";").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,n){var r=n.indexOf(":"),i=Fj(n.slice(0,r)),s=n.slice(r+1).trim();return i.startsWith("webkit")?e[xH(i)]=s:e[i]=s,e},{})}function $j(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof e=="string")return e;var r=(e.children||[]).map(function(l){return $j(t,l)}),i=Object.keys(e.attributes||{}).reduce(function(l,c){var u=e.attributes[c];switch(c){case"class":l.attrs.className=u,delete e.attributes.class;break;case"style":l.attrs.style=AH(u);break;default:c.indexOf("aria-")===0||c.indexOf("data-")===0?l.attrs[c.toLowerCase()]=u:l.attrs[Fj(c)]=u}return l},{attrs:{}}),s=n.style,o=s===void 0?{}:s,a=yH(n,SH);return i.attrs.style=ti(ti({},i.attrs.style),o),t.apply(void 0,[e.tag,ti(ti({},i.attrs),a)].concat(S0(r)))}var Uj=!1;try{Uj=!0}catch{}function RH(){if(!Uj&&console&&typeof console.error=="function"){var t;(t=console).error.apply(t,arguments)}}function UA(t){if(t&&ng(t)==="object"&&t.prefix&&t.iconName&&t.icon)return t;if(I0.icon)return I0.icon(t);if(t===null)return null;if(t&&ng(t)==="object"&&t.prefix&&t.iconName)return t;if(Array.isArray(t)&&t.length===2)return{prefix:t[0],iconName:t[1]};if(typeof t=="string")return{prefix:"fas",iconName:t}}function f_(t,e){return Array.isArray(e)&&e.length>0||!Array.isArray(e)&&e?Xl({},t,e):{}}var BA={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1},Ae=Et.forwardRef(function(t,e){var n=ti(ti({},BA),t),r=n.icon,i=n.mask,s=n.symbol,o=n.className,a=n.title,l=n.titleId,c=n.maskId,u=UA(r),h=f_("classes",[].concat(S0(TH(n)),S0((o||"").split(" ")))),p=f_("transform",typeof n.transform=="string"?I0.transform(n.transform):n.transform),m=f_("mask",UA(i)),v=gH(u,ti(ti(ti(ti({},h),p),m),{},{symbol:s,title:a,titleId:l,maskId:c}));if(!v)return RH("Could not find icon",u),null;var w=v.abstract,y={ref:e};return Object.keys(n).forEach(function(T){BA.hasOwnProperty(T)||(y[T]=n[T])}),kH(w[0],y)});Ae.displayName="FontAwesomeIcon";Ae.propTypes={beat:ce.bool,border:ce.bool,beatFade:ce.bool,bounce:ce.bool,className:ce.string,fade:ce.bool,flash:ce.bool,mask:ce.oneOfType([ce.object,ce.array,ce.string]),maskId:ce.string,fixedWidth:ce.bool,inverse:ce.bool,flip:ce.oneOf([!0,!1,"horizontal","vertical","both"]),icon:ce.oneOfType([ce.object,ce.array,ce.string]),listItem:ce.bool,pull:ce.oneOf(["right","left"]),pulse:ce.bool,rotation:ce.oneOf([0,90,180,270]),shake:ce.bool,size:ce.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:ce.bool,spinPulse:ce.bool,spinReverse:ce.bool,symbol:ce.oneOfType([ce.bool,ce.string]),title:ce.string,titleId:ce.string,transform:ce.oneOfType([ce.string,ce.object]),swapOpacity:ce.bool};var kH=$j.bind(null,Et.createElement);/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const CH={prefix:"fas",iconName:"file-lines",icon:[384,512,[128441,128462,61686,"file-alt","file-text"],"f15c","M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM112 256l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16zm0 64l160 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-160 0c-8.8 0-16-7.2-16-16s7.2-16 16-16z"]},PH=CH,OH={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},NH=OH,DH={prefix:"fas",iconName:"toggle-off",icon:[576,512,[],"f204","M384 128c70.7 0 128 57.3 128 128s-57.3 128-128 128l-192 0c-70.7 0-128-57.3-128-128s57.3-128 128-128l192 0zM576 256c0-106-86-192-192-192L192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192zM192 352a96 96 0 1 0 0-192 96 96 0 1 0 0 192z"]},jH={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160L0 416c0 53 43 96 96 96l256 0c53 0 96-43 96-96l0-96c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7-14.3 32-32 32L96 448c-17.7 0-32-14.3-32-32l0-256c0-17.7 14.3-32 32-32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L96 64z"]},lf=jH,LH={prefix:"fas",iconName:"eye-slash",icon:[640,512,[],"f070","M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"]},MH={prefix:"fas",iconName:"user",icon:[448,512,[128100,62144],"f007","M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z"]},VH={prefix:"fas",iconName:"toggle-on",icon:[576,512,[],"f205","M192 64C86 64 0 150 0 256S86 448 192 448l192 0c106 0 192-86 192-192s-86-192-192-192L192 64zm192 96a96 96 0 1 1 0 192 96 96 0 1 1 0-192z"]},FH={prefix:"fas",iconName:"code",icon:[640,512,[],"f121","M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"]},Bj={prefix:"fas",iconName:"eye",icon:[576,512,[128065],"f06e","M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"]},cf={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z"]},ET={prefix:"fas",iconName:"arrow-left",icon:[448,512,[8592],"f060","M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"]},$H={prefix:"fas",iconName:"cart-shopping",icon:[576,512,[128722,"shopping-cart"],"f07a","M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96z"]},UH=$H,BH={prefix:"fas",iconName:"grip-vertical",icon:[320,512,[],"f58e","M40 352l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zm192 0l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 320c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 192l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40zM40 160c-22.1 0-40-17.9-40-40L0 72C0 49.9 17.9 32 40 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0zM232 32l48 0c22.1 0 40 17.9 40 40l0 48c0 22.1-17.9 40-40 40l-48 0c-22.1 0-40-17.9-40-40l0-48c0-22.1 17.9-40 40-40z"]},zH={prefix:"fas",iconName:"ticket",icon:[576,512,[127903],"f145","M64 64C28.7 64 0 92.7 0 128l0 64c0 8.8 7.4 15.7 15.7 18.6C34.5 217.1 48 235 48 256s-13.5 38.9-32.3 45.4C7.4 304.3 0 311.2 0 320l0 64c0 35.3 28.7 64 64 64l448 0c35.3 0 64-28.7 64-64l0-64c0-8.8-7.4-15.7-15.7-18.6C541.5 294.9 528 277 528 256s13.5-38.9 32.3-45.4c8.3-2.9 15.7-9.8 15.7-18.6l0-64c0-35.3-28.7-64-64-64L64 64zm64 112l0 160c0 8.8 7.2 16 16 16l288 0c8.8 0 16-7.2 16-16l0-160c0-8.8-7.2-16-16-16l-288 0c-8.8 0-16 7.2-16 16zM96 160c0-17.7 14.3-32 32-32l320 0c17.7 0 32 14.3 32 32l0 192c0 17.7-14.3 32-32 32l-320 0c-17.7 0-32-14.3-32-32l0-192z"]},p_={prefix:"fas",iconName:"copy",icon:[448,512,[],"f0c5","M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z"]},uf={prefix:"fas",iconName:"plus",icon:[448,512,[10133,61543,"add"],"2b","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"]},qH={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},WH=qH,HH={prefix:"fas",iconName:"calendar",icon:[448,512,[128197,128198],"f133","M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z"]};var zA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},GH=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},qj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,l=i+2<t.length,c=l?t[i+2]:0,u=s>>2,h=(s&3)<<4|a>>4;let p=(a&15)<<2|c>>6,m=c&63;l||(m=64,o||(p=64)),r.push(n[u],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):GH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const h=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||h==null)throw new KH;const p=s<<2|a>>4;if(r.push(p),c!==64){const m=a<<4&240|c>>2;if(r.push(m),h!==64){const v=c<<6&192|h;r.push(v)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class KH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QH=function(t){const e=zj(t);return qj.encodeByteArray(e,!0)},rg=function(t){return QH(t).replace(/\./g,"")},Wj=function(t){try{return qj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ig(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!YH(n)||(t[n]=ig(t[n],e[n]));return t}function YH(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JH=()=>Hj().__FIREBASE_DEFAULTS__,XH=()=>{if(typeof process>"u"||typeof zA>"u")return;const t=zA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Wj(t[1]);return e&&JSON.parse(e)},bT=()=>{try{return JH()||XH()||ZH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Gj=()=>{var t;return(t=bT())===null||t===void 0?void 0:t.config},e7=t=>{var e;return(e=bT())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t7=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kj(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[rg(JSON.stringify(n)),rg(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function n7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function TT(){var t;const e=(t=bT())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function r7(){return typeof window<"u"||Qj()}function Qj(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function i7(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uv(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function IT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yj(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Jj(){return!TT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Na(){try{return typeof indexedDB=="object"}catch{return!1}}function ST(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function Xj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s7="FirebaseError";class Gt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=s7,Object.setPrototypeOf(this,Gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,us.prototype.create)}}class us{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?o7(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Gt(i,a,r)}}function o7(t,e){return t.replace(a7,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const a7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function l7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ih(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(WA(s)&&WA(o)){if(!Ih(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function WA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ou(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Zl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function pd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Zj(t,e){const n=new c7(t,e);return n.subscribe.bind(n)}class c7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");u7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=m_),i.error===void 0&&(i.error=m_),i.complete===void 0&&(i.complete=m_);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function u7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function m_(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d7=1e3,h7=2,f7=4*60*60*1e3,p7=.5;function HA(t,e=d7,n=h7){const r=e*Math.pow(n,t),i=Math.round(p7*r*(Math.random()-.5)*2);return Math.min(f7,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t){return t&&t._delegate?t._delegate:t}class on{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new t7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(v7(e))try{this.getOrInitializeService({instanceIdentifier:Yo})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Yo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yo){return this.instances.has(e)}getOptions(e=Yo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:g7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Yo){return this.component?this.component.multipleInstances?e:Yo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function g7(t){return t===Yo?void 0:t}function v7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new m7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT=[];var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const tL={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},y7=xe.INFO,_7={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},w7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=_7[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class df{constructor(e){this.name=e,this._logLevel=y7,this._logHandler=w7,this._userLogHandler=null,xT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}function E7(t){xT.forEach(e=>{e.setLogLevel(t)})}function b7(t,e){for(const n of xT){let r=null;e&&e.level&&(r=tL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,s,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");s>=(r??i.logLevel)&&t({level:xe[s].toLowerCase(),message:a,args:o,type:i.name})}}}const T7=(t,e)=>e.some(n=>t instanceof n);let GA,KA;function I7(){return GA||(GA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S7(){return KA||(KA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nL=new WeakMap,A0=new WeakMap,rL=new WeakMap,g_=new WeakMap,AT=new WeakMap;function x7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(no(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&nL.set(n,t)}).catch(()=>{}),AT.set(e,t),e}function A7(t){if(A0.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});A0.set(t,e)}let R0={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return A0.get(t);if(e==="objectStoreNames")return t.objectStoreNames||rL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return no(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function R7(t){R0=t(R0)}function k7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(v_(this),e,...n);return rL.set(r,e.sort?e.sort():[e]),no(r)}:S7().includes(t)?function(...e){return t.apply(v_(this),e),no(nL.get(this))}:function(...e){return no(t.apply(v_(this),e))}}function C7(t){return typeof t=="function"?k7(t):(t instanceof IDBTransaction&&A7(t),T7(t,I7())?new Proxy(t,R0):t)}function no(t){if(t instanceof IDBRequest)return x7(t);if(g_.has(t))return g_.get(t);const e=C7(t);return e!==t&&(g_.set(t,e),AT.set(e,t)),e}const v_=t=>AT.get(t);function iL(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=no(o);return r&&o.addEventListener("upgradeneeded",l=>{r(no(o.result),l.oldVersion,l.newVersion,no(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const P7=["get","getKey","getAll","getAllKeys","count"],O7=["put","add","delete","clear"],y_=new Map;function QA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(y_.get(e))return y_.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=O7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||P7.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&l.done]))[0]};return y_.set(e,s),s}R7(t=>({...t,get:(e,n,r)=>QA(e,n)||t.get(e,n,r),has:(e,n)=>!!QA(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(D7(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function D7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const sg="@firebase/app",k0="0.10.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es=new df("@firebase/app"),j7="@firebase/app-compat",L7="@firebase/analytics-compat",M7="@firebase/analytics",V7="@firebase/app-check-compat",F7="@firebase/app-check",$7="@firebase/auth",U7="@firebase/auth-compat",B7="@firebase/database",z7="@firebase/data-connect",q7="@firebase/database-compat",W7="@firebase/functions",H7="@firebase/functions-compat",G7="@firebase/installations",K7="@firebase/installations-compat",Q7="@firebase/messaging",Y7="@firebase/messaging-compat",J7="@firebase/performance",X7="@firebase/performance-compat",Z7="@firebase/remote-config",eG="@firebase/remote-config-compat",tG="@firebase/storage",nG="@firebase/storage-compat",rG="@firebase/firestore",iG="@firebase/vertexai",sG="@firebase/firestore-compat",oG="firebase",aG="11.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="[DEFAULT]",lG={[sg]:"fire-core",[j7]:"fire-core-compat",[M7]:"fire-analytics",[L7]:"fire-analytics-compat",[F7]:"fire-app-check",[V7]:"fire-app-check-compat",[$7]:"fire-auth",[U7]:"fire-auth-compat",[B7]:"fire-rtdb",[z7]:"fire-data-connect",[q7]:"fire-rtdb-compat",[W7]:"fire-fn",[H7]:"fire-fn-compat",[G7]:"fire-iid",[K7]:"fire-iid-compat",[Q7]:"fire-fcm",[Y7]:"fire-fcm-compat",[J7]:"fire-perf",[X7]:"fire-perf-compat",[Z7]:"fire-rc",[eG]:"fire-rc-compat",[tG]:"fire-gcs",[nG]:"fire-gcs-compat",[rG]:"fire-fst",[sG]:"fire-fst-compat",[iG]:"fire-vertex","fire-js":"fire-js",[oG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=new Map,kc=new Map,Cc=new Map;function Sh(t,e){try{t.container.addComponent(e)}catch(n){es.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sL(t,e){t.container.addOrOverwriteComponent(e)}function or(t){const e=t.name;if(Cc.has(e))return es.debug(`There were multiple attempts to register component ${e}.`),!1;Cc.set(e,t);for(const n of mo.values())Sh(n,t);for(const n of kc.values())Sh(n,t);return!0}function dv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cG(t,e,n=po){dv(t,e).clearInstance(n)}function oL(t){return t.options!==void 0}function bt(t){return t.settings!==void 0}function uG(){Cc.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ir=new us("app","Firebase",dG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aL=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new on("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ir.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hG extends aL{constructor(e,n,r,i){const s=n.automaticDataCollectionEnabled!==void 0?n.automaticDataCollectionEnabled:!1,o={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,o,i);else{const a=e;super(a.options,o,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},n),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,n.releaseOnDeref=void 0,nn(sg,k0,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){kT(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ir.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds=aG;function RT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:po,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ir.create("bad-app-name",{appName:String(i)});if(n||(n=Gj()),!n)throw Ir.create("no-options");const s=mo.get(i);if(s){if(Ih(n,s.options)&&Ih(r,s.config))return s;throw Ir.create("duplicate-app",{appName:i})}const o=new eL(i);for(const l of Cc.values())o.addComponent(l);const a=new aL(n,r,o);return mo.set(i,a),a}function fG(t,e){if(r7()&&!Qj())throw Ir.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let n;oL(t)?n=t.options:n=t;const r=Object.assign(Object.assign({},e),n);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=c=>[...c].reduce((u,h)=>Math.imul(31,u)+h.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ir.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),o=kc.get(s);if(o)return o.incRefCount(e.releaseOnDeref),o;const a=new eL(s);for(const c of Cc.values())a.addComponent(c);const l=new hG(n,e,s,a);return kc.set(s,l),l}function pG(t=po){const e=mo.get(t);if(!e&&t===po&&Gj())return RT();if(!e)throw Ir.create("no-app",{appName:t});return e}function mG(){return Array.from(mo.values())}async function kT(t){let e=!1;const n=t.name;mo.has(n)?(e=!0,mo.delete(n)):kc.has(n)&&t.decRefCount()<=0&&(kc.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(r=>r.delete())),t.isDeleted=!0)}function nn(t,e,n){var r;let i=(r=lG[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),es.warn(a.join(" "));return}or(new on(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function lL(t,e){if(t!==null&&typeof t!="function")throw Ir.create("invalid-log-argument");b7(t,e)}function cL(t){E7(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gG="firebase-heartbeat-database",vG=1,xh="firebase-heartbeat-store";let __=null;function uL(){return __||(__=iL(gG,vG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ir.create("idb-open",{originalErrorMessage:t.message})})),__}async function yG(t){try{const n=(await uL()).transaction(xh),r=await n.objectStore(xh).get(dL(t));return await n.done,r}catch(e){if(e instanceof Gt)es.warn(e.message);else{const n=Ir.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});es.warn(n.message)}}}async function YA(t,e){try{const r=(await uL()).transaction(xh,"readwrite");await r.objectStore(xh).put(e,dL(t)),await r.done}catch(n){if(n instanceof Gt)es.warn(n.message);else{const r=Ir.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});es.warn(r.message)}}}function dL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _G=1024,wG=30*24*60*60*1e3;class EG{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new TG(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=JA();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=wG}),this._storage.overwrite(this._heartbeatsCache))}catch(r){es.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=JA(),{heartbeatsToSend:r,unsentEntries:i}=bG(this._heartbeatsCache.heartbeats),s=rg(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return es.warn(n),""}}}function JA(){return new Date().toISOString().substring(0,10)}function bG(t,e=_G){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),XA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),XA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class TG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Na()?ST().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await yG(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return YA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return YA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function XA(t){return rg(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IG(t){or(new on("platform-logger",e=>new N7(e),"PRIVATE")),or(new on("heartbeat",e=>new EG(e),"PRIVATE")),nn(sg,k0,t),nn(sg,k0,"esm2017"),nn("fire-js","")}IG("");const SG=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Gt,SDK_VERSION:ds,_DEFAULT_ENTRY_NAME:po,_addComponent:Sh,_addOrOverwriteComponent:sL,_apps:mo,_clearComponents:uG,_components:Cc,_getProvider:dv,_isFirebaseApp:oL,_isFirebaseServerApp:bt,_registerComponent:or,_removeServiceInstance:cG,_serverApps:kc,deleteApp:kT,getApp:pG,getApps:mG,initializeApp:RT,initializeServerApp:fG,onLog:lL,registerVersion:nn,setLogLevel:cL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,n){this._delegate=e,this.firebase=n,Sh(e,new on("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),kT(this._delegate)))}_getService(e,n=po){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=po){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Sh(this._delegate,e)}_addOrOverwriteComponent(e){sL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AG={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},ZA=new us("app-compat","Firebase",AG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RG(t){const e={},n={__esModule:!0,initializeApp:s,app:i,registerVersion:nn,setLogLevel:cL,onLog:lL,apps:null,SDK_VERSION:ds,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:SG}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(c){delete e[c]}function i(c){if(c=c||po,!qA(e,c))throw ZA.create("no-app",{appName:c});return e[c]}i.App=t;function s(c,u={}){const h=RT(c,u);if(qA(e,h.name))return e[h.name];const p=new t(h,n);return e[h.name]=p,p}function o(){return Object.keys(e).map(c=>e[c])}function a(c){const u=c.name,h=u.replace("-compat","");if(or(c)&&c.type==="PUBLIC"){const p=(m=i())=>{if(typeof m[h]!="function")throw ZA.create("invalid-app-argument",{appName:u});return m[h]()};c.serviceProps!==void 0&&ig(p,c.serviceProps),n[h]=p,t.prototype[h]=function(...m){return this._getService.bind(this,u).apply(this,c.multipleInstances?m:[])}}return c.type==="PUBLIC"?n[h]:null}function l(c,u){return u==="serverAuth"?null:u}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(){const t=RG(xG);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:hL,extendNamespace:e,createSubscribe:Zj,ErrorFactory:us,deepExtend:ig});function e(n){ig(t,n)}return t}const kG=hL();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR=new df("@firebase/app-compat"),CG="@firebase/app-compat",PG="0.2.48";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OG(t){nn(CG,PG,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const t=Hj();if(t.firebase!==void 0){eR.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=t.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&eR.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const Yt=kG;OG();var C0=function(t,e){return C0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},C0(t,e)};function fL(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");C0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var og=function(){return og=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},og.apply(this,arguments)};function hs(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function pL(t,e,n,r){var i=arguments.length,s=i<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function mL(t,e){return function(n,r){e(n,r,t)}}function gL(t,e,n,r,i,s){function o(T){if(T!==void 0&&typeof T!="function")throw new TypeError("Function expected");return T}for(var a=r.kind,l=a==="getter"?"get":a==="setter"?"set":"value",c=!e&&t?r.static?t:t.prototype:null,u=e||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),h,p=!1,m=n.length-1;m>=0;m--){var v={};for(var w in r)v[w]=w==="access"?{}:r[w];for(var w in r.access)v.access[w]=r.access[w];v.addInitializer=function(T){if(p)throw new TypeError("Cannot add initializers after decoration has completed");s.push(o(T||null))};var y=(0,n[m])(a==="accessor"?{get:u.get,set:u.set}:u[l],v);if(a==="accessor"){if(y===void 0)continue;if(y===null||typeof y!="object")throw new TypeError("Object expected");(h=o(y.get))&&(u.get=h),(h=o(y.set))&&(u.set=h),(h=o(y.init))&&i.unshift(h)}else(h=o(y))&&(a==="field"?i.unshift(h):u[l]=h)}c&&Object.defineProperty(c,r.name,u),p=!0}function vL(t,e,n){for(var r=arguments.length>2,i=0;i<e.length;i++)n=r?e[i].call(t,n):e[i].call(t);return r?n:void 0}function yL(t){return typeof t=="symbol"?t:"".concat(t)}function _L(t,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(t,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function wL(t,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(t,e)}function oe(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(r.next(u))}catch(h){o(h)}}function l(u){try{c(r.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function EL(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=a(0),o.throw=a(1),o.return=a(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}var hv=Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]};function bL(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&hv(e,t,n)}function ag(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function CT(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function TL(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(CT(arguments[e]));return t}function IL(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)r[i]=s[o];return r}function SL(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function Pc(t){return this instanceof Pc?(this.v=t,this):new Pc(t)}function xL(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(v){return Promise.resolve(v).then(m,h)}}function a(m,v){r[m]&&(i[m]=function(w){return new Promise(function(y,T){s.push([m,w,y,T])>1||l(m,w)})},v&&(i[m]=v(i[m])))}function l(m,v){try{c(r[m](v))}catch(w){p(s[0][3],w)}}function c(m){m.value instanceof Pc?Promise.resolve(m.value.v).then(u,h):p(s[0][2],m)}function u(m){l("next",m)}function h(m){l("throw",m)}function p(m,v){m(v),s.shift(),s.length&&l(s[0][0],s[0][1])}}function AL(t){var e,n;return e={},r("next"),r("throw",function(i){throw i}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(i,s){e[i]=t[i]?function(o){return(n=!n)?{value:Pc(t[i](o)),done:!1}:s?s(o):o}:s}}function RL(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ag=="function"?ag(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,l){o=t[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(c){s({value:c,done:a})},o)}}function kL(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}var NG=Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e},P0=function(t){return P0=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},P0(t)};function CL(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n=P0(t),r=0;r<n.length;r++)n[r]!=="default"&&hv(e,t,n[r]);return NG(e,t),e}function PL(t){return t&&t.__esModule?t:{default:t}}function OL(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}function NL(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}function DL(t,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof t=="function"?e===t:t.has(e)}function jL(t,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,i;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(i=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");i&&(r=function(){try{i.call(this)}catch(s){return Promise.reject(s)}}),t.stack.push({value:e,dispose:r,async:n})}else n&&t.stack.push({async:!0});return e}var DG=typeof SuppressedError=="function"?SuppressedError:function(t,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=t,r.suppressed=e,r};function LL(t){function e(s){t.error=t.hasError?new DG(s,t.error,"An error was suppressed during disposal."):s,t.hasError=!0}var n,r=0;function i(){for(;n=t.stack.pop();)try{if(!n.async&&r===1)return r=0,t.stack.push(n),Promise.resolve().then(i);if(n.dispose){var s=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(s).then(i,function(o){return e(o),i()})}else r|=1}catch(o){e(o)}if(r===1)return t.hasError?Promise.reject(t.error):Promise.resolve();if(t.hasError)throw t.error}return i()}function ML(t,e){return typeof t=="string"&&/^\.\.?\//.test(t)?t.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,i,s,o){return r?e?".jsx":".js":i&&(!s||!o)?n:i+s+"."+o.toLowerCase()+"js"}):t}const jG={__extends:fL,__assign:og,__rest:hs,__decorate:pL,__param:mL,__esDecorate:gL,__runInitializers:vL,__propKey:yL,__setFunctionName:_L,__metadata:wL,__awaiter:oe,__generator:EL,__createBinding:hv,__exportStar:bL,__values:ag,__read:CT,__spread:TL,__spreadArrays:IL,__spreadArray:SL,__await:Pc,__asyncGenerator:xL,__asyncDelegator:AL,__asyncValues:RL,__makeTemplateObject:kL,__importStar:CL,__importDefault:PL,__classPrivateFieldGet:OL,__classPrivateFieldSet:NL,__classPrivateFieldIn:DL,__addDisposableResource:jL,__disposeResources:LL,__rewriteRelativeImportExtension:ML},LG=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:jL,get __assign(){return og},__asyncDelegator:AL,__asyncGenerator:xL,__asyncValues:RL,__await:Pc,__awaiter:oe,__classPrivateFieldGet:OL,__classPrivateFieldIn:DL,__classPrivateFieldSet:NL,__createBinding:hv,__decorate:pL,__disposeResources:LL,__esDecorate:gL,__exportStar:bL,__extends:fL,__generator:EL,__importDefault:PL,__importStar:CL,__makeTemplateObject:kL,__metadata:wL,__param:mL,__propKey:yL,__read:CT,__rest:hs,__rewriteRelativeImportExtension:ML,__runInitializers:vL,__setFunctionName:_L,__spread:TL,__spreadArray:SL,__spreadArrays:IL,__values:ag,default:jG},Symbol.toStringTag,{value:"Module"})),Yu={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ml={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MG(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function VL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VG=MG,FG=VL,FL=new us("auth","Firebase",VL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=new df("@firebase/auth");function $G(t,...e){lg.logLevel<=xe.WARN&&lg.warn(`Auth (${ds}): ${t}`,...e)}function rm(t,...e){lg.logLevel<=xe.ERROR&&lg.error(`Auth (${ds}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t,...e){throw OT(t,...e)}function Ut(t,...e){return OT(t,...e)}function PT(t,e,n){const r=Object.assign(Object.assign({},FG()),{[e]:n});return new us("auth","Firebase",r).create(e,{appName:t.name})}function Kt(t){return PT(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function au(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&an(t,"argument-error"),PT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function OT(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return FL.create(t,...e)}function W(t,e,...n){if(!t)throw OT(e,...n)}function ui(t){const e="INTERNAL ASSERTION FAILED: "+t;throw rm(e),new Error(e)}function Hr(t,e){t||ui(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function NT(){return tR()==="http:"||tR()==="https:"}function tR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(NT()||uv()||"connection"in navigator)?navigator.onLine:!0}function BG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hr(n>e,"Short delay should be less than long delay!"),this.isMobile=n7()||IT()}get(){return UG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e){Hr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ui("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ui("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ui("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qG=new hf(3e4,6e4);function It(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function St(t,e,n,r,i={}){return UL(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=ou(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:l},s);return i7()||(c.referrerPolicy="no-referrer"),$L.fetch()(BL(t,t.config.apiHost,n,a),c)})}async function UL(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zG),e);try{const i=new HG(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw md(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw md(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw md(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw md(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw PT(t,u,c);an(t,u)}}catch(i){if(i instanceof Gt)throw i;an(t,"network-request-failed",{message:String(i)})}}async function fs(t,e,n,r,i={}){const s=await St(t,e,n,r,i);return"mfaPendingCredential"in s&&an(t,"multi-factor-auth-required",{_serverResponse:s}),s}function BL(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?DT(t.config,i):`${t.config.apiScheme}://${i}`}function WG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class HG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ut(this.auth,"network-request-failed")),qG.get())})}}function md(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Ut(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nR(t){return t!==void 0&&t.getResponse!==void 0}function rR(t){return t!==void 0&&t.enterprise!==void 0}class zL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return WG(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GG(t){return(await St(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function qL(t,e){return St(t,"GET","/v2/recaptchaConfig",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KG(t,e){return St(t,"POST","/v1/accounts:delete",e)}async function QG(t,e){return St(t,"POST","/v1/accounts:update",e)}async function WL(t,e){return St(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function YG(t,e=!1){const n=ne(t),r=await n.getIdToken(e),i=fv(r);W(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Vd(w_(i.auth_time)),issuedAtTime:Vd(w_(i.iat)),expirationTime:Vd(w_(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function w_(t){return Number(t)*1e3}function fv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rm("JWT malformed, contained fewer than 3 sections"),null;try{const i=Wj(n);return i?JSON.parse(i):(rm("Failed to decode base64 JWT payload"),null)}catch(i){return rm("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function iR(t){const e=fv(t);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ts(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gt&&JG(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function JG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Vd(this.lastLoginAt),this.creationTime=Vd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ts(t,WL(n,{idToken:r}));W(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?HL(s.providerUserInfo):[],a=eK(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new O0(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function ZG(t){const e=ne(t);await Rh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function HL(t){return t.map(e=>{var{providerId:n}=e,r=hs(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tK(t,e){const n=await UL(t,{},async()=>{const r=ou({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=BL(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",$L.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nK(t,e){return St(t,"POST","/v2/accounts:revokeToken",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iR(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){W(e.length!==0,"internal-error");const n=iR(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tK(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new lc;return r&&(W(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new lc,this.toJSON())}_performRefresh(){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(t,e){W(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=hs(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new XG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new O0(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ts(this,this.stsTokenManager.getToken(this.auth,e));return W(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return YG(this,e)}reload(){return ZG(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Rh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(bt(this.auth.app))return Promise.reject(Kt(this.auth));const e=await this.getIdToken();return await ts(this,KG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,l,c,u;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(i=n.email)!==null&&i!==void 0?i:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:b,emailVerified:k,isAnonymous:D,providerData:N,stsTokenManager:x}=n;W(b&&x,e,"internal-error");const S=lc.fromJSON(this.name,x);W(typeof b=="string",e,"internal-error"),xs(h,e.name),xs(p,e.name),W(typeof k=="boolean",e,"internal-error"),W(typeof D=="boolean",e,"internal-error"),xs(m,e.name),xs(v,e.name),xs(w,e.name),xs(y,e.name),xs(T,e.name),xs(E,e.name);const C=new Mi({uid:b,auth:e,email:p,emailVerified:k,displayName:h,isAnonymous:D,photoURL:v,phoneNumber:m,tenantId:w,stsTokenManager:S,createdAt:T,lastLoginAt:E});return N&&Array.isArray(N)&&(C.providerData=N.map(R=>Object.assign({},R))),y&&(C._redirectEventId=y),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new lc;i.updateFromServerResponse(n);const s=new Mi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Rh(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];W(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?HL(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new lc;a.updateFromIdToken(r);const l=new Mi({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new O0(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new Map;function tr(t){Hr(t instanceof Function,"Expected a class definition");let e=sR.get(t);return e?(Hr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,sR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}GL.type="NONE";const Oc=GL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t,e,n){return`firebase:${t}:${e}:${n}`}class cc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Ea(this.userKey,i.apiKey,s),this.fullPersistenceKey=Ea("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new cc(tr(Oc),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||tr(Oc);const o=Ea(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const h=Mi._fromJSON(e,u);c!==s&&(a=h),s=c;break}}catch{}const l=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new cc(s,e,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new cc(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(KL(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(XL(e))return"Blackberry";if(ZL(e))return"Webos";if(QL(e))return"Safari";if((e.includes("chrome/")||YL(e))&&!e.includes("edge/"))return"Chrome";if(ff(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function KL(t=mt()){return/firefox\//i.test(t)}function QL(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function YL(t=mt()){return/crios\//i.test(t)}function JL(t=mt()){return/iemobile/i.test(t)}function ff(t=mt()){return/android/i.test(t)}function XL(t=mt()){return/blackberry/i.test(t)}function ZL(t=mt()){return/webos/i.test(t)}function pf(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rK(t=mt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function iK(t=mt()){var e;return pf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function sK(){return Yj()&&document.documentMode===10}function eM(t=mt()){return pf(t)||ff(t)||ZL(t)||XL(t)||/windows phone/i.test(t)||JL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tM(t,e=[]){let n;switch(t){case"Browser":n=oR(mt());break;case"Worker":n=`${oR(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ds}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oK{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aK(t,e={}){return St(t,"GET","/v2/passwordPolicy",It(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lK=6;class cK{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lK,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new aR(this),this.idTokenSubscription=new aR(this),this.beforeStateQueue=new oK(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=FL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await cc.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await WL(this,{idToken:e}),r=await Mi._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(bt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Rh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=BG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(bt(this.app))return Promise.reject(Kt(this));const n=e?ne(e):null;return n&&W(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return bt(this.app)?Promise.reject(Kt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return bt(this.app)?Promise.reject(Kt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await aK(this),n=new cK(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new us("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;W(n,this,"argument-error"),this.redirectPersistenceManager=await cc.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=tM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&$G(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gt(t){return ne(t)}class aR{constructor(e){this.auth=e,this.observer=null,this.addObserver=Zj(n=>this.observer=n)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dK(t){mf=t}function jT(t){return mf.loadJS(t)}function hK(){return mf.recaptchaV2Script}function fK(){return mf.recaptchaEnterpriseScript}function pK(){return mf.gapiScript}function nM(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mK=500,gK=6e4,wp=1e12;class vK{constructor(e){this.auth=e,this.counter=wp,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new wK(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||wp;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||wp;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||wp;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class yK{constructor(){this.enterprise=new _K}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class _K{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wK{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;W(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=EK(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},gK)},mK))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function EK(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const bK="recaptcha-enterprise",Fd="NO_RECAPTCHA";class rM{constructor(e){this.type=bK,this.auth=gt(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{qL(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new zL(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function i(s,o,a){const l=window.grecaptcha;rR(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Fd)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yK().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&rR(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=fK();l.length!==0&&(l+=a),jT(l).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Ju(t,e,n,r=!1,i=!1){const s=new rM(t);let o;if(i)o=Fd;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a=Object.assign({},e);if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function ro(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await Ju(t,e,n,n==="getOobCode");return r(t,a)}else return r(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Ju(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(a)});else if(i==="PHONE_PROVIDER")if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("PHONE_PROVIDER")){const a=await Ju(t,e,n);return r(t,a).catch(async l=>{var c;if(((c=t._getRecaptchaConfig())===null||c===void 0?void 0:c.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(l.code==="auth/missing-recaptcha-token"||l.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const u=await Ju(t,e,n,!1,!0);return r(t,u)}return Promise.reject(l)})}else{const a=await Ju(t,e,n,!1,!0);return r(t,a)}else return Promise.reject(i+" provider is not supported.")}async function TK(t){const e=gt(t),n=await qL(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new zL(n);e.tenantId==null?e._agentRecaptchaConfig=r:e._tenantRecaptchaConfigs[e.tenantId]=r,r.isAnyProviderEnabled()&&new rM(e).verify()}function IK(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SK(t,e,n){const r=gt(t);W(r._canInitEmulator,r,"emulator-config-failed"),W(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=iM(e),{host:o,port:a}=xK(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||AK()}function iM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function xK(t){const e=iM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:lR(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:lR(o)}}}function lR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AK(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return ui("not implemented")}_getIdTokenResponse(e){return ui("not implemented")}_linkToIdToken(e,n){return ui("not implemented")}_getReauthenticationResolver(e){return ui("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sM(t,e){return St(t,"POST","/v1/accounts:resetPassword",It(t,e))}async function RK(t,e){return St(t,"POST","/v1/accounts:update",e)}async function kK(t,e){return St(t,"POST","/v1/accounts:signUp",e)}async function CK(t,e){return St(t,"POST","/v1/accounts:update",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PK(t,e){return fs(t,"POST","/v1/accounts:signInWithPassword",It(t,e))}async function pv(t,e){return St(t,"POST","/v1/accounts:sendOobCode",It(t,e))}async function OK(t,e){return pv(t,e)}async function NK(t,e){return pv(t,e)}async function DK(t,e){return pv(t,e)}async function jK(t,e){return pv(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LK(t,e){return fs(t,"POST","/v1/accounts:signInWithEmailLink",It(t,e))}async function MK(t,e){return fs(t,"POST","/v1/accounts:signInWithEmailLink",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh extends lu{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new kh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new kh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ro(e,n,"signInWithPassword",PK,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return LK(e,{email:this._email,oobCode:this._password});default:an(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ro(e,r,"signUpPassword",kK,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return MK(e,{idToken:n,email:this._email,oobCode:this._password});default:an(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bi(t,e){return fs(t,"POST","/v1/accounts:signInWithIdp",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VK="http://localhost";class bi extends lu{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new bi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):an("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=hs(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new bi(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Bi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bi(e,n)}buildRequest(){const e={requestUri:VK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ou(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e){return St(t,"POST","/v1/accounts:sendVerificationCode",It(t,e))}async function FK(t,e){return fs(t,"POST","/v1/accounts:signInWithPhoneNumber",It(t,e))}async function $K(t,e){const n=await fs(t,"POST","/v1/accounts:signInWithPhoneNumber",It(t,e));if(n.temporaryProof)throw md(t,"account-exists-with-different-credential",n);return n}const UK={USER_NOT_FOUND:"user-not-found"};async function BK(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return fs(t,"POST","/v1/accounts:signInWithPhoneNumber",It(t,n),UK)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends lu{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new ba({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new ba({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return FK(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return $K(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return BK(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!n&&!i&&!s?null:new ba({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zK(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function qK(t){const e=Zl(pd(t)).link,n=e?Zl(pd(e)).deep_link_id:null,r=Zl(pd(t)).deep_link_id;return(r?Zl(pd(r)).link:null)||r||n||e||t}class mv{constructor(e){var n,r,i,s,o,a;const l=Zl(pd(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,h=zK((i=l.mode)!==null&&i!==void 0?i:null);W(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=qK(e);try{return new mv(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,n){return kh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=mv.parseLink(n);return W(r,"argument-error"),kh._fromEmailAndCode(e,r.code,r.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends ps{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class uc extends cu{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return W("providerId"in n&&"signInMethod"in n,"argument-error"),bi._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return W(e.idToken||e.accessToken,"argument-error"),bi._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return uc.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return uc.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=e;if(!r&&!i&&!n&&!s||!a)return null;try{return new uc(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii extends cu{constructor(){super("facebook.com")}static credential(e){return bi._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ii.credential(e.oauthAccessToken)}catch{return null}}}ii.FACEBOOK_SIGN_IN_METHOD="facebook.com";ii.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return bi._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return si.credential(n,r)}catch{return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com";si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends cu{constructor(){super("github.com")}static credential(e){return bi._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.GITHUB_SIGN_IN_METHOD="github.com";oi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WK="http://localhost";class Nc extends lu{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return Bi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Bi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Bi(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=n;return!r||!i||!s||r!==i?null:new Nc(r,s)}static _create(e,n){return new Nc(e,n)}buildRequest(){return{requestUri:WK,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK="saml.";class cg extends ps{constructor(e){W(e.startsWith(HK),"argument-error"),super(e)}static credentialFromResult(e){return cg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return cg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=Nc.fromJSON(e);return W(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return Nc._create(r,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends cu{constructor(){super("twitter.com")}static credential(e,n){return bi._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ai.credential(n,r)}catch{return null}}}ai.TWITTER_SIGN_IN_METHOD="twitter.com";ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oM(t,e){return fs(t,"POST","/v1/accounts:signUp",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Mi._fromIdTokenResponse(e,r,i),o=uR(r);return new kr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=uR(r);return new kr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function uR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GK(t){var e;if(bt(t.app))return Promise.reject(Kt(t));const n=gt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new kr({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await oM(n,{returnSecureToken:!0}),i=await kr._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug extends Gt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,ug.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new ug(e,n,r,i)}}function aM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?ug._fromErrorAndOperation(t,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lM(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KK(t,e){const n=ne(t);await gv(!0,n,e);const{providerUserInfo:r}=await QG(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=lM(r||[]);return n.providerData=n.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function LT(t,e,n=!1){const r=await ts(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return kr._forOperation(t,"link",r)}async function gv(t,e,n){await Rh(e);const r=lM(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";W(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cM(t,e,n=!1){const{auth:r}=t;if(bt(r.app))return Promise.reject(Kt(r));const i="reauthenticate";try{const s=await ts(t,aM(r,i,e,t),n);W(s.idToken,r,"internal-error");const o=fv(s.idToken);W(o,r,"internal-error");const{sub:a}=o;return W(t.uid===a,r,"user-mismatch"),kr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&an(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uM(t,e,n=!1){if(bt(t.app))return Promise.reject(Kt(t));const r="signIn",i=await aM(t,r,e),s=await kr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function vv(t,e){return uM(gt(t),e)}async function dM(t,e){const n=ne(t);return await gv(!1,n,e.providerId),LT(n,e)}async function hM(t,e){return cM(ne(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QK(t,e){return fs(t,"POST","/v1/accounts:signInWithCustomToken",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YK(t,e){if(bt(t.app))return Promise.reject(Kt(t));const n=gt(t),r=await QK(n,{token:e,returnSecureToken:!0}),i=await kr._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?MT._fromServerResponse(e,n):"totpInfo"in n?VT._fromServerResponse(e,n):an(e,"internal-error")}}class MT extends gf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new MT(n)}}class VT extends gf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new VT(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yv(t,e,n){var r;W(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),W(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(W(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(W(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FT(t){const e=gt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function JK(t,e,n){const r=gt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&yv(r,i,n),await ro(r,i,"getOobCode",NK,"EMAIL_PASSWORD_PROVIDER")}async function XK(t,e,n){await sM(ne(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FT(t),r})}async function ZK(t,e){await CK(ne(t),{oobCode:e})}async function fM(t,e){const n=ne(t),r=await sM(n,{oobCode:e}),i=r.requestType;switch(W(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":W(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":W(r.mfaInfo,n,"internal-error");default:W(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=gf._fromServerResponse(gt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function eQ(t,e){const{data:n}=await fM(ne(t),e);return n.email}async function tQ(t,e,n){if(bt(t.app))return Promise.reject(Kt(t));const r=gt(t),o=await ro(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",oM,"EMAIL_PASSWORD_PROVIDER").catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&FT(t),l}),a=await kr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function nQ(t,e,n){return bt(t.app)?Promise.reject(Kt(t)):vv(ne(t),Po.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&FT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rQ(t,e,n){const r=gt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(o,a){W(a.handleCodeInApp,r,"argument-error"),a&&yv(r,o,a)}s(i,n),await ro(r,i,"getOobCode",DK,"EMAIL_PASSWORD_PROVIDER")}function iQ(t,e){const n=mv.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function sQ(t,e,n){if(bt(t.app))return Promise.reject(Kt(t));const r=ne(t),i=Po.credentialWithLink(e,n||Ah());return W(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),vv(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oQ(t,e){return St(t,"POST","/v1/accounts:createAuthUri",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aQ(t,e){const n=NT()?Ah():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await oQ(ne(t),r);return i||[]}async function lQ(t,e){const n=ne(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&yv(n.auth,i,e);const{email:s}=await OK(n.auth,i);s!==t.email&&await t.reload()}async function cQ(t,e,n){const r=ne(t),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&yv(r.auth,s,n);const{email:o}=await jK(r.auth,s);o!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uQ(t,e){return St(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dQ(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ne(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ts(r,uQ(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function hQ(t,e){const n=ne(t);return bt(n.auth.app)?Promise.reject(Kt(n.auth)):pM(n,e,null)}function fQ(t,e){return pM(ne(t),null,e)}async function pM(t,e,n){const{auth:r}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await ts(t,RK(r,s));await t._updateTokensIfNecessary(o,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pQ(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const o=(n=(e=fv(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new dc(s,a)}}if(!r)return null;switch(r){case"facebook.com":return new mQ(s,i);case"github.com":return new gQ(s,i);case"google.com":return new vQ(s,i);case"twitter.com":return new yQ(s,i,t.screenName||null);case"custom":case"anonymous":return new dc(s,null);default:return new dc(s,r,i)}}class dc{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class mM extends dc{constructor(e,n,r,i){super(e,n,r),this.username=i}}class mQ extends dc{constructor(e,n){super(e,"facebook.com",n)}}class gQ extends mM{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class vQ extends dc{constructor(e,n){super(e,"google.com",n)}}class yQ extends mM{constructor(e,n,r){super(e,"twitter.com",n,r)}}function _Q(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:pQ(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new fa("enroll",e,n)}static _fromMfaPendingCredential(e){return new fa("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return fa._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return fa._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=gt(e),i=n.customData._serverResponse,s=(i.mfaInfo||[]).map(a=>gf._fromServerResponse(r,a));W(i.mfaPendingCredential,r,"internal-error");const o=fa._fromMfaPendingCredential(i.mfaPendingCredential);return new $T(o,s,async a=>{const l=await a._process(r,o);delete i.mfaInfo,delete i.mfaPendingCredential;const c=Object.assign(Object.assign({},i),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const u=await kr._fromIdTokenResponse(r,n.operationType,c);return await r._updateCurrentUser(u.user),u;case"reauthenticate":return W(n.user,r,"internal-error"),kr._forOperation(n.user,n.operationType,c);default:an(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function wQ(t,e){var n;const r=ne(t),i=e;return W(e.customData.operationType,r,"argument-error"),W((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),$T._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t,e){return St(t,"POST","/v2/accounts/mfaEnrollment:start",It(t,e))}function EQ(t,e){return St(t,"POST","/v2/accounts/mfaEnrollment:finalize",It(t,e))}function bQ(t,e){return St(t,"POST","/v2/accounts/mfaEnrollment:withdraw",It(t,e))}class UT{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>gf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new UT(e)}async getSession(){return fa._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),s=await ts(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ts(this.user,bQ(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const E_=new WeakMap;function TQ(t){const e=ne(t);return E_.has(e)||E_.set(e,UT._fromUser(e)),E_.get(e)}const dg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(dg,"1"),this.storage.removeItem(dg),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IQ=1e3,SQ=10;class vM extends gM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=eM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);sK()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,SQ):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vM.type="LOCAL";const BT=vM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yM extends gM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}yM.type="SESSION";const Da=yM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xQ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new _v(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),l=await xQ(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_v.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=vf("",20);i.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(h){const p=h;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(){return window}function RQ(t){jt().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(){return typeof jt().WorkerGlobalScope<"u"&&typeof jt().importScripts=="function"}async function kQ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CQ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PQ(){return zT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="firebaseLocalStorageDb",OQ=1,hg="firebaseLocalStorage",wM="fbase_key";class yf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function wv(t,e){return t.transaction([hg],e?"readwrite":"readonly").objectStore(hg)}function NQ(){const t=indexedDB.deleteDatabase(_M);return new yf(t).toPromise()}function N0(){const t=indexedDB.open(_M,OQ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(hg,{keyPath:wM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(hg)?e(r):(r.close(),await NQ(),e(await N0()))})})}async function hR(t,e,n){const r=wv(t,!0).put({[wM]:e,value:n});return new yf(r).toPromise()}async function DQ(t,e){const n=wv(t,!1).get(e),r=await new yf(n).toPromise();return r===void 0?null:r.value}function fR(t,e){const n=wv(t,!0).delete(e);return new yf(n).toPromise()}const jQ=800,LQ=3;class EM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await N0(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LQ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_v._getInstance(PQ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kQ(),!this.activeServiceWorker)return;this.sender=new AQ(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CQ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await N0();return await hR(e,dg,"1"),await fR(e,dg),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DQ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>fR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=wv(i,!1).getAll();return new yf(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jQ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}EM.type="LOCAL";const Ch=EM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pR(t,e){return St(t,"POST","/v2/accounts/mfaSignIn:start",It(t,e))}function MQ(t,e){return St(t,"POST","/v2/accounts/mfaSignIn:finalize",It(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b_=nM("rcb"),VQ=new hf(3e4,6e4);class FQ{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=jt().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return W($Q(n),e,"argument-error"),this.shouldResolveImmediately(n)&&nR(jt().grecaptcha)?Promise.resolve(jt().grecaptcha):new Promise((r,i)=>{const s=jt().setTimeout(()=>{i(Ut(e,"network-request-failed"))},VQ.get());jt()[b_]=()=>{jt().clearTimeout(s),delete jt()[b_];const a=jt().grecaptcha;if(!a||!nR(a)){i(Ut(e,"internal-error"));return}const l=a.render;a.render=(c,u)=>{const h=l(c,u);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${hK()}?${ou({onload:b_,render:"explicit",hl:n})}`;jT(o).catch(()=>{clearTimeout(s),i(Ut(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=jt().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function $Q(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class UQ{async load(e){return new vK(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d="recaptcha",BQ={theme:"light",type:"image"};let zQ=class{constructor(e,n,r=Object.assign({},BQ)){this.parameters=r,this.type=$d,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=gt(e),this.isInvisible=this.parameters.size==="invisible",W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;W(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new UQ:new FQ,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const s=o=>{o&&(this.tokenChangeListeners.delete(s),i(o))};this.tokenChangeListeners.add(s),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){W(!this.parameters.sitekey,this.auth,"argument-error"),W(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),W(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=jt()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){W(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){W(NT()&&!zT(),this.auth,"internal-error"),await qQ(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await GG(this.auth);W(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return W(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function qQ(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=ba._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function WQ(t,e,n){if(bt(t.app))return Promise.reject(Kt(t));const r=gt(t),i=await Ev(r,e,ne(n));return new qT(i,s=>vv(r,s))}async function HQ(t,e,n){const r=ne(t);await gv(!1,r,"phone");const i=await Ev(r.auth,e,ne(n));return new qT(i,s=>dM(r,s))}async function GQ(t,e,n){const r=ne(t);if(bt(r.auth.app))return Promise.reject(Kt(r.auth));const i=await Ev(r.auth,e,ne(n));return new qT(i,s=>hM(r,s))}async function Ev(t,e,n){var r;if(!t._getRecaptchaConfig())try{await TK(t)}catch{console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const s=i.session;if("phoneNumber"in i){W(s.type==="enroll",t,"internal-error");const o={idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}};return(await ro(t,o,"mfaSmsEnrollment",async(u,h)=>{if(h.phoneEnrollmentInfo.captchaResponse===Fd){W((n==null?void 0:n.type)===$d,u,"argument-error");const p=await T_(u,h,n);return dR(u,p)}return dR(u,h)},"PHONE_PROVIDER").catch(u=>Promise.reject(u))).phoneSessionInfo.sessionInfo}else{W(s.type==="signin",t,"internal-error");const o=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;W(o,t,"missing-multi-factor-info");const a={mfaPendingCredential:s.credential,mfaEnrollmentId:o,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}};return(await ro(t,a,"mfaSmsSignIn",async(h,p)=>{if(p.phoneSignInInfo.captchaResponse===Fd){W((n==null?void 0:n.type)===$d,h,"argument-error");const m=await T_(h,p,n);return pR(h,m)}return pR(h,p)},"PHONE_PROVIDER").catch(h=>Promise.reject(h))).phoneResponseInfo.sessionInfo}}else{const s={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"};return(await ro(t,s,"sendVerificationCode",async(c,u)=>{if(u.captchaResponse===Fd){W((n==null?void 0:n.type)===$d,c,"argument-error");const h=await T_(c,u,n);return cR(c,h)}return cR(c,u)},"PHONE_PROVIDER").catch(c=>Promise.reject(c))).sessionInfo}}finally{n==null||n._reset()}}async function KQ(t,e){const n=ne(t);if(bt(n.auth.app))return Promise.reject(Kt(n.auth));await LT(n,e)}async function T_(t,e,n){W(n.type===$d,t,"argument-error");const r=await n.verify();W(typeof r=="string",t,"argument-error");const i=Object.assign({},e);if("phoneEnrollmentInfo"in i){const s=i.phoneEnrollmentInfo.phoneNumber,o=i.phoneEnrollmentInfo.captchaResponse,a=i.phoneEnrollmentInfo.clientType,l=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:s,recaptchaToken:r,captchaResponse:o,clientType:a,recaptchaVersion:l}}),i}else if("phoneSignInInfo"in i){const s=i.phoneSignInInfo.captchaResponse,o=i.phoneSignInInfo.clientType,a=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:s,clientType:o,recaptchaVersion:a}}),i}else return Object.assign(i,{recaptchaToken:r}),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ja=class im{constructor(e){this.providerId=im.PROVIDER_ID,this.auth=gt(e)}verifyPhoneNumber(e,n){return Ev(this.auth,e,ne(n))}static credential(e,n){return ba._fromVerification(e,n)}static credentialFromResult(e){const n=e;return im.credentialFromTaggedObject(n)}static credentialFromError(e){return im.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?ba._fromTokenResponse(n,r):null}};ja.PROVIDER_ID="phone";ja.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t,e){return e?tr(e):(W(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends lu{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Bi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Bi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function QQ(t){return uM(t.auth,new WT(t),t.bypassAuthState)}function YQ(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),cM(n,new WT(t),t.bypassAuthState)}async function JQ(t){const{auth:e,user:n}=t;return W(n,e,"internal-error"),LT(n,new WT(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QQ;case"linkViaPopup":case"linkViaRedirect":return JQ;case"reauthViaPopup":case"reauthViaRedirect":return YQ;default:an(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XQ=new hf(2e3,1e4);async function ZQ(t,e,n){if(bt(t.app))return Promise.reject(Ut(t,"operation-not-supported-in-this-environment"));const r=gt(t);au(t,e,ps);const i=el(r,n);return new Vi(r,"signInViaPopup",e,i).executeNotNull()}async function eY(t,e,n){const r=ne(t);if(bt(r.auth.app))return Promise.reject(Ut(r.auth,"operation-not-supported-in-this-environment"));au(r.auth,e,ps);const i=el(r.auth,n);return new Vi(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function tY(t,e,n){const r=ne(t);au(r.auth,e,ps);const i=el(r.auth,n);return new Vi(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Vi extends bM{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Vi.currentPopupAction&&Vi.currentPopupAction.cancel(),Vi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return W(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=vf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ut(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ut(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ut(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,XQ.get())};e()}}Vi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY="pendingRedirect",Ud=new Map;class rY extends bM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Ud.get(this.auth._key());if(!e){try{const r=await iY(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Ud.set(this.auth._key(),e)}return this.bypassAuthState||Ud.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function iY(t,e){const n=IM(e),r=TM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function HT(t,e){return TM(t)._set(IM(e),"true")}function sY(){Ud.clear()}function GT(t,e){Ud.set(t._key(),e)}function TM(t){return tr(t._redirectPersistence)}function IM(t){return Ea(nY,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oY(t,e,n){return aY(t,e,n)}async function aY(t,e,n){if(bt(t.app))return Promise.reject(Kt(t));const r=gt(t);au(t,e,ps),await r._initializationPromise;const i=el(r,n);return await HT(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lY(t,e,n){return cY(t,e,n)}async function cY(t,e,n){const r=ne(t);if(au(r.auth,e,ps),bt(r.auth.app))return Promise.reject(Kt(r.auth));await r.auth._initializationPromise;const i=el(r.auth,n);await HT(i,r.auth);const s=await SM(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function uY(t,e,n){return dY(t,e,n)}async function dY(t,e,n){const r=ne(t);au(r.auth,e,ps),await r.auth._initializationPromise;const i=el(r.auth,n);await gv(!1,r,e.providerId),await HT(i,r.auth);const s=await SM(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function hY(t,e){return await gt(t)._initializationPromise,bv(t,e,!1)}async function bv(t,e,n=!1){if(bt(t.app))return Promise.reject(Kt(t));const r=gt(t),i=el(r,e),o=await new rY(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function SM(t){const e=vf(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fY=10*60*1e3;class xM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pY(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!AM(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ut(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=fY&&this.cachedEventUids.clear(),this.cachedEventUids.has(mR(e))}saveEventToCache(e){this.cachedEventUids.add(mR(e)),this.lastProcessedEventTime=Date.now()}}function mR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function AM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pY(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return AM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RM(t,e={}){return St(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mY=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gY=/^https?/;async function vY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RM(t);for(const n of e)try{if(yY(n))return}catch{}an(t,"unauthorized-domain")}function yY(t){const e=Ah(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!gY.test(n))return!1;if(mY.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y=new hf(3e4,6e4);function gR(){const t=jt().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function wY(t){return new Promise((e,n)=>{var r,i,s;function o(){gR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gR(),n(Ut(t,"network-request-failed"))},timeout:_Y.get()})}if(!((i=(r=jt().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=jt().gapi)===null||s===void 0)&&s.load)o();else{const a=nM("iframefcb");return jt()[a]=()=>{gapi.load?o():n(Ut(t,"network-request-failed"))},jT(`${pK()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw sm=null,e})}let sm=null;function EY(t){return sm=sm||wY(t),sm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bY=new hf(5e3,15e3),TY="__/auth/iframe",IY="emulator/auth/iframe",SY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function AY(t){const e=t.config;W(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?DT(e,IY):`https://${t.config.authDomain}/${TY}`,r={apiKey:e.apiKey,appName:t.name,v:ds},i=xY.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ou(r).slice(1)}`}async function RY(t){const e=await EY(t),n=jt().gapi;return W(n,t,"internal-error"),e.open({where:document.body,url:AY(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:SY,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Ut(t,"network-request-failed"),a=jt().setTimeout(()=>{s(o)},bY.get());function l(){jt().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CY=500,PY=600,OY="_blank",NY="http://localhost";class vR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DY(t,e,n,r=CY,i=PY){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},kY),{width:r.toString(),height:i.toString(),top:s,left:o}),c=mt().toLowerCase();n&&(a=YL(c)?OY:n),KL(c)&&(e=e||NY,l.scrollbars="yes");const u=Object.entries(l).reduce((p,[m,v])=>`${p}${m}=${v},`,"");if(iK(c)&&a!=="_self")return jY(e||"",a),new vR(null);const h=window.open(e||"",a,u);W(h,t,"popup-blocked");try{h.focus()}catch{}return new vR(h)}function jY(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LY="__/auth/handler",MY="emulator/auth/handler",VY=encodeURIComponent("fac");async function D0(t,e,n,r,i,s){W(t.config.authDomain,t,"auth-domain-config-required"),W(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ds,eventId:i};if(e instanceof ps){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",l7(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,h]of Object.entries(s||{}))o[u]=h}if(e instanceof cu){const u=e.getScopes().filter(h=>h!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${VY}=${encodeURIComponent(l)}`:"";return`${FY(t)}?${ou(a).slice(1)}${c}`}function FY({config:t}){return t.emulator?DT(t,MY):`https://${t.authDomain}/${LY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_="webStorageSupport";class $Y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Da,this._completeRedirectFn=bv,this._overrideRedirectResult=GT}async _openPopup(e,n,r,i){var s;Hr((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await D0(e,n,r,Ah(),i);return DY(e,o,vf())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await D0(e,n,r,Ah(),i);return RQ(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await RY(e),r=new xM(e);return n.register("authEvent",i=>(W(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(I_,{type:I_},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[I_];o!==void 0&&n(!!o),an(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=vY(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return eM()||QL()||pf()}}const UY=$Y;class BY{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return ui("unexpected MultiFactorSessionType")}}}class KT extends BY{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new KT(e)}_finalizeEnroll(e,n,r){return EQ(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return MQ(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class kM{constructor(){}static assertion(e){return KT._fromCredential(e)}}kM.FACTOR_ID="phone";var yR="@firebase/auth",_R="1.8.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function WY(t){or(new on("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tM(t)},c=new uK(r,i,s,l);return IK(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),or(new on("auth-internal",e=>{const n=gt(e.getProvider("auth").getImmediate());return(r=>new zY(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),nn(yR,_R,qY(t)),nn(yR,_R,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY=5*60;e7("authIdTokenMaxAge");function GY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}dK({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Ut("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",GY().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});WY("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function La(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KY=2e3;async function QY(t,e,n){var r;const{BuildInfo:i}=La();Hr(e.sessionId,"AuthEvent did not contain a session ID");const s=await eJ(e.sessionId),o={};return pf()?o.ibi=i.packageName:ff()?o.apn=i.packageName:an(t,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,D0(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function YY(t){const{BuildInfo:e}=La(),n={};pf()?n.iosBundleId=e.packageName:ff()?n.androidPackageName=e.packageName:an(t,"operation-not-supported-in-this-environment"),await RM(t,n)}function JY(t){const{cordova:e}=La();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,rK()?"_blank":"_system","location=yes"),n(i)})})}async function XY(t,e,n){const{cordova:r}=La();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function l(){var h;s();const p=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof p=="function"&&p(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function c(){a||(a=window.setTimeout(()=>{o(Ut(t,"redirect-cancelled-by-user"))},KY))}function u(){(document==null?void 0:document.visibilityState)==="visible"&&c()}e.addPassiveListener(l),document.addEventListener("resume",c,!1),ff()&&document.addEventListener("visibilitychange",u,!1),i=()=>{e.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}})}finally{i()}}function ZY(t){var e,n,r,i,s,o,a,l,c,u;const h=La();W(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),W(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),W(typeof((s=(i=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),W(typeof((u=(c=h==null?void 0:h.cordova)===null||c===void 0?void 0:c.InAppBrowser)===null||u===void 0?void 0:u.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function eJ(t){const e=tJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function tJ(t){if(Hr(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nJ=20;class rJ extends xM{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function iJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:aJ(),postBody:null,tenantId:t.tenantId,error:Ut(t,"no-auth-event")}}function sJ(t,e){return j0()._set(L0(t),e)}async function wR(t){const e=await j0()._get(L0(t));return e&&await j0()._remove(L0(t)),e}function oJ(t,e){var n,r;const i=cJ(e);if(i.includes("/__/auth/callback")){const s=om(i),o=s.firebaseError?lJ(decodeURIComponent(s.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Ut(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function aJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<nJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function j0(){return tr(BT)}function L0(t){return Ea("authEvent",t.config.apiKey,t.name)}function lJ(t){try{return JSON.parse(t)}catch{return null}}function cJ(t){const e=om(t),n=e.link?decodeURIComponent(e.link):void 0,r=om(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return om(i).link||i||r||n||t}function om(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Zl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uJ=500;class dJ{constructor(){this._redirectPersistence=Da,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bv,this._overrideRedirectResult=GT}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new rJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){an(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){ZY(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),sY(),await this._originValidation(e);const o=iJ(e,r,i);await sJ(e,o);const a=await QY(e,o,n),l=await JY(a);return XY(e,s,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=YY(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=La(),o=setTimeout(async()=>{await wR(e),n.onEvent(ER())},uJ),a=async u=>{clearTimeout(o);const h=await wR(e);let p=null;h&&(u!=null&&u.url)&&(p=oJ(h,u.url)),n.onEvent(p||ER())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=i,c=`${s.packageName.toLowerCase()}://`;La().handleOpenURL=async u=>{if(u.toLowerCase().startsWith(c)&&a({url:u}),typeof l=="function")try{l(u)}catch(h){console.error(h)}}}}const hJ=dJ;function ER(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ut("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(t,e){gt(t)._logFramework(e)}var pJ="@firebase/auth-compat",mJ="0.5.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gJ=1e3;function Bd(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function vJ(){return Bd()==="http:"||Bd()==="https:"}function CM(t=mt()){return!!((Bd()==="file:"||Bd()==="ionic:"||Bd()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function yJ(){return IT()||TT()}function _J(){return Yj()&&(document==null?void 0:document.documentMode)===11}function wJ(t=mt()){return/Edge\/\d+/.test(t)}function EJ(t=mt()){return _J()||wJ(t)}function PM(){try{const t=self.localStorage,e=vf();if(t)return t.setItem(e,"1"),t.removeItem(e),EJ()?Na():!0}catch{return QT()&&Na()}return!1}function QT(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function S_(){return(vJ()||uv()||CM())&&!yJ()&&PM()&&!QT()}function OM(){return CM()&&typeof document<"u"}async function bJ(){return OM()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},gJ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function TJ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn={LOCAL:"local",NONE:"none",SESSION:"session"},Xu=W,NM="persistence";function IJ(t,e){if(Xu(Object.values(Jn).includes(e),t,"invalid-persistence-type"),IT()){Xu(e!==Jn.SESSION,t,"unsupported-persistence-type");return}if(TT()){Xu(e===Jn.NONE,t,"unsupported-persistence-type");return}if(QT()){Xu(e===Jn.NONE||e===Jn.LOCAL&&Na(),t,"unsupported-persistence-type");return}Xu(e===Jn.NONE||PM(),t,"unsupported-persistence-type")}async function M0(t){await t._initializationPromise;const e=DM(),n=Ea(NM,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function SJ(t,e){const n=DM();if(!n)return[];const r=Ea(NM,t,e);switch(n.getItem(r)){case Jn.NONE:return[Oc];case Jn.LOCAL:return[Ch,Da];case Jn.SESSION:return[Da];default:return[]}}function DM(){var t;try{return((t=TJ())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xJ=W;class Ws{constructor(){this.browserResolver=tr(UY),this.cordovaResolver=tr(hJ),this.underlyingResolver=null,this._redirectPersistence=Da,this._completeRedirectFn=bv,this._overrideRedirectResult=GT}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return OM()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xJ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await bJ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){return t.unwrap()}function AJ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RJ(t){return LM(t)}function kJ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new CJ(t,wQ(t,e))}else if(r){const i=LM(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function LM(t){const{_tokenResponse:e}=t instanceof Gt?t.customData:t;if(!e)return null;if(!(t instanceof Gt)&&"temporaryProof"in e&&"phoneNumber"in e)return ja.credentialFromResult(t);const n=e.providerId;if(!n||n===Yu.PASSWORD)return null;let r;switch(n){case Yu.GOOGLE:r=si;break;case Yu.FACEBOOK:r=ii;break;case Yu.GITHUB:r=oi;break;case Yu.TWITTER:r=ai;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!s&&!o&&!i&&!a?null:a?n.startsWith("saml.")?Nc._create(n,a):bi._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:s}):new uc(n).credential({idToken:i,accessToken:s,rawNonce:l})}return t instanceof Gt?r.credentialFromError(t):r.credentialFromResult(t)}function Nn(t,e){return e.catch(n=>{throw n instanceof Gt&&kJ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:RJ(n),additionalUserInfo:_Q(n),user:Tv.getOrCreate(i)}})}async function V0(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>Nn(t,n.confirm(r))}}class CJ{constructor(e,n){this.resolver=n,this.auth=AJ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Nn(jM(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tv=class gd{constructor(e){this._delegate=e,this.multiFactor=TQ(e)}static getOrCreate(e){return gd.USER_MAP.has(e)||gd.USER_MAP.set(e,new gd(e)),gd.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Nn(this.auth,dM(this._delegate,e))}async linkWithPhoneNumber(e,n){return V0(this.auth,HQ(this._delegate,e,n))}async linkWithPopup(e){return Nn(this.auth,tY(this._delegate,e,Ws))}async linkWithRedirect(e){return await M0(gt(this.auth)),uY(this._delegate,e,Ws)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Nn(this.auth,hM(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return V0(this.auth,GQ(this._delegate,e,n))}reauthenticateWithPopup(e){return Nn(this.auth,eY(this._delegate,e,Ws))}async reauthenticateWithRedirect(e){return await M0(gt(this.auth)),lY(this._delegate,e,Ws)}sendEmailVerification(e){return lQ(this._delegate,e)}async unlink(e){return await KK(this._delegate,e),this}updateEmail(e){return hQ(this._delegate,e)}updatePassword(e){return fQ(this._delegate,e)}updatePhoneNumber(e){return KQ(this._delegate,e)}updateProfile(e){return dQ(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return cQ(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Tv.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=W;class F0{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Zu(r,"invalid-api-key",{appName:e.name}),Zu(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Ws:void 0;this._delegate=n.initialize({options:{persistence:PJ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(VG),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tv.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){SK(this._delegate,e,n)}applyActionCode(e){return ZK(this._delegate,e)}checkActionCode(e){return fM(this._delegate,e)}confirmPasswordReset(e,n){return XK(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return Nn(this._delegate,tQ(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return aQ(this._delegate,e)}isSignInWithEmailLink(e){return iQ(this._delegate,e)}async getRedirectResult(){Zu(S_(),this._delegate,"operation-not-supported-in-this-environment");const e=await hY(this._delegate,Ws);return e?Nn(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){fJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:s,complete:o}=bR(e,n,r);return this._delegate.onAuthStateChanged(i,s,o)}onIdTokenChanged(e,n,r){const{next:i,error:s,complete:o}=bR(e,n,r);return this._delegate.onIdTokenChanged(i,s,o)}sendSignInLinkToEmail(e,n){return rQ(this._delegate,e,n)}sendPasswordResetEmail(e,n){return JK(this._delegate,e,n||void 0)}async setPersistence(e){IJ(this._delegate,e);let n;switch(e){case Jn.SESSION:n=Da;break;case Jn.LOCAL:n=await tr(Ch)._isAvailable()?Ch:BT;break;case Jn.NONE:n=Oc;break;default:return an("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Nn(this._delegate,GK(this._delegate))}signInWithCredential(e){return Nn(this._delegate,vv(this._delegate,e))}signInWithCustomToken(e){return Nn(this._delegate,YK(this._delegate,e))}signInWithEmailAndPassword(e,n){return Nn(this._delegate,nQ(this._delegate,e,n))}signInWithEmailLink(e,n){return Nn(this._delegate,sQ(this._delegate,e,n))}signInWithPhoneNumber(e,n){return V0(this._delegate,WQ(this._delegate,e,n))}async signInWithPopup(e){return Zu(S_(),this._delegate,"operation-not-supported-in-this-environment"),Nn(this._delegate,ZQ(this._delegate,e,Ws))}async signInWithRedirect(e){return Zu(S_(),this._delegate,"operation-not-supported-in-this-environment"),await M0(this._delegate),oY(this._delegate,e,Ws)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return eQ(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}F0.Persistence=Jn;function bR(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:o=>i(o&&Tv.getOrCreate(o)),error:e,complete:n}}function PJ(t,e){const n=SJ(t,e);if(typeof self<"u"&&!n.includes(Ch)&&n.push(Ch),typeof window<"u")for(const r of[BT,Da])n.includes(r)||n.push(r);return n.includes(Oc)||n.push(Oc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{static credential(e,n){return ja.credential(e,n)}constructor(){this.providerId="phone",this._delegate=new ja(jM(Yt.auth()))}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}YT.PHONE_SIGN_IN_METHOD=ja.PHONE_SIGN_IN_METHOD;YT.PROVIDER_ID=ja.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OJ=W;class NJ{constructor(e,n,r=Yt.app()){var i;OJ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new zQ(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ="auth-compat";function jJ(t){t.INTERNAL.registerComponent(new on(DJ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new F0(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ml.EMAIL_SIGNIN,PASSWORD_RESET:ml.PASSWORD_RESET,RECOVER_EMAIL:ml.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ml.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ml.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ml.VERIFY_EMAIL}},EmailAuthProvider:Po,FacebookAuthProvider:ii,GithubAuthProvider:oi,GoogleAuthProvider:si,OAuthProvider:uc,SAMLAuthProvider:cg,PhoneAuthProvider:YT,PhoneMultiFactorGenerator:kM,RecaptchaVerifier:NJ,TwitterAuthProvider:ai,Auth:F0,AuthCredential:lu,Error:Gt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(pJ,mJ)}jJ(Yt);var LJ="firebase",MJ="11.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt.registerVersion(LJ,MJ,"app-compat");var TR={VITE_SUPABASE_URL:"https://ttctclwuiwfudfzdcaux.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",VITE_APP_ENV:"development",VITE_FIREBASE_API_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_FIREBASE_AUTH_DOMAIN:"fractal-tickets.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"fractal-tickets",VITE_FIREBASE_STORAGE_BUCKET:"fractal-tickets.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"123289322265",VITE_FIREBASE_APP_ID:"1:123289322265:web:d31675e0df128103083b88",VITE_FIREBASE_PUB_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const MM=t=>{const e="development",i={development:{...{ENV:e,BACKEND_GRAPHQL_ENDPOINT:TR.VITE_APP_BASE_URL,VITE_APP_FIREBASE_CONFIG:{apiKey:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",authDomain:"fractal-tickets.firebaseapp.com",projectId:"fractal-tickets",storageBucket:"fractal-tickets.firebasestorage.app",messagingSenderId:"123289322265",appId:"1:123289322265:web:d31675e0df128103083b88",measurementId:TR.VITE_FIREBASE_MEASUREMENT_ID||"Missing Measurement ID"}}}},s=i[e]||i.development;return t?s[t]:s};var IR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var io,VM;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function C(){}C.prototype=S.prototype,x.D=S.prototype,x.prototype=new C,x.prototype.constructor=x,x.C=function(R,O,j){for(var P=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)P[ge-2]=arguments[ge];return S.prototype[O].apply(R,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(x,S,C){C||(C=0);var R=Array(16);if(typeof S=="string")for(var O=0;16>O;++O)R[O]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(O=0;16>O;++O)R[O]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=x.g[0],C=x.g[1],O=x.g[2];var j=x.g[3],P=S+(j^C&(O^j))+R[0]+3614090360&4294967295;S=C+(P<<7&4294967295|P>>>25),P=j+(O^S&(C^O))+R[1]+3905402710&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(C^j&(S^C))+R[2]+606105819&4294967295,O=j+(P<<17&4294967295|P>>>15),P=C+(S^O&(j^S))+R[3]+3250441966&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(j^C&(O^j))+R[4]+4118548399&4294967295,S=C+(P<<7&4294967295|P>>>25),P=j+(O^S&(C^O))+R[5]+1200080426&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(C^j&(S^C))+R[6]+2821735955&4294967295,O=j+(P<<17&4294967295|P>>>15),P=C+(S^O&(j^S))+R[7]+4249261313&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(j^C&(O^j))+R[8]+1770035416&4294967295,S=C+(P<<7&4294967295|P>>>25),P=j+(O^S&(C^O))+R[9]+2336552879&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(C^j&(S^C))+R[10]+4294925233&4294967295,O=j+(P<<17&4294967295|P>>>15),P=C+(S^O&(j^S))+R[11]+2304563134&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(j^C&(O^j))+R[12]+1804603682&4294967295,S=C+(P<<7&4294967295|P>>>25),P=j+(O^S&(C^O))+R[13]+4254626195&4294967295,j=S+(P<<12&4294967295|P>>>20),P=O+(C^j&(S^C))+R[14]+2792965006&4294967295,O=j+(P<<17&4294967295|P>>>15),P=C+(S^O&(j^S))+R[15]+1236535329&4294967295,C=O+(P<<22&4294967295|P>>>10),P=S+(O^j&(C^O))+R[1]+4129170786&4294967295,S=C+(P<<5&4294967295|P>>>27),P=j+(C^O&(S^C))+R[6]+3225465664&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(j^S))+R[11]+643717713&4294967295,O=j+(P<<14&4294967295|P>>>18),P=C+(j^S&(O^j))+R[0]+3921069994&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(C^O))+R[5]+3593408605&4294967295,S=C+(P<<5&4294967295|P>>>27),P=j+(C^O&(S^C))+R[10]+38016083&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(j^S))+R[15]+3634488961&4294967295,O=j+(P<<14&4294967295|P>>>18),P=C+(j^S&(O^j))+R[4]+3889429448&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(C^O))+R[9]+568446438&4294967295,S=C+(P<<5&4294967295|P>>>27),P=j+(C^O&(S^C))+R[14]+3275163606&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(j^S))+R[3]+4107603335&4294967295,O=j+(P<<14&4294967295|P>>>18),P=C+(j^S&(O^j))+R[8]+1163531501&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(O^j&(C^O))+R[13]+2850285829&4294967295,S=C+(P<<5&4294967295|P>>>27),P=j+(C^O&(S^C))+R[2]+4243563512&4294967295,j=S+(P<<9&4294967295|P>>>23),P=O+(S^C&(j^S))+R[7]+1735328473&4294967295,O=j+(P<<14&4294967295|P>>>18),P=C+(j^S&(O^j))+R[12]+2368359562&4294967295,C=O+(P<<20&4294967295|P>>>12),P=S+(C^O^j)+R[5]+4294588738&4294967295,S=C+(P<<4&4294967295|P>>>28),P=j+(S^C^O)+R[8]+2272392833&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^C)+R[11]+1839030562&4294967295,O=j+(P<<16&4294967295|P>>>16),P=C+(O^j^S)+R[14]+4259657740&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(C^O^j)+R[1]+2763975236&4294967295,S=C+(P<<4&4294967295|P>>>28),P=j+(S^C^O)+R[4]+1272893353&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^C)+R[7]+4139469664&4294967295,O=j+(P<<16&4294967295|P>>>16),P=C+(O^j^S)+R[10]+3200236656&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(C^O^j)+R[13]+681279174&4294967295,S=C+(P<<4&4294967295|P>>>28),P=j+(S^C^O)+R[0]+3936430074&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^C)+R[3]+3572445317&4294967295,O=j+(P<<16&4294967295|P>>>16),P=C+(O^j^S)+R[6]+76029189&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(C^O^j)+R[9]+3654602809&4294967295,S=C+(P<<4&4294967295|P>>>28),P=j+(S^C^O)+R[12]+3873151461&4294967295,j=S+(P<<11&4294967295|P>>>21),P=O+(j^S^C)+R[15]+530742520&4294967295,O=j+(P<<16&4294967295|P>>>16),P=C+(O^j^S)+R[2]+3299628645&4294967295,C=O+(P<<23&4294967295|P>>>9),P=S+(O^(C|~j))+R[0]+4096336452&4294967295,S=C+(P<<6&4294967295|P>>>26),P=j+(C^(S|~O))+R[7]+1126891415&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~C))+R[14]+2878612391&4294967295,O=j+(P<<15&4294967295|P>>>17),P=C+(j^(O|~S))+R[5]+4237533241&4294967295,C=O+(P<<21&4294967295|P>>>11),P=S+(O^(C|~j))+R[12]+1700485571&4294967295,S=C+(P<<6&4294967295|P>>>26),P=j+(C^(S|~O))+R[3]+2399980690&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~C))+R[10]+4293915773&4294967295,O=j+(P<<15&4294967295|P>>>17),P=C+(j^(O|~S))+R[1]+2240044497&4294967295,C=O+(P<<21&4294967295|P>>>11),P=S+(O^(C|~j))+R[8]+1873313359&4294967295,S=C+(P<<6&4294967295|P>>>26),P=j+(C^(S|~O))+R[15]+4264355552&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~C))+R[6]+2734768916&4294967295,O=j+(P<<15&4294967295|P>>>17),P=C+(j^(O|~S))+R[13]+1309151649&4294967295,C=O+(P<<21&4294967295|P>>>11),P=S+(O^(C|~j))+R[4]+4149444226&4294967295,S=C+(P<<6&4294967295|P>>>26),P=j+(C^(S|~O))+R[11]+3174756917&4294967295,j=S+(P<<10&4294967295|P>>>22),P=O+(S^(j|~C))+R[2]+718787259&4294967295,O=j+(P<<15&4294967295|P>>>17),P=C+(j^(O|~S))+R[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(O+(P<<21&4294967295|P>>>11))&4294967295,x.g[2]=x.g[2]+O&4294967295,x.g[3]=x.g[3]+j&4294967295}r.prototype.u=function(x,S){S===void 0&&(S=x.length);for(var C=S-this.blockSize,R=this.B,O=this.h,j=0;j<S;){if(O==0)for(;j<=C;)i(this,x,j),j+=this.blockSize;if(typeof x=="string"){for(;j<S;)if(R[O++]=x.charCodeAt(j++),O==this.blockSize){i(this,R),O=0;break}}else for(;j<S;)if(R[O++]=x[j++],O==this.blockSize){i(this,R),O=0;break}}this.h=O,this.o+=S},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;var C=8*this.o;for(S=x.length-8;S<x.length;++S)x[S]=C&255,C/=256;for(this.u(x),x=Array(16),S=C=0;4>S;++S)for(var R=0;32>R;R+=8)x[C++]=this.g[S]>>>R&255;return x};function s(x,S){var C=a;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=S(x)}function o(x,S){this.h=S;for(var C=[],R=!0,O=x.length-1;0<=O;O--){var j=x[O]|0;R&&j==S||(C[O]=j,R=!1)}this.g=C}var a={};function l(x){return-128<=x&&128>x?s(x,function(S){return new o([S|0],0>S?-1:0)}):new o([x|0],0>x?-1:0)}function c(x){if(isNaN(x)||!isFinite(x))return h;if(0>x)return y(c(-x));for(var S=[],C=1,R=0;x>=C;R++)S[R]=x/C|0,C*=4294967296;return new o(S,0)}function u(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return y(u(x.substring(1),S));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(S,8)),R=h,O=0;O<x.length;O+=8){var j=Math.min(8,x.length-O),P=parseInt(x.substring(O,O+j),S);8>j?(j=c(Math.pow(S,j)),R=R.j(j).add(c(P))):(R=R.j(C),R=R.add(c(P)))}return R}var h=l(0),p=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-y(this).m();for(var x=0,S=1,C=0;C<this.g.length;C++){var R=this.i(C);x+=(0<=R?R:4294967296+R)*S,S*=4294967296}return x},t.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(v(this))return"0";if(w(this))return"-"+y(this).toString(x);for(var S=c(Math.pow(x,6)),C=this,R="";;){var O=k(C,S).g;C=T(C,O.j(S));var j=((0<C.g.length?C.g[0]:C.h)>>>0).toString(x);if(C=O,v(C))return j+R;for(;6>j.length;)j="0"+j;R=j+R}},t.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function v(x){if(x.h!=0)return!1;for(var S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function w(x){return x.h==-1}t.l=function(x){return x=T(this,x),w(x)?-1:v(x)?0:1};function y(x){for(var S=x.g.length,C=[],R=0;R<S;R++)C[R]=~x.g[R];return new o(C,~x.h).add(p)}t.abs=function(){return w(this)?y(this):this},t.add=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],R=0,O=0;O<=S;O++){var j=R+(this.i(O)&65535)+(x.i(O)&65535),P=(j>>>16)+(this.i(O)>>>16)+(x.i(O)>>>16);R=P>>>16,j&=65535,P&=65535,C[O]=P<<16|j}return new o(C,C[C.length-1]&-2147483648?-1:0)};function T(x,S){return x.add(y(S))}t.j=function(x){if(v(this)||v(x))return h;if(w(this))return w(x)?y(this).j(y(x)):y(y(this).j(x));if(w(x))return y(this.j(y(x)));if(0>this.l(m)&&0>x.l(m))return c(this.m()*x.m());for(var S=this.g.length+x.g.length,C=[],R=0;R<2*S;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(var O=0;O<x.g.length;O++){var j=this.i(R)>>>16,P=this.i(R)&65535,ge=x.i(O)>>>16,Re=x.i(O)&65535;C[2*R+2*O]+=P*Re,E(C,2*R+2*O),C[2*R+2*O+1]+=j*Re,E(C,2*R+2*O+1),C[2*R+2*O+1]+=P*ge,E(C,2*R+2*O+1),C[2*R+2*O+2]+=j*ge,E(C,2*R+2*O+2)}for(R=0;R<S;R++)C[R]=C[2*R+1]<<16|C[2*R];for(R=S;R<2*S;R++)C[R]=0;return new o(C,0)};function E(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function b(x,S){this.g=x,this.h=S}function k(x,S){if(v(S))throw Error("division by zero");if(v(x))return new b(h,h);if(w(x))return S=k(y(x),S),new b(y(S.g),y(S.h));if(w(S))return S=k(x,y(S)),new b(y(S.g),S.h);if(30<x.g.length){if(w(x)||w(S))throw Error("slowDivide_ only works with positive integers.");for(var C=p,R=S;0>=R.l(x);)C=D(C),R=D(R);var O=N(C,1),j=N(R,1);for(R=N(R,2),C=N(C,2);!v(R);){var P=j.add(R);0>=P.l(x)&&(O=O.add(C),j=P),R=N(R,1),C=N(C,1)}return S=T(x,O.j(S)),new b(O,S)}for(O=h;0<=x.l(S);){for(C=Math.max(1,Math.floor(x.m()/S.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),j=c(C),P=j.j(S);w(P)||0<P.l(x);)C-=R,j=c(C),P=j.j(S);v(j)&&(j=p),O=O.add(j),x=T(x,P)}return new b(O,x)}t.A=function(x){return k(this,x).h},t.and=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],R=0;R<S;R++)C[R]=this.i(R)&x.i(R);return new o(C,this.h&x.h)},t.or=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],R=0;R<S;R++)C[R]=this.i(R)|x.i(R);return new o(C,this.h|x.h)},t.xor=function(x){for(var S=Math.max(this.g.length,x.g.length),C=[],R=0;R<S;R++)C[R]=this.i(R)^x.i(R);return new o(C,this.h^x.h)};function D(x){for(var S=x.g.length+1,C=[],R=0;R<S;R++)C[R]=x.i(R)<<1|x.i(R-1)>>>31;return new o(C,x.h)}function N(x,S){var C=S>>5;S%=32;for(var R=x.g.length-C,O=[],j=0;j<R;j++)O[j]=0<S?x.i(j+C)>>>S|x.i(j+C+1)<<32-S:x.i(j+C);return new o(O,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,VM=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,io=o}).apply(typeof IR<"u"?IR:typeof self<"u"?self:typeof window<"u"?window:{});var Ep=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var FM,vd,$M,am,$0,UM,BM,zM;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,_){return d==Array.prototype||d==Object.prototype||(d[g]=_.value),d};function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ep=="object"&&Ep];for(var g=0;g<d.length;++g){var _=d[g];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var r=n(this);function i(d,g){if(g)e:{var _=r;d=d.split(".");for(var A=0;A<d.length-1;A++){var L=d[A];if(!(L in _))break e;_=_[L]}d=d[d.length-1],A=_[d],g=g(A),g!=A&&g!=null&&e(_,d,{configurable:!0,writable:!0,value:g})}}function s(d,g){d instanceof String&&(d+="");var _=0,A=!1,L={next:function(){if(!A&&_<d.length){var V=_++;return{value:g(V,d[V]),done:!1}}return A=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}i("Array.prototype.values",function(d){return d||function(){return s(this,function(g,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function c(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function u(d,g,_){return d.call.apply(d.bind,arguments)}function h(d,g,_){if(!d)throw Error();if(2<arguments.length){var A=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,A),d.apply(g,L)}}return function(){return d.apply(g,arguments)}}function p(d,g,_){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:h,p.apply(null,arguments)}function m(d,g){var _=Array.prototype.slice.call(arguments,1);return function(){var A=_.slice();return A.push.apply(A,arguments),d.apply(this,A)}}function v(d,g){function _(){}_.prototype=g.prototype,d.aa=g.prototype,d.prototype=new _,d.prototype.constructor=d,d.Qb=function(A,L,V){for(var K=Array(arguments.length-2),ze=2;ze<arguments.length;ze++)K[ze-2]=arguments[ze];return g.prototype[L].apply(A,K)}}function w(d){const g=d.length;if(0<g){const _=Array(g);for(let A=0;A<g;A++)_[A]=d[A];return _}return[]}function y(d,g){for(let _=1;_<arguments.length;_++){const A=arguments[_];if(l(A)){const L=d.length||0,V=A.length||0;d.length=L+V;for(let K=0;K<V;K++)d[L+K]=A[K]}else d.push(A)}}class T{constructor(g,_){this.i=g,this.j=_,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function E(d){return/^[\s\xa0]*$/.test(d)}function b(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function k(d){return k[" "](d),d}k[" "]=function(){};var D=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function N(d,g,_){for(const A in d)g.call(_,d[A],A,d)}function x(d,g){for(const _ in d)g.call(void 0,d[_],_,d)}function S(d){const g={};for(const _ in d)g[_]=d[_];return g}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(d,g){let _,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(_ in A)d[_]=A[_];for(let V=0;V<C.length;V++)_=C[V],Object.prototype.hasOwnProperty.call(A,_)&&(d[_]=A[_])}}function O(d){var g=1;d=d.split(":");const _=[];for(;0<g&&d.length;)_.push(d.shift()),g--;return d.length&&_.push(d.join(":")),_}function j(d){a.setTimeout(()=>{throw d},0)}function P(){var d=G;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class ge{constructor(){this.h=this.g=null}add(g,_){const A=Re.get();A.set(g,_),this.h?this.h.next=A:this.g=A,this.h=A}}var Re=new T(()=>new ke,d=>d.reset());class ke{constructor(){this.next=this.g=this.h=null}set(g,_){this.h=g,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,G=new ge,J=()=>{const d=a.Promise.resolve(void 0);B=()=>{d.then(fe)}};var fe=()=>{for(var d;d=P();){try{d.h.call(d.g)}catch(_){j(_)}var g=Re;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}U=!1};function se(){this.s=this.s,this.C=this.C}se.prototype.s=!1,se.prototype.ma=function(){this.s||(this.s=!0,this.N())},se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var Ne=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const _=()=>{};a.addEventListener("test",_,g),a.removeEventListener("test",_,g)}catch{}return d}();function Ie(d,g){if(me.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var _=this.type=d.type,A=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(D){e:{try{k(g.nodeName);var L=!0;break e}catch{}L=!1}L||(g=null)}}else _=="mouseover"?g=d.fromElement:_=="mouseout"&&(g=d.toElement);this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:Ke[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ie.aa.h.call(this)}}v(Ie,me);var Ke={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var vt="closure_listenable_"+(1e6*Math.random()|0),Wn=0;function Cr(d,g,_,A,L){this.listener=d,this.proxy=null,this.src=g,this.type=_,this.capture=!!A,this.ha=L,this.key=++Wn,this.da=this.fa=!1}function Hn(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function Gn(d){this.src=d,this.g={},this.h=0}Gn.prototype.add=function(d,g,_,A,L){var V=d.toString();d=this.g[V],d||(d=this.g[V]=[],this.h++);var K=fr(d,g,A,L);return-1<K?(g=d[K],_||(g.fa=!1)):(g=new Cr(g,this.src,V,!!A,L),g.fa=_,d.push(g)),g};function hr(d,g){var _=g.type;if(_ in d.g){var A=d.g[_],L=Array.prototype.indexOf.call(A,g,void 0),V;(V=0<=L)&&Array.prototype.splice.call(A,L,1),V&&(Hn(g),d.g[_].length==0&&(delete d.g[_],d.h--))}}function fr(d,g,_,A){for(var L=0;L<d.length;++L){var V=d[L];if(!V.da&&V.listener==g&&V.capture==!!_&&V.ha==A)return L}return-1}var pr="closure_lm_"+(1e6*Math.random()|0),Ve={};function Qr(d,g,_,A,L){if(A&&A.once)return ol(d,g,_,A,L);if(Array.isArray(g)){for(var V=0;V<g.length;V++)Qr(d,g[V],_,A,L);return null}return _=Se(_),d&&d[vt]?d.K(g,_,c(A)?!!A.capture:!!A,L):Pr(d,g,_,!1,A,L)}function Pr(d,g,_,A,L,V){if(!g)throw Error("Invalid event type");var K=c(L)?!!L.capture:!!L,ze=Jr(d);if(ze||(d[pr]=ze=new Gn(d)),_=ze.add(g,_,A,K,V),_.proxy)return _;if(A=Iu(),_.proxy=A,A.src=d,A.listener=_,d.addEventListener)Ne||(L=K),L===void 0&&(L=!1),d.addEventListener(g.toString(),A,L);else if(d.attachEvent)d.attachEvent(Vo(g.toString()),A);else if(d.addListener&&d.removeListener)d.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Iu(){function d(_){return g.call(d.src,d.listener,_)}const g=al;return d}function ol(d,g,_,A,L){if(Array.isArray(g)){for(var V=0;V<g.length;V++)ol(d,g[V],_,A,L);return null}return _=Se(_),d&&d[vt]?d.L(g,_,c(A)?!!A.capture:!!A,L):Pr(d,g,_,!0,A,L)}function mr(d,g,_,A,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)mr(d,g[V],_,A,L);else A=c(A)?!!A.capture:!!A,_=Se(_),d&&d[vt]?(d=d.i,g=String(g).toString(),g in d.g&&(V=d.g[g],_=fr(V,_,A,L),-1<_&&(Hn(V[_]),Array.prototype.splice.call(V,_,1),V.length==0&&(delete d.g[g],d.h--)))):d&&(d=Jr(d))&&(g=d.g[g.toString()],d=-1,g&&(d=fr(g,_,A,L)),(_=-1<d?g[d]:null)&&Yr(_))}function Yr(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[vt])hr(g.i,d);else{var _=d.type,A=d.proxy;g.removeEventListener?g.removeEventListener(_,A,d.capture):g.detachEvent?g.detachEvent(Vo(_),A):g.addListener&&g.removeListener&&g.removeListener(A),(_=Jr(g))?(hr(_,d),_.h==0&&(_.src=null,g[pr]=null)):Hn(d)}}}function Vo(d){return d in Ve?Ve[d]:Ve[d]="on"+d}function al(d,g){if(d.da)d=!0;else{g=new Ie(g,this);var _=d.listener,A=d.ha||d.src;d.fa&&Yr(d),d=_.call(A,g)}return d}function Jr(d){return d=d[pr],d instanceof Gn?d:null}var ws="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(d){return typeof d=="function"?d:(d[ws]||(d[ws]=function(g){return d.handleEvent(g)}),d[ws])}function qe(){se.call(this),this.i=new Gn(this),this.M=this,this.F=null}v(qe,se),qe.prototype[vt]=!0,qe.prototype.removeEventListener=function(d,g,_,A){mr(this,d,g,_,A)};function xt(d,g){var _,A=d.F;if(A)for(_=[];A;A=A.F)_.push(A);if(d=d.M,A=g.type||g,typeof g=="string")g=new me(g,d);else if(g instanceof me)g.target=g.target||d;else{var L=g;g=new me(A,d),R(g,L)}if(L=!0,_)for(var V=_.length-1;0<=V;V--){var K=g.g=_[V];L=Df(K,A,!0,g)&&L}if(K=g.g=d,L=Df(K,A,!0,g)&&L,L=Df(K,A,!1,g)&&L,_)for(V=0;V<_.length;V++)K=g.g=_[V],L=Df(K,A,!1,g)&&L}qe.prototype.N=function(){if(qe.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var _=d.g[g],A=0;A<_.length;A++)Hn(_[A]);delete d.g[g],d.h--}}this.F=null},qe.prototype.K=function(d,g,_,A){return this.i.add(String(d),g,!1,_,A)},qe.prototype.L=function(d,g,_,A){return this.i.add(String(d),g,!0,_,A)};function Df(d,g,_,A){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var L=!0,V=0;V<g.length;++V){var K=g[V];if(K&&!K.da&&K.capture==_){var ze=K.listener,Jt=K.ha||K.src;K.fa&&hr(d.i,K),L=ze.call(Jt,A)!==!1&&L}}return L&&!A.defaultPrevented}function xS(d,g,_){if(typeof d=="function")_&&(d=p(d,_));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(d,g||0)}function AS(d){d.g=xS(()=>{d.g=null,d.i&&(d.i=!1,AS(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class tU extends se{constructor(g,_){super(),this.m=g,this.l=_,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:AS(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Su(d){se.call(this),this.h=d,this.g={}}v(Su,se);var RS=[];function kS(d){N(d.g,function(g,_){this.g.hasOwnProperty(_)&&Yr(g)},d),d.g={}}Su.prototype.N=function(){Su.aa.N.call(this),kS(this)},Su.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ly=a.JSON.stringify,nU=a.JSON.parse,rU=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function cy(){}cy.prototype.h=null;function CS(d){return d.h||(d.h=d.i())}function PS(){}var xu={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uy(){me.call(this,"d")}v(uy,me);function dy(){me.call(this,"c")}v(dy,me);var Fo={},OS=null;function jf(){return OS=OS||new qe}Fo.La="serverreachability";function NS(d){me.call(this,Fo.La,d)}v(NS,me);function Au(d){const g=jf();xt(g,new NS(g))}Fo.STAT_EVENT="statevent";function DS(d,g){me.call(this,Fo.STAT_EVENT,d),this.stat=g}v(DS,me);function En(d){const g=jf();xt(g,new DS(g,d))}Fo.Ma="timingevent";function jS(d,g){me.call(this,Fo.Ma,d),this.size=g}v(jS,me);function Ru(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},g)}function ku(){this.g=!0}ku.prototype.xa=function(){this.g=!1};function iU(d,g,_,A,L,V){d.info(function(){if(d.g)if(V)for(var K="",ze=V.split("&"),Jt=0;Jt<ze.length;Jt++){var Le=ze[Jt].split("=");if(1<Le.length){var cn=Le[0];Le=Le[1];var un=cn.split("_");K=2<=un.length&&un[1]=="type"?K+(cn+"="+Le+"&"):K+(cn+"=redacted&")}}else K=null;else K=V;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+_+`
`+K})}function sU(d,g,_,A,L,V,K){d.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+_+`
`+V+" "+K})}function ll(d,g,_,A){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+aU(d,_)+(A?" "+A:"")})}function oU(d,g){d.info(function(){return"TIMEOUT: "+g})}ku.prototype.info=function(){};function aU(d,g){if(!d.g)return g;if(!g)return null;try{var _=JSON.parse(g);if(_){for(d=0;d<_.length;d++)if(Array.isArray(_[d])){var A=_[d];if(!(2>A.length)){var L=A[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var K=1;K<L.length;K++)L[K]=""}}}}return ly(_)}catch{return g}}var Lf={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},LS={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hy;function Mf(){}v(Mf,cy),Mf.prototype.g=function(){return new XMLHttpRequest},Mf.prototype.i=function(){return{}},hy=new Mf;function Es(d,g,_,A){this.j=d,this.i=g,this.l=_,this.R=A||1,this.U=new Su(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new MS}function MS(){this.i=null,this.g="",this.h=!1}var VS={},fy={};function py(d,g,_){d.L=1,d.v=Uf(Ai(g)),d.m=_,d.P=!0,FS(d,null)}function FS(d,g){d.F=Date.now(),Vf(d),d.A=Ai(d.v);var _=d.A,A=d.R;Array.isArray(A)||(A=[String(A)]),ZS(_.i,"t",A),d.C=0,_=d.j.J,d.h=new MS,d.g=v1(d.j,_?g:null,!d.m),0<d.O&&(d.M=new tU(p(d.Y,d,d.g),d.O)),g=d.U,_=d.g,A=d.ca;var L="readystatechange";Array.isArray(L)||(L&&(RS[0]=L.toString()),L=RS);for(var V=0;V<L.length;V++){var K=Qr(_,L[V],A||g.handleEvent,!1,g.h||g);if(!K)break;g.g[K.key]=K}g=d.H?S(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Au(),iU(d.i,d.u,d.A,d.l,d.R,d.m)}Es.prototype.ca=function(d){d=d.target;const g=this.M;g&&Ri(d)==3?g.j():this.Y(d)},Es.prototype.Y=function(d){try{if(d==this.g)e:{const un=Ri(this.g);var g=this.g.Ba();const dl=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||o1(this.g)))){this.J||un!=4||g==7||(g==8||0>=dl?Au(3):Au(2)),my(this);var _=this.g.Z();this.X=_;t:if($S(this)){var A=o1(this.g);d="";var L=A.length,V=Ri(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$o(this),Cu(this);var K="";break t}this.h.i=new a.TextDecoder}for(g=0;g<L;g++)this.h.h=!0,d+=this.h.i.decode(A[g],{stream:!(V&&g==L-1)});A.length=0,this.h.g+=d,this.C=0,K=this.h.g}else K=this.g.oa();if(this.o=_==200,sU(this.i,this.u,this.A,this.l,this.R,un,_),this.o){if(this.T&&!this.K){t:{if(this.g){var ze,Jt=this.g;if((ze=Jt.g?Jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ze)){var Le=ze;break t}}Le=null}if(_=Le)ll(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gy(this,_);else{this.o=!1,this.s=3,En(12),$o(this),Cu(this);break e}}if(this.P){_=!0;let Or;for(;!this.J&&this.C<K.length;)if(Or=lU(this,K),Or==fy){un==4&&(this.s=4,En(14),_=!1),ll(this.i,this.l,null,"[Incomplete Response]");break}else if(Or==VS){this.s=4,En(15),ll(this.i,this.l,K,"[Invalid Chunk]"),_=!1;break}else ll(this.i,this.l,Or,null),gy(this,Or);if($S(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||K.length!=0||this.h.h||(this.s=1,En(16),_=!1),this.o=this.o&&_,!_)ll(this.i,this.l,K,"[Invalid Chunked Response]"),$o(this),Cu(this);else if(0<K.length&&!this.W){this.W=!0;var cn=this.j;cn.g==this&&cn.ba&&!cn.M&&(cn.j.info("Great, no buffering proxy detected. Bytes received: "+K.length),by(cn),cn.M=!0,En(11))}}else ll(this.i,this.l,K,null),gy(this,K);un==4&&$o(this),this.o&&!this.J&&(un==4?f1(this.j,this):(this.o=!1,Vf(this)))}else SU(this.g),_==400&&0<K.indexOf("Unknown SID")?(this.s=3,En(12)):(this.s=0,En(13)),$o(this),Cu(this)}}}catch{}finally{}};function $S(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function lU(d,g){var _=d.C,A=g.indexOf(`
`,_);return A==-1?fy:(_=Number(g.substring(_,A)),isNaN(_)?VS:(A+=1,A+_>g.length?fy:(g=g.slice(A,A+_),d.C=A+_,g)))}Es.prototype.cancel=function(){this.J=!0,$o(this)};function Vf(d){d.S=Date.now()+d.I,US(d,d.I)}function US(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ru(p(d.ba,d),g)}function my(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Es.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(oU(this.i,this.A),this.L!=2&&(Au(),En(17)),$o(this),this.s=2,Cu(this)):US(this,this.S-d)};function Cu(d){d.j.G==0||d.J||f1(d.j,d)}function $o(d){my(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,kS(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function gy(d,g){try{var _=d.j;if(_.G!=0&&(_.g==d||vy(_.h,d))){if(!d.K&&vy(_.h,d)&&_.G==3){try{var A=_.Da.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<d.F)Gf(_),Wf(_);else break e;Ey(_),En(18)}}else _.za=L[1],0<_.za-_.T&&37500>L[2]&&_.F&&_.v==0&&!_.C&&(_.C=Ru(p(_.Za,_),6e3));if(1>=qS(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else Bo(_,11)}else if((d.K||_.g==d)&&Gf(_),!E(g))for(L=_.Da.g.parse(g),g=0;g<L.length;g++){let Le=L[g];if(_.T=Le[0],Le=Le[1],_.G==2)if(Le[0]=="c"){_.K=Le[1],_.ia=Le[2];const cn=Le[3];cn!=null&&(_.la=cn,_.j.info("VER="+_.la));const un=Le[4];un!=null&&(_.Aa=un,_.j.info("SVER="+_.Aa));const dl=Le[5];dl!=null&&typeof dl=="number"&&0<dl&&(A=1.5*dl,_.L=A,_.j.info("backChannelRequestTimeoutMs_="+A)),A=_;const Or=d.g;if(Or){const Qf=Or.g?Or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qf){var V=A.h;V.g||Qf.indexOf("spdy")==-1&&Qf.indexOf("quic")==-1&&Qf.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(yy(V,V.h),V.h=null))}if(A.D){const Ty=Or.g?Or.g.getResponseHeader("X-HTTP-Session-Id"):null;Ty&&(A.ya=Ty,Qe(A.I,A.D,Ty))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-d.F,_.j.info("Handshake RTT: "+_.R+"ms")),A=_;var K=d;if(A.qa=g1(A,A.J?A.ia:null,A.W),K.K){WS(A.h,K);var ze=K,Jt=A.L;Jt&&(ze.I=Jt),ze.B&&(my(ze),Vf(ze)),A.g=K}else d1(A);0<_.i.length&&Hf(_)}else Le[0]!="stop"&&Le[0]!="close"||Bo(_,7);else _.G==3&&(Le[0]=="stop"||Le[0]=="close"?Le[0]=="stop"?Bo(_,7):wy(_):Le[0]!="noop"&&_.l&&_.l.ta(Le),_.v=0)}}Au(4)}catch{}}var cU=class{constructor(d,g){this.g=d,this.map=g}};function BS(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function zS(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function qS(d){return d.h?1:d.g?d.g.size:0}function vy(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function yy(d,g){d.g?d.g.add(g):d.h=g}function WS(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}BS.prototype.cancel=function(){if(this.i=HS(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function HS(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const _ of d.g.values())g=g.concat(_.D);return g}return w(d.i)}function uU(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var g=[],_=d.length,A=0;A<_;A++)g.push(d[A]);return g}g=[],_=0;for(A in d)g[_++]=d[A];return g}function dU(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var g=[];d=d.length;for(var _=0;_<d;_++)g.push(_);return g}g=[],_=0;for(const A in d)g[_++]=A;return g}}}function GS(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var _=dU(d),A=uU(d),L=A.length,V=0;V<L;V++)g.call(void 0,A[V],_&&_[V],d)}var KS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hU(d,g){if(d){d=d.split("&");for(var _=0;_<d.length;_++){var A=d[_].indexOf("="),L=null;if(0<=A){var V=d[_].substring(0,A);L=d[_].substring(A+1)}else V=d[_];g(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function Uo(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Uo){this.h=d.h,Ff(this,d.j),this.o=d.o,this.g=d.g,$f(this,d.s),this.l=d.l;var g=d.i,_=new Nu;_.i=g.i,g.g&&(_.g=new Map(g.g),_.h=g.h),QS(this,_),this.m=d.m}else d&&(g=String(d).match(KS))?(this.h=!1,Ff(this,g[1]||"",!0),this.o=Pu(g[2]||""),this.g=Pu(g[3]||"",!0),$f(this,g[4]),this.l=Pu(g[5]||"",!0),QS(this,g[6]||"",!0),this.m=Pu(g[7]||"")):(this.h=!1,this.i=new Nu(null,this.h))}Uo.prototype.toString=function(){var d=[],g=this.j;g&&d.push(Ou(g,YS,!0),":");var _=this.g;return(_||g=="file")&&(d.push("//"),(g=this.o)&&d.push(Ou(g,YS,!0),"@"),d.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&d.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&d.push("/"),d.push(Ou(_,_.charAt(0)=="/"?mU:pU,!0))),(_=this.i.toString())&&d.push("?",_),(_=this.m)&&d.push("#",Ou(_,vU)),d.join("")};function Ai(d){return new Uo(d)}function Ff(d,g,_){d.j=_?Pu(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function $f(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function QS(d,g,_){g instanceof Nu?(d.i=g,yU(d.i,d.h)):(_||(g=Ou(g,gU)),d.i=new Nu(g,d.h))}function Qe(d,g,_){d.i.set(g,_)}function Uf(d){return Qe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function Pu(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Ou(d,g,_){return typeof d=="string"?(d=encodeURI(d).replace(g,fU),_&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function fU(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var YS=/[#\/\?@]/g,pU=/[#\?:]/g,mU=/[#\?]/g,gU=/[#\?@]/g,vU=/#/g;function Nu(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function bs(d){d.g||(d.g=new Map,d.h=0,d.i&&hU(d.i,function(g,_){d.add(decodeURIComponent(g.replace(/\+/g," ")),_)}))}t=Nu.prototype,t.add=function(d,g){bs(this),this.i=null,d=cl(this,d);var _=this.g.get(d);return _||this.g.set(d,_=[]),_.push(g),this.h+=1,this};function JS(d,g){bs(d),g=cl(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function XS(d,g){return bs(d),g=cl(d,g),d.g.has(g)}t.forEach=function(d,g){bs(this),this.g.forEach(function(_,A){_.forEach(function(L){d.call(g,L,A,this)},this)},this)},t.na=function(){bs(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),_=[];for(let A=0;A<g.length;A++){const L=d[A];for(let V=0;V<L.length;V++)_.push(g[A])}return _},t.V=function(d){bs(this);let g=[];if(typeof d=="string")XS(this,d)&&(g=g.concat(this.g.get(cl(this,d))));else{d=Array.from(this.g.values());for(let _=0;_<d.length;_++)g=g.concat(d[_])}return g},t.set=function(d,g){return bs(this),this.i=null,d=cl(this,d),XS(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function ZS(d,g,_){JS(d,g),0<_.length&&(d.i=null,d.g.set(cl(d,g),w(_)),d.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var _=0;_<g.length;_++){var A=g[_];const V=encodeURIComponent(String(A)),K=this.V(A);for(A=0;A<K.length;A++){var L=V;K[A]!==""&&(L+="="+encodeURIComponent(String(K[A]))),d.push(L)}}return this.i=d.join("&")};function cl(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function yU(d,g){g&&!d.j&&(bs(d),d.i=null,d.g.forEach(function(_,A){var L=A.toLowerCase();A!=L&&(JS(this,A),ZS(this,L,_))},d)),d.j=g}function _U(d,g){const _=new ku;if(a.Image){const A=new Image;A.onload=m(Ts,_,"TestLoadImage: loaded",!0,g,A),A.onerror=m(Ts,_,"TestLoadImage: error",!1,g,A),A.onabort=m(Ts,_,"TestLoadImage: abort",!1,g,A),A.ontimeout=m(Ts,_,"TestLoadImage: timeout",!1,g,A),a.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=d}else g(!1)}function wU(d,g){const _=new ku,A=new AbortController,L=setTimeout(()=>{A.abort(),Ts(_,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:A.signal}).then(V=>{clearTimeout(L),V.ok?Ts(_,"TestPingServer: ok",!0,g):Ts(_,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),Ts(_,"TestPingServer: error",!1,g)})}function Ts(d,g,_,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(_)}catch{}}function EU(){this.g=new rU}function bU(d,g,_){const A=_||"";try{GS(d,function(L,V){let K=L;c(L)&&(K=ly(L)),g.push(A+V+"="+encodeURIComponent(K))})}catch(L){throw g.push(A+"type="+encodeURIComponent("_badmap")),L}}function Bf(d){this.l=d.Ub||null,this.j=d.eb||!1}v(Bf,cy),Bf.prototype.g=function(){return new zf(this.l,this.j)},Bf.prototype.i=function(d){return function(){return d}}({});function zf(d,g){qe.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(zf,qe),t=zf.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ju(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Du(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ju(this)),this.g&&(this.readyState=3,ju(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;e1(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function e1(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?Du(this):ju(this),this.readyState==3&&e1(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Du(this))},t.Qa=function(d){this.g&&(this.response=d,Du(this))},t.ga=function(){this.g&&Du(this)};function Du(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ju(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var _=g.next();!_.done;)_=_.value,d.push(_[0]+": "+_[1]),_=g.next();return d.join(`\r
`)};function ju(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(zf.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function t1(d){let g="";return N(d,function(_,A){g+=A,g+=":",g+=_,g+=`\r
`}),g}function _y(d,g,_){e:{for(A in _){var A=!1;break e}A=!0}A||(_=t1(_),typeof d=="string"?_!=null&&encodeURIComponent(String(_)):Qe(d,g,_))}function yt(d){qe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(yt,qe);var TU=/^https?$/i,IU=["POST","PUT"];t=yt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,_,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hy.g(),this.v=this.o?CS(this.o):CS(hy),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(V){n1(this,V);return}if(d=_||"",_=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)_.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const V of A.keys())_.set(V,A.get(V));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(_.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(IU,g,void 0))||A||L||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,K]of _)this.g.setRequestHeader(V,K);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{s1(this),this.u=!0,this.g.send(d),this.u=!1}catch(V){n1(this,V)}};function n1(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,r1(d),qf(d)}function r1(d){d.A||(d.A=!0,xt(d,"complete"),xt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,xt(this,"complete"),xt(this,"abort"),qf(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qf(this,!0)),yt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?i1(this):this.bb())},t.bb=function(){i1(this)};function i1(d){if(d.h&&typeof o<"u"&&(!d.v[1]||Ri(d)!=4||d.Z()!=2)){if(d.u&&Ri(d)==4)xS(d.Ea,0,d);else if(xt(d,"readystatechange"),Ri(d)==4){d.h=!1;try{const K=d.Z();e:switch(K){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var _;if(!(_=g)){var A;if(A=K===0){var L=String(d.D).match(KS)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),A=!TU.test(L?L.toLowerCase():"")}_=A}if(_)xt(d,"complete"),xt(d,"success");else{d.m=6;try{var V=2<Ri(d)?d.g.statusText:""}catch{V=""}d.l=V+" ["+d.Z()+"]",r1(d)}}finally{qf(d)}}}}function qf(d,g){if(d.g){s1(d);const _=d.g,A=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||xt(d,"ready");try{_.onreadystatechange=A}catch{}}}function s1(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function Ri(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<Ri(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),nU(g)}};function o1(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function SU(d){const g={};d=(d.g&&2<=Ri(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<d.length;A++){if(E(d[A]))continue;var _=O(d[A]);const L=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const V=g[L]||[];g[L]=V,V.push(_)}x(g,function(A){return A.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Lu(d,g,_){return _&&_.internalChannelParams&&_.internalChannelParams[d]||g}function a1(d){this.Aa=0,this.i=[],this.j=new ku,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Lu("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Lu("baseRetryDelayMs",5e3,d),this.cb=Lu("retryDelaySeedMs",1e4,d),this.Wa=Lu("forwardChannelMaxRetries",2,d),this.wa=Lu("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new BS(d&&d.concurrentRequestLimit),this.Da=new EU,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=a1.prototype,t.la=8,t.G=1,t.connect=function(d,g,_,A){En(0),this.W=d,this.H=g||{},_&&A!==void 0&&(this.H.OSID=_,this.H.OAID=A),this.F=this.X,this.I=g1(this,null,this.W),Hf(this)};function wy(d){if(l1(d),d.G==3){var g=d.U++,_=Ai(d.I);if(Qe(_,"SID",d.K),Qe(_,"RID",g),Qe(_,"TYPE","terminate"),Mu(d,_),g=new Es(d,d.j,g),g.L=2,g.v=Uf(Ai(_)),_=!1,a.navigator&&a.navigator.sendBeacon)try{_=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!_&&a.Image&&(new Image().src=g.v,_=!0),_||(g.g=v1(g.j,null),g.g.ea(g.v)),g.F=Date.now(),Vf(g)}m1(d)}function Wf(d){d.g&&(by(d),d.g.cancel(),d.g=null)}function l1(d){Wf(d),d.u&&(a.clearTimeout(d.u),d.u=null),Gf(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function Hf(d){if(!zS(d.h)&&!d.s){d.s=!0;var g=d.Ga;B||J(),U||(B(),U=!0),G.add(g,d),d.B=0}}function xU(d,g){return qS(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ru(p(d.Ga,d,g),p1(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const L=new Es(this,this.j,d);let V=this.o;if(this.S&&(V?(V=S(V),R(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var g=0,_=0;_<this.i.length;_++){t:{var A=this.i[_];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,4096<g){g=_;break e}if(g===4096||_===this.i.length-1){g=_+1;break e}}g=1e3}else g=1e3;g=u1(this,L,g),_=Ai(this.I),Qe(_,"RID",d),Qe(_,"CVER",22),this.D&&Qe(_,"X-HTTP-Session-Id",this.D),Mu(this,_),V&&(this.O?g="headers="+encodeURIComponent(String(t1(V)))+"&"+g:this.m&&_y(_,this.m,V)),yy(this.h,L),this.Ua&&Qe(_,"TYPE","init"),this.P?(Qe(_,"$req",g),Qe(_,"SID","null"),L.T=!0,py(L,_,null)):py(L,_,g),this.G=2}}else this.G==3&&(d?c1(this,d):this.i.length==0||zS(this.h)||c1(this))};function c1(d,g){var _;g?_=g.l:_=d.U++;const A=Ai(d.I);Qe(A,"SID",d.K),Qe(A,"RID",_),Qe(A,"AID",d.T),Mu(d,A),d.m&&d.o&&_y(A,d.m,d.o),_=new Es(d,d.j,_,d.B+1),d.m===null&&(_.H=d.o),g&&(d.i=g.D.concat(d.i)),g=u1(d,_,1e3),_.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),yy(d.h,_),py(_,A,g)}function Mu(d,g){d.H&&N(d.H,function(_,A){Qe(g,A,_)}),d.l&&GS({},function(_,A){Qe(g,A,_)})}function u1(d,g,_){_=Math.min(d.i.length,_);var A=d.l?p(d.l.Na,d.l,d):null;e:{var L=d.i;let V=-1;for(;;){const K=["count="+_];V==-1?0<_?(V=L[0].g,K.push("ofs="+V)):V=0:K.push("ofs="+V);let ze=!0;for(let Jt=0;Jt<_;Jt++){let Le=L[Jt].g;const cn=L[Jt].map;if(Le-=V,0>Le)V=Math.max(0,L[Jt].g-100),ze=!1;else try{bU(cn,K,"req"+Le+"_")}catch{A&&A(cn)}}if(ze){A=K.join("&");break e}}}return d=d.i.splice(0,_),g.D=d,A}function d1(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;B||J(),U||(B(),U=!0),G.add(g,d),d.v=0}}function Ey(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ru(p(d.Fa,d),p1(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,h1(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ru(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,En(10),Wf(this),h1(this))};function by(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function h1(d){d.g=new Es(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=Ai(d.qa);Qe(g,"RID","rpc"),Qe(g,"SID",d.K),Qe(g,"AID",d.T),Qe(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&Qe(g,"TO",d.ja),Qe(g,"TYPE","xmlhttp"),Mu(d,g),d.m&&d.o&&_y(g,d.m,d.o),d.L&&(d.g.I=d.L);var _=d.g;d=d.ia,_.L=1,_.v=Uf(Ai(g)),_.m=null,_.P=!0,FS(_,d)}t.Za=function(){this.C!=null&&(this.C=null,Wf(this),Ey(this),En(19))};function Gf(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function f1(d,g){var _=null;if(d.g==g){Gf(d),by(d),d.g=null;var A=2}else if(vy(d.h,g))_=g.D,WS(d.h,g),A=1;else return;if(d.G!=0){if(g.o)if(A==1){_=g.m?g.m.length:0,g=Date.now()-g.F;var L=d.B;A=jf(),xt(A,new jS(A,_)),Hf(d)}else d1(d);else if(L=g.s,L==3||L==0&&0<g.X||!(A==1&&xU(d,g)||A==2&&Ey(d)))switch(_&&0<_.length&&(g=d.h,g.i=g.i.concat(_)),L){case 1:Bo(d,5);break;case 4:Bo(d,10);break;case 3:Bo(d,6);break;default:Bo(d,2)}}}function p1(d,g){let _=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(_*=2),_*g}function Bo(d,g){if(d.j.info("Error code "+g),g==2){var _=p(d.fb,d),A=d.Xa;const L=!A;A=new Uo(A||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ff(A,"https"),Uf(A),L?_U(A.toString(),_):wU(A.toString(),_)}else En(2);d.G=0,d.l&&d.l.sa(g),m1(d),l1(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),En(2)):(this.j.info("Failed to ping google.com"),En(1))};function m1(d){if(d.G=0,d.ka=[],d.l){const g=HS(d.h);(g.length!=0||d.i.length!=0)&&(y(d.ka,g),y(d.ka,d.i),d.h.i.length=0,w(d.i),d.i.length=0),d.l.ra()}}function g1(d,g,_){var A=_ instanceof Uo?Ai(_):new Uo(_);if(A.g!="")g&&(A.g=g+"."+A.g),$f(A,A.s);else{var L=a.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;var V=new Uo(null);A&&Ff(V,A),g&&(V.g=g),L&&$f(V,L),_&&(V.l=_),A=V}return _=d.D,g=d.ya,_&&g&&Qe(A,_,g),Qe(A,"VER",d.la),Mu(d,A),A}function v1(d,g,_){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new yt(new Bf({eb:_})):new yt(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function y1(){}t=y1.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Kf(){}Kf.prototype.g=function(d,g){return new Kn(d,g)};function Kn(d,g){qe.call(this),this.g=new a1(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!E(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!E(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new ul(this)}v(Kn,qe),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){wy(this.g)},Kn.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var _={};_.__data__=d,d=_}else this.u&&(_={},_.__data__=ly(d),d=_);g.i.push(new cU(g.Ya++,d)),g.G==3&&Hf(g)},Kn.prototype.N=function(){this.g.l=null,delete this.j,wy(this.g),delete this.g,Kn.aa.N.call(this)};function _1(d){uy.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const _ in g){d=_;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}v(_1,uy);function w1(){dy.call(this),this.status=1}v(w1,dy);function ul(d){this.g=d}v(ul,y1),ul.prototype.ua=function(){xt(this.g,"a")},ul.prototype.ta=function(d){xt(this.g,new _1(d))},ul.prototype.sa=function(d){xt(this.g,new w1)},ul.prototype.ra=function(){xt(this.g,"b")},Kf.prototype.createWebChannel=Kf.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,zM=function(){return new Kf},BM=function(){return jf()},UM=Fo,$0={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Lf.NO_ERROR=0,Lf.TIMEOUT=8,Lf.HTTP_ERROR=6,am=Lf,LS.COMPLETE="complete",$M=LS,PS.EventType=xu,xu.OPEN="a",xu.CLOSE="b",xu.ERROR="c",xu.MESSAGE="d",qe.prototype.listen=qe.prototype.K,vd=PS,yt.prototype.listenOnce=yt.prototype.L,yt.prototype.getLastError=yt.prototype.Ka,yt.prototype.getLastErrorCode=yt.prototype.Ba,yt.prototype.getStatus=yt.prototype.Z,yt.prototype.getResponseJson=yt.prototype.Oa,yt.prototype.getResponseText=yt.prototype.oa,yt.prototype.send=yt.prototype.ea,yt.prototype.setWithCredentials=yt.prototype.Ha,FM=yt}).apply(typeof Ep<"u"?Ep:typeof self<"u"?self:typeof window<"u"?window:{});const SR="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wt.UNAUTHENTICATED=new Wt(null),Wt.GOOGLE_CREDENTIALS=new Wt("google-credentials-uid"),Wt.FIRST_PARTY=new Wt("first-party-uid"),Wt.MOCK_USER=new Wt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu="11.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new df("@firebase/firestore");function kl(){return go.logLevel}function VJ(t){go.setLogLevel(t)}function q(t,...e){if(go.logLevel<=xe.DEBUG){const n=e.map(JT);go.debug(`Firestore (${uu}): ${t}`,...n)}}function Rt(t,...e){if(go.logLevel<=xe.ERROR){const n=e.map(JT);go.error(`Firestore (${uu}): ${t}`,...n)}}function Ti(t,...e){if(go.logLevel<=xe.WARN){const n=e.map(JT);go.warn(`Firestore (${uu}): ${t}`,...n)}}function JT(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${uu}) INTERNAL ASSERTION FAILED: `+t;throw Rt(e),new Error(e)}function re(t,e){t||Z()}function FJ(t,e){t||Z()}function Y(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Gt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $J{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Wt.UNAUTHENTICATED))}shutdown(){}}class UJ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class BJ{constructor(e){this.t=e,this.currentUser=Wt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){re(this.o===void 0);let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new rn,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new rn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(re(typeof r.accessToken=="string"),new qM(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return re(e===null||typeof e=="string"),new Wt(e)}}class zJ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Wt.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class qJ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new zJ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Wt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class WJ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class HJ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){re(this.o===void 0);const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(re(typeof n.token=="string"),this.R=n.token,new WJ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GJ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=GJ(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function Dc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function HM(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{static now(){return lt.fromMillis(Date.now())}static fromDate(e){return lt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new lt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new lt(0,0))}static max(){return new le(new lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ei.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ei?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=ei.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return Math.sign(e.length-n.length)}static compareSegments(e,n){const r=ei.isNumericId(e),i=ei.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?ei.extractNumericId(e).compare(ei.extractNumericId(n)):e<n?-1:e>n?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return io.fromString(e.substring(4,e.length-2))}}class Ce extends ei{construct(e,n,r){return new Ce(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ce(n)}static emptyPath(){return new Ce([])}}const KJ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends ei{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return KJ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new z(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Ce.fromString(e))}static fromName(e){return new Q(Ce.fromString(e).popFirst(5))}static empty(){return new Q(Ce.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ce.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ce.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Ce(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function U0(t){return t.fields.find(e=>e.kind===2)}function Jo(t){return t.fields.filter(e=>e.kind!==2)}fg.UNKNOWN_ID=-1;class lm{constructor(e,n){this.fieldPath=e,this.kind=n}}class Ph{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new Ph(0,ar.min())}}function GM(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=le.fromTimestamp(r===1e9?new lt(n+1,0):new lt(n,r));return new ar(i,Q.empty(),e)}function KM(t){return new ar(t.readTime,t.key,-1)}class ar{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ar(le.min(),Q.empty(),-1)}static max(){return new ar(le.max(),Q.empty(),-1)}}function XT(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==QM)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new M((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):M.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):M.reject(n)}static resolve(e){return new M((n,r)=>{n(e)})}static reject(e){return new M((n,r)=>{r(e)})}static waitFor(e){return new M((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(e){let n=M.resolve(!1);for(const r of e)n=n.next(i=>i?M.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new M((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;n(e[c]).next(u=>{o[c]=u,++a,a===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new M((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{static open(e,n,r,i){try{return new Iv(n,e.transaction(i,r))}catch(s){throw new zd(n,s)}}constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new rn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new zd(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=ZT(r.target.error);this.V.reject(new zd(e,i))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(q("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new YJ(n)}}class yi{static delete(e){return q("SimpleDb","Removing database:",e),na(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!Na())return!1;if(yi.S())return!0;const e=mt(),n=yi.D(e),r=0<n&&n<10,i=JM(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static S(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.v)==="YES"}static C(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,n,r){this.name=e,this.version=n,this.F=r,yi.D(mt())===12.2&&Rt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(q("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const o=s.target.result;n(o)},i.onblocked=()=>{r(new zd(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const o=s.target.error;o.name==="VersionError"?r(new z(F.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new z(F.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new zd(e,o))},i.onupgradeneeded=s=>{q("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const o=s.target.result;this.F.O(o,i.transaction,s.oldVersion,this.version).next(()=>{q("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=n=>this.N(n)),this.db}B(e){this.N=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const s=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.M(e);const a=Iv.open(this.db,e,s?"readonly":"readwrite",r),l=i(a).next(c=>(a.g(),c)).catch(c=>(a.abort(c),M.reject(c))).toPromise();return l.catch(()=>{}),await a.m,l}catch(a){const l=a,c=l.name!=="FirebaseError"&&o<3;if(q("SimpleDb","Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}function JM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class QJ{constructor(e){this.L=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.L=e}done(){this.k=!0}$(e){this.q=e}delete(){return na(this.L.delete())}}class zd extends z{constructor(e,n){super(F.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function No(t){return t.name==="IndexedDbTransactionError"}class YJ{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(q("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(q("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),na(r)}add(e){return q("SimpleDb","ADD",this.store.name,e,e),na(this.store.add(e))}get(e){return na(this.store.get(e)).next(n=>(n===void 0&&(n=null),q("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return q("SimpleDb","DELETE",this.store.name,e),na(this.store.delete(e))}count(){return q("SimpleDb","COUNT",this.store.name),na(this.store.count())}U(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new M((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.W(s,(a,l)=>{o.push(l)}).next(()=>o)}}G(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new M((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}j(e,n){q("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.H=!1;const i=this.cursor(r);return this.W(i,(s,o,a)=>a.delete())}J(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.W(i,n)}Y(e){const n=this.cursor({});return new M((r,i)=>{n.onerror=s=>{const o=ZT(s.target.error);i(o)},n.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}W(e,n){const r=[];return new M((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new QJ(a),c=n(a.primaryKey,a.value,l);if(c instanceof M){const u=c.catch(h=>(l.done(),M.reject(h)));r.push(u)}l.isDone?i():l.K===null?a.continue():a.continue(l.K)}}).next(()=>M.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function na(t){return new M((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=ZT(r.target.error);n(i)}})}let xR=!1;function ZT(t){const e=yi.D(mt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return xR||(xR=!0,setTimeout(()=>{throw r},0)),r}}return t}class JJ{constructor(e,n){this.asyncQueue=e,this.Z=n,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){q("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{q("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(n){No(n)?q("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await Oo(n)}await this.X(6e4)})}}class XJ{constructor(e,n){this.localStore=e,this.persistence=n}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.te(n,e))}te(e,n){const r=new Set;let i=n,s=!0;return M.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return q("IndexBackfiller",`Processing collection: ${o}`),this.ne(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>n-i)}ne(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.re(i,s)).next(a=>(q("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}re(e,n){let r=e;return n.changes.forEach((i,s)=>{const o=KM(s);XT(o,r)>0&&(r=o)}),new ar(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Mn.oe=-1;function _f(t){return t==null}function Oh(t){return t===0&&1/t==-1/0}function XM(t){return typeof t=="number"&&Number.isInteger(t)&&!Oh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=AR(e)),e=ZJ(t.get(n),e);return AR(e)}function ZJ(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function AR(t){return t+""}function di(t){const e=t.length;if(re(e>=2),e===2)return re(t.charAt(0)===""&&t.charAt(1)===""),Ce.emptyPath();const n=e-2,r=[];let i="";for(let s=0;s<e;){const o=t.indexOf("",s);switch((o<0||o>n)&&Z(),t.charAt(o+1)){case"":const a=t.substring(s,o);let l;i.length===0?l=a:(i+=a,l=i,i=""),r.push(l);break;case"":i+=t.substring(s,o),i+="\0";break;case"":i+=t.substring(s,o+1);break;default:Z()}s=o+2}return new Ce(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){return[t,yn(e)]}function ZM(t,e,n){return[t,yn(e),n]}const eX={},tX=["prefixPath","collectionGroup","readTime","documentId"],nX=["prefixPath","collectionGroup","documentId"],rX=["collectionGroup","readTime","prefixPath","documentId"],iX=["canonicalId","targetId"],sX=["targetId","path"],oX=["path","targetId"],aX=["collectionId","parent"],lX=["indexId","uid"],cX=["uid","sequenceNumber"],uX=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dX=["indexId","uid","orderedDocumentKey"],hX=["userId","collectionPath","documentId"],fX=["userId","collectionPath","largestBatchId"],pX=["userId","collectionGroup","largestBatchId"],eV=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],mX=[...eV,"documentOverlays"],tV=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],nV=tV,eI=[...nV,"indexConfiguration","indexState","indexEntries"],gX=eI,vX=[...eI,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0 extends YM{constructor(e,n){super(),this._e=e,this.currentSequenceNumber=n}}function Bt(t,e){const n=Y(t);return yi.C(n._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Do(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function rV(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||Zt.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new bp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new bp(this.root,e,this.comparator,!1)}getReverseIterator(){return new bp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new bp(this.root,e,this.comparator,!0)}}class bp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Zt.RED,this.left=i??Zt.EMPTY,this.right=s??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Zt(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Zt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new Zt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new CR(this.data.getIterator())}getIteratorFrom(e){return new CR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Be)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Be(this.comparator);return n.data=e,n}}class CR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gl(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new Vn([])}unionWith(e){let n=new Be(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Dc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new iV("Invalid base64 string: "+s):s}}(e);return new Tt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const _X=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ns(t){if(re(!!t),typeof t=="string"){let e=0;const n=_X.exec(t);if(re(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:nt(t.seconds),nanos:nt(t.nanos)}}function nt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function rs(t){return typeof t=="string"?Tt.fromBase64String(t):Tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sv(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xv(t){const e=t.mapValue.fields.__previous_value__;return Sv(e)?xv(e):e}function Nh(t){const e=ns(t.mapValue.fields.__local_write_time__.timestampValue);return new lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(e,n,r,i,s,o,a,l,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class vo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new vo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},um={nullValue:"NULL_VALUE"};function yo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sv(t)?4:sV(t)?9007199254740991:Av(t)?10:11:Z()}function Ii(t,e){if(t===e)return!0;const n=yo(t);if(n!==yo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Nh(t).isEqual(Nh(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ns(i.timestampValue),a=ns(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return rs(i.bytesValue).isEqual(rs(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return nt(i.geoPointValue.latitude)===nt(s.geoPointValue.latitude)&&nt(i.geoPointValue.longitude)===nt(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return nt(i.integerValue)===nt(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=nt(i.doubleValue),a=nt(s.doubleValue);return o===a?Oh(o)===Oh(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Dc(t.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(kR(o)!==kR(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ii(o[l],a[l])))return!1;return!0}(t,e);default:return Z()}}function Dh(t,e){return(t.values||[]).find(n=>Ii(n,e))!==void 0}function _o(t,e){if(t===e)return 0;const n=yo(t),r=yo(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=nt(s.integerValue||s.doubleValue),l=nt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return PR(t.timestampValue,e.timestampValue);case 4:return PR(Nh(t),Nh(e));case 5:return ve(t.stringValue,e.stringValue);case 6:return function(s,o){const a=rs(s),l=rs(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=ve(a[c],l[c]);if(u!==0)return u}return ve(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ve(nt(s.latitude),nt(o.latitude));return a!==0?a:ve(nt(s.longitude),nt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return OR(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const h=s.fields||{},p=o.fields||{},m=(a=h.value)===null||a===void 0?void 0:a.arrayValue,v=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=ve(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((u=v==null?void 0:v.values)===null||u===void 0?void 0:u.length)||0);return w!==0?w:OR(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===Hs.mapValue&&o===Hs.mapValue)return 0;if(s===Hs.mapValue)return 1;if(o===Hs.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const p=ve(l[h],u[h]);if(p!==0)return p;const m=_o(a[l[h]],c[u[h]]);if(m!==0)return m}return ve(l.length,u.length)}(t.mapValue,e.mapValue);default:throw Z()}}function PR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=ns(t),r=ns(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function OR(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=_o(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function jc(t){return z0(t)}function z0(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ns(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return rs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=z0(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${z0(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function dm(t){switch(yo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xv(t);return e?16+dm(e):16;case 5:return 2*t.stringValue.length;case 6:return rs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+dm(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Do(r.fields,(s,o)=>{i+=s.length+dm(o)}),i}(t.mapValue);default:throw Z()}}function Ma(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function q0(t){return!!t&&"integerValue"in t}function jh(t){return!!t&&"arrayValue"in t}function NR(t){return!!t&&"nullValue"in t}function DR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hm(t){return!!t&&"mapValue"in t}function Av(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qd(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Do(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qd(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qd(t.arrayValue.values[n]);return e}return Object.assign({},t)}function sV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const oV={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function EX(t){return"nullValue"in t?um:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Ma(vo.empty(),Q.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?Av(t)?oV:{mapValue:{}}:Z()}function bX(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Ma(vo.empty(),Q.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?oV:"mapValue"in t?Av(t)?{mapValue:{}}:Hs:Z()}function jR(t,e){const n=_o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function LR(t,e){const n=_o(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qd(n)}setAll(e){let n=ot.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=qd(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());hm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];hm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Do(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new en(qd(this.value))}}function aV(t){const e=[];return Do(t.fields,(n,r)=>{const i=new ot([n]);if(hm(r)){const s=aV(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Je(e,0,le.min(),le.min(),le.min(),en.empty(),0)}static newFoundDocument(e,n,r,i){return new Je(e,1,n,le.min(),r,i,0)}static newNoDocument(e,n){return new Je(e,2,n,le.min(),le.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Je(e,3,n,le.min(),le.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Je&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Je(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,n){this.position=e,this.inclusive=n}}function MR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=_o(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function VR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ii(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e,n="asc"){this.field=e,this.dir=n}}function TX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{}class Pe extends lV{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IX(e,n,r):n==="array-contains"?new AX(e,r):n==="in"?new pV(e,r):n==="not-in"?new RX(e,r):n==="array-contains-any"?new kX(e,r):new Pe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SX(e,r):new xX(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(_o(n,this.value)):n!==null&&yo(this.value)===yo(n)&&this.matchesComparison(_o(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $e extends lV{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new $e(e,n)}matches(e){return Lc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Lc(t){return t.op==="and"}function W0(t){return t.op==="or"}function tI(t){return cV(t)&&Lc(t)}function cV(t){for(const e of t.filters)if(e instanceof $e)return!1;return!0}function H0(t){if(t instanceof Pe)return t.field.canonicalString()+t.op.toString()+jc(t.value);if(tI(t))return t.filters.map(e=>H0(e)).join(",");{const e=t.filters.map(n=>H0(n)).join(",");return`${t.op}(${e})`}}function uV(t,e){return t instanceof Pe?function(r,i){return i instanceof Pe&&r.op===i.op&&r.field.isEqual(i.field)&&Ii(r.value,i.value)}(t,e):t instanceof $e?function(r,i){return i instanceof $e&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&uV(o,i.filters[a]),!0):!1}(t,e):void Z()}function dV(t,e){const n=t.filters.concat(e);return $e.create(n,t.op)}function hV(t){return t instanceof Pe?function(n){return`${n.field.canonicalString()} ${n.op} ${jc(n.value)}`}(t):t instanceof $e?function(n){return n.op.toString()+" {"+n.getFilters().map(hV).join(" ,")+"}"}(t):"Filter"}class IX extends Pe{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class SX extends Pe{constructor(e,n){super(e,"in",n),this.keys=fV("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xX extends Pe{constructor(e,n){super(e,"not-in",n),this.keys=fV("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function fV(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}class AX extends Pe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return jh(n)&&Dh(n.arrayValue,this.value)}}class pV extends Pe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dh(this.value.arrayValue,n)}}class RX extends Pe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dh(this.value.arrayValue,n)}}class kX extends Pe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!jh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dh(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function G0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new CX(t,e,n,r,i,s,o)}function Va(t){const e=Y(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>H0(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),_f(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>jc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>jc(r)).join(",")),e.ue=n}return e.ue}function wf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!TX(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!uV(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!VR(t.startAt,e.startAt)&&VR(t.endAt,e.endAt)}function pg(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function mg(t,e){return t.filters.filter(n=>n instanceof Pe&&n.field.isEqual(e))}function FR(t,e,n){let r=um,i=!0;for(const s of mg(t,e)){let o=um,a=!0;switch(s.op){case"<":case"<=":o=EX(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=um}jR({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];jR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})<0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}function $R(t,e,n){let r=Hs,i=!0;for(const s of mg(t,e)){let o=Hs,a=!0;switch(s.op){case">=":case">":o=bX(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Hs}LR({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(n!==null){for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const o=n.position[s];LR({value:r,inclusive:i},{value:o,inclusive:n.inclusive})>0&&(r=o,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function mV(t,e,n,r,i,s,o,a){return new ms(t,e,n,r,i,s,o,a)}function du(t){return new ms(t)}function UR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nI(t){return t.collectionGroup!==null}function hc(t){const e=Y(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Be(ot.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Lh(s,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new Lh(ot.keyField(),r))}return e.ce}function Rn(t){const e=Y(t);return e.le||(e.le=PX(e,hc(t))),e.le}function PX(t,e){if(t.limitType==="F")return G0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lh(i.field,s)});const n=t.endAt?new wo(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new wo(t.startAt.position,t.startAt.inclusive):null;return G0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function K0(t,e){const n=t.filters.concat([e]);return new ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gg(t,e,n){return new ms(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ef(t,e){return wf(Rn(t),Rn(e))&&t.limitType===e.limitType}function gV(t){return`${Va(Rn(t))}|lt:${t.limitType}`}function Cl(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>hV(i)).join(", ")}]`),_f(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>jc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>jc(i)).join(",")),`Target(${r})`}(Rn(t))}; limitType=${t.limitType})`}function bf(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of hc(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,l){const c=MR(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,hc(r),i)||r.endAt&&!function(o,a,l){const c=MR(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,hc(r),i))}(t,e)}function vV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yV(t){return(e,n)=>{let r=!1;for(const i of hc(t)){const s=OX(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function OX(t,e,n){const r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?_o(l,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Do(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rV(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NX=new Ge(Q.comparator);function Fn(){return NX}const _V=new Ge(Q.comparator);function yd(...t){let e=_V;for(const n of t)e=e.insert(n.key,n);return e}function wV(t){let e=_V;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return Wd()}function EV(){return Wd()}function Wd(){return new gs(t=>t.toString(),(t,e)=>t.isEqual(e))}const DX=new Ge(Q.comparator),jX=new Be(Q.comparator);function we(...t){let e=jX;for(const n of t)e=e.add(n);return e}const LX=new Be(ve);function rI(){return LX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Oh(e)?"-0":e}}function bV(t){return{integerValue:""+t}}function TV(t,e){return XM(e)?bV(e):iI(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{constructor(){this._=void 0}}function MX(t,e,n){return t instanceof Mc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Sv(s)&&(s=xv(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof Fa?SV(t,e):t instanceof $a?xV(t,e):function(i,s){const o=IV(i,s),a=BR(o)+BR(i.Pe);return q0(o)&&q0(i.Pe)?bV(a):iI(i.serializer,a)}(t,e)}function VX(t,e,n){return t instanceof Fa?SV(t,e):t instanceof $a?xV(t,e):n}function IV(t,e){return t instanceof Vc?function(r){return q0(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Mc extends Rv{}class Fa extends Rv{constructor(e){super(),this.elements=e}}function SV(t,e){const n=AV(e);for(const r of t.elements)n.some(i=>Ii(i,r))||n.push(r);return{arrayValue:{values:n}}}class $a extends Rv{constructor(e){super(),this.elements=e}}function xV(t,e){let n=AV(e);for(const r of t.elements)n=n.filter(i=>!Ii(i,r));return{arrayValue:{values:n}}}class Vc extends Rv{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function BR(t){return nt(t.integerValue||t.doubleValue)}function AV(t){return jh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,n){this.field=e,this.transform=n}}function FX(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Fa&&i instanceof Fa||r instanceof $a&&i instanceof $a?Dc(r.elements,i.elements,Ii):r instanceof Vc&&i instanceof Vc?Ii(r.Pe,i.Pe):r instanceof Mc&&i instanceof Mc}(t.transform,e.transform)}class $X{constructor(e,n){this.version=e,this.transformResults=n}}class at{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new at}static exists(e){return new at(void 0,e)}static updateTime(e){return new at(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kv{}function RV(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fu(t.key,at.none()):new hu(t.key,t.data,at.none());{const n=t.data,r=en.empty();let i=new Be(ot.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new vs(t.key,r,new Vn(i.toArray()),at.none())}}function UX(t,e,n){t instanceof hu?function(i,s,o){const a=i.value.clone(),l=qR(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof vs?function(i,s,o){if(!fm(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=qR(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(kV(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Hd(t,e,n,r){return t instanceof hu?function(s,o,a,l){if(!fm(s.precondition,o))return a;const c=s.value.clone(),u=WR(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof vs?function(s,o,a,l){if(!fm(s.precondition,o))return a;const c=WR(s.fieldTransforms,l,o),u=o.data;return u.setAll(kV(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(s,o,a){return fm(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function BX(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=IV(r.transform,i||null);s!=null&&(n===null&&(n=en.empty()),n.set(r.field,s))}return n||null}function zR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Dc(r,i,(s,o)=>FX(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends kv{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vs extends kv{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function kV(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function qR(t,e,n){const r=new Map;re(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,VX(o,a,n[i]))}return r}function WR(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,MX(s,o,e))}return r}class fu extends kv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sI extends kv{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&UX(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Hd(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Hd(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=EV();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=RV(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(le.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),we())}isEqual(e){return this.batchId===e.batchId&&Dc(this.mutations,e.mutations,(n,r)=>zR(n,r))&&Dc(this.baseMutations,e.baseMutations,(n,r)=>zR(n,r))}}class aI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){re(e.mutations.length===r.length);let i=function(){return DX}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new aI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,De;function CV(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function PV(t){if(t===void 0)return Rt("GRPC error has no .code"),F.UNKNOWN;switch(t){case Nt.OK:return F.OK;case Nt.CANCELLED:return F.CANCELLED;case Nt.UNKNOWN:return F.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return F.INTERNAL;case Nt.UNAVAILABLE:return F.UNAVAILABLE;case Nt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Nt.NOT_FOUND:return F.NOT_FOUND;case Nt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Nt.ABORTED:return F.ABORTED;case Nt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Nt.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(De=Nt||(Nt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qX=new io([4294967295,4294967295],0);function HR(t){const e=OV().encode(t),n=new VM;return n.update(e),new Uint8Array(n.digest())}function GR(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new io([n,r],0),new io([i,s],0)]}class cI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new _d(`Invalid padding: ${n}`);if(r<0)throw new _d(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new _d(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new _d(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*e.length-n,this.Ie=io.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(io.fromNumber(r)));return i.compare(qX)===1&&(i=new io([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}Ee(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=HR(e),[r,i]=GR(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ee(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cI(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const n=HR(e),[r,i]=GR(n);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class _d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Sf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new If(le.min(),i,new Ge(ve),Fn(),we())}}class Sf{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Sf(r,n,we(),we(),we())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class NV{constructor(e,n){this.targetId=e,this.me=n}}class DV{constructor(e,n,r=Tt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class KR{constructor(){this.fe=0,this.ge=QR(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=we(),n=we(),r=we();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Sf(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=QR()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,re(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class WX{constructor(e){this.Be=e,this.Le=new Map,this.ke=Fn(),this.qe=Tp(),this.Qe=Tp(),this.Ke=new Ge(ve)}$e(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(n,e.Ve):this.We(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.We(n,e.key,e.Ve)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Le.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.me.count,i=this.Ye(n);if(i){const s=i.target;if(pg(s))if(r===0){const o=new Q(s.path);this.We(n,o,Je.newNoDocument(o,le.min()))}else re(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(n);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,c)}}}}}Xe(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=rs(r).toUint8Array()}catch(l){if(l instanceof iV)return Ti("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cI(o,i,s)}catch(l){return Ti(l instanceof _d?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,n,r){return n.me.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Be.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Be.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(n,s,null),i++)}),i}it(e){const n=new Map;this.Le.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&pg(a.target)){const l=new Q(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Je.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=we();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const i=new If(e,n,this.Ke,this.ke,r);return this.ke=Fn(),this.qe=Tp(),this.Qe=Tp(),this.Ke=new Ge(ve),i}Ue(e,n){if(!this.je(e))return;const r=this.ot(e,n.key)?2:0;this.ze(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.ot(e,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(e)),this.Qe=this.Qe.insert(n,this._t(n).add(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Le.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let n=this.Le.get(e);return n||(n=new KR,this.Le.set(e,n)),n}_t(e){let n=this.Qe.get(e);return n||(n=new Be(ve),this.Qe=this.Qe.insert(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Be(ve),this.qe=this.qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.Le.get(e);return n&&n.Se?null:this.Be.ut(e)}He(e){this.Le.set(e,new KR),this.Be.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}ot(e,n){return this.Be.getRemoteKeysForTarget(e).has(n)}}function Tp(){return new Ge(Q.comparator)}function QR(){return new Ge(Q.comparator)}const HX={asc:"ASCENDING",desc:"DESCENDING"},GX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KX={and:"AND",or:"OR"};class QX{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Q0(t,e){return t.useProto3Json||_f(e)?e:{value:e}}function Fc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jV(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function YX(t,e){return Fc(t,e.toTimestamp())}function Ct(t){return re(!!t),le.fromTimestamp(function(n){const r=ns(n);return new lt(r.seconds,r.nanos)}(t))}function uI(t,e){return Y0(t,e).canonicalString()}function Y0(t,e){const n=function(i){return new Ce(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function LV(t){const e=Ce.fromString(t);return re(HV(e)),e}function Mh(t,e){return uI(t.databaseId,e.path)}function _i(t,e){const n=LV(e);if(n.get(1)!==t.databaseId.projectId)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(FV(n))}function MV(t,e){return uI(t.databaseId,e)}function VV(t){const e=LV(t);return e.length===4?Ce.emptyPath():FV(e)}function J0(t){return new Ce(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function FV(t){return re(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function YR(t,e,n){return{name:Mh(t,e),fields:n.value.mapValue.fields}}function $V(t,e,n){const r=_i(t,e.name),i=Ct(e.updateTime),s=e.createTime?Ct(e.createTime):le.min(),o=new en({mapValue:{fields:e.fields}}),a=Je.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function JX(t,e){return"found"in e?function(r,i){re(!!i.found),i.found.name,i.found.updateTime;const s=_i(r,i.found.name),o=Ct(i.found.updateTime),a=i.found.createTime?Ct(i.found.createTime):le.min(),l=new en({mapValue:{fields:i.found.fields}});return Je.newFoundDocument(s,o,a,l)}(t,e):"missing"in e?function(r,i){re(!!i.missing),re(!!i.readTime);const s=_i(r,i.missing),o=Ct(i.readTime);return Je.newNoDocument(s,o)}(t,e):Z()}function XX(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(re(u===void 0||typeof u=="string"),Tt.fromBase64String(u||"")):(re(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Tt.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?F.UNKNOWN:PV(c.code);return new z(u,c.message||"")}(o);n=new DV(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_i(t,r.document.name),s=Ct(r.document.updateTime),o=r.document.createTime?Ct(r.document.createTime):le.min(),a=new en({mapValue:{fields:r.document.fields}}),l=Je.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new pm(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_i(t,r.document),s=r.readTime?Ct(r.readTime):le.min(),o=Je.newNoDocument(i,s),a=r.removedTargetIds||[];n=new pm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_i(t,r.document),s=r.removedTargetIds||[];n=new pm([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new zX(i,s),a=r.targetId;n=new NV(a,o)}}return n}function Vh(t,e){let n;if(e instanceof hu)n={update:YR(t,e.key,e.value)};else if(e instanceof fu)n={delete:Mh(t,e.key)};else if(e instanceof vs)n={update:YR(t,e.key,e.data),updateMask:iZ(e.fieldMask)};else{if(!(e instanceof sI))return Z();n={verify:Mh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Fa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof $a)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Vc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:YX(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function X0(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?at.updateTime(Ct(s.updateTime)):s.exists!==void 0?at.exists(s.exists):at.none()}(e.currentDocument):at.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;if("setToServerValue"in a)re(a.setToServerValue==="REQUEST_TIME"),l=new Mc;else if("appendMissingElements"in a){const u=a.appendMissingElements.values||[];l=new Fa(u)}else if("removeAllFromArray"in a){const u=a.removeAllFromArray.values||[];l=new $a(u)}else"increment"in a?l=new Vc(o,a.increment):Z();const c=ot.fromServerFormat(a.fieldPath);return new Tf(c,l)}(t,i)):[];if(e.update){e.update.name;const i=_i(t,e.update.name),s=new en({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(l){const c=l.fieldPaths||[];return new Vn(c.map(u=>ot.fromServerFormat(u)))}(e.updateMask);return new vs(i,s,o,n,r)}return new hu(i,s,n,r)}if(e.delete){const i=_i(t,e.delete);return new fu(i,n)}if(e.verify){const i=_i(t,e.verify);return new sI(i,n)}return Z()}function ZX(t,e){return t&&t.length>0?(re(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?Ct(i.updateTime):Ct(s);return o.isEqual(le.min())&&(o=Ct(s)),new $X(o,i.transformResults||[])}(n,e))):[]}function UV(t,e){return{documents:[MV(t,e.path)]}}function BV(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=MV(t,i);const s=function(c){if(c.length!==0)return WV($e.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(p){return{field:Pl(p.field),direction:tZ(p.dir)}}(u))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Q0(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:n,parent:i}}function zV(t){let e=VV(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){re(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(h){const p=qV(h);return p instanceof $e&&tI(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(h){return h.map(p=>function(v){return new Lh(Ol(v.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(p))}(n.orderBy));let a=null;n.limit&&(a=function(h){let p;return p=typeof h=="object"?h.value:h,_f(p)?null:p}(n.limit));let l=null;n.startAt&&(l=function(h){const p=!!h.before,m=h.values||[];return new wo(m,p)}(n.startAt));let c=null;return n.endAt&&(c=function(h){const p=!h.before,m=h.values||[];return new wo(m,p)}(n.endAt)),mV(e,i,o,s,a,"F",l,c)}function eZ(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function qV(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ol(n.unaryFilter.field);return Pe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ol(n.unaryFilter.field);return Pe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ol(n.unaryFilter.field);return Pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ol(n.unaryFilter.field);return Pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Pe.create(Ol(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $e.create(n.compositeFilter.filters.map(r=>qV(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function tZ(t){return HX[t]}function nZ(t){return GX[t]}function rZ(t){return KX[t]}function Pl(t){return{fieldPath:t.canonicalString()}}function Ol(t){return ot.fromServerFormat(t.fieldPath)}function WV(t){return t instanceof Pe?function(n){if(n.op==="=="){if(DR(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NAN"}};if(NR(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(DR(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NOT_NAN"}};if(NR(n.value))return{unaryFilter:{field:Pl(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Pl(n.field),op:nZ(n.op),value:n.value}}}(t):t instanceof $e?function(n){const r=n.getFilters().map(i=>WV(i));return r.length===1?r[0]:{compositeFilter:{op:rZ(n.op),filters:r}}}(t):Z()}function iZ(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function HV(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e,n,r,i,s=le.min(),o=le.min(),a=Tt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Fi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Fi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.ht=e}}function sZ(t,e){let n;if(e.document)n=$V(t.ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Q.fromSegments(e.noDocument.path),i=Ba(e.noDocument.readTime);n=Je.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return Z();{const r=Q.fromSegments(e.unknownDocument.path),i=Ba(e.unknownDocument.version);n=Je.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const s=new lt(i[0],i[1]);return le.fromTimestamp(s)}(e.readTime)),n}function JR(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:vg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,o){return{name:Mh(s,o.key),fields:o.data.value.mapValue.fields,updateTime:Fc(s,o.version.toTimestamp()),createTime:Fc(s,o.createTime.toTimestamp())}}(t.ht,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Ua(e.version)};else{if(!e.isUnknownDocument())return Z();r.unknownDocument={path:n.path.toArray(),version:Ua(e.version)}}return r}function vg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Ua(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ba(t){const e=new lt(t.seconds,t.nanoseconds);return le.fromTimestamp(e)}function ra(t,e){const n=(e.baseMutations||[]).map(s=>X0(t.ht,s));for(let s=0;s<e.mutations.length-1;++s){const o=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const a=e.mutations[s+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>X0(t.ht,s)),i=lt.fromMillis(e.localWriteTimeMs);return new oI(e.batchId,i,n,r)}function wd(t){const e=Ba(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Ba(t.lastLimboFreeSnapshotVersion):le.min();let r;return r=function(s){return s.documents!==void 0}(t.query)?function(s){return re(s.documents.length===1),Rn(du(VV(s.documents[0])))}(t.query):function(s){return Rn(zV(s))}(t.query),new Fi(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Tt.fromBase64String(t.resumeToken))}function KV(t,e){const n=Ua(e.snapshotVersion),r=Ua(e.lastLimboFreeSnapshotVersion);let i;i=pg(e.target)?UV(t.ht,e.target):BV(t.ht,e.target).ct;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Va(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function dI(t){const e=zV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gg(e,e.limit,"L"):e}function x_(t,e){return new lI(e.largestBatchId,X0(t.ht,e.overlayMutation))}function XR(t,e){const n=e.path.lastSegment();return[t,yn(e.path.popLast()),n]}function ZR(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:Ua(r.readTime),documentKey:yn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oZ{getBundleMetadata(e,n){return ek(e).get(n).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:Ba(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,n){return ek(e).put(function(i){return{bundleId:i.id,createTime:Ua(Ct(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return tk(e).get(n).next(r=>{if(r)return function(s){return{name:s.name,query:dI(s.bundledQuery),readTime:Ba(s.readTime)}}(r)})}saveNamedQuery(e,n){return tk(e).put(function(i){return{name:i.name,readTime:Ua(Ct(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function ek(t){return Bt(t,"bundles")}function tk(t){return Bt(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e,n){this.serializer=e,this.userId=n}static Pt(e,n){const r=n.uid||"";return new Cv(e,r)}getOverlay(e,n){return ed(e).get(XR(this.userId,n)).next(r=>r?x_(this.serializer,r):null)}getOverlays(e,n){const r=hi();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((s,o)=>{const a=new lI(n,o);i.push(this.Tt(e,a))}),M.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(o=>i.add(yn(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(ed(e).j("collectionPathOverlayIndex",a))}),M.waitFor(s)}getOverlaysForCollection(e,n,r){const i=hi(),s=yn(n),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return ed(e).U("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=x_(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const s=hi();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return ed(e).J({index:"collectionGroupOverlayIndex",range:a},(l,c,u)=>{const h=x_(this.serializer,c);s.size()<i||h.largestBatchId===o?(s.set(h.getKey(),h),o=h.largestBatchId):u.done()}).next(()=>s)}Tt(e,n){return ed(e).put(function(i,s,o){const[a,l,c]=XR(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Vh(i.ht,o.mutation)}}(this.serializer,this.userId,n))}}function ed(t){return Bt(t,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aZ{It(e){return Bt(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(n=>{const r=n==null?void 0:n.value;return r?Tt.fromUint8Array(r):Tt.EMPTY_BYTE_STRING})}setSessionToken(e,n){return this.It(e).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(){}dt(e,n){this.Et(e,n),n.At()}Et(e,n){if("nullValue"in e)this.Rt(n,5);else if("booleanValue"in e)this.Rt(n,10),n.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(n,15),n.Vt(nt(e.integerValue));else if("doubleValue"in e){const r=nt(e.doubleValue);isNaN(r)?this.Rt(n,13):(this.Rt(n,15),Oh(r)?n.Vt(0):n.Vt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Rt(n,20),typeof r=="string"&&(r=ns(r)),n.ft(`${r.seconds||""}`),n.Vt(r.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,n),this.yt(n);else if("bytesValue"in e)this.Rt(n,30),n.wt(rs(e.bytesValue)),this.yt(n);else if("referenceValue"in e)this.St(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Rt(n,45),n.Vt(r.latitude||0),n.Vt(r.longitude||0)}else"mapValue"in e?sV(e)?this.Rt(n,Number.MAX_SAFE_INTEGER):Av(e)?this.bt(e.mapValue,n):(this.Dt(e.mapValue,n),this.yt(n)):"arrayValue"in e?(this.vt(e.arrayValue,n),this.yt(n)):Z()}gt(e,n){this.Rt(n,25),this.Ct(e,n)}Ct(e,n){n.ft(e)}Dt(e,n){const r=e.fields||{};this.Rt(n,55);for(const i of Object.keys(r))this.gt(i,n),this.Et(r[i],n)}bt(e,n){var r,i;const s=e.fields||{};this.Rt(n,53);const o="value",a=((i=(r=s[o].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.Rt(n,15),n.Vt(nt(a)),this.gt(o,n),this.Et(s[o],n)}vt(e,n){const r=e.values||[];this.Rt(n,50);for(const i of r)this.Et(i,n)}St(e,n){this.Rt(n,37),Q.fromName(e).path.forEach(r=>{this.Rt(n,60),this.Ct(r,n)})}Rt(e,n){e.Vt(n)}yt(e){e.Vt(2)}}ia.Ft=new ia;function lZ(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function nk(t){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=lZ(255&r[s]);if(i+=o,o!==8)break}return i}(t);return Math.ceil(e/8)}class cZ{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.xt(r.value),r=n.next();this.Ot()}Nt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Bt(r.value),r=n.next();this.Lt()}kt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.xt(r);else if(r<2048)this.xt(960|r>>>6),this.xt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.xt(480|r>>>12),this.xt(128|63&r>>>6),this.xt(128|63&r);else{const i=n.codePointAt(0);this.xt(240|i>>>18),this.xt(128|63&i>>>12),this.xt(128|63&i>>>6),this.xt(128|63&i)}}this.Ot()}qt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Bt(r);else if(r<2048)this.Bt(960|r>>>6),this.Bt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Bt(480|r>>>12),this.Bt(128|63&r>>>6),this.Bt(128|63&r);else{const i=n.codePointAt(0);this.Bt(240|i>>>18),this.Bt(128|63&i>>>12),this.Bt(128|63&i>>>6),this.Bt(128|63&i)}}this.Lt()}Qt(e){const n=this.Kt(e),r=nk(n);this.$t(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}Ut(e){const n=this.Kt(e),r=nk(n);this.$t(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const n=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}xt(e){const n=255&e;n===0?(this.Gt(0),this.Gt(255)):n===255?(this.Gt(255),this.Gt(0)):this.Gt(n)}Bt(e){const n=255&e;n===0?(this.jt(0),this.jt(255)):n===255?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Lt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class uZ{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class dZ{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class td{constructor(){this.Jt=new cZ,this.Yt=new uZ(this.Jt),this.Zt=new dZ(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return e===0?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}en(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new sa(this.indexId,this.documentKey,this.arrayValue,r)}}function As(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=rk(t.arrayValue,e.arrayValue),n!==0?n:(n=rk(t.directionalValue,e.directionalValue),n!==0?n:Q.comparator(t.documentKey,e.documentKey)))}function rk(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(e){this.tn=new Be((n,r)=>ot.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const n of e.filters){const r=n;r.isInequality()?this.tn=this.tn.add(r):this.rn.push(r)}}get sn(){return this.tn.size>1}on(e){if(re(e.collectionGroup===this.collectionId),this.sn)return!1;const n=U0(e);if(n!==void 0&&!this._n(n))return!1;const r=Jo(e);let i=new Set,s=0,o=0;for(;s<r.length&&this._n(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.tn.size>0){const a=this.tn.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.an(a,l)||!this.un(this.nn[o++],l))return!1}++s}for(;s<r.length;++s){const a=r[s];if(o>=this.nn.length||!this.un(this.nn[o++],a))return!1}return!0}cn(){if(this.sn)return null;let e=new Be(ot.comparator);const n=[];for(const r of this.rn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new lm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new lm(r.field,0))}for(const r of this.nn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new lm(r.field,r.dir==="asc"?0:1)));return new fg(fg.UNKNOWN_ID,this.collectionId,n,Ph.empty())}_n(e){for(const n of this.rn)if(this.an(n,e))return!0;return!1}an(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}un(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(t){var e,n;if(re(t instanceof Pe||t instanceof $e),t instanceof Pe){if(t instanceof pV){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(s=>Pe.create(t.field,"==",s)))||[];return $e.create(i,"or")}return t}const r=t.filters.map(i=>QV(i));return $e.create(r,t.op)}function hZ(t){if(t.getFilters().length===0)return[];const e=tE(QV(t));return re(YV(e)),Z0(e)||eE(e)?[e]:e.getFilters()}function Z0(t){return t instanceof Pe}function eE(t){return t instanceof $e&&tI(t)}function YV(t){return Z0(t)||eE(t)||function(n){if(n instanceof $e&&W0(n)){for(const r of n.getFilters())if(!Z0(r)&&!eE(r))return!1;return!0}return!1}(t)}function tE(t){if(re(t instanceof Pe||t instanceof $e),t instanceof Pe)return t;if(t.filters.length===1)return tE(t.filters[0]);const e=t.filters.map(r=>tE(r));let n=$e.create(e,t.op);return n=yg(n),YV(n)?n:(re(n instanceof $e),re(Lc(n)),re(n.filters.length>1),n.filters.reduce((r,i)=>hI(r,i)))}function hI(t,e){let n;return re(t instanceof Pe||t instanceof $e),re(e instanceof Pe||e instanceof $e),n=t instanceof Pe?e instanceof Pe?function(i,s){return $e.create([i,s],"and")}(t,e):sk(t,e):e instanceof Pe?sk(e,t):function(i,s){if(re(i.filters.length>0&&s.filters.length>0),Lc(i)&&Lc(s))return dV(i,s.getFilters());const o=W0(i)?i:s,a=W0(i)?s:i,l=o.filters.map(c=>hI(c,a));return $e.create(l,"or")}(t,e),yg(n)}function sk(t,e){if(Lc(e))return dV(e,t.getFilters());{const n=e.filters.map(r=>hI(t,r));return $e.create(n,"or")}}function yg(t){if(re(t instanceof Pe||t instanceof $e),t instanceof Pe)return t;const e=t.getFilters();if(e.length===1)return yg(e[0]);if(cV(t))return t;const n=e.map(i=>yg(i)),r=[];return n.forEach(i=>{i instanceof Pe?r.push(i):i instanceof $e&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:$e.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fZ{constructor(){this.ln=new fI}addToCollectionParentIndex(e,n){return this.ln.add(n),M.resolve()}getCollectionParents(e,n){return M.resolve(this.ln.getEntries(n))}addFieldIndex(e,n){return M.resolve()}deleteFieldIndex(e,n){return M.resolve()}deleteAllFieldIndexes(e){return M.resolve()}createTargetIndexes(e,n){return M.resolve()}getDocumentsMatchingTarget(e,n){return M.resolve(null)}getIndexType(e,n){return M.resolve(0)}getFieldIndexes(e,n){return M.resolve([])}getNextCollectionGroupToUpdate(e){return M.resolve(null)}getMinOffset(e,n){return M.resolve(ar.min())}getMinOffsetFromCollectionGroup(e,n){return M.resolve(ar.min())}updateCollectionGroup(e,n,r){return M.resolve()}updateIndexEntries(e,n){return M.resolve()}}class fI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Be(Ce.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Be(Ce.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip=new Uint8Array(0);class pZ{constructor(e,n){this.databaseId=n,this.hn=new fI,this.Pn=new gs(r=>Va(r),(r,i)=>wf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.hn.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.hn.add(n)});const s={collectionId:r,parent:yn(i)};return ok(e).put(s)}return M.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[HM(n),""],!1,!0);return ok(e).U(i).next(s=>{for(const o of s){if(o.collectionId!==n)break;r.push(di(o.parent))}return r})}addFieldIndex(e,n){const r=nd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])}}(n);delete i.indexId;const s=r.add(i);if(n.indexState){const o=yl(e);return s.next(a=>{o.put(ZR(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return s.next()}deleteFieldIndex(e,n){const r=nd(e),i=yl(e),s=vl(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=nd(e),r=vl(e),i=yl(e);return n.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,n){return M.forEach(this.Tn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new ik(r).cn();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,n){const r=vl(e);let i=!0;const s=new Map;return M.forEach(this.Tn(n),o=>this.In(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=we();const a=[];return M.forEach(s,(l,c)=>{q("IndexedDbIndexManager",`Using index ${function(b){return`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(k=>`${k.fieldPath}:${k.kind}`).join(",")}`}(l)} to execute ${Va(n)}`);const u=function(b,k){const D=U0(k);if(D===void 0)return null;for(const N of mg(b,D.fieldPath))switch(N.op){case"array-contains-any":return N.value.arrayValue.values||[];case"array-contains":return[N.value]}return null}(c,l),h=function(b,k){const D=new Map;for(const N of Jo(k))for(const x of mg(b,N.fieldPath))switch(x.op){case"==":case"in":D.set(N.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return D.set(N.fieldPath.canonicalString(),x.value),Array.from(D.values())}return null}(c,l),p=function(b,k){const D=[];let N=!0;for(const x of Jo(k)){const S=x.kind===0?FR(b,x.fieldPath,b.startAt):$R(b,x.fieldPath,b.startAt);D.push(S.value),N&&(N=S.inclusive)}return new wo(D,N)}(c,l),m=function(b,k){const D=[];let N=!0;for(const x of Jo(k)){const S=x.kind===0?$R(b,x.fieldPath,b.endAt):FR(b,x.fieldPath,b.endAt);D.push(S.value),N&&(N=S.inclusive)}return new wo(D,N)}(c,l),v=this.dn(l,c,p),w=this.dn(l,c,m),y=this.En(l,c,h),T=this.An(l.indexId,u,v,p.inclusive,w,m.inclusive,y);return M.forEach(T,E=>r.G(E,n.limit).next(b=>{b.forEach(k=>{const D=Q.fromSegments(k.documentKey);o.has(D)||(o=o.add(D),a.push(D))})}))}).next(()=>a)}return M.resolve(null)})}Tn(e){let n=this.Pn.get(e);return n||(e.filters.length===0?n=[e]:n=hZ($e.create(e.filters,"and")).map(r=>G0(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,n),n)}An(e,n,r,i,s,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,s.length),c=l/(n!=null?n.length:1),u=[];for(let h=0;h<l;++h){const p=n?this.Rn(n[h/c]):Ip,m=this.Vn(e,p,r[h%c],i),v=this.mn(e,p,s[h%c],o),w=a.map(y=>this.Vn(e,p,y,!0));u.push(...this.createRange(m,v,w))}return u}Vn(e,n,r,i){const s=new sa(e,Q.empty(),n,r);return i?s:s.en()}mn(e,n,r,i){const s=new sa(e,Q.empty(),n,r);return i?s.en():s}In(e,n){const r=new ik(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.on(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const i=this.Tn(n);return M.forEach(i,s=>this.In(e,s).next(o=>{o?r!==0&&o.fields.length<function(l){let c=new Be(ot.comparator),u=!1;for(const h of l.filters)for(const p of h.getFlattenedFilters())p.field.isKeyField()||(p.op==="array-contains"||p.op==="array-contains-any"?u=!0:c=c.add(p.field));for(const h of l.orderBy)h.field.isKeyField()||(c=c.add(h.field));return c.size+(u?1:0)}(s)&&(r=1):r=0})).next(()=>function(o){return o.limit!==null}(n)&&i.length>1&&r===2?1:r)}fn(e,n){const r=new td;for(const i of Jo(e)){const s=n.data.field(i.fieldPath);if(s==null)return null;const o=r.Xt(i.kind);ia.Ft.dt(s,o)}return r.Ht()}Rn(e){const n=new td;return ia.Ft.dt(e,n.Xt(0)),n.Ht()}gn(e,n){const r=new td;return ia.Ft.dt(Ma(this.databaseId,n),r.Xt(function(s){const o=Jo(s);return o.length===0?0:o[o.length-1].kind}(e))),r.Ht()}En(e,n,r){if(r===null)return[];let i=[];i.push(new td);let s=0;for(const o of Jo(e)){const a=r[s++];for(const l of i)if(this.pn(n,o.fieldPath)&&jh(a))i=this.yn(i,o,a);else{const c=l.Xt(o.kind);ia.Ft.dt(a,c)}}return this.wn(i)}dn(e,n,r){return this.En(e,n,r.position)}wn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Ht();return n}yn(e,n,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new td;l.seed(a.Ht()),ia.Ft.dt(o,l.Xt(n.kind)),s.push(l)}return s}pn(e,n){return!!e.filters.find(r=>r instanceof Pe&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=nd(e),i=yl(e);return(n?r.U("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.U()).next(s=>{const o=[];return M.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(u,h){const p=h?new Ph(h.sequenceNumber,new ar(Ba(h.readTime),new Q(di(h.documentKey)),h.largestBatchId)):Ph.empty(),m=u.fields.map(([v,w])=>new lm(ot.fromServerFormat(v),w));return new fg(u.indexId,u.collectionGroup,m,p)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:ve(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=nd(e),s=yl(e);return this.Sn(e).next(o=>i.U("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>M.forEach(a,l=>s.put(ZR(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,n){const r=new Map;return M.forEach(n,(i,s)=>{const o=r.get(i.collectionGroup);return(o?M.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),M.forEach(a,l=>this.bn(e,i,l).next(c=>{const u=this.Dn(s,l);return c.isEqual(u)?M.resolve():this.vn(e,s,l,c,u)}))))})}Cn(e,n,r,i){return vl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,n.key),documentKey:n.key.path.toArray()})}Fn(e,n,r,i){return vl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,n.key),n.key.path.toArray()])}bn(e,n,r){const i=vl(e);let s=new Be(As);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,n)])},(o,a)=>{s=s.add(new sa(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>s)}Dn(e,n){let r=new Be(As);const i=this.fn(n,e);if(i==null)return r;const s=U0(n);if(s!=null){const o=e.data.field(s.fieldPath);if(jh(o))for(const a of o.arrayValue.values||[])r=r.add(new sa(n.indexId,e.key,this.Rn(a),i))}else r=r.add(new sa(n.indexId,e.key,Ip,i));return r}vn(e,n,r,i,s){q("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(l,c,u,h,p){const m=l.getIterator(),v=c.getIterator();let w=gl(m),y=gl(v);for(;w||y;){let T=!1,E=!1;if(w&&y){const b=u(w,y);b<0?E=!0:b>0&&(T=!0)}else w!=null?E=!0:T=!0;T?(h(y),y=gl(v)):E?(p(w),w=gl(m)):(w=gl(m),y=gl(v))}}(i,s,As,a=>{o.push(this.Cn(e,n,r,a))},a=>{o.push(this.Fn(e,n,r,a))}),M.waitFor(o)}Sn(e){let n=1;return yl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>As(o,a)).filter((o,a,l)=>!a||As(o,l[a-1])!==0);const i=[];i.push(e);for(const o of r){const a=As(o,e),l=As(o,n);if(a===0)i[0]=e.en();else if(a>0&&l<0)i.push(o),i.push(o.en());else if(l>0)break}i.push(n);const s=[];for(let o=0;o<i.length;o+=2){if(this.Mn(i[o],i[o+1]))return[];const a=[i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,Ip,[]],l=[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,Ip,[]];s.push(IDBKeyRange.bound(a,l))}return s}Mn(e,n){return As(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(ak)}getMinOffset(e,n){return M.mapArray(this.Tn(n),r=>this.In(e,r).next(i=>i||Z())).next(ak)}}function ok(t){return Bt(t,"collectionParents")}function vl(t){return Bt(t,"indexEntries")}function nd(t){return Bt(t,"indexConfiguration")}function yl(t){return Bt(t,"indexState")}function ak(t){re(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;XT(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new ar(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JV(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.J({range:o},(u,h,p)=>(a++,p.delete()));s.push(l.next(()=>{re(a===1)}));const c=[];for(const u of n.mutations){const h=ZM(e,u.key.path,n.batchId);s.push(i.delete(h)),c.push(u.key)}return M.waitFor(s).next(()=>c)}function _g(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Z();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(41943040,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class Pv{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.xn={}}static Pt(e,n,r,i){re(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Pv(s,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rs(e).J({index:"userMutationsIndex",range:r},(i,s,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const s=Nl(e),o=Rs(e);return o.add({}).next(a=>{re(typeof a=="number");const l=new oI(a,n,r,i),c=function(m,v,w){const y=w.baseMutations.map(E=>Vh(m.ht,E)),T=w.mutations.map(E=>Vh(m.ht,E));return{userId:v,batchId:w.batchId,localWriteTimeMs:w.localWriteTime.toMillis(),baseMutations:y,mutations:T}}(this.serializer,this.userId,l),u=[];let h=new Be((p,m)=>ve(p.canonicalString(),m.canonicalString()));for(const p of i){const m=ZM(this.userId,p.key.path,a);h=h.add(p.key.path.popLast()),u.push(o.put(c)),u.push(s.put(m,eX))}return h.forEach(p=>{u.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.xn[a]=l.keys()}),M.waitFor(u).next(()=>l)})}lookupMutationBatch(e,n){return Rs(e).get(n).next(r=>r?(re(r.userId===this.userId),ra(this.serializer,r)):null)}On(e,n){return this.xn[n]?M.resolve(this.xn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.xn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Rs(e).J({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(re(a.batchId>=r),s=ra(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Rs(e).J({index:"userMutationsIndex",range:n,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rs(e).U("userMutationsIndex",n).next(r=>r.map(i=>ra(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=cm(this.userId,n.path),i=IDBKeyRange.lowerBound(r),s=[];return Nl(e).J({range:i},(o,a,l)=>{const[c,u,h]=o,p=di(u);if(c===this.userId&&n.path.isEqual(p))return Rs(e).get(h).next(m=>{if(!m)throw Z();re(m.userId===this.userId),s.push(ra(this.serializer,m))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ve);const i=[];return n.forEach(s=>{const o=cm(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Nl(e).J({range:a},(c,u,h)=>{const[p,m,v]=c,w=di(m);p===this.userId&&s.path.isEqual(w)?r=r.add(v):h.done()});i.push(l)}),M.waitFor(i).next(()=>this.Nn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,s=cm(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new Be(ve);return Nl(e).J({range:o},(l,c,u)=>{const[h,p,m]=l,v=di(p);h===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(m)):u.done()}).next(()=>this.Nn(e,a))}Nn(e,n){const r=[],i=[];return n.forEach(s=>{i.push(Rs(e).get(s).next(o=>{if(o===null)throw Z();re(o.userId===this.userId),r.push(ra(this.serializer,o))}))}),M.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return JV(e._e,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Bn(n.batchId)}),M.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Bn(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return M.resolve();const r=IDBKeyRange.lowerBound(function(o){return[o]}(this.userId)),i=[];return Nl(e).J({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=di(s[1]);i.push(l)}else a.done()}).next(()=>{re(i.length===0)})})}containsKey(e,n){return XV(e,this.userId,n)}Ln(e){return ZV(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XV(t,e,n){const r=cm(e,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Nl(t).J({range:s,H:!0},(a,l,c)=>{const[u,h,p]=a;u===e&&h===i&&(o=!0),c.done()}).next(()=>o)}function Rs(t){return Bt(t,"mutations")}function Nl(t){return Bt(t,"documentMutations")}function ZV(t){return Bt(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new za(0)}static Qn(){return new za(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mZ{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Kn(e).next(n=>{const r=new za(n.highestTargetId);return n.highestTargetId=r.next(),this.$n(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(n=>le.fromTimestamp(new lt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Kn(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.$n(e,i)))}addTargetData(e,n){return this.Un(e,n).next(()=>this.Kn(e).next(r=>(r.targetCount+=1,this.Wn(n,r),this.$n(e,r))))}updateTargetData(e,n){return this.Un(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>_l(e).delete(n.targetId)).next(()=>this.Kn(e)).next(r=>(re(r.targetCount>0),r.targetCount-=1,this.$n(e,r)))}removeTargets(e,n,r){let i=0;const s=[];return _l(e).J((o,a)=>{const l=wd(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>M.waitFor(s)).next(()=>i)}forEachTarget(e,n){return _l(e).J((r,i)=>{const s=wd(i);n(s)})}Kn(e){return ck(e).get("targetGlobalKey").next(n=>(re(n!==null),n))}$n(e,n){return ck(e).put("targetGlobalKey",n)}Un(e,n){return _l(e).put(KV(this.serializer,n))}Wn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Kn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=Va(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return _l(e).J({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=wd(a);wf(n,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,n,r){const i=[],s=Vs(e);return n.forEach(o=>{const a=yn(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),M.waitFor(i)}removeMatchingKeys(e,n,r){const i=Vs(e);return M.forEach(n,s=>{const o=yn(s.path);return M.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,n){const r=Vs(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=Vs(e);let s=we();return i.J({range:r,H:!0},(o,a,l)=>{const c=di(o[1]),u=new Q(c);s=s.add(u)}).next(()=>s)}containsKey(e,n){const r=yn(n.path),i=IDBKeyRange.bound([r],[HM(r)],!1,!0);let s=0;return Vs(e).J({index:"documentTargetsIndex",H:!0,range:i},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}ut(e,n){return _l(e).get(n).next(r=>r?wd(r):null)}}function _l(t){return Bt(t,"targets")}function ck(t){return Bt(t,"targetGlobal")}function Vs(t){return Bt(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk([t,e],[n,r]){const i=ve(t,n);return i===0?ve(e,r):i}class gZ{constructor(e){this.Gn=e,this.buffer=new Be(uk),this.zn=0}jn(){return++this.zn}Hn(e){const n=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();uk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class eF{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){q("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){No(n)?q("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Oo(n)}await this.Yn(3e5)})}}class vZ{constructor(e,n){this.Zn=e,this.params=n}calculateTargetCount(e,n){return this.Zn.Xn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return M.resolve(Mn.oe);const r=new gZ(n);return this.Zn.forEachTarget(e,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(e,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Zn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Zn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(lk)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),lk):this.tr(e,n))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,n){let r,i,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),i=this.params.maximumSequenceNumbersToCollect):i=h,o=Date.now(),this.nthSequenceNumber(e,i))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(s=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(c=Date.now(),kl()<=xe.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:h})))}}function tF(t,e){return new vZ(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yZ{constructor(e,n){this.db=e,this.garbageCollector=tF(this,n)}Xn(e){const n=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}er(e,n){return this.rr(e,(r,i)=>n(i))}addReference(e,n,r){return Sp(e,r)}removeReference(e,n,r){return Sp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Sp(e,n)}ir(e,n){return function(i,s){let o=!1;return ZV(i).Y(a=>XV(i,a,s).next(l=>(l&&(o=!0),M.resolve(!l)))).next(()=>o)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.rr(e,(o,a)=>{if(a<=n){const l=this.ir(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,le.min()),Vs(e).delete(function(h){return[0,yn(h.path)]}(o))))});i.push(l)}}).next(()=>M.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Sp(e,n)}rr(e,n){const r=Vs(e);let i,s=Mn.oe;return r.J({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{o===0?(s!==Mn.oe&&n(new Q(di(i)),s),s=c,i=l):s=Mn.oe}).next(()=>{s!==Mn.oe&&n(new Q(di(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Sp(t,e){return Vs(t).put(function(r,i){return{targetId:0,path:yn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF{constructor(){this.changes=new gs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Je.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Z{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return qo(e).put(r)}removeEntry(e,n,r){return qo(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],vg(o),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.sr(e,r)))}getEntry(e,n){let r=Je.newInvalidDocument(n);return qo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rd(n))},(i,s)=>{r=this._r(n,s)}).next(()=>r)}ar(e,n){let r={size:0,document:Je.newInvalidDocument(n)};return qo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(rd(n))},(i,s)=>{r={document:this._r(n,s),size:_g(s)}}).next(()=>r)}getEntries(e,n){let r=Fn();return this.ur(e,n,(i,s)=>{const o=this._r(i,s);r=r.insert(i,o)}).next(()=>r)}cr(e,n){let r=Fn(),i=new Ge(Q.comparator);return this.ur(e,n,(s,o)=>{const a=this._r(s,o);r=r.insert(s,a),i=i.insert(s,_g(o))}).next(()=>({documents:r,lr:i}))}ur(e,n,r){if(n.isEmpty())return M.resolve();let i=new Be(fk);n.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(rd(i.first()),rd(i.last())),o=i.getIterator();let a=o.getNext();return qo(e).J({index:"documentKeyIndex",range:s},(l,c,u)=>{const h=Q.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&fk(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?u.$(rd(a)):u.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,s){const o=n.path,a=[o.popLast().toArray(),o.lastSegment(),vg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qo(e).U(IDBKeyRange.bound(a,l,!0)).next(c=>{s==null||s.incrementDocumentReadCount(c.length);let u=Fn();for(const h of c){const p=this._r(Q.fromSegments(h.prefixPath.concat(h.collectionGroup,h.documentId)),h);p.isFoundDocument()&&(bf(n,p)||i.has(p.key))&&(u=u.insert(p.key,p))}return u})}getAllFromCollectionGroup(e,n,r,i){let s=Fn();const o=hk(n,r),a=hk(n,ar.max());return qo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,u)=>{const h=this._r(Q.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(h.key,h),s.size===i&&u.done()}).next(()=>s)}newChangeBuffer(e){return new wZ(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return dk(e).get("remoteDocumentGlobalKey").next(n=>(re(!!n),n))}sr(e,n){return dk(e).put("remoteDocumentGlobalKey",n)}_r(e,n){if(n){const r=sZ(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(le.min())))return r}return Je.newInvalidDocument(e)}}function rF(t){return new _Z(t)}class wZ extends nF{constructor(e,n){super(),this.hr=e,this.trackRemovals=n,this.Pr=new gs(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Be((s,o)=>ve(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.Pr.get(s);if(n.push(this.hr.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=JR(this.hr.serializer,o);i=i.add(s.path.popLast());const c=_g(l);r+=c-a.size,n.push(this.hr.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=JR(this.hr.serializer,o.convertToNoDocument(le.min()));n.push(this.hr.addEntry(e,s,l))}}),i.forEach(s=>{n.push(this.hr.indexManager.addToCollectionParentIndex(e,s))}),n.push(this.hr.updateMetadata(e,r)),M.waitFor(n)}getFromCache(e,n){return this.hr.ar(e,n).next(r=>(this.Pr.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.hr.cr(e,n).next(({documents:r,lr:i})=>(i.forEach((s,o)=>{this.Pr.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function dk(t){return Bt(t,"remoteDocumentGlobal")}function qo(t){return Bt(t,"remoteDocumentsV14")}function rd(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hk(t,e){const n=e.documentKey.path.toArray();return[t,vg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function fk(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=ve(n[s],r[s]),i)return i;return i=ve(n.length,r.length),i||(i=ve(n[n.length-2],r[r.length-2]),i||ve(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Hd(r.mutation,i,Vn.empty(),lt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,n,r=we()){const i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=yd();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,we()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Fn();const o=Wd(),a=function(){return Wd()}();return n.forEach((l,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof vs)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Hd(u.mutation,c,u.mutation.getFieldMask(),lt.now())):o.set(c.key,Vn.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var h;return a.set(c,new EZ(u,(h=o.get(c))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Wd();let i=new Ge((o,a)=>o-a),s=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=n.get(l);if(c===null)return;let u=r.get(l)||Vn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const h=(i.get(a.batchId)||we()).add(l);i=i.insert(a.batchId,h)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,h=EV();u.forEach(p=>{if(!s.has(p)){const m=RV(n.get(p),r.get(p));m!==null&&h.set(p,m),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return M.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):M.resolve(hi());let a=-1,l=s;return o.next(c=>M.forEach(c,(u,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(u)?M.resolve():this.remoteDocumentCache.getEntry(e,u).next(p=>{l=l.insert(u,p)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,we())).next(u=>({batchId:a,changes:wV(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=yd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=yd();return this.indexManager.getCollectionParents(e,s).next(a=>M.forEach(a,l=>{const c=function(h,p){return new ms(p,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(u=>{u.forEach((h,p)=>{o=o.insert(h,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Je.newInvalidDocument(u)))});let a=yd();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Hd(u.mutation,c,Vn.empty(),lt.now()),bf(n,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bZ{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,n){return M.resolve(this.Tr.get(n))}saveBundleMetadata(e,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Ct(i.createTime)}}(n)),M.resolve()}getNamedQuery(e,n){return M.resolve(this.Ir.get(n))}saveNamedQuery(e,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:dI(i.bundledQuery),readTime:Ct(i.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TZ{constructor(){this.overlays=new Ge(Q.comparator),this.dr=new Map}getOverlay(e,n){return M.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hi();return M.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Tt(e,n,s)}),M.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.dr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.dr.delete(r)),M.resolve()}getOverlaysForCollection(e,n,r){const i=hi(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return M.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=hi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=hi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=i)););return M.resolve(a)}Tt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.dr.get(i.largestBatchId).delete(r.key);this.dr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new lI(n,r));let s=this.dr.get(n);s===void 0&&(s=we(),this.dr.set(n,s)),this.dr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IZ{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return M.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI{constructor(){this.Er=new Be(zt.Ar),this.Rr=new Be(zt.Vr)}isEmpty(){return this.Er.isEmpty()}addReference(e,n){const r=new zt(e,n);this.Er=this.Er.add(r),this.Rr=this.Rr.add(r)}mr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.gr(new zt(e,n))}pr(e,n){e.forEach(r=>this.removeReference(r,n))}yr(e){const n=new Q(new Ce([])),r=new zt(n,e),i=new zt(n,e+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.Er.forEach(e=>this.gr(e))}gr(e){this.Er=this.Er.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const n=new Q(new Ce([])),r=new zt(n,e),i=new zt(n,e+1);let s=we();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new zt(e,0),r=this.Er.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class zt{constructor(e,n){this.key=e,this.br=n}static Ar(e,n){return Q.comparator(e.key,n.key)||ve(e.br,n.br)}static Vr(e,n){return ve(e.br,n.br)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Be(zt.Ar)}checkEmpty(e){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new oI(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new zt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return M.resolve(o)}lookupMutationBatch(e,n){return M.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return M.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new zt(n,0),i=new zt(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),M.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Be(ve);return n.forEach(i=>{const s=new zt(i,0),o=new zt(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),M.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Q.isDocumentKey(s)||(s=s.child(""));const o=new zt(new Q(s),0);let a=new Be(ve);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.br)),!0)},o),M.resolve(this.Mr(a))}Mr(e){const n=[];return e.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){re(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return M.forEach(n.mutations,i=>{const s=new zt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.vr=r})}Bn(e){}containsKey(e,n){const r=new zt(n,0),i=this.vr.firstAfterOrEqual(r);return M.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,M.resolve()}Or(e,n){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const n=this.Fr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xZ{constructor(e){this.Nr=e,this.docs=function(){return new Ge(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():Je.newInvalidDocument(n))}getEntries(e,n){let r=Fn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Je.newInvalidDocument(i))}),M.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Fn();const o=n.path,a=new Q(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||XT(KM(u),r)<=0||(i.has(u.key)||bf(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return M.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Br(e,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new AZ(this)}getSize(e){return M.resolve(this.size)}}class AZ extends nF{constructor(e){super(),this.hr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(e,i)):this.hr.removeEntry(r)}),M.waitFor(n)}getFromCache(e,n){return this.hr.getEntry(e,n)}getAllFromCache(e,n){return this.hr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RZ{constructor(e){this.persistence=e,this.Lr=new gs(n=>Va(n),wf),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.kr=0,this.qr=new pI,this.targetCount=0,this.Qr=za.qn()}forEachTarget(e,n){return this.Lr.forEach((r,i)=>n(i)),M.resolve()}getLastRemoteSnapshotVersion(e){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return M.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),M.resolve()}Un(e){this.Lr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Qr=new za(n),this.highestTargetId=n),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,n){return this.Un(n),this.targetCount+=1,M.resolve()}updateTargetData(e,n){return this.Un(n),M.resolve()}removeTargetData(e,n){return this.Lr.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Lr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Lr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),M.waitFor(s).next(()=>i)}getTargetCount(e){return M.resolve(this.targetCount)}getTargetData(e,n){const r=this.Lr.get(n)||null;return M.resolve(r)}addMatchingKeys(e,n,r){return this.qr.mr(n,r),M.resolve()}removeMatchingKeys(e,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),M.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.qr.yr(n),M.resolve()}getMatchingKeysForTargetId(e,n){const r=this.qr.Sr(n);return M.resolve(r)}containsKey(e,n){return M.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e,n){this.Kr={},this.overlays={},this.$r=new Mn(0),this.Ur=!1,this.Ur=!0,this.Wr=new IZ,this.referenceDelegate=e(this),this.Gr=new RZ(this),this.indexManager=new fZ,this.remoteDocumentCache=function(i){return new xZ(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new GV(n),this.jr=new bZ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new TZ,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Kr[e.toKey()];return r||(r=new SZ(n,this.referenceDelegate),this.Kr[e.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new kZ(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(e,n){return M.or(Object.values(this.Kr).map(r=>()=>r.containsKey(e,n)))}}class kZ extends YM{constructor(e){super(),this.currentSequenceNumber=e}}class Ov{constructor(e){this.persistence=e,this.Zr=new pI,this.Xr=null}static ei(e){return new Ov(e)}get ti(){if(this.Xr)return this.Xr;throw Z()}addReference(e,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),M.resolve()}removeReference(e,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),M.resolve()}markPotentiallyOrphaned(e,n){return this.ti.add(n.toString()),M.resolve()}removeTarget(e,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Hr(){this.Xr=new Set}Jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.ti,r=>{const i=Q.fromPath(r);return this.ni(e,i).next(s=>{s||n.removeEntry(i,le.min())})}).next(()=>(this.Xr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ni(e,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(e){return 0}ni(e,n){return M.or([()=>M.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Yr(e,n)])}}class wg{constructor(e,n){this.persistence=e,this.ri=new gs(r=>yn(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=tF(this,n)}static ei(e,n){return new wg(e,n)}Hr(){}Jr(e){return M.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}Xn(e){const n=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}nr(e){let n=0;return this.er(e,r=>{n++}).next(()=>n)}er(e,n){return M.forEach(this.ri,(r,i)=>this.ir(e,r,i).next(s=>s?M.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Br(e,o=>this.ir(e,o,n).next(a=>{a||(r++,s.removeEntry(o,le.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.ri.set(n,e.currentSequenceNumber),M.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),M.resolve()}removeReference(e,n,r){return this.ri.set(r,e.currentSequenceNumber),M.resolve()}updateLimboDocument(e,n){return this.ri.set(n,e.currentSequenceNumber),M.resolve()}zr(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=dm(e.data.value)),n}ir(e,n,r){return M.or([()=>this.persistence.Yr(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.ri.get(n);return M.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(e){this.serializer=e}O(e,n,r,i){const s=new Iv("createOrUpgrade",n);r<1&&i>=1&&(function(l){l.createObjectStore("owner")}(e),function(l){l.createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RR,{unique:!0}),l.createObjectStore("documentMutations")}(e),pk(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=M.resolve();return r<3&&i>=3&&(r!==0&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),pk(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(s))),r<4&&i>=4&&(r!==0&&(o=o.next(()=>function(l,c){return c.store("mutations").U().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",RR,{unique:!0});const h=c.store("mutations"),p=u.map(m=>h.put(m));return M.waitFor(p)})}(e,s))),o=o.next(()=>{(function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(o=o.next(()=>this.ii(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.si(s)))),r<7&&i>=7&&(o=o.next(()=>this.oi(s))),r<8&&i>=8&&(o=o.next(()=>this._i(e,s))),r<9&&i>=9&&(o=o.next(()=>{(function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(o=o.next(()=>this.ai(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{(function(l){const c=l.createObjectStore("documentOverlays",{keyPath:hX});c.createIndex("collectionPathOverlayIndex",fX,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",pX,{unique:!1})})(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:tX});c.createIndex("documentKeyIndex",nX),c.createIndex("collectionGroupIndex",rX)}(e)).next(()=>this.ui(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.ci(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:lX}).createIndex("sequenceNumberIndex",cX,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:uX}).createIndex("documentKeyIndex",dX,{unique:!1})}(e))),r<16&&i>=16&&(o=o.next(()=>{n.objectStore("indexState").clear()}).next(()=>{n.objectStore("indexEntries").clear()})),r<17&&i>=17&&(o=o.next(()=>{(function(l){l.createObjectStore("globals",{keyPath:"name"})})(e)})),o}si(e){let n=0;return e.store("remoteDocuments").J((r,i)=>{n+=_g(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ii(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.U().next(i=>M.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",o).next(a=>M.forEach(a,l=>{re(l.userId===s.userId);const c=ra(this.serializer,l);return JV(e,s.userId,c).next(()=>{})}))}))}oi(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((o,a)=>{const l=new Ce(o),c=function(h){return[0,yn(h)]}(l);s.push(n.get(c).next(u=>u?M.resolve():(h=>n.put({targetId:0,path:yn(h),sequenceNumber:i.highestListenSequenceNumber}))(l)))}).next(()=>M.waitFor(s))})}_i(e,n){e.createObjectStore("collectionParents",{keyPath:aX});const r=n.store("collectionParents"),i=new fI,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:yn(l)})}};return n.store("remoteDocuments").J({H:!0},(o,a)=>{const l=new Ce(o);return s(l.popLast())}).next(()=>n.store("documentMutations").J({H:!0},([o,a,l],c)=>{const u=di(a);return s(u.popLast())}))}ai(e){const n=e.store("targets");return n.J((r,i)=>{const s=wd(i),o=KV(this.serializer,s);return n.put(o)})}ui(e,n){const r=n.store("remoteDocuments"),i=[];return r.J((s,o)=>{const a=n.store("remoteDocumentsV14"),l=function(h){return h.document?new Q(Ce.fromString(h.document.name).popFirst(5)):h.noDocument?Q.fromSegments(h.noDocument.path):h.unknownDocument?Q.fromSegments(h.unknownDocument.path):Z()}(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};i.push(a.put(c))}).next(()=>M.waitFor(i))}ci(e,n){const r=n.store("mutations"),i=rF(this.serializer),s=new mI(Ov.ei,this.serializer.ht);return r.U().next(o=>{const a=new Map;return o.forEach(l=>{var c;let u=(c=a.get(l.userId))!==null&&c!==void 0?c:we();ra(this.serializer,l).keys().forEach(h=>u=u.add(h)),a.set(l.userId,u)}),M.forEach(a,(l,c)=>{const u=new Wt(c),h=Cv.Pt(this.serializer,u),p=s.getIndexManager(u),m=Pv.Pt(u,this.serializer,p,s.referenceDelegate);return new iF(i,m,h,p).recalculateAndSaveOverlaysForDocumentKeys(new B0(n,Mn.oe),l).next()})})}}function pk(t){t.createObjectStore("targetDocuments",{keyPath:sX}).createIndex("documentTargetsIndex",oX,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iX,{unique:!0}),t.createObjectStore("targetGlobal")}const A_="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class gI{constructor(e,n,r,i,s,o,a,l,c,u,h=17){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.li=s,this.window=o,this.document=a,this.hi=c,this.Pi=u,this.Ti=h,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.di=null,this.Ei=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=p=>Promise.resolve(),!gI.p())throw new z(F.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new yZ(this,i),this.Vi=n+"main",this.serializer=new GV(l),this.mi=new yi(this.Vi,this.Ti,new CZ(this.serializer)),this.Wr=new aZ,this.Gr=new mZ(this.referenceDelegate,this.serializer),this.remoteDocumentCache=rF(this.serializer),this.jr=new oZ,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,u===!1&&Rt("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(F.FAILED_PRECONDITION,A_);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Mn(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.B(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>xp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(n=>{n||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(n=>this.isPrimary&&!n?this.vi(e).next(()=>!1):!!n&&this.Ci(e).next(()=>!0))).catch(e=>{if(No(e))return q("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return q("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return id(e).get("owner").next(n=>M.resolve(this.Fi(n)))}Mi(e){return xp(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=Bt(n,"clientMetadata");return r.U().next(i=>{const s=this.Ni(i,18e5),o=i.filter(a=>s.indexOf(a)===-1);return M.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.fi)for(const n of e)this.fi.removeItem(this.Bi(n.clientId))}}wi(){this.Ei=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?M.resolve(!0):id(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Li(n.ownerId)){if(this.Fi(n)&&this.networkEnabled)return!0;if(!this.Fi(n)){if(!n.allowTabSynchronization)throw new z(F.FAILED_PRECONDITION,A_);return!1}}return!(!this.networkEnabled||!this.inForeground)||xp(e).U().next(r=>this.Ni(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,o=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(s||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&q("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ur=!1,this.ki(),this.Ei&&(this.Ei.cancel(),this.Ei=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new B0(e,Mn.oe);return this.vi(n).next(()=>this.Mi(n))}),this.mi.close(),this.Ki()}Ni(e,n){return e.filter(r=>this.Oi(r.updateTimeMs,n)&&!this.Li(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>xp(e).U().next(n=>this.Ni(n,18e5).map(r=>r.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,n){return Pv.Pt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new pZ(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return Cv.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,n,r){q("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",s=function(l){return l===17?vX:l===16?gX:l===15?eI:l===14?nV:l===13?tV:l===12?mX:l===11?eV:void Z()}(this.Ti);let o;return this.mi.runTransaction(e,i,s,a=>(o=new B0(a,this.$r?this.$r.next():Mn.oe),n==="readwrite-primary"?this.bi(o).next(l=>!!l||this.Di(o)).next(l=>{if(!l)throw Rt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new z(F.FAILED_PRECONDITION,QM);return r(o)}).next(l=>this.Ci(o).next(()=>l)):this.Ui(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}Ui(e){return id(e).get("owner").next(n=>{if(n!==null&&this.Oi(n.leaseTimestampMs,5e3)&&!this.Li(n.ownerId)&&!this.Fi(n)&&!(this.Pi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new z(F.FAILED_PRECONDITION,A_)})}Ci(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return id(e).put("owner",n)}static p(){return yi.p()}vi(e){const n=id(e);return n.get("owner").next(r=>this.Fi(r)?(q("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):M.resolve())}Oi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Rt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}pi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.di=()=>{this.li.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.gi()))},this.document.addEventListener("visibilitychange",this.di),this.inForeground=this.document.visibilityState==="visible")}qi(){this.di&&(this.document.removeEventListener("visibilitychange",this.di),this.di=null)}yi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ii=()=>{this.ki();const n=/(?:Version|Mobile)\/1[456]/;Jj()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Li(e){var n;try{const r=((n=this.fi)===null||n===void 0?void 0:n.getItem(this.Bi(e)))!==null;return q("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Rt("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Bi(this.clientId),String(Date.now()))}catch(e){Rt("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Bi(this.clientId))}catch{}}Bi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function id(t){return Bt(t,"owner")}function xp(t){return Bt(t,"clientMetadata")}function vI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(e,n){let r=we(),i=we();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new yI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PZ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return Jj()?8:JM(mt())>0?6:4}()}initialize(e,n){this.Zi=e,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.Xi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PZ;return this.ts(e,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,n,o,a.size)})}).next(()=>s.result)}ns(e,n,r,i){return r.documentReadCount<this.Ji?(kl()<=xe.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",Cl(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),M.resolve()):(kl()<=xe.DEBUG&&q("QueryEngine","Query:",Cl(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(kl()<=xe.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",Cl(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Rn(n))):M.resolve())}Xi(e,n){if(UR(n))return M.resolve(null);let r=Rn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=gg(n,null,"F"),r=Rn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=we(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.rs(n,a);return this.ss(n,c,o,l.readTime)?this.Xi(e,gg(n,null,"F")):this.os(e,c,n,l)}))})))}es(e,n,r,i){return UR(n)||i.isEqual(le.min())?M.resolve(null):this.Zi.getDocuments(e,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?M.resolve(null):(kl()<=xe.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Cl(n)),this.os(e,o,n,GM(i,-1)).next(a=>a))})}rs(e,n){let r=new Be(yV(e));return n.forEach((i,s)=>{bf(e,s)&&(r=r.add(s))}),r}ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(e,n,r){return kl()<=xe.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",Cl(n)),this.Zi.getDocumentsMatchingQuery(e,n,ar.min(),r)}os(e,n,r,i){return this.Zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OZ{constructor(e,n,r,i){this.persistence=e,this._s=n,this.serializer=i,this.us=new Ge(ve),this.cs=new gs(s=>Va(s),wf),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(r)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iF(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.us))}}function oF(t,e,n,r){return new OZ(t,e,n,r)}async function aF(t,e){const n=Y(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=we();for(const c of i){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return n.localDocuments.getDocuments(r,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function NZ(t,e){const n=Y(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,p=h.keys();let m=M.resolve();return p.forEach(v=>{m=m.next(()=>u.getEntry(l,v)).next(w=>{const y=c.docVersions.get(v);re(y!==null),w.version.compareTo(y)<0&&(h.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),u.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=we();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function lF(t){const e=Y(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Gr.getLastRemoteSnapshotVersion(n))}function DZ(t,e){const n=Y(t),r=e.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];e.targetChanges.forEach((u,h)=>{const p=i.get(h);if(!p)return;a.push(n.Gr.removeMatchingKeys(s,u.removedDocuments,h).next(()=>n.Gr.addMatchingKeys(s,u.addedDocuments,h)));let m=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Tt.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):u.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(u.resumeToken,r)),i=i.insert(h,m),function(w,y,T){return w.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,m,u)&&a.push(n.Gr.updateTargetData(s,m))});let l=Fn(),c=we();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(cF(s,o,e.documentUpdates).next(u=>{l=u.Is,c=u.ds})),!r.isEqual(le.min())){const u=n.Gr.getLastRemoteSnapshotVersion(s).next(h=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(u)}return M.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(n.us=i,s))}function cF(t,e,n){let r=we(),i=we();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Fn();return n.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(le.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,ds:i}})}function jZ(t,e){const n=Y(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $c(t,e){const n=Y(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,e).next(s=>s?(i=s,M.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new Fi(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(e,r.targetId)),r})}async function Uc(t,e,n){const r=Y(t),i=r.us.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!No(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.us=r.us.remove(e),r.cs.delete(i.target)}function Eg(t,e,n){const r=Y(t);let i=le.min(),s=we();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const h=Y(l),p=h.cs.get(u);return p!==void 0?M.resolve(h.us.get(p)):h.Gr.getTargetData(c,u)}(r,o,Rn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r._s.getDocumentsMatchingQuery(o,e,n?i:le.min(),n?s:we())).next(a=>(hF(r,vV(e),a),{documents:a,Es:s})))}function uF(t,e){const n=Y(t),r=Y(n.Gr),i=n.us.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",s=>r.ut(s,e).next(o=>o?o.target:null))}function dF(t,e){const n=Y(t),r=n.ls.get(e)||le.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.hs.getAllFromCollectionGroup(i,e,GM(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(hF(n,e,i),i))}function hF(t,e,n){let r=t.ls.get(e)||le.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ls.set(e,r)}async function LZ(t,e,n,r){const i=Y(t);let s=we(),o=Fn();for(const c of n){const u=e.As(c.metadata.name);c.document&&(s=s.add(u));const h=e.Rs(c);h.setReadTime(e.Vs(c.metadata.readTime)),o=o.insert(u,h)}const a=i.hs.newChangeBuffer({trackRemovals:!0}),l=await $c(i,function(u){return Rn(du(Ce.fromString(`__bundle__/docs/${u}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>cF(c,a,o).next(u=>(a.apply(c),u)).next(u=>i.Gr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Gr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,u.Is,u.ds)).next(()=>u.Is)))}async function MZ(t,e,n=we()){const r=await $c(t,Rn(dI(e.bundledQuery))),i=Y(t);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=Ct(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.jr.saveNamedQuery(s,e);const a=r.withResumeToken(Tt.EMPTY_BYTE_STRING,o);return i.us=i.us.insert(a.targetId,a),i.Gr.updateTargetData(s,a).next(()=>i.Gr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Gr.addMatchingKeys(s,n,r.targetId)).next(()=>i.jr.saveNamedQuery(s,e))})}function mk(t,e){return`firestore_clients_${t}_${e}`}function gk(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function R_(t,e){return`firestore_targets_${t}_${e}`}class bg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static fs(e,n,r){const i=JSON.parse(r);let s,o=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return o&&i.error&&(o=typeof i.error.message=="string"&&typeof i.error.code=="string",o&&(s=new z(i.error.code,i.error.message))),o?new bg(e,n,i.state,s):(Rt("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gd{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static fs(e,n){const r=JSON.parse(n);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new z(r.error.code,r.error.message))),s?new Gd(e,r.state,i):(Rt("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Tg{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static fs(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=rI();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=XM(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new Tg(e,s):(Rt("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class _I{constructor(e,n){this.clientId=e,this.onlineState=n}static fs(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new _I(n.clientId,n.onlineState):(Rt("SharedClientState",`Failed to parse online state: ${e}`),null)}}class nE{constructor(){this.activeTargetIds=rI()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class k_{constructor(e,n,r,i,s){this.window=e,this.li=n,this.persistenceKey=r,this.ws=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new Ge(ve),this.started=!1,this.vs=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Cs=mk(this.persistenceKey,this.ws),this.Fs=function(l){return`firestore_sequence_number_${l}`}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new nE),this.Ms=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.xs=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Os=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.Ns=function(l){return`firestore_online_state_${l}`}(this.persistenceKey),this.Bs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const r of e){if(r===this.ws)continue;const i=this.getItem(mk(this.persistenceKey,r));if(i){const s=Tg.fs(r,i);s&&(this.Ds=this.Ds.insert(s.clientId,s))}}this.Ls();const n=this.storage.getItem(this.Ns);if(n){const r=this.ks(n);r&&this.qs(r)}for(const r of this.vs)this.bs(r);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let n=!1;return this.Ds.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,n,r){this.Ks(e,n,r),this.$s(e)}addLocalQueryTarget(e,n=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(R_(this.persistenceKey,e));if(i){const s=Gd.fs(e,i);s&&(r=s.state)}}return n&&this.Us.ps(e),this.Ls(),r}removeLocalQueryTarget(e){this.Us.ys(e),this.Ls()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(R_(this.persistenceKey,e))}updateQueryState(e,n,r){this.Ws(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.$s(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return q("SharedClientState","READ",e,n),n}setItem(e,n){q("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){q("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const n=e;if(n.storageArea===this.storage){if(q("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Cs)return void Rt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.Ms.test(n.key)){if(n.newValue==null){const r=this.js(n.key);return this.Hs(r,null)}{const r=this.Js(n.key,n.newValue);if(r)return this.Hs(r.clientId,r)}}else if(this.xs.test(n.key)){if(n.newValue!==null){const r=this.Ys(n.key,n.newValue);if(r)return this.Zs(r)}}else if(this.Os.test(n.key)){if(n.newValue!==null){const r=this.Xs(n.key,n.newValue);if(r)return this.eo(r)}}else if(n.key===this.Ns){if(n.newValue!==null){const r=this.ks(n.newValue);if(r)return this.qs(r)}}else if(n.key===this.Fs){const r=function(s){let o=Mn.oe;if(s!=null)try{const a=JSON.parse(s);re(typeof a=="number"),o=a}catch(a){Rt("SharedClientState","Failed to read sequence number from WebStorage",a)}return o}(n.newValue);r!==Mn.oe&&this.sequenceNumberHandler(r)}else if(n.key===this.Bs){const r=this.no(n.newValue);await Promise.all(r.map(i=>this.syncEngine.ro(i)))}}}else this.vs.push(n)})}}get Us(){return this.Ds.get(this.ws)}Ls(){this.setItem(this.Cs,this.Us.gs())}Ks(e,n,r){const i=new bg(this.currentUser,e,n,r),s=gk(this.persistenceKey,this.currentUser,e);this.setItem(s,i.gs())}$s(e){const n=gk(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Gs(e){const n={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(n))}Ws(e,n,r){const i=R_(this.persistenceKey,e),s=new Gd(e,n,r);this.setItem(i,s.gs())}zs(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Bs,n)}js(e){const n=this.Ms.exec(e);return n?n[1]:null}Js(e,n){const r=this.js(e);return Tg.fs(r,n)}Ys(e,n){const r=this.xs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return bg.fs(new Wt(s),i,n)}Xs(e,n){const r=this.Os.exec(e),i=Number(r[1]);return Gd.fs(i,n)}ks(e){return _I.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);q("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,n){const r=n?this.Ds.insert(e,n):this.Ds.remove(e),i=this.Qs(this.Ds),s=this.Qs(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.oo(o,a).then(()=>{this.Ds=r})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let n=rI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class fF{constructor(){this._o=new nE,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,n,r){this.ao[e]=n}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new nE,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VZ{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ap=null;function C_(){return Ap===null?Ap=function(){return 268435456+Math.round(2147483648*Math.random())}():Ap++,"0x"+Ap.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FZ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Z{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fn="WebChannelConnection";class UZ extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=C_(),l=this.No(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Bo(c,s,o),this.Lo(n,l,c,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${a}: `,u),u),u=>{throw Ti("RestConnection",`RPC '${n}' ${a} failed with error: `,u,"url: ",l,"request:",i),u})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Bo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+uu}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=FZ[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Lo(e,n,r,i){const s=C_();return new Promise((o,a)=>{const l=new FM;l.setWithCredentials(!0),l.listenOnce($M.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case am.NO_ERROR:const u=l.getResponseJson();q(fn,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case am.TIMEOUT:q(fn,`RPC '${e}' ${s} timed out`),a(new z(F.DEADLINE_EXCEEDED,"Request time out"));break;case am.HTTP_ERROR:const h=l.getStatus();if(q(fn,`RPC '${e}' ${s} failed with status:`,h,"response text:",l.getResponseText()),h>0){let p=l.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const v=function(y){const T=y.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(T)>=0?T:F.UNKNOWN}(m.status);a(new z(v,m.message))}else a(new z(F.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{q(fn,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(fn,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",c,r,15)})}qo(e,n,r){const i=C_(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=zM(),a=BM(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Bo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const u=s.join("");q(fn,`Creating RPC '${e}' stream ${i}: ${u}`,l);const h=o.createWebChannel(u,l);let p=!1,m=!1;const v=new $Z({Eo:y=>{m?q(fn,`Not sending because RPC '${e}' stream ${i} is closed:`,y):(p||(q(fn,`Opening RPC '${e}' stream ${i} transport.`),h.open(),p=!0),q(fn,`RPC '${e}' stream ${i} sending:`,y),h.send(y))},Ao:()=>h.close()}),w=(y,T,E)=>{y.listen(T,b=>{try{E(b)}catch(k){setTimeout(()=>{throw k},0)}})};return w(h,vd.EventType.OPEN,()=>{m||(q(fn,`RPC '${e}' stream ${i} transport opened.`),v.So())}),w(h,vd.EventType.CLOSE,()=>{m||(m=!0,q(fn,`RPC '${e}' stream ${i} transport closed`),v.Do())}),w(h,vd.EventType.ERROR,y=>{m||(m=!0,Ti(fn,`RPC '${e}' stream ${i} transport errored:`,y),v.Do(new z(F.UNAVAILABLE,"The operation could not be completed")))}),w(h,vd.EventType.MESSAGE,y=>{var T;if(!m){const E=y.data[0];re(!!E);const b=E,k=(b==null?void 0:b.error)||((T=b[0])===null||T===void 0?void 0:T.error);if(k){q(fn,`RPC '${e}' stream ${i} received error:`,k);const D=k.status;let N=function(C){const R=Nt[C];if(R!==void 0)return PV(R)}(D),x=k.message;N===void 0&&(N=F.INTERNAL,x="Unknown error status: "+D+" with message "+k.message),m=!0,v.Do(new z(N,x)),h.close()}else q(fn,`RPC '${e}' stream ${i} received:`,E),v.vo(E)}}),w(a,UM.STAT_EVENT,y=>{y.stat===$0.PROXY?q(fn,`RPC '${e}' stream ${i} detected buffering proxy`):y.stat===$0.NOPROXY&&q(fn,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.bo()},0),v}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pF(){return typeof window<"u"?window:null}function mm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xf(t){return new QX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,r=1e3,i=1.5,s=6e4){this.li=e,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,n,r,i,s,o,a,l){this.li=e,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new wI(e,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Rt(n.toString()),Rt("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(n)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{e(()=>{const i=new z(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.d_(i)})})}I_(e,n){const r=this.T_(this.Xo);this.stream=this.E_(e,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.d_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}d_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return n=>{this.li.enqueueAndForget(()=>this.Xo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BZ extends mF{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}E_(e,n){return this.connection.qo("Listen",e,n)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const n=XX(this.serializer,e),r=function(s){if(!("targetChange"in s))return le.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?le.min():o.readTime?Ct(o.readTime):le.min()}(e);return this.listener.R_(n,r)}V_(e){const n={};n.database=J0(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=pg(l)?{documents:UV(s,l)}:{query:BV(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=jV(s,o.resumeToken);const c=Q0(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(le.min())>0){a.readTime=Fc(s,o.snapshotVersion.toTimestamp());const c=Q0(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=eZ(this.serializer,e);r&&(n.labels=r),this.c_(n)}m_(e){const n={};n.database=J0(this.serializer),n.removeTarget=e,this.c_(n)}}class zZ extends mF{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}E_(e,n){return this.connection.qo("Write",e,n)}A_(e){return re(!!e.streamToken),this.lastStreamToken=e.streamToken,re(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){re(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const n=ZX(e.writeResults,e.commitTime),r=Ct(e.commitTime);return this.listener.y_(r,n)}w_(){const e={};e.database=J0(this.serializer),this.c_(e)}g_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Vh(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qZ extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,Y0(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(F.UNKNOWN,s.toString())})}ko(e,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,Y0(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(F.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class WZ{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(Rt(n),this.C_=!1):q("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HZ{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.B_=[],this.L_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{jo(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Y(l);c.k_.add(4),await pu(c),c.K_.set("Unknown"),c.k_.delete(4),await Af(c)}(this))})}),this.K_=new WZ(r,i)}}async function Af(t){if(jo(t))for(const e of t.q_)await e(!0)}async function pu(t){for(const e of t.q_)await e(!1)}function Nv(t,e){const n=Y(t);n.L_.has(e.targetId)||(n.L_.set(e.targetId,e),TI(n)?bI(n):gu(n).s_()&&EI(n,e))}function Bc(t,e){const n=Y(t),r=gu(n);n.L_.delete(e),r.s_()&&gF(n,e),n.L_.size===0&&(r.s_()?r.a_():jo(n)&&n.K_.set("Unknown"))}function EI(t,e){if(t.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(le.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}gu(t).V_(e)}function gF(t,e){t.U_.xe(e),gu(t).m_(e)}function bI(t){t.U_=new WX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>t.L_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),gu(t).start(),t.K_.F_()}function TI(t){return jo(t)&&!gu(t).i_()&&t.L_.size>0}function jo(t){return Y(t).k_.size===0}function vF(t){t.U_=void 0}async function GZ(t){t.K_.set("Online")}async function KZ(t){t.L_.forEach((e,n)=>{EI(t,e)})}async function QZ(t,e){vF(t),TI(t)?(t.K_.O_(e),bI(t)):t.K_.set("Unknown")}async function YZ(t,e,n){if(t.K_.set("Online"),e instanceof DV&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.L_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.L_.delete(a),i.U_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ig(t,r)}else if(e instanceof pm?t.U_.$e(e):e instanceof NV?t.U_.Je(e):t.U_.Ge(e),!n.isEqual(le.min()))try{const r=await lF(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.L_.get(c);u&&s.L_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.L_.get(l);if(!u)return;s.L_.set(l,u.withResumeToken(Tt.EMPTY_BYTE_STRING,u.snapshotVersion)),gF(s,l);const h=new Fi(u.target,l,c,u.sequenceNumber);EI(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await Ig(t,r)}}async function Ig(t,e,n){if(!No(e))throw e;t.k_.add(1),await pu(t),t.K_.set("Offline"),n||(n=()=>lF(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.k_.delete(1),await Af(t)})}function yF(t,e){return e().catch(n=>Ig(t,n,e))}async function mu(t){const e=Y(t),n=Eo(e);let r=e.B_.length>0?e.B_[e.B_.length-1].batchId:-1;for(;JZ(e);)try{const i=await jZ(e.localStore,r);if(i===null){e.B_.length===0&&n.a_();break}r=i.batchId,XZ(e,i)}catch(i){await Ig(e,i)}_F(e)&&wF(e)}function JZ(t){return jo(t)&&t.B_.length<10}function XZ(t,e){t.B_.push(e);const n=Eo(t);n.s_()&&n.f_&&n.g_(e.mutations)}function _F(t){return jo(t)&&!Eo(t).i_()&&t.B_.length>0}function wF(t){Eo(t).start()}async function ZZ(t){Eo(t).w_()}async function eee(t){const e=Eo(t);for(const n of t.B_)e.g_(n.mutations)}async function tee(t,e,n){const r=t.B_.shift(),i=aI.from(r,e,n);await yF(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await mu(t)}async function nee(t,e){e&&Eo(t).f_&&await async function(r,i){if(function(o){return CV(o)&&o!==F.ABORTED}(i.code)){const s=r.B_.shift();Eo(r).__(),await yF(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await mu(r)}}(t,e),_F(t)&&wF(t)}async function yk(t,e){const n=Y(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=jo(n);n.k_.add(3),await pu(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.k_.delete(3),await Af(n)}async function rE(t,e){const n=Y(t);e?(n.k_.delete(2),await Af(n)):e||(n.k_.add(2),await pu(n),n.K_.set("Unknown"))}function gu(t){return t.W_||(t.W_=function(n,r,i){const s=Y(n);return s.b_(),new BZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:GZ.bind(null,t),mo:KZ.bind(null,t),po:QZ.bind(null,t),R_:YZ.bind(null,t)}),t.q_.push(async e=>{e?(t.W_.__(),TI(t)?bI(t):t.K_.set("Unknown")):(await t.W_.stop(),vF(t))})),t.W_}function Eo(t){return t.G_||(t.G_=function(n,r,i){const s=Y(n);return s.b_(),new zZ(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Ro:()=>Promise.resolve(),mo:ZZ.bind(null,t),po:nee.bind(null,t),p_:eee.bind(null,t),y_:tee.bind(null,t)}),t.q_.push(async e=>{e?(t.G_.__(),await mu(t)):(await t.G_.stop(),t.B_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.B_.length} pending writes`),t.B_=[]))})),t.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new II(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vu(t,e){if(Rt("AsyncQueue",`${e}: ${t}`),No(t))return new z(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc{static emptySet(e){return new fc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=yd(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof fc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new fc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(){this.z_=new Ge(Q.comparator)}track(e){const n=e.doc.key,r=this.z_.get(n);r?e.type!==0&&r.type===3?this.z_=this.z_.insert(n,e):e.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.z_=this.z_.remove(n):e.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:e.doc}):Z():this.z_=this.z_.insert(n,e)}j_(){const e=[];return this.z_.inorderTraversal((n,r)=>{e.push(r)}),e}}class zc{constructor(e,n,r,i,s,o,a,l,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new zc(e,n,fc.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ree{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class iee{constructor(){this.queries=wk(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=Y(n),s=i.queries;i.queries=wk(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(r)})})(this,new z(F.ABORTED,"Firestore shutting down"))}}function wk(){return new gs(t=>gV(t),Ef)}async function SI(t,e){const n=Y(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Y_()&&e.Z_()&&(r=2):(s=new ree,r=e.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=vu(o,`Initialization of query '${Cl(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.J_.push(e),e.ea(n.onlineState),s.H_&&e.ta(s.H_)&&AI(n)}async function xI(t,e){const n=Y(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function see(t,e){const n=Y(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&AI(n)}function oee(t,e,n){const r=Y(t),i=r.queries.get(e);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(e)}function AI(t){t.X_.forEach(e=>{e.next()})}var iE,Ek;(Ek=iE||(iE={})).na="default",Ek.Cache="cache";class RI{constructor(e,n,r){this.query=e,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new zc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.ia?this.oa(e)&&(this.ra.next(e),n=!0):this._a(e,this.onlineState)&&(this.aa(e),n=!0),this.sa=e,n}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),n=!0),n}_a(e,n){if(!e.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(e){e=zc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==iE.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(e,n){this.ca=e,this.byteLength=n}la(){return"metadata"in this.ca}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bk{constructor(e){this.serializer=e}As(e){return _i(this.serializer,e)}Rs(e){return e.metadata.exists?$V(this.serializer,e.document,!1):Je.newNoDocument(this.As(e.metadata.name),this.Vs(e.metadata.readTime))}Vs(e){return Ct(e)}}class lee{constructor(e,n,r){this.ha=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=EF(e)}Pa(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ca.namedQuery)this.queries.push(e.ca.namedQuery);else if(e.ca.documentMetadata){this.documents.push({metadata:e.ca.documentMetadata}),e.ca.documentMetadata.exists||++n;const r=Ce.fromString(e.ca.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ca.document&&(this.documents[this.documents.length-1].document=e.ca.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}Ta(e){const n=new Map,r=new bk(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.As(i.metadata.name);for(const o of i.metadata.queries){const a=(n.get(o)||we()).add(s);n.set(o,a)}}return n}async complete(){const e=await LZ(this.localStore,new bk(this.serializer),this.documents,this.ha.id),n=this.Ta(this.documents);for(const r of this.queries)await MZ(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ia:this.collectionGroups,da:e}}}function EF(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.key=e}}class TF{constructor(e){this.key=e}}class IF{constructor(e,n){this.query=e,this.Ea=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=we(),this.mutatedKeys=we(),this.Va=yV(e),this.ma=new fc(this.Va)}get fa(){return this.Ea}ga(e,n){const r=n?n.pa:new _k,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,h)=>{const p=i.get(u),m=bf(this.query,h)?h:null,v=!!p&&this.mutatedKeys.has(p.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let y=!1;p&&m?p.data.isEqual(m.data)?v!==w&&(r.track({type:3,doc:m}),y=!0):this.ya(p,m)||(r.track({type:2,doc:m}),y=!0,(l&&this.Va(m,l)>0||c&&this.Va(m,c)<0)&&(a=!0)):!p&&m?(r.track({type:0,doc:m}),y=!0):p&&!m&&(r.track({type:1,doc:p}),y=!0,(l||c)&&(a=!0)),y&&(m?(o=o.add(m),s=w?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,h)=>function(m,v){const w=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return w(m)-w(v)}(u.type,h.type)||this.Va(u.doc,h.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],l=this.Ra.size===0&&this.current&&!i?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new zc(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new _k,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.Ea.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(n=>this.Ea=this.Ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ea=this.Ea.delete(n)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=we(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return e.forEach(r=>{this.Ra.has(r)||n.push(new TF(r))}),this.Ra.forEach(r=>{e.has(r)||n.push(new bF(r))}),n}va(e){this.Ea=e.Es,this.Ra=we();const n=this.ga(e.documents);return this.applyChanges(n,!0)}Ca(){return zc.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class cee{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uee{constructor(e){this.key=e,this.Fa=!1}}class dee{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new gs(a=>gV(a),Ef),this.Oa=new Map,this.Na=new Set,this.Ba=new Ge(Q.comparator),this.La=new Map,this.ka=new pI,this.qa={},this.Qa=new Map,this.Ka=za.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function hee(t,e,n=!0){const r=Dv(t);let i;const s=r.xa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await SF(r,e,n,!0),i}async function fee(t,e){const n=Dv(t);await SF(n,e,!0,!1)}async function SF(t,e,n,r){const i=await $c(t.localStore,Rn(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await kI(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Nv(t.remoteStore,i),a}async function kI(t,e,n,r,i){t.Ua=(h,p,m)=>async function(w,y,T,E){let b=y.view.ga(T);b.ss&&(b=await Eg(w.localStore,y.query,!1).then(({documents:x})=>y.view.ga(x,b)));const k=E&&E.targetChanges.get(y.targetId),D=E&&E.targetMismatches.get(y.targetId)!=null,N=y.view.applyChanges(b,w.isPrimaryClient,k,D);return sE(w,y.targetId,N.ba),N.snapshot}(t,h,p,m);const s=await Eg(t.localStore,e,!0),o=new IF(e,s.Es),a=o.ga(s.documents),l=Sf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,l);sE(t,n,c.ba);const u=new cee(e,n,o);return t.xa.set(e,u),t.Oa.has(n)?t.Oa.get(n).push(e):t.Oa.set(n,[e]),c.snapshot}async function pee(t,e,n){const r=Y(t),i=r.xa.get(e),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!Ef(o,e))),void r.xa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Uc(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Bc(r.remoteStore,i.targetId),qc(r,i.targetId)}).catch(Oo)):(qc(r,i.targetId),await Uc(r.localStore,i.targetId,!0))}async function mee(t,e){const n=Y(t),r=n.xa.get(e),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Bc(n.remoteStore,r.targetId))}async function gee(t,e,n){const r=NI(t);try{const i=await function(o,a){const l=Y(o),c=lt.now(),u=a.reduce((m,v)=>m.add(v.key),we());let h,p;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Fn(),w=we();return l.hs.getEntries(m,u).next(y=>{v=y,v.forEach((T,E)=>{E.isValidDocument()||(w=w.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(y=>{h=y;const T=[];for(const E of a){const b=BX(E,h.get(E.key).overlayedDocument);b!=null&&T.push(new vs(E.key,b,aV(b.value.mapValue),at.exists(!0)))}return l.mutationQueue.addMutationBatch(m,c,T,a)}).next(y=>{p=y;const T=y.applyToLocalDocumentSet(h,w);return l.documentOverlayCache.saveOverlays(m,y.batchId,T)})}).then(()=>({batchId:p.batchId,changes:wV(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new Ge(ve)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(r,i.batchId,n),await ys(r,i.changes),await mu(r.remoteStore)}catch(i){const s=vu(i,"Failed to persist write");n.reject(s)}}async function xF(t,e){const n=Y(t);try{const r=await DZ(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.La.get(s);o&&(re(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?re(o.Fa):i.removedDocuments.size>0&&(re(o.Fa),o.Fa=!1))}),await ys(n,r,e)}catch(r){await Oo(r)}}function Tk(t,e,n){const r=Y(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Y(o);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const p of h.J_)p.ea(a)&&(c=!0)}),c&&AI(l)}(r.eventManager,e),i.length&&r.Ma.R_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vee(t,e,n){const r=Y(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.La.get(e),s=i&&i.key;if(s){let o=new Ge(Q.comparator);o=o.insert(s,Je.newNoDocument(s,le.min()));const a=we().add(s),l=new If(le.min(),new Map,new Ge(ve),o,a);await xF(r,l),r.Ba=r.Ba.remove(s),r.La.delete(e),OI(r)}else await Uc(r.localStore,e,!1).then(()=>qc(r,e,n)).catch(Oo)}async function yee(t,e){const n=Y(t),r=e.batch.batchId;try{const i=await NZ(n.localStore,e);PI(n,r,null),CI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ys(n,i)}catch(i){await Oo(i)}}async function _ee(t,e,n){const r=Y(t);try{const i=await function(o,a){const l=Y(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(re(h!==null),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);PI(r,e,n),CI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await ys(r,i)}catch(i){await Oo(i)}}async function wee(t,e){const n=Y(t);jo(n.remoteStore)||q("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(o){const a=Y(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Qa.get(r)||[];i.push(e),n.Qa.set(r,i)}catch(r){const i=vu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function CI(t,e){(t.Qa.get(e)||[]).forEach(n=>{n.resolve()}),t.Qa.delete(e)}function PI(t,e,n){const r=Y(t);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.qa[r.currentUser.toKey()]=i}}function qc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Oa.get(e))t.xa.delete(r),n&&t.Ma.Wa(r,n);t.Oa.delete(e),t.isPrimaryClient&&t.ka.yr(e).forEach(r=>{t.ka.containsKey(r)||AF(t,r)})}function AF(t,e){t.Na.delete(e.path.canonicalString());const n=t.Ba.get(e);n!==null&&(Bc(t.remoteStore,n),t.Ba=t.Ba.remove(e),t.La.delete(n),OI(t))}function sE(t,e,n){for(const r of n)r instanceof bF?(t.ka.addReference(r.key,e),Eee(t,r)):r instanceof TF?(q("SyncEngine","Document no longer in limbo: "+r.key),t.ka.removeReference(r.key,e),t.ka.containsKey(r.key)||AF(t,r.key)):Z()}function Eee(t,e){const n=e.key,r=n.path.canonicalString();t.Ba.get(n)||t.Na.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Na.add(r),OI(t))}function OI(t){for(;t.Na.size>0&&t.Ba.size<t.maxConcurrentLimboResolutions;){const e=t.Na.values().next().value;t.Na.delete(e);const n=new Q(Ce.fromString(e)),r=t.Ka.next();t.La.set(r,new uee(n)),t.Ba=t.Ba.insert(n,r),Nv(t.remoteStore,new Fi(Rn(du(n.path)),r,"TargetPurposeLimboResolution",Mn.oe))}}async function ys(t,e,n){const r=Y(t),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,l)=>{o.push(r.Ua(l,e,n).then(c=>{var u;if((c||n)&&r.isPrimaryClient){const h=c?!c.fromCache:(u=n==null?void 0:n.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,h?"current":"not-current")}if(c){i.push(c);const h=yI.zi(l.targetId,c);s.push(h)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(l,c){const u=Y(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>M.forEach(c,p=>M.forEach(p.Wi,m=>u.persistence.referenceDelegate.addReference(h,p.targetId,m)).next(()=>M.forEach(p.Gi,m=>u.persistence.referenceDelegate.removeReference(h,p.targetId,m)))))}catch(h){if(!No(h))throw h;q("LocalStore","Failed to update sequence numbers: "+h)}for(const h of c){const p=h.targetId;if(!h.fromCache){const m=u.us.get(p),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);u.us=u.us.insert(p,w)}}}(r.localStore,s))}async function bee(t,e){const n=Y(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await aF(n.localStore,e);n.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new z(F.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await ys(n,r.Ts)}}function Tee(t,e){const n=Y(t),r=n.La.get(e);if(r&&r.Fa)return we().add(r.key);{let i=we();const s=n.Oa.get(e);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}async function Iee(t,e){const n=Y(t),r=await Eg(n.localStore,e.query,!0),i=e.view.va(r);return n.isPrimaryClient&&sE(n,e.targetId,i.ba),i}async function See(t,e){const n=Y(t);return dF(n.localStore,e).then(r=>ys(n,r))}async function xee(t,e,n,r){const i=Y(t),s=await function(a,l){const c=Y(a),u=Y(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.On(h,l).next(p=>p?c.localDocuments.getDocuments(h,p):M.resolve(null)))}(i.localStore,e);s!==null?(n==="pending"?await mu(i.remoteStore):n==="acknowledged"||n==="rejected"?(PI(i,e,r||null),CI(i,e),function(a,l){Y(Y(a).mutationQueue).Bn(l)}(i.localStore,e)):Z(),await ys(i,s)):q("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Aee(t,e){const n=Y(t);if(Dv(n),NI(n),e===!0&&n.$a!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await Ik(n,r.toArray());n.$a=!0,await rE(n.remoteStore,!0);for(const s of i)Nv(n.remoteStore,s)}else if(e===!1&&n.$a!==!1){const r=[];let i=Promise.resolve();n.Oa.forEach((s,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(qc(n,o),Uc(n.localStore,o,!0))),Bc(n.remoteStore,o)}),await i,await Ik(n,r),function(o){const a=Y(o);a.La.forEach((l,c)=>{Bc(a.remoteStore,c)}),a.ka.wr(),a.La=new Map,a.Ba=new Ge(Q.comparator)}(n),n.$a=!1,await rE(n.remoteStore,!1)}}async function Ik(t,e,n){const r=Y(t),i=[],s=[];for(const o of e){let a;const l=r.Oa.get(o);if(l&&l.length!==0){a=await $c(r.localStore,Rn(l[0]));for(const c of l){const u=r.xa.get(c),h=await Iee(r,u);h.snapshot&&s.push(h.snapshot)}}else{const c=await uF(r.localStore,o);a=await $c(r.localStore,c),await kI(r,RF(c),o,!1,a.resumeToken)}i.push(a)}return r.Ma.R_(s),i}function RF(t){return mV(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ree(t){return function(n){return Y(Y(n).persistence).$i()}(Y(t).localStore)}async function kee(t,e,n,r){const i=Y(t);if(i.$a)return void q("SyncEngine","Ignoring unexpected query state notification.");const s=i.Oa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const o=await dF(i.localStore,vV(s[0])),a=If.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Tt.EMPTY_BYTE_STRING);await ys(i,o,a);break}case"rejected":await Uc(i.localStore,e,!0),qc(i,e,r);break;default:Z()}}async function Cee(t,e,n){const r=Dv(t);if(r.$a){for(const i of e){if(r.Oa.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){q("SyncEngine","Adding an already active target "+i);continue}const s=await uF(r.localStore,i),o=await $c(r.localStore,s);await kI(r,RF(s),o.targetId,!1,o.resumeToken),Nv(r.remoteStore,o)}for(const i of n)r.Oa.has(i)&&await Uc(r.localStore,i,!1).then(()=>{Bc(r.remoteStore,i),qc(r,i)}).catch(Oo)}}function Dv(t){const e=Y(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=xF.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tee.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vee.bind(null,e),e.Ma.R_=see.bind(null,e.eventManager),e.Ma.Wa=oee.bind(null,e.eventManager),e}function NI(t){const e=Y(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yee.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_ee.bind(null,e),e}function Pee(t,e,n){const r=Y(t);(async function(s,o,a){try{const l=await o.getMetadata();if(await function(m,v){const w=Y(m),y=Ct(v.createTime);return w.persistence.runTransaction("hasNewerBundle","readonly",T=>w.jr.getBundleMetadata(T,v.id)).then(T=>!!T&&T.createTime.compareTo(y)>=0)}(s.localStore,l))return await o.close(),a._completeWith(function(m){return{taskState:"Success",documentsLoaded:m.totalDocuments,bytesLoaded:m.totalBytes,totalDocuments:m.totalDocuments,totalBytes:m.totalBytes}}(l)),Promise.resolve(new Set);a._updateProgress(EF(l));const c=new lee(l,s.localStore,o.serializer);let u=await o.Ga();for(;u;){const p=await c.Pa(u);p&&a._updateProgress(p),u=await o.Ga()}const h=await c.complete();return await ys(s,h.da,void 0),await function(m,v){const w=Y(m);return w.persistence.runTransaction("Save bundle","readwrite",y=>w.jr.saveBundleMetadata(y,v))}(s.localStore,l),a._completeWith(h.progress),Promise.resolve(h.Ia)}catch(l){return Ti("SyncEngine",`Loading bundle failed with ${l}`),a._failWith(l),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xf(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,n){return null}Ya(e,n){return null}Ha(e){return oF(this.persistence,new sF,e.initialUser,this.serializer)}ja(e){return new mI(Ov.ei,this.serializer)}za(e){return new fF}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class Oee extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,n){re(this.persistence.referenceDelegate instanceof wg);const r=this.persistence.referenceDelegate.garbageCollector;return new eF(r,e.asyncQueue,n)}ja(e){const n=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new mI(r=>wg.ei(r,n),this.serializer)}}class kF extends Fh{constructor(e,n,r){super(),this.Za=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await NI(this.Za.syncEngine),await mu(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return oF(this.persistence,new sF,e.initialUser,this.serializer)}Ja(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new eF(r,e.asyncQueue,n)}Ya(e,n){const r=new XJ(n,this.persistence);return new JJ(e.asyncQueue,r)}ja(e){const n=vI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new gI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,pF(),mm(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new fF}}class Nee extends kF{constructor(e,n){super(e,n,!1),this.Za=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Za.syncEngine;this.sharedClientState instanceof k_&&(this.sharedClientState.syncEngine={io:xee.bind(null,n),so:kee.bind(null,n),oo:Cee.bind(null,n),$i:Ree.bind(null,n),ro:See.bind(null,n)},await this.sharedClientState.start()),await this.persistence.Si(async r=>{await Aee(this.Za.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}za(e){const n=pF();if(!k_.p(n))throw new z(F.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=vI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new k_(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class $h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tk(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bee.bind(null,this.syncEngine),await rE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iee}()}createDatastore(e){const n=xf(e.databaseInfo.databaseId),r=function(s){return new UZ(s)}(e.databaseInfo);return function(s,o,a,l){return new qZ(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new HZ(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Tk(this.syncEngine,n,0),function(){return vk.p()?new vk:new VZ}())}createSyncEngine(e,n){return function(i,s,o,a,l,c,u){const h=new dee(i,s,o,a,l,c);return u&&(h.$a=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=Y(i);q("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await pu(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$h.provider={build:()=>new $h};function Sk(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):Rt("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dee{constructor(e,n){this.tu=e,this.serializer=n,this.metadata=new rn,this.buffer=new Uint8Array,this.nu=function(){return new TextDecoder("utf-8")}(),this.ru().then(r=>{r&&r.la()?this.metadata.resolve(r.ca.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ca)}`))},r=>this.metadata.reject(r))}close(){return this.tu.cancel()}async getMetadata(){return this.metadata.promise}async Ga(){return await this.getMetadata(),this.ru()}async ru(){const e=await this.iu();if(e===null)return null;const n=this.nu.decode(e),r=Number(n);isNaN(r)&&this.su(`length string (${n}) is not valid number`);const i=await this.ou(r);return new aee(JSON.parse(i),e.length+r)}_u(){return this.buffer.findIndex(e=>e===123)}async iu(){for(;this._u()<0&&!await this.au(););if(this.buffer.length===0)return null;const e=this._u();e<0&&this.su("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async ou(e){for(;this.buffer.length<e;)await this.au()&&this.su("Reached the end of bundle when more is expected.");const n=this.nu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}su(e){throw this.tu.cancel(),new Error(`Invalid bundle format: ${e}`)}async au(){const e=await this.tu.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jee{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new z(F.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,s){const o=Y(i),a={documents:s.map(h=>Mh(o.serializer,h))},l=await o.ko("BatchGetDocuments",o.serializer.databaseId,Ce.emptyPath(),a,s.length),c=new Map;l.forEach(h=>{const p=JX(o.serializer,h);c.set(p.key.toString(),p)});const u=[];return s.forEach(h=>{const p=c.get(h.toString());re(!!p),u.push(p)}),u}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new fu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=Q.fromPath(r);this.mutations.push(new sI(i,this.precondition(i)))}),await async function(r,i){const s=Y(r),o={writes:i.map(a=>Vh(s.serializer,a))};await s.Oo("Commit",s.serializer.databaseId,Ce.emptyPath(),o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw Z();n=le.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new z(F.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(le.min())?at.exists(!1):at.updateTime(n):at.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(le.min()))throw new z(F.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return at.updateTime(n)}return at.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lee{constructor(e,n,r,i,s){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=s,this.uu=r.maxAttempts,this.r_=new wI(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo(async()=>{const e=new jee(this.datastore),n=this.hu(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Pu(i)}))}).catch(r=>{this.Pu(r)})})}hu(e){try{const n=this.updateFunction(e);return!_f(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget(()=>(this.lu(),Promise.resolve()))):this.deferred.reject(e)}Tu(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!CV(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Wt.UNAUTHENTICATED,this.clientId=WM.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=vu(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function P_(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await aF(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function xk(t,e){t.asyncQueue.verifyOperationInProgress();const n=await DI(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>yk(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>yk(e.remoteStore,i)),t._onlineComponents=e}async function DI(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await P_(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===F.FAILED_PRECONDITION||i.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Ti("Error using user provided cache. Falling back to memory cache: "+n),await P_(t,new Fh)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await P_(t,new Oee(void 0));return t._offlineComponents}async function Lv(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await xk(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await xk(t,new $h))),t._onlineComponents}function CF(t){return DI(t).then(e=>e.persistence)}function jI(t){return DI(t).then(e=>e.localStore)}function PF(t){return Lv(t).then(e=>e.remoteStore)}function LI(t){return Lv(t).then(e=>e.syncEngine)}function Vee(t){return Lv(t).then(e=>e.datastore)}async function Wc(t){const e=await Lv(t),n=e.eventManager;return n.onListen=hee.bind(null,e.syncEngine),n.onUnlisten=pee.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fee.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=mee.bind(null,e.syncEngine),n}function Fee(t){return t.asyncQueue.enqueue(async()=>{const e=await CF(t),n=await PF(t);return e.setNetworkEnabled(!0),function(i){const s=Y(i);return s.k_.delete(0),Af(s)}(n)})}function $ee(t){return t.asyncQueue.enqueue(async()=>{const e=await CF(t),n=await PF(t);return e.setNetworkEnabled(!1),async function(i){const s=Y(i);s.k_.add(0),await pu(s),s.K_.set("Offline")}(n)})}function Uee(t,e){const n=new rn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await function(c,u){const h=Y(c);return h.persistence.runTransaction("read document","readonly",p=>h.localDocuments.getDocument(p,u))}(i,s);a.isFoundDocument()?o.resolve(a):a.isNoDocument()?o.resolve(null):o.reject(new z(F.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const l=vu(a,`Failed to get document '${s} from cache`);o.reject(l)}}(await jI(t),e,n)),n.promise}function OF(t,e,n={}){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new jv({next:p=>{u.eu(),o.enqueueAndForget(()=>xI(s,h));const m=p.docs.has(a);!m&&p.fromCache?c.reject(new z(F.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&l&&l.source==="server"?c.reject(new z(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new RI(du(a.path),u,{includeMetadataChanges:!0,ua:!0});return SI(s,h)}(await Wc(t),t.asyncQueue,e,n,r)),r.promise}function Bee(t,e){const n=new rn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,s,o){try{const a=await Eg(i,s,!0),l=new IF(s,a.Es),c=l.ga(a.documents),u=l.applyChanges(c,!1);o.resolve(u.snapshot)}catch(a){const l=vu(a,`Failed to execute query '${s} against cache`);o.reject(l)}}(await jI(t),e,n)),n.promise}function NF(t,e,n={}){const r=new rn;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new jv({next:p=>{u.eu(),o.enqueueAndForget(()=>xI(s,h)),p.fromCache&&l.source==="server"?c.reject(new z(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),h=new RI(a,u,{includeMetadataChanges:!0,ua:!0});return SI(s,h)}(await Wc(t),t.asyncQueue,e,n,r)),r.promise}function zee(t,e){const n=new jv(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,s){Y(i).X_.add(s),s.next()}(await Wc(t),n)),()=>{n.eu(),t.asyncQueue.enqueueAndForget(async()=>function(i,s){Y(i).X_.delete(s)}(await Wc(t),n))}}function qee(t,e,n,r){const i=function(o,a){let l;return l=typeof o=="string"?OV().encode(o):o,function(u,h){return new Dee(u,h)}(function(u,h){if(u instanceof Uint8Array)return Sk(u,h);if(u instanceof ArrayBuffer)return Sk(new Uint8Array(u),h);if(u instanceof ReadableStream)return u.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),a)}(n,xf(e));t.asyncQueue.enqueueAndForget(async()=>{Pee(await LI(t),i,r)})}function Wee(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const s=Y(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.jr.getNamedQuery(o,i))}(await jI(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t,e,n){if(!n)throw new z(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function jF(t,e,n,r){if(e===!0&&r===!0)throw new z(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Rk(t){if(!Q.isDocumentKey(t))throw new z(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function kk(t){if(Q.isDocumentKey(t))throw new z(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Me(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mv(t);throw new z(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LF(t,e){if(e<=0)throw new z(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}jF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DF((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(F.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ck({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ck(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $J;switch(r.type){case"firstParty":return new qJ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Ak.get(n);r&&(q("ComponentProvider","Removing Datastore"),Ak.delete(n),r.terminate())}(this),Promise.resolve()}}function Hee(t,e,n,r={}){var i;const s=(t=Me(t,Rf))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if(typeof r.mockUserToken=="string")a=r.mockUserToken,l=Wt.MOCK_USER;else{a=Kj(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new z(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Wt(c)}t._authCredentials=new UJ(new qM(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kn=class MF{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new MF(this.firestore,e,this._query)}},ft=class VF{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new so(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new VF(this.firestore,e,this._key)}},so=class FF extends kn{constructor(e,n,r){super(e,n,du(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new Q(e))}withConverter(e){return new FF(this.firestore,e,this._path)}};function $F(t,e,...n){if(t=ne(t),MI("collection","path",e),t instanceof Rf){const r=Ce.fromString(e,...n);return kk(r),new so(t,null,r)}{if(!(t instanceof ft||t instanceof so))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return kk(r),new so(t.firestore,null,r)}}function Gee(t,e){if(t=Me(t,Rf),MI("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(F.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new kn(t,null,function(r){return new ms(Ce.emptyPath(),r)}(e))}function Sg(t,e,...n){if(t=ne(t),arguments.length===1&&(e=WM.newId()),MI("doc","path",e),t instanceof Rf){const r=Ce.fromString(e,...n);return Rk(r),new ft(t,null,new Q(r))}{if(!(t instanceof ft||t instanceof so))throw new z(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ce.fromString(e,...n));return Rk(r),new ft(t.firestore,t instanceof so?t.converter:null,new Q(r))}}function UF(t,e){return t=ne(t),e=ne(e),(t instanceof ft||t instanceof so)&&(e instanceof ft||e instanceof so)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function BF(t,e){return t=ne(t),e=ne(e),t instanceof kn&&e instanceof kn&&t.firestore===e.firestore&&Ef(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e=Promise.resolve()){this.Iu=[],this.du=!1,this.Eu=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new wI(this,"async_queue_retry"),this.fu=()=>{const r=mm();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=e;const n=mm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.du}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.du){this.du=!0,this.Vu=e||!1;const n=mm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.du)return new Promise(()=>{});const n=new rn;return this.yu(()=>this.du&&this.Vu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!No(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const n=this.gu.then(()=>(this.Ru=!0,e().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Rt("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(e,n,r){this.pu(),this.mu.indexOf(e)>-1&&(n=0);const i=II.createAndSchedule(this,e,n,r,s=>this.Su(s));return this.Eu.push(i),i}pu(){this.Au&&Z()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const n of this.Eu)if(n.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.Eu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Eu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const n=this.Eu.indexOf(e);this.Eu.splice(n,1)}}function oE(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class Kee{constructor(){this._progressObserver={},this._taskCompletionResolver=new rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qee=-1;let Pt=class extends Rf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pk,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pk(e),this._firestoreClient=void 0,await e}}};function wn(t){if(t._terminated)throw new z(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||zF(t),t._firestoreClient}function zF(t){var e,n,r;const i=t._freezeSettings(),s=function(a,l,c,u){return new wX(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,DF(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new Mee(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}function Yee(t,e){Ti("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings();return qF(t,$h.provider,{build:r=>new kF(r,n.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Jee(t){Ti("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=t._freezeSettings();qF(t,$h.provider,{build:n=>new Nee(n,e.cacheSizeBytes)})}function qF(t,e,n){if((t=Me(t,Pt))._firestoreClient||t._terminated)throw new z(F.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(t._componentsProvider||t._getSettings().localCache)throw new z(F.FAILED_PRECONDITION,"SDK cache is already specified.");t._componentsProvider={_online:e,_offline:n},zF(t)}function Xee(t){if(t._initialized&&!t._terminated)throw new z(F.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!yi.p())return Promise.resolve();const i=r+"main";await yi.delete(i)}(vI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function Zee(t){return function(n){const r=new rn;return n.asyncQueue.enqueueAndForget(async()=>wee(await LI(n),r)),r.promise}(wn(t=Me(t,Pt)))}function ete(t){return Fee(wn(t=Me(t,Pt)))}function tte(t){return $ee(wn(t=Me(t,Pt)))}function nte(t,e){const n=wn(t=Me(t,Pt)),r=new Kee;return qee(n,t._databaseId,e,r),r}function rte(t,e){return Wee(wn(t=Me(t,Pt)),e).then(n=>n?new kn(t,null,n.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Si{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Si(Tt.fromBase64String(e))}catch(n){throw new z(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Si(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tl=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vv{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ite=/^__.*__$/;class ste{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class WF{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function HF(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Fv{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Fv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Bu(e),i}Lu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return xg(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Bu(this.path.get(e))}Bu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(HF(this.Mu)&&ite.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class ote{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||xf(e)}$u(e,n,r,i=!1){return new Fv({Mu:e,methodName:n,Ku:r,path:ot.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nl(t){const e=t._freezeSettings(),n=xf(t._databaseId);return new ote(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $v(t,e,n,r,i,s={}){const o=t.$u(s.merge||s.mergeFields?2:0,e,n,i);WI("Data must be an object, but it was:",o,r);const a=QF(r,o);let l,c;if(s.merge)l=new Vn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const h of s.mergeFields){const p=aE(e,h,n);if(!o.contains(p))throw new z(F.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);JF(u,p)||u.push(p)}l=new Vn(u),c=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,c=o.fieldTransforms;return new ste(new en(a),l,c)}class kf extends tl{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kf}}function GF(t,e,n){return new Fv({Mu:3,Ku:e.settings.Ku,methodName:t._methodName,Nu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class FI extends tl{_toFieldTransform(e){return new Tf(e.path,new Mc)}isEqual(e){return e instanceof FI}}class $I extends tl{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=GF(this,e,!0),r=this.Uu.map(s=>rl(s,n)),i=new Fa(r);return new Tf(e.path,i)}isEqual(e){return e instanceof $I&&Ih(this.Uu,e.Uu)}}class UI extends tl{constructor(e,n){super(e),this.Uu=n}_toFieldTransform(e){const n=GF(this,e,!0),r=this.Uu.map(s=>rl(s,n)),i=new $a(r);return new Tf(e.path,i)}isEqual(e){return e instanceof UI&&Ih(this.Uu,e.Uu)}}class BI extends tl{constructor(e,n){super(e),this.Wu=n}_toFieldTransform(e){const n=new Vc(e.serializer,TV(e.serializer,this.Wu));return new Tf(e.path,n)}isEqual(e){return e instanceof BI&&this.Wu===e.Wu}}function zI(t,e,n,r){const i=t.$u(1,e,n);WI("Data must be an object, but it was:",i,r);const s=[],o=en.empty();Do(r,(l,c)=>{const u=HI(e,l,n);c=ne(c);const h=i.Lu(u);if(c instanceof kf)s.push(u);else{const p=rl(c,h);p!=null&&(s.push(u),o.set(u,p))}});const a=new Vn(s);return new WF(o,a,i.fieldTransforms)}function qI(t,e,n,r,i,s){const o=t.$u(1,e,n),a=[aE(e,r,n)],l=[i];if(s.length%2!=0)throw new z(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<s.length;p+=2)a.push(aE(e,s[p])),l.push(s[p+1]);const c=[],u=en.empty();for(let p=a.length-1;p>=0;--p)if(!JF(c,a[p])){const m=a[p];let v=l[p];v=ne(v);const w=o.Lu(m);if(v instanceof kf)c.push(m);else{const y=rl(v,w);y!=null&&(c.push(m),u.set(m,y))}}const h=new Vn(c);return new WF(u,h,o.fieldTransforms)}function KF(t,e,n,r=!1){return rl(n,t.$u(r?4:3,e))}function rl(t,e){if(YF(t=ne(t)))return WI("Unsupported field value:",e,t),QF(t,e);if(t instanceof tl)return function(r,i){if(!HF(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=rl(a,i.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return TV(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=lt.fromDate(r);return{timestampValue:Fc(i.serializer,s)}}if(r instanceof lt){const s=new lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fc(i.serializer,s)}}if(r instanceof Vv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Si)return{bytesValue:jV(i.serializer,r._byteString)};if(r instanceof ft){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uI(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof VI)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return iI(a.serializer,l)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${Mv(r)}`)}(t,e)}function QF(t,e){const n={};return rV(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Do(t,(r,i)=>{const s=rl(i,e.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YF(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof lt||t instanceof Vv||t instanceof Si||t instanceof ft||t instanceof tl||t instanceof VI)}function WI(t,e,n){if(!YF(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Mv(n);throw r==="an object"?e.qu(t+" a custom object"):e.qu(t+" "+r)}}function aE(t,e,n){if((e=ne(e))instanceof bo)return e._internalPath;if(typeof e=="string")return HI(t,e);throw xg("Field path arguments must be of type string or ",t,!1,void 0,n)}const ate=new RegExp("[~\\*/\\[\\]]");function HI(t,e,n){if(e.search(ate)>=0)throw xg(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bo(...e.split("."))._internalPath}catch{throw xg(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function xg(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new z(F.INVALID_ARGUMENT,a+t+l)}function JF(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lte(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Uv("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lte extends Uh{data(){return super.data()}}function Uv(t,e){return typeof e=="string"?HI(t,e):e instanceof bo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XF(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class GI{}class Cf extends GI{}function ks(t,e,...n){let r=[];e instanceof GI&&r.push(e),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof KI).length,a=s.filter(l=>l instanceof Bv).length;if(o>1||o>0&&a>0)throw new z(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Bv extends Cf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bv(e,n,r)}_apply(e){const n=this._parse(e);return e$(e._query,n),new kn(e.firestore,e.converter,K0(e._query,n))}_parse(e){const n=nl(e.firestore);return function(s,o,a,l,c,u,h){let p;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new z(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Nk(h,u);const m=[];for(const v of h)m.push(Ok(l,s,v));p={arrayValue:{values:m}}}else p=Ok(l,s,h)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Nk(h,u),p=KF(a,o,h,u==="in"||u==="not-in");return Pe.create(c,u,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cte(t,e,n){const r=e,i=Uv("where",t);return Bv._create(i,r,n)}class KI extends GI{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new KI(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$e.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)e$(o,l),o=K0(o,l)}(e._query,n),new kn(e.firestore,e.converter,K0(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QI extends Cf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new QI(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new z(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lh(s,o)}(e._query,this._field,this._direction);return new kn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new ms(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function ute(t,e="asc"){const n=e,r=Uv("orderBy",t);return QI._create(r,n)}class zv extends Cf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new zv(e,n,r)}_apply(e){return new kn(e.firestore,e.converter,gg(e._query,this._limit,this._limitType))}}function dte(t){return LF("limit",t),zv._create("limit",t,"F")}function hte(t){return LF("limitToLast",t),zv._create("limitToLast",t,"L")}class qv extends Cf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new qv(e,n,r)}_apply(e){const n=ZF(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,function(i,s){return new ms(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function fte(...t){return qv._create("startAt",t,!0)}function pte(...t){return qv._create("startAfter",t,!1)}class Wv extends Cf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Wv(e,n,r)}_apply(e){const n=ZF(e,this.type,this._docOrFields,this._inclusive);return new kn(e.firestore,e.converter,function(i,s){return new ms(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,n))}}function mte(...t){return Wv._create("endBefore",t,!1)}function gte(...t){return Wv._create("endAt",t,!0)}function ZF(t,e,n,r){if(n[0]=ne(n[0]),n[0]instanceof Uh)return function(s,o,a,l,c){if(!l)throw new z(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of hc(s))if(h.field.isKeyField())u.push(Ma(o,l.key));else{const p=l.data.field(h.field);if(Sv(p))throw new z(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const m=h.field.canonicalString();throw new z(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}u.push(p)}return new wo(u,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=nl(t.firestore);return function(o,a,l,c,u,h){const p=o.explicitOrderBy;if(u.length>p.length)throw new z(F.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let v=0;v<u.length;v++){const w=u[v];if(p[v].field.isKeyField()){if(typeof w!="string")throw new z(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof w}`);if(!nI(o)&&w.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${w}' contains a slash.`);const y=o.path.child(Ce.fromString(w));if(!Q.isDocumentKey(y))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${y}' is not because it contains an odd number of segments.`);const T=new Q(y);m.push(Ma(a,T))}else{const y=KF(l,c,w);m.push(y)}}return new wo(m,h)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ok(t,e,n){if(typeof(n=ne(n))=="string"){if(n==="")throw new z(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!nI(e)&&n.indexOf("/")!==-1)throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ce.fromString(n));if(!Q.isDocumentKey(r))throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ma(t,new Q(r))}if(n instanceof ft)return Ma(t,n._key);throw new z(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mv(n)}.`)}function Nk(t,e){if(!Array.isArray(t)||t.length===0)throw new z(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function e$(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class YI{convertValue(e,n="none"){switch(yo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(rs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Do(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var n,r,i;const s=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>nt(o.doubleValue));return new VI(s)}convertGeoPoint(e){return new Vv(nt(e.latitude),nt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xv(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Nh(e));default:return null}}convertTimestamp(e){const n=ns(e);return new lt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ce.fromString(e);re(HV(r));const i=new vo(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||Rt(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hv(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class vte extends YI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let is=class extends Uh{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Kd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Uv("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Kd=class extends is{data(e={}){return super.data(e)}},To=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new pa(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Kd(this._firestore,this._userDataWriter,r.key,r,new pa(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new Kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Kd(i._firestore,i._userDataWriter,a.doc.key,a.doc,new pa(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:yte(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function yte(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}function t$(t,e){return t instanceof is&&e instanceof is?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof To&&e instanceof To&&t._firestore===e._firestore&&BF(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _te(t){t=Me(t,ft);const e=Me(t.firestore,Pt);return OF(wn(e),t._key).then(n=>JI(e,t,n))}class il extends YI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Si(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function wte(t){t=Me(t,ft);const e=Me(t.firestore,Pt),n=wn(e),r=new il(e);return Uee(n,t._key).then(i=>new is(e,r,t._key,i,new pa(i!==null&&i.hasLocalMutations,!0),t.converter))}function Ete(t){t=Me(t,ft);const e=Me(t.firestore,Pt);return OF(wn(e),t._key,{source:"server"}).then(n=>JI(e,t,n))}function bte(t){t=Me(t,kn);const e=Me(t.firestore,Pt),n=wn(e),r=new il(e);return XF(t._query),NF(n,t._query).then(i=>new To(e,r,t,i))}function Tte(t){t=Me(t,kn);const e=Me(t.firestore,Pt),n=wn(e),r=new il(e);return Bee(n,t._query).then(i=>new To(e,r,t,i))}function Ite(t){t=Me(t,kn);const e=Me(t.firestore,Pt),n=wn(e),r=new il(e);return NF(n,t._query,{source:"server"}).then(i=>new To(e,r,t,i))}function Dk(t,e,n){t=Me(t,ft);const r=Me(t.firestore,Pt),i=Hv(t.converter,e,n);return Pf(r,[$v(nl(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,at.none())])}function jk(t,e,n,...r){t=Me(t,ft);const i=Me(t.firestore,Pt),s=nl(i);let o;return o=typeof(e=ne(e))=="string"||e instanceof bo?qI(s,"updateDoc",t._key,e,n,r):zI(s,"updateDoc",t._key,e),Pf(i,[o.toMutation(t._key,at.exists(!0))])}function Ste(t){return Pf(Me(t.firestore,Pt),[new fu(t._key,at.none())])}function xte(t,e){const n=Me(t.firestore,Pt),r=Sg(t),i=Hv(t.converter,e);return Pf(n,[$v(nl(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,at.exists(!1))]).then(()=>r)}function n$(t,...e){var n,r,i;t=ne(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||oE(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(oE(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(i=h.complete)===null||i===void 0?void 0:i.bind(h)}let l,c,u;if(t instanceof ft)c=Me(t.firestore,Pt),u=du(t._key.path),l={next:h=>{e[o]&&e[o](JI(c,t,h))},error:e[o+1],complete:e[o+2]};else{const h=Me(t,kn);c=Me(h.firestore,Pt),u=h._query;const p=new il(c);l={next:m=>{e[o]&&e[o](new To(c,p,h,m))},error:e[o+1],complete:e[o+2]},XF(t._query)}return function(p,m,v,w){const y=new jv(w),T=new RI(m,y,v);return p.asyncQueue.enqueueAndForget(async()=>SI(await Wc(p),T)),()=>{y.eu(),p.asyncQueue.enqueueAndForget(async()=>xI(await Wc(p),T))}}(wn(c),u,a,l)}function Ate(t,e){return zee(wn(t=Me(t,Pt)),oE(e)?e:{next:e})}function Pf(t,e){return function(r,i){const s=new rn;return r.asyncQueue.enqueueAndForget(async()=>gee(await LI(r),i,s)),s.promise}(wn(t),e)}function JI(t,e,n){const r=n.docs.get(e._key),i=new il(t);return new is(t,i,e._key,r,new pa(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rte={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kte=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=nl(e)}set(e,n,r){this._verifyNotCommitted();const i=Fs(e,this._firestore),s=Hv(i.converter,n,r),o=$v(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,at.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Fs(e,this._firestore);let o;return o=typeof(n=ne(n))=="string"||n instanceof bo?qI(this._dataReader,"WriteBatch.update",s._key,n,r,i):zI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,at.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Fs(e,this._firestore);return this._mutations=this._mutations.concat(new fu(n._key,at.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Fs(t,e){if((t=ne(t)).firestore!==e)throw new z(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cte=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=nl(n)}get(n){const r=Fs(n,this._firestore),i=new vte(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return Z();const o=s[0];if(o.isFoundDocument())return new Uh(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Uh(this._firestore,i,r._key,null,r.converter);throw Z()})}set(n,r,i){const s=Fs(n,this._firestore),o=Hv(s.converter,r,i),a=$v(this._dataReader,"Transaction.set",s._key,o,s.converter!==null,i);return this._transaction.set(s._key,a),this}update(n,r,i,...s){const o=Fs(n,this._firestore);let a;return a=typeof(r=ne(r))=="string"||r instanceof bo?qI(this._dataReader,"Transaction.update",o._key,r,i,s):zI(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(n){const r=Fs(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Fs(e,this._firestore),r=new il(this._firestore);return super.get(e).then(i=>new is(this._firestore,r,n._key,i._document,new pa(!1,!1),n.converter))}};function Pte(t,e,n){t=Me(t,Pt);const r=Object.assign(Object.assign({},Rte),n);return function(s){if(s.maxAttempts<1)throw new z(F.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new rn;return s.asyncQueue.enqueueAndForget(async()=>{const c=await Vee(s);new Lee(s.asyncQueue,c,a,o,l).cu()}),l.promise}(wn(t),i=>e(new Cte(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ote(){return new kf("deleteField")}function Nte(){return new FI("serverTimestamp")}function Dte(...t){return new $I("arrayUnion",t)}function jte(...t){return new UI("arrayRemove",t)}function Lte(t){return new BI("increment",t)}(function(e,n=!0){(function(i){uu=i})(ds),or(new on("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Pt(new BJ(r.getProvider("auth-internal")),new HJ(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new z(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),nn(SR,"4.7.6",e),nn(SR,"4.7.6","esm2017")})();const Mte="@firebase/firestore-compat",Vte="0.3.41";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XI(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new z("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function Mk(){if(!yX())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}let r$=class lE{constructor(e){this._delegate=e}static fromBase64String(e){return Mk(),new lE(Si.fromBase64String(e))}static fromUint8Array(e){return Lk(),new lE(Si.fromUint8Array(e))}toBase64(){return Mk(),this._delegate.toBase64()}toUint8Array(){return Lk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(t){return Fte(t,["next","error","complete"])}function Fte(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $te{enableIndexedDbPersistence(e,n){return Yee(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Jee(e._delegate)}clearIndexedDbPersistence(e){return Xee(e._delegate)}}class i${constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof vo||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ti("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Hee(this._delegate,e,n,r)}enableNetwork(){return ete(this._delegate)}disableNetwork(){return tte(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,jF("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Zee(this._delegate)}onSnapshotsInSync(e){return Ate(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Hc(this,$F(this._delegate,e))}catch(n){throw Sn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Er(this,Sg(this._delegate,e))}catch(n){throw Sn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new In(this,Gee(this._delegate,e))}catch(n){throw Sn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Pte(this._delegate,n=>e(new s$(this,n)))}batch(){return wn(this._delegate),new o$(new kte(this._delegate,e=>Pf(this._delegate,e)))}loadBundle(e){return nte(this._delegate,e)}namedQuery(e){return rte(this._delegate,e).then(n=>n?new In(this,n):null)}}class Gv extends YI{constructor(e){super(),this.firestore=e}convertBytes(e){return new r$(new Si(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Er.forKey(n,this.firestore,null)}}function Ute(t){VJ(t)}class s${constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Gv(e)}get(e){const n=ma(e);return this._delegate.get(n).then(r=>new Bh(this._firestore,new is(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ma(e);return r?(XI("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ma(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ma(e);return this._delegate.delete(n),this}}class o${constructor(e){this._delegate=e}set(e,n,r){const i=ma(e);return r?(XI("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const s=ma(e);return arguments.length===2?this._delegate.update(s,n):this._delegate.update(s,n,r,...i),this}delete(e){const n=ma(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class qa{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new Kd(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new zh(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=qa.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(n);return s||(s=new qa(e,new Gv(e),n),i.set(n,s)),s}}qa.INSTANCES=new WeakMap;class Er{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Gv(e)}static forPath(e,n,r){if(e.length%2!==0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Er(n,new ft(n._delegate,r,new Q(e)))}static forKey(e,n,r){return new Er(n,new ft(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Hc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Hc(this.firestore,$F(this._delegate,e))}catch(n){throw Sn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ne(e),e instanceof ft?UF(this._delegate,e):!1}set(e,n){n=XI("DocumentReference.set",n);try{return n?Dk(this._delegate,e,n):Dk(this._delegate,e)}catch(r){throw Sn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?jk(this._delegate,e):jk(this._delegate,e,n,...r)}catch(i){throw Sn(i,"updateDoc()","DocumentReference.update()")}}delete(){return Ste(this._delegate)}onSnapshot(...e){const n=a$(e),r=l$(e,i=>new Bh(this.firestore,new is(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return n$(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=wte(this._delegate):(e==null?void 0:e.source)==="server"?n=Ete(this._delegate):n=_te(this._delegate),n.then(r=>new Bh(this.firestore,new is(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Er(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Sn(t,e,n){return t.message=t.message.replace(e,n),t}function a$(t){for(const e of t)if(typeof e=="object"&&!cE(e))return e;return{}}function l$(t,e){var n,r;let i;return cE(t[0])?i=t[0]:cE(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:s=>{i.next&&i.next(e(s))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Bh{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Er(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return t$(this._delegate,e._delegate)}}class zh extends Bh{data(e){const n=this._delegate.data(e);return this._delegate._converter||FJ(n!==void 0),n}}class In{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Gv(e)}where(e,n,r){try{return new In(this.firestore,ks(this._delegate,cte(e,n,r)))}catch(i){throw Sn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new In(this.firestore,ks(this._delegate,ute(e,n)))}catch(r){throw Sn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new In(this.firestore,ks(this._delegate,dte(e)))}catch(n){throw Sn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new In(this.firestore,ks(this._delegate,hte(e)))}catch(n){throw Sn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new In(this.firestore,ks(this._delegate,fte(...e)))}catch(n){throw Sn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new In(this.firestore,ks(this._delegate,pte(...e)))}catch(n){throw Sn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new In(this.firestore,ks(this._delegate,mte(...e)))}catch(n){throw Sn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new In(this.firestore,ks(this._delegate,gte(...e)))}catch(n){throw Sn(n,"endAt()","Query.endAt()")}}isEqual(e){return BF(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Tte(this._delegate):(e==null?void 0:e.source)==="server"?n=Ite(this._delegate):n=bte(this._delegate),n.then(r=>new uE(this.firestore,new To(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=a$(e),r=l$(e,i=>new uE(this.firestore,new To(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return n$(this._delegate,n,r)}withConverter(e){return new In(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Bte{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new zh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class uE{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new In(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new zh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Bte(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new zh(this._firestore,r))})}isEqual(e){return t$(this._delegate,e._delegate)}}class Hc extends In{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Er(this.firestore,e):null}doc(e){try{return e===void 0?new Er(this.firestore,Sg(this._delegate)):new Er(this.firestore,Sg(this._delegate,e))}catch(n){throw Sn(n,"doc()","CollectionReference.doc()")}}add(e){return xte(this._delegate,e).then(n=>new Er(this.firestore,n))}isEqual(e){return UF(this._delegate,e._delegate)}withConverter(e){return new Hc(this.firestore,e?this._delegate.withConverter(qa.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ma(t){return Me(t,ft)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(...e){this._delegate=new bo(...e)}static documentId(){return new ZI(ot.keyField().canonicalString())}isEqual(e){return e=ne(e),e instanceof bo?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{static serverTimestamp(){const e=Nte();return e._methodName="FieldValue.serverTimestamp",new oa(e)}static delete(){const e=Ote();return e._methodName="FieldValue.delete",new oa(e)}static arrayUnion(...e){const n=Dte(...e);return n._methodName="FieldValue.arrayUnion",new oa(n)}static arrayRemove(...e){const n=jte(...e);return n._methodName="FieldValue.arrayRemove",new oa(n)}static increment(e){const n=Lte(e);return n._methodName="FieldValue.increment",new oa(n)}constructor(e){this._delegate=e}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zte={Firestore:i$,GeoPoint:Vv,Timestamp:lt,Blob:r$,Transaction:s$,WriteBatch:o$,DocumentReference:Er,DocumentSnapshot:Bh,Query:In,QueryDocumentSnapshot:zh,QuerySnapshot:uE,CollectionReference:Hc,FieldPath:ZI,FieldValue:oa,setLogLevel:Ute,CACHE_SIZE_UNLIMITED:Qee};function qte(t,e){t.INTERNAL.registerComponent(new on("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zte)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wte(t){qte(t,(e,n)=>new i$(e,n,new $te)),t.registerVersion(Mte,Vte)}Wte(Yt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$="firebasestorage.googleapis.com",u$="storageBucket",Hte=2*60*1e3,Gte=10*60*1e3,Kte=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ot=class d$ extends Gt{constructor(e,n,r=0){super(O_(e),`Firebase Storage: ${n} (${O_(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,d$.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return O_(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var tt;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(tt||(tt={}));function O_(t){return"storage/"+t}function eS(){const t="An unknown error occurred, please check the error payload for server response.";return new Ot(tt.UNKNOWN,t)}function Qte(t){return new Ot(tt.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Yte(t){return new Ot(tt.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Jte(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ot(tt.UNAUTHENTICATED,t)}function Xte(){return new Ot(tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Zte(t){return new Ot(tt.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function h$(){return new Ot(tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function f$(){return new Ot(tt.CANCELED,"User canceled the upload/download.")}function ene(t){return new Ot(tt.INVALID_URL,"Invalid URL '"+t+"'.")}function tne(t){return new Ot(tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nne(){return new Ot(tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+u$+"' property when initializing the app?")}function p$(){return new Ot(tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rne(){return new Ot(tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function ine(){return new Ot(tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function sne(t){return new Ot(tt.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function pc(t){return new Ot(tt.INVALID_ARGUMENT,t)}function m$(){return new Ot(tt.APP_DELETED,"The Firebase app was deleted.")}function g$(t){return new Ot(tt.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Qd(t,e){return new Ot(tt.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function sd(t){throw new Ot(tt.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vn.makeFromUrl(e,n)}catch{return new vn(e,"")}if(r.path==="")return r;throw tne(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function c(k){k.path_=decodeURIComponent(k.path)}const u="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",m=new RegExp(`^https?://${h}/${u}/b/${i}/o${p}`,"i"),v={bucket:1,path:3},w=n===c$?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",T=new RegExp(`^https?://${w}/${i}/${y}`,"i"),b=[{regex:a,indices:l,postModify:s},{regex:m,indices:v,postModify:c},{regex:T,indices:{bucket:1,path:2},postModify:c}];for(let k=0;k<b.length;k++){const D=b[k],N=D.regex.exec(e);if(N){const x=N[D.indices.bucket];let S=N[D.indices.path];S||(S=""),r=new vn(x,S),D.postModify(r);break}}if(r==null)throw ene(e);return r}}class one{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ane(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let c=!1;function u(...y){c||(c=!0,e.apply(null,y))}function h(y){i=setTimeout(()=>{i=null,t(m,l())},y)}function p(){s&&clearTimeout(s)}function m(y,...T){if(c){p();return}if(y){p(),u.call(null,y,...T);return}if(l()||o){p(),u.call(null,y,...T);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,h(b)}let v=!1;function w(y){v||(v=!0,p(),!c&&(i!==null?(y||(a=2),clearTimeout(i),h(0)):y||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,w(!0)},n),w}function lne(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cne(t){return t!==void 0}function une(t){return typeof t=="function"}function dne(t){return typeof t=="object"&&!Array.isArray(t)}function Kv(t){return typeof t=="string"||t instanceof String}function Vk(t){return tS()&&t instanceof Blob}function tS(){return typeof Blob<"u"}function dE(t,e,n,r){if(r<e)throw pc(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw pc(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function v$(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ta;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ta||(Ta={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hne{constructor(e,n,r,i,s,o,a,l,c,u,h,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=h,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,v)=>{this.resolve_=m,this.reject_=v,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new Rp(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===Ta.NO_ERROR,l=s.getStatus();if(!a||y$(l,this.additionalRetryCodes_)&&this.retry){const u=s.getErrorCode()===Ta.ABORT;r(!1,new Rp(!1,null,u));return}const c=this.successCodes_.indexOf(l)!==-1;r(!0,new Rp(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());cne(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=eS();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?m$():f$();o(l)}else{const l=h$();o(l)}};this.canceled_?n(!1,new Rp(!1,null,!0)):this.backoffId_=ane(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&lne(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Rp{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fne(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pne(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function mne(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gne(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vne(t,e,n,r,i,s,o=!0){const a=v$(t.urlParams),l=t.url+a,c=Object.assign({},t.headers);return mne(c,e),fne(c,n),pne(c,s),gne(c,r),new hne(l,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yne(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function _ne(...t){const e=yne();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(tS())return new Blob(t);throw new Ot(tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function wne(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ene(t){if(typeof atob>"u")throw sne("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const br={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class N_{constructor(e,n){this.data=e,this.contentType=n||null}}function _$(t,e){switch(t){case br.RAW:return new N_(w$(e));case br.BASE64:case br.BASE64URL:return new N_(E$(t,e));case br.DATA_URL:return new N_(Tne(e),Ine(e))}throw eS()}function w$(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function bne(t){let e;try{e=decodeURIComponent(t)}catch{throw Qd(br.DATA_URL,"Malformed data URL.")}return w$(e)}function E$(t,e){switch(t){case br.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Qd(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case br.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Qd(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Ene(e)}catch(i){throw i.message.includes("polyfill")?i:Qd(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class b${constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Qd(br.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Sne(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Tne(t){const e=new b$(t);return e.base64?E$(br.BASE64,e.rest):bne(e.rest)}function Ine(t){return new b$(t).contentType}function Sne(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n){let r=0,i="";Vk(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Vk(this.data_)){const r=this.data_,i=wne(r,e,n);return i===null?null:new Di(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Di(r,!0)}}static getBlob(...e){if(tS()){const n=e.map(r=>r instanceof Di?r.data_:r);return new Di(_ne.apply(null,n))}else{const n=e.map(o=>Kv(o)?_$(br.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Di(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t){let e;try{e=JSON.parse(t)}catch{return null}return dne(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xne(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Ane(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function T$(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rne(t,e){return e}class bn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Rne}}let kp=null;function kne(t){return!Kv(t)||t.length<2?t:T$(t)}function Qv(){if(kp)return kp;const t=[];t.push(new bn("bucket")),t.push(new bn("generation")),t.push(new bn("metageneration")),t.push(new bn("name","fullPath",!0));function e(s,o){return kne(o)}const n=new bn("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new bn("size");return i.xform=r,t.push(i),t.push(new bn("timeCreated")),t.push(new bn("updated")),t.push(new bn("md5Hash",null,!0)),t.push(new bn("cacheControl",null,!0)),t.push(new bn("contentDisposition",null,!0)),t.push(new bn("contentEncoding",null,!0)),t.push(new bn("contentLanguage",null,!0)),t.push(new bn("contentType",null,!0)),t.push(new bn("metadata","customMetadata",!0)),kp=t,kp}function Cne(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new vn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Pne(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Cne(r,t),r}function I$(t,e,n){const r=nS(e);return r===null?null:Pne(t,r,n)}function One(t,e,n,r){const i=nS(e);if(i===null||!Kv(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const u=t.bucket,h=t.fullPath,p="/b/"+o(u)+"/o/"+o(h),m=Lo(p,n,r),v=v$({alt:"media",token:c});return m+v})[0]}function rS(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="prefixes",$k="items";function Nne(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Fk])for(const i of n[Fk]){const s=i.replace(/\/$/,""),o=t._makeStorageReference(new vn(e,s));r.prefixes.push(o)}if(n[$k])for(const i of n[$k]){const s=t._makeStorageReference(new vn(e,i.name));r.items.push(s)}return r}function Dne(t,e,n){const r=nS(n);return r===null?null:Nne(t,e,r)}class _s{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t){if(!t)throw eS()}function Yv(t,e){function n(r,i){const s=I$(t,i,e);return wi(s!==null),s}return n}function jne(t,e){function n(r,i){const s=Dne(t,e,i);return wi(s!==null),s}return n}function Lne(t,e){function n(r,i){const s=I$(t,i,e);return wi(s!==null),One(s,i,t.host,t._protocol)}return n}function yu(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Xte():i=Jte():n.getStatus()===402?i=Yte(t.bucket):n.getStatus()===403?i=Zte(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Jv(t){const e=yu(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=Qte(t.path)),s.serverResponse=i.serverResponse,s}return n}function S$(t,e,n){const r=e.fullServerUrl(),i=Lo(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new _s(i,s,Yv(t,n),o);return a.errorHandler=Jv(e),a}function Mne(t,e,n,r,i){const s={};e.isRoot?s.prefix="":s.prefix=e.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=e.bucketOnlyServerUrl(),a=Lo(o,t.host,t._protocol),l="GET",c=t.maxOperationRetryTime,u=new _s(a,l,jne(t,e.bucket),c);return u.urlParams=s,u.errorHandler=yu(e),u}function Vne(t,e,n){const r=e.fullServerUrl(),i=Lo(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new _s(i,s,Lne(t,n),o);return a.errorHandler=Jv(e),a}function Fne(t,e,n,r){const i=e.fullServerUrl(),s=Lo(i,t.host,t._protocol),o="PATCH",a=rS(n,r),l={"Content-Type":"application/json; charset=utf-8"},c=t.maxOperationRetryTime,u=new _s(s,o,Yv(t,r),c);return u.headers=l,u.body=a,u.errorHandler=Jv(e),u}function $ne(t,e){const n=e.fullServerUrl(),r=Lo(n,t.host,t._protocol),i="DELETE",s=t.maxOperationRetryTime;function o(l,c){}const a=new _s(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Jv(e),a}function Une(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function x$(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Une(null,e)),r}function Bne(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let k=0;k<2;k++)b=b+Math.random().toString().slice(2);return b}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const c=x$(e,r,i),u=rS(c,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+u+`\r
--`+l+`\r
Content-Type: `+c.contentType+`\r
\r
`,p=`\r
--`+l+"--",m=Di.getBlob(h,r,p);if(m===null)throw p$();const v={name:c.fullPath},w=Lo(s,t.host,t._protocol),y="POST",T=t.maxUploadRetryTime,E=new _s(w,y,Yv(t,n),T);return E.urlParams=v,E.headers=o,E.body=m.uploadData(),E.errorHandler=yu(e),E}class Ag{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function iS(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{wi(!1)}return wi(!!n&&(e||["active"]).indexOf(n)!==-1),n}function zne(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o=x$(e,r,i),a={name:o.fullPath},l=Lo(s,t.host,t._protocol),c="POST",u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=rS(o,n),p=t.maxUploadRetryTime;function m(w){iS(w);let y;try{y=w.getResponseHeader("X-Goog-Upload-URL")}catch{wi(!1)}return wi(Kv(y)),y}const v=new _s(l,c,m,p);return v.urlParams=a,v.headers=u,v.body=h,v.errorHandler=yu(e),v}function qne(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function s(c){const u=iS(c,["active","final"]);let h=null;try{h=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{wi(!1)}h||wi(!1);const p=Number(h);return wi(!isNaN(p)),new Ag(p,r.size(),u==="final")}const o="POST",a=t.maxUploadRetryTime,l=new _s(n,o,s,a);return l.headers=i,l.errorHandler=yu(e),l}const Uk=256*1024;function Wne(t,e,n,r,i,s,o,a){const l=new Ag(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw rne();const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,p=h+u;let m="";u===0?m="finalize":c===u?m="upload, finalize":m="upload";const v={"X-Goog-Upload-Command":m,"X-Goog-Upload-Offset":`${l.current}`},w=r.slice(h,p);if(w===null)throw p$();function y(k,D){const N=iS(k,["active","final"]),x=l.current+u,S=r.size();let C;return N==="final"?C=Yv(e,s)(k,D):C=null,new Ag(x,S,N==="final",C)}const T="POST",E=e.maxUploadRetryTime,b=new _s(n,T,y,E);return b.headers=v,b.body=w.uploadData(),b.progressCallback=a||null,b.errorHandler=yu(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hne={STATE_CHANGED:"state_changed"},xn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function D_(t){switch(t){case"running":case"pausing":case"canceling":return xn.RUNNING;case"paused":return xn.PAUSED;case"success":return xn.SUCCESS;case"canceled":return xn.CANCELED;case"error":return xn.ERROR;default:return xn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gne{constructor(e,n,r){if(une(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Kne{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ta.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ta.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ta.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw sd("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw sd("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw sd("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw sd("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw sd("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Qne extends Kne{initXhr(){this.xhr_.responseType="text"}}function li(){return new Qne}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A${isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Qv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(tt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(y$(i.status,[]))if(s)i=h$();else{this.sleepTime=Math.max(this.sleepTime*2,Kte),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(tt.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=zne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,li,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=qne(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,li,n,r);this._request=s,s.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=Uk*this._chunkMultiplier,n=new Ag(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=Wne(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,li,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){Uk*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=S$(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,li,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Bne(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,li,e,n);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=f$(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=D_(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const s=new Gne(n||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(D_(this._state)){case xn.SUCCESS:wl(this._resolve.bind(null,this.snapshot))();break;case xn.CANCELED:case xn.ERROR:const n=this._reject;wl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(D_(this._state)){case xn.RUNNING:case xn.PAUSED:e.next&&wl(e.next.bind(e,this.snapshot))();break;case xn.SUCCESS:e.complete&&wl(e.complete.bind(e))();break;case xn.CANCELED:case xn.ERROR:e.error&&wl(e.error.bind(e,this._error))();break;default:e.error&&wl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this._service=e,n instanceof vn?this._location=n:this._location=vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Wa(e,n)}get root(){const e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return T$(this._location.path)}get storage(){return this._service}get parent(){const e=xne(this._location.path);if(e===null)return null;const n=new vn(this._location.bucket,e);return new Wa(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw g$(e)}}function Yne(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new A$(t,new Di(e),n)}function Jne(t){const e={prefixes:[],items:[]};return R$(t,e).then(()=>e)}async function R$(t,e,n){const i=await k$(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await R$(t,e,i.nextPageToken)}function k$(t,e){e!=null&&typeof e.maxResults=="number"&&dE("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Mne(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,li)}function Xne(t){t._throwIfRoot("getMetadata");const e=S$(t.storage,t._location,Qv());return t.storage.makeRequestWithTokens(e,li)}function Zne(t,e){t._throwIfRoot("updateMetadata");const n=Fne(t.storage,t._location,e,Qv());return t.storage.makeRequestWithTokens(n,li)}function ere(t){t._throwIfRoot("getDownloadURL");const e=Vne(t.storage,t._location,Qv());return t.storage.makeRequestWithTokens(e,li).then(n=>{if(n===null)throw ine();return n})}function tre(t){t._throwIfRoot("deleteObject");const e=$ne(t.storage,t._location);return t.storage.makeRequestWithTokens(e,li)}function C$(t,e){const n=Ane(t._location.path,e),r=new vn(t._location.bucket,n);return new Wa(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nre(t){return/^[A-Za-z]+:\/\//.test(t)}function rre(t,e){return new Wa(t,e)}function P$(t,e){if(t instanceof sS){const n=t;if(n._bucket==null)throw nne();const r=new Wa(n,n._bucket);return e!=null?P$(r,e):r}else return e!==void 0?C$(t,e):t}function ire(t,e){if(e&&nre(e)){if(t instanceof sS)return rre(t,e);throw pc("To use ref(service, url), the first argument must be a Storage instance.")}else return P$(t,e)}function Bk(t,e){const n=e==null?void 0:e[u$];return n==null?null:vn.makeFromBucketSpec(n,t)}function sre(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Kj(i,t.app.options.projectId))}class sS{constructor(e,n,r,i,s){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=c$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Hte,this._maxUploadRetryTime=Gte,this._requests=new Set,i!=null?this._bucket=vn.makeFromBucketSpec(i,this._host):this._bucket=Bk(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=Bk(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){dE("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){dE("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wa(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new one(m$());{const o=vne(e,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const zk="@firebase/storage",qk="0.13.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ore="storage";function are(t,e,n){return t=ne(t),Yne(t,e,n)}function lre(t){return t=ne(t),Xne(t)}function cre(t,e){return t=ne(t),Zne(t,e)}function ure(t,e){return t=ne(t),k$(t,e)}function dre(t){return t=ne(t),Jne(t)}function hre(t){return t=ne(t),ere(t)}function fre(t){return t=ne(t),tre(t)}function Wk(t,e){return t=ne(t),ire(t,e)}function pre(t,e){return C$(t,e)}function mre(t,e,n,r={}){sre(t,e,n,r)}function gre(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new sS(n,r,i,e,ds)}function vre(){or(new on(ore,gre,"PUBLIC").setMultipleInstances(!0)),nn(zk,qk,""),nn(zk,qk,"esm2017")}vre();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Cp(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Cp(r,this,this._ref))},n)}on(e,n,r,i){let s;return n&&(typeof n=="function"?s=o=>n(new Cp(o,this,this._ref)):s={next:n.next?o=>n.next(new Cp(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class Gk{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new zi(e,this._service))}get items(){return this._delegate.items.map(e=>new zi(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=pre(this._delegate,e);return new zi(n,this.storage)}get root(){return new zi(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new zi(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new Hk(are(this._delegate,e,n),this)}putString(e,n=br.RAW,r){this._throwIfRoot("putString");const i=_$(n,e),s=Object.assign({},r);return s.contentType==null&&i.contentType!=null&&(s.contentType=i.contentType),new Hk(new A$(this._delegate,new Di(i.data,!0),s),this)}listAll(){return dre(this._delegate).then(e=>new Gk(e,this.storage))}list(e){return ure(this._delegate,e||void 0).then(n=>new Gk(n,this.storage))}getMetadata(){return lre(this._delegate)}updateMetadata(e){return cre(this._delegate,e)}getDownloadURL(){return hre(this._delegate)}delete(){return this._throwIfRoot("delete"),fre(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw g$(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(Kk(e))throw pc("ref() expected a child path but got a URL, use refFromURL instead.");return new zi(Wk(this._delegate,e),this)}refFromURL(e){if(!Kk(e))throw pc("refFromURL() expected a full URL but got a child path, use ref() instead.");try{vn.makeFromUrl(e,this._delegate.host)}catch{throw pc("refFromUrl() expected a valid full URL but got an invalid one.")}return new zi(Wk(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){mre(this._delegate,e,n,r)}}function Kk(t){return/^[A-Za-z]+:\/\//.test(t)}const yre="@firebase/storage-compat",_re="0.3.15";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wre="storage-compat";function Ere(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new O$(n,r)}function bre(t){const e={TaskState:xn,TaskEvent:Hne,StringFormat:br,Storage:O$,Reference:zi};t.INTERNAL.registerComponent(new on(wre,Ere,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(yre,_re)}bre(Yt);const N$="@firebase/installations",oS="0.6.12";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D$=1e4,j$=`w:${oS}`,L$="FIS_v2",Tre="https://firebaseinstallations.googleapis.com/v1",Ire=60*60*1e3,Sre="installations",xre="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Are={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ha=new us(Sre,xre,Are);function M$(t){return t instanceof Gt&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V$({projectId:t}){return`${Tre}/projects/${t}/installations`}function F$(t){return{token:t.token,requestStatus:2,expiresIn:kre(t.expiresIn),creationTime:Date.now()}}async function $$(t,e){const r=(await e.json()).error;return Ha.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function U$({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function Rre(t,{refreshToken:e}){const n=U$(t);return n.append("Authorization",Cre(e)),n}async function B$(t){const e=await t();return e.status>=500&&e.status<600?t():e}function kre(t){return Number(t.replace("s","000"))}function Cre(t){return`${L$} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pre({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=V$(t),i=U$(t),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={fid:n,authVersion:L$,appId:t.appId,sdkVersion:j$},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await B$(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:F$(c.authToken)}}else throw await $$("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ore(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nre=/^[cdef][\w-]{21}$/,hE="";function Dre(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=jre(t);return Nre.test(n)?n:hE}catch{return hE}}function jre(t){return Ore(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q$=new Map;function W$(t,e){const n=Xv(t);H$(n,e),Lre(n,e)}function H$(t,e){const n=q$.get(t);if(n)for(const r of n)r(e)}function Lre(t,e){const n=Mre();n&&n.postMessage({key:t,fid:e}),Vre()}let ga=null;function Mre(){return!ga&&"BroadcastChannel"in self&&(ga=new BroadcastChannel("[Firebase] FID Change"),ga.onmessage=t=>{H$(t.data.key,t.data.fid)}),ga}function Vre(){q$.size===0&&ga&&(ga.close(),ga=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fre="firebase-installations-database",$re=1,Ga="firebase-installations-store";let j_=null;function aS(){return j_||(j_=iL(Fre,$re,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ga)}}})),j_}async function Rg(t,e){const n=Xv(t),i=(await aS()).transaction(Ga,"readwrite"),s=i.objectStore(Ga),o=await s.get(n);return await s.put(e,n),await i.done,(!o||o.fid!==e.fid)&&W$(t,e.fid),e}async function G$(t){const e=Xv(t),r=(await aS()).transaction(Ga,"readwrite");await r.objectStore(Ga).delete(e),await r.done}async function Zv(t,e){const n=Xv(t),i=(await aS()).transaction(Ga,"readwrite"),s=i.objectStore(Ga),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await i.done,a&&(!o||o.fid!==a.fid)&&W$(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lS(t){let e;const n=await Zv(t.appConfig,r=>{const i=Ure(r),s=Bre(t,i);return e=s.registrationPromise,s.installationEntry});return n.fid===hE?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function Ure(t){const e=t||{fid:Dre(),registrationStatus:0};return K$(e)}function Bre(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Ha.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=zre(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:qre(t)}:{installationEntry:e}}async function zre(t,e){try{const n=await Pre(t,e);return Rg(t.appConfig,n)}catch(n){throw M$(n)&&n.customData.serverCode===409?await G$(t.appConfig):await Rg(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function qre(t){let e=await Qk(t.appConfig);for(;e.registrationStatus===1;)await z$(100),e=await Qk(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await lS(t);return r||n}return e}function Qk(t){return Zv(t,e=>{if(!e)throw Ha.create("installation-not-found");return K$(e)})}function K$(t){return Wre(t)?{fid:t.fid,registrationStatus:0}:t}function Wre(t){return t.registrationStatus===1&&t.registrationTime+D$<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hre({appConfig:t,heartbeatServiceProvider:e},n){const r=Gre(t,n),i=Rre(t,n),s=e.getImmediate({optional:!0});if(s){const c=await s.getHeartbeatsHeader();c&&i.append("x-firebase-client",c)}const o={installation:{sdkVersion:j$,appId:t.appId}},a={method:"POST",headers:i,body:JSON.stringify(o)},l=await B$(()=>fetch(r,a));if(l.ok){const c=await l.json();return F$(c)}else throw await $$("Generate Auth Token",l)}function Gre(t,{fid:e}){return`${V$(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(t,e=!1){let n;const r=await Zv(t.appConfig,s=>{if(!Q$(s))throw Ha.create("not-registered");const o=s.authToken;if(!e&&Yre(o))return s;if(o.requestStatus===1)return n=Kre(t,e),s;{if(!navigator.onLine)throw Ha.create("app-offline");const a=Xre(s);return n=Qre(t,a),a}});return n?await n:r.authToken}async function Kre(t,e){let n=await Yk(t.appConfig);for(;n.authToken.requestStatus===1;)await z$(100),n=await Yk(t.appConfig);const r=n.authToken;return r.requestStatus===0?cS(t,e):r}function Yk(t){return Zv(t,e=>{if(!Q$(e))throw Ha.create("not-registered");const n=e.authToken;return Zre(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Qre(t,e){try{const n=await Hre(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Rg(t.appConfig,r),n}catch(n){if(M$(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await G$(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Rg(t.appConfig,r)}throw n}}function Q$(t){return t!==void 0&&t.registrationStatus===2}function Yre(t){return t.requestStatus===2&&!Jre(t)}function Jre(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+Ire}function Xre(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Zre(t){return t.requestStatus===1&&t.requestTime+D$<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eie(t){const e=t,{installationEntry:n,registrationPromise:r}=await lS(e);return r?r.catch(console.error):cS(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tie(t,e=!1){const n=t;return await nie(n),(await cS(n,e)).token}async function nie(t){const{registrationPromise:e}=await lS(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rie(t){if(!t||!t.options)throw L_("App Configuration");if(!t.name)throw L_("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw L_(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function L_(t){return Ha.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y$="installations",iie="installations-internal",sie=t=>{const e=t.getProvider("app").getImmediate(),n=rie(e),r=dv(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},oie=t=>{const e=t.getProvider("app").getImmediate(),n=dv(e,Y$).getImmediate();return{getId:()=>eie(n),getToken:i=>tie(n,i)}};function aie(){or(new on(Y$,sie,"PUBLIC")),or(new on(iie,oie,"PRIVATE"))}aie();nn(N$,oS);nn(N$,oS,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="analytics",lie="firebase_id",cie="origin",uie=60*1e3,die="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",uS="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qt=new df("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hie={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},rr=new us("analytics","Analytics",hie);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fie(t){if(!t.startsWith(uS)){const e=rr.create("invalid-gtag-resource",{gtagURL:t});return Qt.warn(e.message),""}return t}function J$(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function pie(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function mie(t,e){const n=pie("firebase-js-sdk-policy",{createScriptURL:fie}),r=document.createElement("script"),i=`${uS}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(i):i,r.async=!0,document.head.appendChild(r)}function gie(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function vie(t,e,n,r,i,s){const o=r[i];try{if(o)await e[o];else{const l=(await J$(n)).find(c=>c.measurementId===i);l&&await e[l.appId]}}catch(a){Qt.error(a)}t("config",i,s)}async function yie(t,e,n,r,i){try{let s=[];if(i&&i.send_to){let o=i.send_to;Array.isArray(o)||(o=[o]);const a=await J$(n);for(const l of o){const c=a.find(h=>h.measurementId===l),u=c&&e[c.appId];if(u)s.push(u);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",r,i||{})}catch(s){Qt.error(s)}}function _ie(t,e,n,r){async function i(s,...o){try{if(s==="event"){const[a,l]=o;await yie(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await vie(t,e,n,r,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Qt.error(a)}}return i}function wie(t,e,n,r,i){let s=function(...o){window[r].push(arguments)};return window[i]&&typeof window[i]=="function"&&(s=window[i]),window[i]=_ie(s,t,e,n),{gtagCore:s,wrappedGtag:window[i]}}function Eie(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(uS)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bie=30,Tie=1e3;class Iie{constructor(e={},n=Tie){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const X$=new Iie;function Sie(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function xie(t){var e;const{appId:n,apiKey:r}=t,i={method:"GET",headers:Sie(r)},s=die.replace("{app-id}",n),o=await fetch(s,i);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw rr.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function Aie(t,e=X$,n){const{appId:r,apiKey:i,measurementId:s}=t.options;if(!r)throw rr.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw rr.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Cie;return setTimeout(async()=>{a.abort()},n!==void 0?n:uie),Z$({appId:r,apiKey:i,measurementId:s},o,a,e)}async function Z$(t,{throttleEndTimeMillis:e,backoffCount:n},r,i=X$){var s;const{appId:o,measurementId:a}=t;try{await Rie(r,e)}catch(l){if(a)return Qt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await xie(t);return i.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!kie(c)){if(i.deleteThrottleMetadata(o),a)return Qt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((s=c==null?void 0:c.customData)===null||s===void 0?void 0:s.httpStatus)===503?HA(n,i.intervalMillis,bie):HA(n,i.intervalMillis),h={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return i.setThrottleMetadata(o,h),Qt.debug(`Calling attemptFetch again in ${u} millis`),Z$(t,h,r,i)}}function Rie(t,e){return new Promise((n,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(n,i);t.addEventListener(()=>{clearTimeout(s),r(rr.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function kie(t){if(!(t instanceof Gt)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Cie{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Pie(t,e,n,r,i){if(i&&i.global){t("event",n,r);return}else{const s=await e,o=Object.assign(Object.assign({},r),{send_to:s});t("event",n,o)}}async function Oie(t,e,n,r){if(r&&r.global)return t("set",{screen_name:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,screen_name:n})}}async function Nie(t,e,n,r){if(r&&r.global)return t("set",{user_id:n}),Promise.resolve();{const i=await e;t("config",i,{update:!0,user_id:n})}}async function Die(t,e,n,r){if(r&&r.global){const i={};for(const s of Object.keys(n))i[`user_properties.${s}`]=n[s];return t("set",i),Promise.resolve()}else{const i=await e;t("config",i,{update:!0,user_properties:n})}}async function jie(t,e){const n=await t;window[`ga-disable-${n}`]=!e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lie(){if(Na())try{await ST()}catch(t){return Qt.warn(rr.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Qt.warn(rr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Mie(t,e,n,r,i,s,o){var a;const l=Aie(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Qt.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Qt.error(m)),e.push(l);const c=Lie().then(m=>{if(m)return r.getId()}),[u,h]=await Promise.all([l,c]);Eie(s)||mie(s,u.measurementId),i("js",new Date);const p=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return p[cie]="firebase",p.update=!0,h!=null&&(p[lie]=h),i("config",u.measurementId,p),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vie=class{constructor(e){this.app=e}_delete(){return delete qi[this.app.options.appId],Promise.resolve()}},qi={},Xk=[];const Zk={};let gm="dataLayer",e4="gtag",eC,Of,fE=!1;function Fie(t){if(fE)throw rr.create("already-initialized");t.dataLayerName&&(gm=t.dataLayerName),t.gtagName&&(e4=t.gtagName)}function $ie(){const t=[];if(uv()&&t.push("This is a browser extension environment."),Xj()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,i)=>`(${i+1}) ${r}`).join(" "),n=rr.create("invalid-analytics-context",{errorInfo:e});Qt.warn(n.message)}}function Uie(t,e,n){$ie();const r=t.options.appId;if(!r)throw rr.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Qt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw rr.create("no-api-key");if(qi[r]!=null)throw rr.create("already-exists",{id:r});if(!fE){gie(gm);const{wrappedGtag:s,gtagCore:o}=wie(qi,Xk,Zk,gm,e4);Of=s,eC=o,fE=!0}return qi[r]=Mie(t,Xk,Zk,e,eC,gm,n),new Vie(t)}async function Bie(){if(uv()||!Xj()||!Na())return!1;try{return await ST()}catch{return!1}}function zie(t,e,n){t=ne(t),Oie(Of,qi[t.app.options.appId],e,n).catch(r=>Qt.error(r))}function qie(t,e,n){t=ne(t),Nie(Of,qi[t.app.options.appId],e,n).catch(r=>Qt.error(r))}function Wie(t,e,n){t=ne(t),Die(Of,qi[t.app.options.appId],e,n).catch(r=>Qt.error(r))}function Hie(t,e){t=ne(t),jie(qi[t.app.options.appId],e).catch(n=>Qt.error(n))}function t4(t,e,n,r){t=ne(t),Pie(Of,qi[t.app.options.appId],e,n,r).catch(i=>Qt.error(i))}const tC="@firebase/analytics",nC="0.10.11";function Gie(){or(new on(Jk,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();return Uie(r,i,n)},"PUBLIC")),or(new on("analytics-internal",t,"PRIVATE")),nn(tC,nC),nn(tC,nC,"esm2017");function t(e){try{const n=e.getProvider(Jk).getImmediate();return{logEvent:(r,i,s)=>t4(n,r,i,s)}}catch(n){throw rr.create("interop-component-reg-failed",{reason:n})}}}Gie();const Kie="@firebase/analytics-compat",Qie="0.2.17";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e,n){this.app=e,this._delegate=n}logEvent(e,n,r){t4(this._delegate,e,n,r)}setCurrentScreen(e,n){zie(this._delegate,e,n)}setUserId(e,n){qie(this._delegate,e,n)}setUserProperties(e,n){Wie(this._delegate,e,n)}setAnalyticsCollectionEnabled(e){Hie(this._delegate,e)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pE;(function(t){t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results"})(pE||(pE={}));/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yie=t=>{const e=t.getProvider("app-compat").getImmediate(),n=t.getProvider("analytics").getImmediate();return new n4(e,n)};function Jie(){const t={Analytics:n4,settings:Fie,isSupported:Bie,EventName:pE};Yt.INTERNAL.registerComponent(new on("analytics-compat",Yie,"PUBLIC").setServiceProps(t).setMultipleInstances(!0))}Jie();Yt.registerVersion(Kie,Qie);const Xie=MM("VITE_APP_FIREBASE_CONFIG");Yt.apps.length||Yt.initializeApp(Xie);const vm=Yt.auth(),Zie=t=>(t?vm.tenantId=t:vm.tenantId=null,vm);Yt.firestore();new Yt.auth.GoogleAuthProvider;Yt.analytics();Yt.firestore.Timestamp.now();`${MM("VITE_APP_FIREBASE_PUB_KEY")}`;const ese="modulepreload",tse=function(t){return"/"+t},rC={},_u=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=tse(o),o in rC)return;rC[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let h=s.length-1;h>=0;h--){const p=s[h];if(p.href===o&&(!a||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":ese,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((h,p)=>{u.addEventListener("load",h),u.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},nse=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_u(()=>Promise.resolve().then(()=>sl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class dS extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class iC extends dS{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class sC extends dS{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class oC extends dS{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var mE;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(mE||(mE={}));class rse{constructor(e,{headers:n={},customFetch:r,region:i=mE.Any}={}){this.url=e,this.headers=n,this.region=i,this.fetch=nse(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return oe(this,arguments,void 0,function*(n,r={}){var i;try{const{headers:s,method:o,body:a,signal:l}=r;let c={},{region:u}=r;u||(u=this.region);const h=new URL(`${this.url}/${n}`);u&&u!=="any"&&(c["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let p;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",p=a):typeof a=="string"?(c["Content-Type"]="text/plain",p=a):typeof FormData<"u"&&a instanceof FormData?p=a:(c["Content-Type"]="application/json",p=JSON.stringify(a)):p=a;const m=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:p,signal:l}).catch(T=>{throw T.name==="AbortError"?T:new iC(T)}),v=m.headers.get("x-relay-error");if(v&&v==="true")throw new sC(m);if(!m.ok)throw new oC(m);let w=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),y;return w==="application/json"?y=yield m.json():w==="application/octet-stream"||w==="application/pdf"?y=yield m.blob():w==="text/event-stream"?y=m:w==="multipart/form-data"?y=yield m.formData():y=yield m.text(),{data:y,error:null,response:m}}catch(s){return s instanceof Error&&s.name==="AbortError"?{data:null,error:new iC(s)}:{data:null,error:s,response:s instanceof oC||s instanceof sC?s.context:void 0}}})}}var jn={};const wu=ZC(LG);var Pp={},Op={},Np={},Dp={},jp={},ise=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Gc=ise();const sse=Gc.fetch,r4=Gc.fetch.bind(Gc),i4=Gc.Headers,ose=Gc.Request,ase=Gc.Response,sl=Object.freeze(Object.defineProperty({__proto__:null,Headers:i4,Request:ose,Response:ase,default:r4,fetch:sse},Symbol.toStringTag,{value:"Module"})),lse=ZC(sl);var Lp={},aC;function s4(){if(aC)return Lp;aC=1,Object.defineProperty(Lp,"__esModule",{value:!0});class t extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return Lp.default=t,Lp}var lC;function o4(){if(lC)return jp;lC=1,Object.defineProperty(jp,"__esModule",{value:!0});const t=wu,e=t.__importDefault(lse),n=t.__importDefault(s4());class r{constructor(s){var o,a;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(o=s.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=s.signal,this.isMaybeSingle=(a=s.isMaybeSingle)!==null&&a!==void 0?a:!1,s.fetch?this.fetch=s.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,o){return this.headers=new Headers(this.headers),this.headers.set(s,o),this}then(s,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let l=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var u,h,p,m;let v=null,w=null,y=null,T=c.status,E=c.statusText;if(c.ok){if(this.method!=="HEAD"){const N=await c.text();N===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?w=N:w=JSON.parse(N))}const k=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),D=(p=c.headers.get("content-range"))===null||p===void 0?void 0:p.split("/");k&&D&&D.length>1&&(y=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(v={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,y=null,T=406,E="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const k=await c.text();try{v=JSON.parse(k),Array.isArray(v)&&c.status===404&&(w=[],v=null,T=200,E="OK")}catch{c.status===404&&k===""?(T=204,E="No Content"):v={message:k}}if(v&&this.isMaybeSingle&&(!((m=v==null?void 0:v.details)===null||m===void 0)&&m.includes("0 rows"))&&(v=null,T=200,E="OK"),v&&this.shouldThrowOnError)throw new n.default(v)}return{error:v,data:w,count:y,status:T,statusText:E}});return this.shouldThrowOnError||(l=l.catch(c=>{var u,h,p;return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:`${(h=c==null?void 0:c.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(p=c==null?void 0:c.code)!==null&&p!==void 0?p:""}`},data:null,count:null,status:0,statusText:""}})),l.then(s,o)}returns(){return this}overrideTypes(){return this}}return jp.default=r,jp}var cC;function a4(){if(cC)return Dp;cC=1,Object.defineProperty(Dp,"__esModule",{value:!0});const e=wu.__importDefault(o4());class n extends e.default{select(i){let s=!1;const o=(i??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:s=!0,nullsFirst:o,foreignTable:a,referencedTable:l=a}={}){const c=l?`${l}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${i}.${s?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:s,referencedTable:o=s}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${i}`),this}range(i,s,{foreignTable:o,referencedTable:a=o}={}){const l=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${i}`),this.url.searchParams.set(c,`${s-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:s=!1,settings:o=!1,buffers:a=!1,wal:l=!1,format:c="text"}={}){var u;const h=[i?"analyze":null,s?"verbose":null,o?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${p}"; options=${h};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Dp.default=n,Dp}var uC;function hS(){if(uC)return Np;uC=1,Object.defineProperty(Np,"__esModule",{value:!0});const e=wu.__importDefault(a4());class n extends e.default{eq(i,s){return this.url.searchParams.append(i,`eq.${s}`),this}neq(i,s){return this.url.searchParams.append(i,`neq.${s}`),this}gt(i,s){return this.url.searchParams.append(i,`gt.${s}`),this}gte(i,s){return this.url.searchParams.append(i,`gte.${s}`),this}lt(i,s){return this.url.searchParams.append(i,`lt.${s}`),this}lte(i,s){return this.url.searchParams.append(i,`lte.${s}`),this}like(i,s){return this.url.searchParams.append(i,`like.${s}`),this}likeAllOf(i,s){return this.url.searchParams.append(i,`like(all).{${s.join(",")}}`),this}likeAnyOf(i,s){return this.url.searchParams.append(i,`like(any).{${s.join(",")}}`),this}ilike(i,s){return this.url.searchParams.append(i,`ilike.${s}`),this}ilikeAllOf(i,s){return this.url.searchParams.append(i,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(i,s){return this.url.searchParams.append(i,`ilike(any).{${s.join(",")}}`),this}is(i,s){return this.url.searchParams.append(i,`is.${s}`),this}in(i,s){const o=Array.from(new Set(s)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cs.{${s.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(s)}`),this}containedBy(i,s){return typeof s=="string"?this.url.searchParams.append(i,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(i,`cd.{${s.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(s)}`),this}rangeGt(i,s){return this.url.searchParams.append(i,`sr.${s}`),this}rangeGte(i,s){return this.url.searchParams.append(i,`nxl.${s}`),this}rangeLt(i,s){return this.url.searchParams.append(i,`sl.${s}`),this}rangeLte(i,s){return this.url.searchParams.append(i,`nxr.${s}`),this}rangeAdjacent(i,s){return this.url.searchParams.append(i,`adj.${s}`),this}overlaps(i,s){return typeof s=="string"?this.url.searchParams.append(i,`ov.${s}`):this.url.searchParams.append(i,`ov.{${s.join(",")}}`),this}textSearch(i,s,{config:o,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const c=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${l}fts${c}.${s}`),this}match(i){return Object.entries(i).forEach(([s,o])=>{this.url.searchParams.append(s,`eq.${o}`)}),this}not(i,s,o){return this.url.searchParams.append(i,`not.${s}.${o}`),this}or(i,{foreignTable:s,referencedTable:o=s}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${i})`),this}filter(i,s,o){return this.url.searchParams.append(i,`${s}.${o}`),this}}return Np.default=n,Np}var dC;function l4(){if(dC)return Op;dC=1,Object.defineProperty(Op,"__esModule",{value:!0});const e=wu.__importDefault(hS());class n{constructor(i,{headers:s={},schema:o,fetch:a}){this.url=i,this.headers=new Headers(s),this.schema=o,this.fetch=a}select(i,s){const{head:o=!1,count:a}=s??{},l=o?"HEAD":"GET";let c=!1;const u=(i??"*").split("").map(h=>/\s/.test(h)&&!c?"":(h==='"'&&(c=!c),h)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:s,defaultToNull:o=!0}={}){var a;const l="POST";if(s&&this.headers.append("Prefer",`count=${s}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const c=i.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(c.length>0){const u=[...new Set(c)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(i,{onConflict:s,ignoreDuplicates:o=!1,count:a,defaultToNull:l=!0}={}){var c;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),s!==void 0&&this.url.searchParams.set("on_conflict",s),a&&this.headers.append("Prefer",`count=${a}`),l||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const h=i.reduce((p,m)=>p.concat(Object.keys(m)),[]);if(h.length>0){const p=[...new Set(h)].map(m=>`"${m}"`);this.url.searchParams.set("columns",p.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(i,{count:s}={}){var o;const a="PATCH";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var s;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}}return Op.default=n,Op}var hC;function cse(){if(hC)return Pp;hC=1,Object.defineProperty(Pp,"__esModule",{value:!0});const t=wu,e=t.__importDefault(l4()),n=t.__importDefault(hS());class r{constructor(s,{headers:o={},schema:a,fetch:l}={}){this.url=s,this.headers=new Headers(o),this.schemaName=a,this.fetch=l}from(s){const o=new URL(`${this.url}/${s}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(s){return new r(this.url,{headers:this.headers,schema:s,fetch:this.fetch})}rpc(s,o={},{head:a=!1,get:l=!1,count:c}={}){var u;let h;const p=new URL(`${this.url}/rpc/${s}`);let m;a||l?(h=a?"HEAD":"GET",Object.entries(o).filter(([w,y])=>y!==void 0).map(([w,y])=>[w,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([w,y])=>{p.searchParams.append(w,y)})):(h="POST",m=o);const v=new Headers(this.headers);return c&&v.set("Prefer",`count=${c}`),new n.default({method:h,url:p,headers:v,schema:this.schemaName,body:m,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Pp.default=r,Pp}Object.defineProperty(jn,"__esModule",{value:!0});jn.PostgrestError=jn.PostgrestBuilder=jn.PostgrestTransformBuilder=jn.PostgrestFilterBuilder=jn.PostgrestQueryBuilder=jn.PostgrestClient=void 0;const Eu=wu,c4=Eu.__importDefault(cse());jn.PostgrestClient=c4.default;const u4=Eu.__importDefault(l4());jn.PostgrestQueryBuilder=u4.default;const d4=Eu.__importDefault(hS());jn.PostgrestFilterBuilder=d4.default;const h4=Eu.__importDefault(a4());jn.PostgrestTransformBuilder=h4.default;const f4=Eu.__importDefault(o4());jn.PostgrestBuilder=f4.default;const p4=Eu.__importDefault(s4());jn.PostgrestError=p4.default;var use=jn.default={PostgrestClient:c4.default,PostgrestQueryBuilder:u4.default,PostgrestFilterBuilder:d4.default,PostgrestTransformBuilder:h4.default,PostgrestBuilder:f4.default,PostgrestError:p4.default};const{PostgrestClient:dse,PostgrestQueryBuilder:Zde,PostgrestFilterBuilder:ehe,PostgrestTransformBuilder:the,PostgrestBuilder:nhe,PostgrestError:rhe}=use;class hse{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,i=parseInt(r.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const fse="2.76.1",pse=`realtime-js/${fse}`,mse="1.0.0",gE=1e4,gse=1e3,vse=100;var Yd;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Yd||(Yd={}));var Vt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Vt||(Vt={}));var Vr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Vr||(Vr={}));var vE;(function(t){t.websocket="websocket"})(vE||(vE={}));var aa;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(aa||(aa={}));class yse{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const i=n.getUint8(1),s=n.getUint8(2);let o=this.HEADER_LENGTH+2;const a=r.decode(e.slice(o,o+i));o=o+i;const l=r.decode(e.slice(o,o+s));o=o+s;const c=JSON.parse(r.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:l,payload:c}}}class m4{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var We;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(We||(We={}));const fC=(t,e,n={})=>{var r;const i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((s,o)=>(s[o]=_se(o,t,e,i),s),{}):{}},_se=(t,e,n,r)=>{const i=e.find(a=>a.name===t),s=i==null?void 0:i.type,o=n[t];return s&&!r.includes(s)?g4(s,o):yE(o)},g4=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return Tse(e,n)}switch(t){case We.bool:return wse(e);case We.float4:case We.float8:case We.int2:case We.int4:case We.int8:case We.numeric:case We.oid:return Ese(e);case We.json:case We.jsonb:return bse(e);case We.timestamp:return Ise(e);case We.abstime:case We.date:case We.daterange:case We.int4range:case We.int8range:case We.money:case We.reltime:case We.text:case We.time:case We.timestamptz:case We.timetz:case We.tsrange:case We.tstzrange:return yE(e);default:return yE(e)}},yE=t=>t,wse=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Ese=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},bse=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},Tse=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,r=t[n];if(t[0]==="{"&&r==="}"){let s;const o=t.slice(1,n);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>g4(e,a))}return t},Ise=t=>typeof t=="string"?t.replace(" ","T"):t,v4=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class M_{constructor(e,n,r={},i=gE){this.channel=e,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pC;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(pC||(pC={}));class Jd{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Jd.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=Jd.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Jd.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,i){const s=this.cloneDeep(e),o=this.transformState(n),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{const h=s[c];if(h){const p=u.map(y=>y.presence_ref),m=h.map(y=>y.presence_ref),v=u.filter(y=>m.indexOf(y.presence_ref)<0),w=h.filter(y=>p.indexOf(y.presence_ref)<0);v.length>0&&(a[c]=v),w.length>0&&(l[c]=w)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},r,i)}static syncDiff(e,n,r,i){const{joins:s,leaves:o}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;const u=(c=e[a])!==null&&c!==void 0?c:[];if(e[a]=this.cloneDeep(l),u.length>0){const h=e[a].map(m=>m.presence_ref),p=u.filter(m=>h.indexOf(m.presence_ref)<0);e[a].unshift(...p)}r(a,u,l)}),this.map(o,(a,l)=>{let c=e[a];if(!c)return;const u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=c,i(a,c,l),c.length===0&&delete e[a]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const i=e[r];return"metas"in i?n[r]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):n[r]=i,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mC;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(mC||(mC={}));var Xd;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xd||(Xd={}));var Ci;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ci||(Ci={}));class fS{constructor(e,n={config:{}},r){var i,s;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=Vt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new M_(this,Vr.join,this.params,this.timeout),this.rejoinTimer=new m4(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Vt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Vt.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Vt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Vr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Jd(this),this.broadcastEndpointURL=v4(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((s=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||s===void 0)&&s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,i,s;if(this.socket.isConnected()||this.socket.connect(),this.state==Vt.closed){const{config:{broadcast:o,presence:a,private:l}}=this.params,c=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&i!==void 0?i:[],u=!!this.bindings[Xd.PRESENCE]&&this.bindings[Xd.PRESENCE].length>0||((s=this.params.config.presence)===null||s===void 0?void 0:s.enabled)===!0,h={},p={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(m=>e==null?void 0:e(Ci.CHANNEL_ERROR,m)),this._onClose(()=>e==null?void 0:e(Ci.CLOSED)),this.updateJoinPayload(Object.assign({config:p},h)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:m})=>{var v;if(this.socket.setAuth(),m===void 0){e==null||e(Ci.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,y=(v=w==null?void 0:w.length)!==null&&v!==void 0?v:0,T=[];for(let E=0;E<y;E++){const b=w[E],{filter:{event:k,schema:D,table:N,filter:x}}=b,S=m&&m[E];if(S&&S.event===k&&S.schema===D&&S.table===N&&S.filter===x)T.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=Vt.errored,e==null||e(Ci.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=T,e&&e(Ci.SUBSCRIBED);return}}).receive("error",m=>{this.state=Vt.errored,e==null||e(Ci.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ci.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===Vt.joined&&e===Xd.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var i;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let l=a.statusText;try{const c=await a.json();l=c.error||c.message||l}catch{}return Promise.reject(new Error(l))}async send(e,n={}){var r,i;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:s,payload:o}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:s,payload:o,private:this.private}]})};try{const c=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=c.body)===null||i===void 0?void 0:i.cancel()),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(s=>{var o,a,l;const c=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((l=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||l===void 0)&&l.ack)&&s("ok"),c.receive("ok",()=>s("ok")),c.receive("error",()=>s("error")),c.receive("timeout",()=>s("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Vt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Vr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new M_(this,Vr.leave,{},e),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Vt.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const i=new AbortController,s=setTimeout(()=>i.abort(),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(s),o}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new M_(this,e,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>vse){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=Vr;if(r&&[a,l,c,u].indexOf(o)>=0&&r!==this._joinRef())return;let p=this._onMessage(o,n,r);if(n&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var v,w,y;return((v=m.filter)===null||v===void 0?void 0:v.event)==="*"||((y=(w=m.filter)===null||w===void 0?void 0:w.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(m=>m.callback(p,r)):(s=this.bindings[o])===null||s===void 0||s.filter(m=>{var v,w,y,T,E,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,D=(v=m.filter)===null||v===void 0?void 0:v.event;return k&&((w=n.ids)===null||w===void 0?void 0:w.includes(k))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const k=(E=(T=m==null?void 0:m.filter)===null||T===void 0?void 0:T.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return k==="*"||k===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:w,table:y,commit_timestamp:T,type:E,errors:b}=v;p=Object.assign(Object.assign({},{schema:w,table:y,commit_timestamp:T,eventType:E,new:{},old:{},errors:b}),this._getPayloadRecords(v))}m.callback(p,r)})}_isClosed(){return this.state===Vt.closed}_isJoined(){return this.state===Vt.joined}_isJoining(){return this.state===Vt.joining}_isLeaving(){return this.state===Vt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const i=e.toLocaleLowerCase(),s={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===r&&fS.isEqual(i.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Vr.close,{},e)}_onError(e){this._on(Vr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Vt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fC(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fC(e.columns,e.old_record)),n}}const V_=()=>{},Mp={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Sse=[1e3,2e3,5e3,1e4],xse=1e4,Ase=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Rse{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=gE,this.transport=null,this.heartbeatIntervalMs=Mp.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=V_,this.ref=0,this.reconnectTimer=null,this.logger=V_,this.conn=null,this.sendBuffer=[],this.serializer=new yse,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let s;return i?s=i:typeof fetch>"u"?s=(...o)=>_u(()=>Promise.resolve().then(()=>sl),void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):s=fetch,(...o)=>s(...o)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${vE.websocket}`,this.httpEndpoint=v4(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=hse.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:mse}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Yd.connecting:return aa.Connecting;case Yd.open:return aa.Open;case Yd.closing:return aa.Closing;default:return aa.Closed}}isConnected(){return this.connectionState()===aa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,i=this.getChannels().find(s=>s.topic===r);if(i)return i;{const s=new fS(`realtime:${e}`,n,this);return this.channels.push(s),s}}push(e){const{topic:n,event:r,payload:i,ref:s}=e,o=()=>{this.encode(e,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${n} ${r} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(gse,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},Mp.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(c){this.log("error","error in heartbeat callback",c)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:i,payload:s,ref:o}=n,a=o?`(${o})`:"",l=s.status||"";this.log("receive",`${l} ${r} ${i} ${a}`.trim(),s),this.channels.filter(c=>c._isMember(r)).forEach(c=>c._trigger(i,s,o)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Vr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${e}${r}${i}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([Ase],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const i={access_token:n,version:pse};n&&r.updateJoinPayload(i),r.joinedOnce&&r._isJoined()&&r._push(Vr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${e} callback`,i)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new m4(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Mp.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,i,s,o,a,l,c,u;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:gE,this.heartbeatIntervalMs=(i=e==null?void 0:e.heartbeatIntervalMs)!==null&&i!==void 0?i:Mp.HEARTBEAT_INTERVAL,this.worker=(s=e==null?void 0:e.worker)!==null&&s!==void 0?s:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:V_,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e==null?void 0:e.reconnectAfterMs)!==null&&l!==void 0?l:h=>Sse[h-1]||xse,this.encode=(c=e==null?void 0:e.encode)!==null&&c!==void 0?c:(h,p)=>p(JSON.stringify(h)),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class pS extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ct(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class kse extends pS{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _E extends pS{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const mS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_u(()=>Promise.resolve().then(()=>sl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Cse=()=>oe(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield _u(()=>Promise.resolve().then(()=>sl),void 0)).Response:Response}),wE=t=>{if(Array.isArray(t))return t.map(n=>wE(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,r])=>{const i=n.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));e[i]=wE(r)}),e},Pse=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},F_=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Ose=(t,e,n)=>oe(void 0,void 0,void 0,function*(){const r=yield Cse();t instanceof r&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const s=t.status||500,o=(i==null?void 0:i.statusCode)||s+"";e(new kse(F_(i),s,o))}).catch(i=>{e(new _E(F_(i),i))}):e(new _E(F_(t),t))}),Nse=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Pse(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,e!=null&&e.duplex&&(i.duplex=e.duplex),Object.assign(Object.assign({},i),n))};function Nf(t,e,n,r,i,s){return oe(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,Nse(e,r,i,s)).then(l=>{if(!l.ok)throw l;return r!=null&&r.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Ose(l,a,r))})})}function qh(t,e,n,r){return oe(this,void 0,void 0,function*(){return Nf(t,"GET",e,n,r)})}function Lr(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Nf(t,"POST",e,r,i,n)})}function EE(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Nf(t,"PUT",e,r,i,n)})}function Dse(t,e,n,r){return oe(this,void 0,void 0,function*(){return Nf(t,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function gS(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Nf(t,"DELETE",e,r,i,n)})}class jse{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return oe(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ct(e))return{data:null,error:e};throw e}})}}var y4;class Lse{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[y4]="BlobDownloadBuilder",this.promise=null}asStream(){return new jse(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return oe(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ct(e))return{data:null,error:e};throw e}})}}y4=Symbol.toStringTag;const Mse={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},gC={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Vse{constructor(e,n={},r,i){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=mS(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,i){return oe(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},gC),i);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&r instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l)),s.append("",r)):typeof FormData<"u"&&r instanceof FormData?(s=r,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=r,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(a=Object.assign(Object.assign({},a),i.headers));const c=this._removeEmptyFolders(n),u=this._getFinalPath(c),h=yield(e=="PUT"?EE:Lr)(this.fetch,`${this.url}/object/${u}`,s,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:c,id:h.Id,fullPath:h.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ct(s))return{data:null,error:s};throw s}})}upload(e,n,r){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,i){return oe(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",n);try{let l;const c=Object.assign({upsert:gC.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",c.cacheControl)):(l=r,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);const h=yield EE(this.fetch,a.toString(),l,{headers:u});return{data:{path:s,fullPath:h.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(ct(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,n){return oe(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const i=Object.assign({},this.headers);n!=null&&n.upsert&&(i["x-upsert"]="true");const s=yield Lr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new pS("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}update(e,n,r){return oe(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return oe(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}})}copy(e,n,r){return oe(this,void 0,void 0,function*(){try{return{data:{path:(yield Lr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}})}createSignedUrl(e,n,r){return oe(this,void 0,void 0,function*(){try{let i=this._getFinalPath(e),s=yield Lr(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const o=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}})}createSignedUrls(e,n,r){return oe(this,void 0,void 0,function*(){try{const i=yield Lr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),s=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}})}download(e,n){const i=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),o=s?`?${s}`:"",a=this._getFinalPath(e),l=()=>qh(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Lse(l,this.shouldThrowOnError)}info(e){return oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield qh(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:wE(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}exists(e){return oe(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield Dse(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r)&&r instanceof _E){const i=r.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),i=[],s=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";s!==""&&i.push(s);const a=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${c}`)}}}remove(e){return oe(this,void 0,void 0,function*(){try{return{data:yield gS(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}list(e,n,r){return oe(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},Mse),n),{prefix:e||""});return{data:yield Lr(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}})}listV2(e,n){return oe(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Lr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const _4="2.76.1",w4={"X-Client-Info":`storage-js/${_4}`};class Fse{constructor(e,n={},r,i){this.shouldThrowOnError=!1;const s=new URL(e);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase.")),this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},w4),n),this.fetch=mS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return oe(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ct(e))return{data:null,error:e};throw e}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield qh(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}createBucket(e){return oe(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ct(i))return{data:null,error:i};throw i}})}updateBucket(e,n){return oe(this,void 0,void 0,function*(){try{return{data:yield EE(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ct(r))return{data:null,error:r};throw r}})}emptyBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield gS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}}class $se{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},w4),n),this.fetch=mS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Lr(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}listBuckets(e){return oe(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),i=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`,s=yield qh(this.fetch,i,{headers:this.headers});return{data:Array.isArray(s)?s.filter(a=>a.type==="ANALYTICS"):[],error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield gS(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}}const vS={"X-Client-Info":`storage-js/${_4}`,"Content-Type":"application/json"};class E4 extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Xn(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}class $_ extends E4{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Use extends E4{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var vC;(function(t){t.InternalError="InternalError",t.S3VectorConflictException="S3VectorConflictException",t.S3VectorNotFoundException="S3VectorNotFoundException",t.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",t.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",t.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(vC||(vC={}));const yS=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_u(()=>Promise.resolve().then(()=>sl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Bse=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},yC=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),zse=(t,e,n)=>oe(void 0,void 0,void 0,function*(){if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,s=t;if(typeof s.json=="function")s.json().then(o=>{const a=(o==null?void 0:o.statusCode)||(o==null?void 0:o.code)||i+"";e(new $_(yC(o),i,a))}).catch(()=>{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new $_(a,i,o))});else{const o=i+"",a=s.statusText||`HTTP ${i} error`;e(new $_(a,i,o))}}else e(new Use(yC(t),t))}),qse=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!r?i:(Bse(r)?(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(r)):i.body=r,Object.assign(Object.assign({},i),n))};function Wse(t,e,n,r,i,s){return oe(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(n,qse(e,r,i,s)).then(l=>{if(!l.ok)throw l;if(r!=null&&r.noResolveJson)return l;const c=l.headers.get("content-type");return!c||!c.includes("application/json")?{}:l.json()}).then(l=>o(l)).catch(l=>zse(l,a,r))})})}function Zn(t,e,n,r,i){return oe(this,void 0,void 0,function*(){return Wse(t,"POST",e,r,i,n)})}class Hse{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vS),n),this.fetch=yS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Zn(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}getIndex(e,n){return oe(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xn(r))return{data:null,error:r};throw r}})}listIndexes(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return oe(this,void 0,void 0,function*(){try{return{data:(yield Zn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xn(r))return{data:null,error:r};throw r}})}}class Gse{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vS),n),this.fetch=yS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Zn(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}getVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}listVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Zn(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}queryVectors(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}deleteVectors(e){return oe(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Zn(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}}class Kse{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},vS),n),this.fetch=yS(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Zn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}getBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:yield Zn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}listBuckets(){return oe(this,arguments,void 0,function*(e={}){try{return{data:yield Zn(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}deleteBucket(e){return oe(this,void 0,void 0,function*(){try{return{data:(yield Zn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xn(n))return{data:null,error:n};throw n}})}}class Qse extends Kse{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Yse(this.url,this.headers,e,this.fetch)}}class Yse extends Hse{constructor(e,n,r,i){super(e,n,i),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return oe(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return oe(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return oe(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return oe(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Jse(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Jse extends Gse{constructor(e,n,r,i,s){super(e,n,s),this.vectorBucketName=r,this.indexName=i}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return oe(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return oe(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return oe(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return oe(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return oe(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Xse extends Fse{constructor(e,n={},r,i){super(e,n,r,i)}from(e){return new Vse(this.url,this.headers,e,this.fetch)}get vectors(){return new Qse(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new $se(this.url+"/iceberg",this.headers,this.fetch)}}const Zse="2.76.1";let Ed="";typeof Deno<"u"?Ed="deno":typeof document<"u"?Ed="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ed="react-native":Ed="node";const eoe={"X-Client-Info":`supabase-js-${Ed}/${Zse}`},toe={headers:eoe},noe={schema:"public"},roe={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ioe={},soe=t=>{let e;return t?e=t:typeof fetch>"u"?e=r4:e=fetch,(...n)=>e(...n)},ooe=()=>typeof Headers>"u"?i4:Headers,aoe=(t,e,n)=>{const r=soe(n),i=ooe();return async(s,o)=>{var a;const l=(a=await e())!==null&&a!==void 0?a:t;let c=new i(o==null?void 0:o.headers);return c.has("apikey")||c.set("apikey",t),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),r(s,Object.assign(Object.assign({},o),{headers:c}))}};function loe(t){return t.endsWith("/")?t:t+"/"}function coe(t,e){var n,r;const{db:i,auth:s,realtime:o,global:a}=t,{db:l,auth:c,realtime:u,global:h}=e,p={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),s),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(n=h==null?void 0:h.headers)!==null&&n!==void 0?n:{}),(r=a==null?void 0:a.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return t.accessToken?p.accessToken=t.accessToken:delete p.accessToken,p}function uoe(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(loe(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const b4="2.76.1",Dl=30*1e3,bE=3,U_=bE*Dl,doe="http://localhost:9999",hoe="supabase.auth.token",foe={"X-Client-Info":`gotrue-js/${b4}`},TE="X-Supabase-Api-Version",T4={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},poe=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,moe=10*60*1e3;class Wh extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ue(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class goe extends Wh{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function voe(t){return ue(t)&&t.name==="AuthApiError"}class la extends Wh{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Mo extends Wh{constructor(e,n,r,i){super(e,r,i),this.name=n,this.status=r}}class Os extends Mo{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function yoe(t){return ue(t)&&t.name==="AuthSessionMissingError"}class El extends Mo{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vp extends Mo{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Fp extends Mo{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function _oe(t){return ue(t)&&t.name==="AuthImplicitGrantRedirectError"}class _C extends Mo{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class IE extends Mo{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function B_(t){return ue(t)&&t.name==="AuthRetryableFetchError"}class wC extends Mo{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class SE extends Mo{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),EC=` 	
\r=`.split(""),woe=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<EC.length;e+=1)t[EC[e].charCodeAt(0)]=-2;for(let e=0;e<kg.length;e+=1)t[kg[e].charCodeAt(0)]=e;return t})();function bC(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(kg[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(kg[r]),e.queuedBits-=6}}function I4(t,e,n){const r=woe[t];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function TC(t){const e=[],n=o=>{e.push(String.fromCodePoint(o))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},s=o=>{Toe(o,r,n)};for(let o=0;o<t.length;o+=1)I4(t.charCodeAt(o),i,s);return e.join("")}function Eoe(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function boe(t,e){for(let n=0;n<t.length;n+=1){let r=t.charCodeAt(n);if(r>55295&&r<=56319){const i=(r-55296)*1024&65535;r=(t.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}Eoe(r,e)}}function Toe(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let r=1;r<6;r+=1)if(!(t>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function mc(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};for(let i=0;i<t.length;i+=1)I4(t.charCodeAt(i),n,r);return new Uint8Array(e)}function Ioe(t){const e=[];return boe(t,n=>e.push(n)),new Uint8Array(e)}function va(t){const e=[],n={queue:0,queuedBits:0},r=i=>{e.push(i)};return t.forEach(i=>bC(i,n,r)),bC(null,n,r),e.join("")}function Soe(t){return Math.round(Date.now()/1e3)+t}function xoe(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qn=()=>typeof window<"u"&&typeof document<"u",Wo={tested:!1,writable:!1},S4=()=>{if(!Qn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Wo.tested)return Wo.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Wo.tested=!0,Wo.writable=!0}catch{Wo.tested=!0,Wo.writable=!1}return Wo.writable};function Aoe(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,s)=>{e[s]=i})}catch{}return n.searchParams.forEach((r,i)=>{e[i]=r}),e}const x4=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...n)=>_u(()=>Promise.resolve().then(()=>sl),void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Roe=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",jl=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Ho=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Cs=async(t,e)=>{await t.removeItem(e)};class ey{constructor(){this.promise=new ey.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}ey.promiseConstructor=Promise;function z_(t){const e=t.split(".");if(e.length!==3)throw new SE("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!poe.test(e[r]))throw new SE("JWT not in base64url format");return{header:JSON.parse(TC(e[0])),payload:JSON.parse(TC(e[1])),signature:mc(e[2]),raw:{header:e[0],payload:e[1]}}}async function koe(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function Coe(t,e){return new Promise((r,i)=>{(async()=>{for(let s=0;s<1/0;s++)try{const o=await t(s);if(!e(s,null,o)){r(o);return}}catch(o){if(!e(s,o)){i(o);return}}})()})}function Poe(t){return("0"+t.toString(16)).substr(-2)}function Ooe(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let i="";for(let s=0;s<56;s++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(e),Array.from(e,Poe).join("")}async function Noe(t){const n=new TextEncoder().encode(t),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(s=>String.fromCharCode(s)).join("")}async function Doe(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await Noe(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function bl(t,e,n=!1){const r=Ooe();let i=r;n&&(i+="/PASSWORD_RECOVERY"),await jl(t,`${e}-code-verifier`,i);const s=await Doe(r);return[s,r===s?"plain":"s256"]}const joe=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Loe(t){const e=t.headers.get(TE);if(!e||!e.match(joe))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Moe(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Voe(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Foe=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Tl(t){if(!Foe.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function q_(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function IC(t){return JSON.parse(JSON.stringify(t))}const Xo=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),$oe=[502,503,504];async function SC(t){var e;if(!Roe(t))throw new IE(Xo(t),0);if($oe.includes(t.status))throw new IE(Xo(t),t.status);let n;try{n=await t.json()}catch(s){throw new la(Xo(s),s)}let r;const i=Loe(t);if(i&&i.getTime()>=T4["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new wC(Xo(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Os}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new wC(Xo(n),t.status,n.weak_password.reasons);throw new goe(Xo(n),t.status||500,r)}const Uoe=(t,e,n,r)=>{const i={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function ye(t,e,n,r){var i;const s=Object.assign({},r==null?void 0:r.headers);s[TE]||(s[TE]=T4["2024-01-01"].name),r!=null&&r.jwt&&(s.Authorization=`Bearer ${r.jwt}`);const o=(i=r==null?void 0:r.query)!==null&&i!==void 0?i:{};r!=null&&r.redirectTo&&(o.redirect_to=r.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await Boe(t,e,n+a,{headers:s,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(l):{data:Object.assign({},l),error:null}}async function Boe(t,e,n,r,i,s){const o=Uoe(e,r,i,s);let a;try{a=await t(n,Object.assign({},o))}catch(l){throw console.error(l),new IE(Xo(l),0)}if(a.ok||await SC(a),r!=null&&r.noResolveJson)return a;try{return await a.json()}catch(l){await SC(l)}}function Dr(t){var e;let n=null;Woe(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=Soe(t.expires_in)));const r=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:r},error:null}}function xC(t){const e=Dr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=t.weak_password),e}function $s(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function zoe(t){return{data:t,error:null}}function qoe(t){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s}=t,o=hs(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:n,hashed_token:r,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function AC(t){return t}function Woe(t){return t.access_token&&t.refresh_token&&t.expires_in}const W_=["global","local","others"];class Hoe{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=x4(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=W_[0]){if(W_.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${W_.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:$s})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=hs(e,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r==null?void 0:r.newEmail,delete i.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:qoe,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ue(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:$s})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:AC});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c[`${y}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ue(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){Tl(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:$s})}catch(n){if(ue(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){Tl(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:$s})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){Tl(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:$s})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Tl(e.userId);try{const{data:n,error:r}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteFactor(e){Tl(e.userId),Tl(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,i,s,o,a,l;try{const c={nextPage:null,lastPage:0,total:0},u=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(s=(i=e==null?void 0:e.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:AC});if(u.error)throw u.error;const h=await u.json(),p=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return m.length>0&&(m.forEach(v=>{const w=parseInt(v.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(v.split(";")[1].split("=")[1]);c[`${y}Page`]=w}),c.total=parseInt(p)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(ue(c))return{data:{clients:[]},error:c};throw c}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}}function RC(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const Il={debug:!!(globalThis&&S4()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class A4 extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Goe extends A4{}async function Koe(t,e,n){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),Il.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,i.name);try{return await n()}finally{Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,i.name)}}else{if(e===0)throw Il.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Goe(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Il.debug)try{const s=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Qoe(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function R4(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function Yoe(t){return parseInt(t,16)}function Joe(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function Xoe(t){var e;const{chainId:n,domain:r,expirationTime:i,issuedAt:s=new Date,nonce:o,notBefore:a,requestId:l,resources:c,scheme:u,uri:h,version:p}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(p!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${p}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const m=R4(t.address),v=u?`${u}://${r}`:r,w=t.statement?`${t.statement}
`:"",y=`${v} wants you to sign in with your Ethereum account:
${m}

${w}`;let T=`URI: ${h}
Version: ${p}
Chain ID: ${n}${o?`
Nonce: ${o}`:""}
Issued At: ${s.toISOString()}`;if(i&&(T+=`
Expiration Time: ${i.toISOString()}`),a&&(T+=`
Not Before: ${a.toISOString()}`),l&&(T+=`
Request ID: ${l}`),c){let E=`
Resources:`;for(const b of c){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);E+=`
- ${b}`}T+=E}return`${y}
${T}`}class Dt extends Error{constructor({message:e,code:n,cause:r,name:i}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(s=i??(r instanceof Error?r.name:void 0))!==null&&s!==void 0?s:"Unknown Error",this.code=n}}class Cg extends Dt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function Zoe({error:t,options:e}){var n,r,i;const{publicKey:s}=e;if(!s)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Dt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=s.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Dt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((r=s.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new Dt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((i=s.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new Dt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new Dt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new Dt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return s.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new Dt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new Dt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const o=window.location.hostname;if(k4(o)){if(s.rp.id!==o)return new Dt({message:`The RP ID "${s.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(s.user.id.byteLength<1||s.user.id.byteLength>64)return new Dt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function eae({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Dt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new Dt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const r=window.location.hostname;if(k4(r)){if(n.rpId!==r)return new Dt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new Dt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new Dt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new Dt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class tae{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const nae=new tae;function rae(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:r}=t,i=hs(t,["challenge","user","excludeCredentials"]),s=mc(e).buffer,o=Object.assign(Object.assign({},n),{id:mc(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:s,user:o});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let l=0;l<r.length;l++){const c=r[l];a.excludeCredentials[l]=Object.assign(Object.assign({},c),{id:mc(c.id).buffer,type:c.type||"public-key",transports:c.transports})}}return a}function iae(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,r=hs(t,["challenge","allowCredentials"]),i=mc(e).buffer,s=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){s.allowCredentials=new Array(n.length);for(let o=0;o<n.length;o++){const a=n[o];s.allowCredentials[o]=Object.assign(Object.assign({},a),{id:mc(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return s}function sae(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:va(new Uint8Array(t.response.attestationObject)),clientDataJSON:va(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function oae(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,r=t.getClientExtensionResults(),i=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:va(new Uint8Array(i.authenticatorData)),clientDataJSON:va(new Uint8Array(i.clientDataJSON)),signature:va(new Uint8Array(i.signature)),userHandle:i.userHandle?va(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function k4(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function kC(){var t,e;return!!(Qn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function aae(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cg("Browser returned unexpected credential type",e)}:{data:null,error:new Cg("Empty credential response",e)}}catch(e){return{data:null,error:Zoe({error:e,options:t})}}}async function lae(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Cg("Browser returned unexpected credential type",e)}:{data:null,error:new Cg("Empty credential response",e)}}catch(e){return{data:null,error:eae({error:e,options:t})}}}const cae={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},uae={userVerification:"preferred",hints:["security-key"]};function Pg(...t){const e=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(const i of t)if(i)for(const s in i){const o=i[s];if(o!==void 0)if(Array.isArray(o))r[s]=o;else if(n(o))r[s]=o;else if(e(o)){const a=r[s];e(a)?r[s]=Pg(a,o):r[s]=Pg(o)}else r[s]=o}return r}function dae(t,e){return Pg(cae,t,e||{})}function hae(t,e){return Pg(uae,t,e||{})}class fae{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:i},s){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!o)return{data:null,error:a};const l=i??nae.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:c}=o.webauthn.credential_options.publicKey;c.name||(c.name=`${c.id}:${r}`),c.displayName||(c.displayName=c.name)}switch(o.webauthn.type){case"create":{const c=dae(o.webauthn.credential_options.publicKey,s==null?void 0:s.create),{data:u,error:h}=await aae({publicKey:c,signal:l});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const c=hae(o.webauthn.credential_options.publicKey,s==null?void 0:s.request),{data:u,error:h}=await lae(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:c,signal:l}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return ue(o)?{data:null,error:o}:{data:null,error:new la("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}},s){if(!n)return{data:null,error:new Wh("rpId is required for WebAuthn authentication")};try{if(!kC())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:s});if(!o)return{data:null,error:a};const{webauthn:l}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:l.type,rpId:n,rpOrigins:r,credential_response:l.credential_response}})}catch(o){return ue(o)?{data:null,error:o}:{data:null,error:new la("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i},s){if(!n)return{data:null,error:new Wh("rpId is required for WebAuthn registration")};try{if(!kC())return{data:null,error:new la("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(p=>p.factor_type==="webauthn"&&p.friendly_name===e&&p.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u==null?void 0:u.id}):void 0),{data:null,error:a};const{data:l,error:c}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:s});return l?this._verify({factorId:o.id,challengeId:l.challengeId,webauthn:{rpId:n,rpOrigins:r,type:l.webauthn.type,credential_response:l.webauthn.credential_response}}):{data:null,error:c}}catch(o){return ue(o)?{data:null,error:o}:{data:null,error:new la("Unexpected error in register",o)}}}}Qoe();const pae={url:doe,storageKey:hoe,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:foe,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function CC(t,e,n){return await n()}const Sl={};class Hh{get jwks(){var e,n;return(n=(e=Sl[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Sl[this.storageKey]=Object.assign(Object.assign({},Sl[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Sl[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Sl[this.storageKey]=Object.assign(Object.assign({},Sl[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Hh.nextInstanceID,Hh.nextInstanceID+=1,this.instanceID>0&&Qn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},pae),e);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new Hoe({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=x4(i.fetch),this.lock=i.lock||CC,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:Qn()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=Koe:this.lock=CC,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new fae(this)},this.persistSession?(i.storage?this.storage=i.storage:S4()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=RC(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=RC(this.memoryStorage)),Qn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async s=>{this._debug("received broadcast notification from other tab or client",s),await this._notifyAllSubscribers(s.data.event,s.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${b4}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=Aoe(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),Qn()&&this.detectSessionInUrl&&r!=="none"){const{data:i,error:s}=await this._getSessionFromURL(n,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),_oe(s)){const l=(e=s.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:s}}return await this._removeSession(),{error:s}}const{session:o,redirectType:a}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ue(n)?{error:n}:{error:new la("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,i;try{const s=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(i=e==null?void 0:e.options)===null||i===void 0?void 0:i.captchaToken}},xform:Dr}),{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signUp(e){var n,r,i;try{let s;if("email"in e){const{email:u,password:h,options:p}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await bl(this.storage,this.storageKey)),s=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p==null?void 0:p.emailRedirectTo,body:{email:u,password:h,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:v},xform:Dr})}else if("phone"in e){const{phone:u,password:h,options:p}=e;s=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(r=p==null?void 0:p.data)!==null&&r!==void 0?r:{},channel:(i=p==null?void 0:p.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:Dr})}else throw new Vp("You must provide either an email or phone number and a password");const{data:o,error:a}=s;if(a||!o)return{data:{user:null,session:null},error:a};const l=o.session,c=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(s){if(ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithPassword(e){try{let n;if("email"in e){const{email:s,password:o,options:a}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xC})}else if("phone"in e){const{phone:s,password:o,options:a}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xC})}else throw new Vp("You must provide either an email or phone number and a password");const{data:r,error:i}=n;return i?{data:{user:null,session:null},error:i}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new El}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:i})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,i,s;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(s=e.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,i,s,o,a,l,c,u,h,p;let m,v;if("message"in e)m=e.message,v=e.signature;else{const{chain:w,wallet:y,statement:T,options:E}=e;let b;if(Qn())if(typeof y=="object")b=y;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")b=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof y!="object"||!(E!=null&&E.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=y}const k=new URL((n=E==null?void 0:E.url)!==null&&n!==void 0?n:window.location.href),D=await b.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const N=R4(D[0]);let x=(r=E==null?void 0:E.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!x){const C=await b.request({method:"eth_chainId"});x=Yoe(C)}const S={domain:k.host,address:N,statement:T,uri:k.href,version:"1",chainId:x,nonce:(i=E==null?void 0:E.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(s=E==null?void 0:E.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=E==null?void 0:E.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(l=E==null?void 0:E.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(c=E==null?void 0:E.signInWithEthereum)===null||c===void 0?void 0:c.requestId,resources:(u=E==null?void 0:E.signInWithEthereum)===null||u===void 0?void 0:u.resources};m=Xoe(S),v=await b.request({method:"personal_sign",params:[Joe(m),N]})}try{const{data:w,error:y}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:v},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Dr});if(y)throw y;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new El}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:y})}catch(w){if(ue(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(e){var n,r,i,s,o,a,l,c,u,h,p,m;let v,w;if("message"in e)v=e.message,w=e.signature;else{const{chain:y,wallet:T,statement:E,options:b}=e;let k;if(Qn())if(typeof T=="object")k=T;else{const N=window;if("solana"in N&&typeof N.solana=="object"&&("signIn"in N.solana&&typeof N.solana.signIn=="function"||"signMessage"in N.solana&&typeof N.solana.signMessage=="function"))k=N.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=T}const D=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const N=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let x;if(Array.isArray(N)&&N[0]&&typeof N[0]=="object")x=N[0];else if(N&&typeof N=="object"&&"signedMessage"in N&&"signature"in N)x=N;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in x&&"signature"in x&&(typeof x.signedMessage=="string"||x.signedMessage instanceof Uint8Array)&&x.signature instanceof Uint8Array)v=typeof x.signedMessage=="string"?x.signedMessage:new TextDecoder().decode(x.signedMessage),w=x.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");v=[`${D.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((s=b==null?void 0:b.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(x=>`- ${x}`)]:[]].join(`
`);const N=await k.signMessage(new TextEncoder().encode(v),"utf8");if(!N||!(N instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=N}}try{const{data:y,error:T}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:v,signature:va(w)},!((p=e.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Dr});if(T)throw T;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new El}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:T})}catch(y){if(ue(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(e){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`),[r,i]=(n??"").split("/");try{const{data:s,error:o}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Dr});if(await Cs(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!s||!s.session||!s.user?{data:{user:null,session:null,redirectType:null},error:new El}:(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:i??null}),error:o})}catch(s){if(ue(s))return{data:{user:null,session:null,redirectType:null},error:s};throw s}}async signInWithIdToken(e){try{const{options:n,provider:r,token:i,access_token:s,nonce:o}=e,a=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:i,access_token:s,nonce:o,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Dr}),{data:l,error:c}=a;return c?{data:{user:null,session:null},error:c}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new El}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:c})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,i,s,o;try{if("email"in e){const{email:a,options:l}=e;let c=null,u=null;this.flowType==="pkce"&&([c,u]=await bl(this.storage,this.storageKey));const{error:h}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},create_user:(r=l==null?void 0:l.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:c,code_challenge_method:u},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:l}=e,{data:c,error:u}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(s=l==null?void 0:l.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:u}}throw new Vp("You must provide either an email or phone number.")}catch(a){if(ue(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var n,r;try{let i,s;"options"in e&&(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo,s=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:o,error:a}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:i,xform:Dr});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,c=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:c,session:l},error:null}}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(e){var n,r,i;try{let s=null,o=null;return this.flowType==="pkce"&&([s,o]=await bl(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:s,code_challenge_method:o}),headers:this.headers,xform:zoe})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Os;const{error:i}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:i}})}catch(e){if(ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:i,options:s}=e,{error:o}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},redirectTo:s==null?void 0:s.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:r,type:i,options:s}=e,{data:o,error:a}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:i,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new Vp("You must provide either an email or phone number and a type")}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ho(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<U_:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const o=await Ho(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=q_()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(l,c,u)=>(!o&&c==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,c,u))})}return{data:{session:e},error:null}}const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{session:null},error:s}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:$s}):await this._useSession(async n=>{var r,i,s;const{data:o,error:a}=n;if(a)throw a;return!(!((r=o.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Os}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0,xform:$s})})}catch(n){if(ue(n))return yoe(n)&&(await this._removeSession(),await Cs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:i,error:s}=r;if(s)throw s;if(!i.session)throw new Os;const o=i.session;let a=null,l=null;this.flowType==="pkce"&&e.email!=null&&([a,l]=await bl(this.storage,this.storageKey));const{data:c,error:u}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:l}),jwt:o.access_token,xform:$s});if(u)throw u;return o.user=c.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(r){if(ue(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Os;const n=Date.now()/1e3;let r=n,i=!0,s=null;const{payload:o}=z_(e.access_token);if(o.exp&&(r=o.exp,i=r<=n),i){const{data:a,error:l}=await this._callRefreshToken(e.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!a)return{data:{user:null,session:null},error:null};s=a}else{const{data:a,error:l}=await this._getUser(e.access_token);if(l)throw l;s={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return{data:{user:s.user,session:s},error:null}}catch(n){if(ue(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:o,error:a}=n;if(a)throw a;e=(r=o.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Os;const{data:i,error:s}=await this._callRefreshToken(e.refresh_token);return s?{data:{user:null,session:null},error:s}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ue(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!Qn())throw new Fp("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Fp(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new _C("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fp("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new _C("No code detected.");const{data:E,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:i,access_token:s,refresh_token:o,expires_in:a,expires_at:l,token_type:c}=e;if(!s||!a||!o||!c)throw new Fp("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let p=u+h;l&&(p=parseInt(l));const m=p-u;m*1e3<=Dl&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const v=p-h;u-v>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",v,p,u):u-v<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",v,p,u);const{data:w,error:y}=await this._getUser(s);if(y)throw y;const T={provider_token:r,provider_refresh_token:i,access_token:s,expires_in:h,expires_at:p,refresh_token:o,token_type:c,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:e.type},error:null}}catch(r){if(ue(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ho(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{error:s};const o=(r=i.session)===null||r===void 0?void 0:r.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(voe(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await Cs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=xoe(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,i;try{const{data:{session:s},error:o}=n;if(o)throw o;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(s){await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s),console.error(s)}})}async resetPasswordForEmail(e,n={}){let r=null,i=null;this.flowType==="pkce"&&([r,i]=await bl(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:i,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(s){if(ue(s))return{data:null,error:s};throw s}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ue(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:i}=await this._useSession(async s=>{var o,a,l,c,u;const{data:h,error:p}=s;if(p)throw p;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(c=h.session)===null||c===void 0?void 0:c.access_token)!==null&&u!==void 0?u:void 0})});if(i)throw i;return Qn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ue(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:i,data:{session:s}}=n;if(i)throw i;const{options:o,provider:a,token:l,access_token:c,nonce:u}=e,h=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=s==null?void 0:s.access_token)!==null&&r!==void 0?r:void 0,body:{provider:a,id_token:l,access_token:c,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Dr}),{data:p,error:m}=h;return m?{data:{user:null,session:null},error:m}:!p||!p.session||!p.user?{data:{user:null,session:null},error:new El}:(p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("USER_UPDATED",p.session)),{data:p,error:m})}catch(i){if(ue(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)throw o;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(i=(r=s.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await Coe(async i=>(i>0&&await koe(200*Math.pow(2,i-1)),this._debug(n,"refreshing attempt",i),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Dr})),(i,s)=>{const o=200*Math.pow(2,i);return s&&B_(s)&&Date.now()+o-r<Dl})}catch(r){if(this._debug(n,"error",r),ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),Qn()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await Ho(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Ho(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await jl(this.userStorage,this.storageKey+"-user",o)),i.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:q_()}else if(i&&!i.user&&!i.user){const o=await Ho(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await Cs(this.storage,this.storageKey+"-user"),await jl(this.storage,this.storageKey,i)):i.user=q_()}if(this._debug(r,"session from storage",i),!this._isValidSession(i)){this._debug(r,"session is not valid"),i!==null&&await this._removeSession();return}const s=((n=i.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<U_;if(this._debug(r,`session has${s?"":" not"} expired with margin of ${U_}s`),s){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),B_(o)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(i.access_token);!a&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(r,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(r,"error",i),console.error(i);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Os;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new ey;const{data:s,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!s.session)throw new Os;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={data:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(s){if(this._debug(i,"error",s),ue(s)){const o={data:null,error:s};return B_(s)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(o),o}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(e,n,r=!0){const i=`#_notifyAllSubscribers(${e})`;this._debug(i,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const s=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,n)}catch(l){s.push(l)}});if(await Promise.all(o),s.length>0){for(let a=0;a<s.length;a+=1)console.error(s[a]);throw s[0]}}finally{this._debug(i,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await jl(this.userStorage,this.storageKey+"-user",{user:n.user});const i=Object.assign({},n);delete i.user;const s=IC(i);await jl(this.storage,this.storageKey,s)}else{const i=IC(n);await jl(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await Cs(this.storage,this.storageKey),await Cs(this.storage,this.storageKey+"-code-verifier"),await Cs(this.storage,this.storageKey+"-user"),this.userStorage&&await Cs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Dl);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((r.expires_at*1e3-e)/Dl);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${Dl}ms, refresh threshold is ${bE} ticks`),i<=bE&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof A4)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const i=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&i.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&i.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[s,o]=await bl(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(a.toString())}if(r!=null&&r.queryParams){const s=new URLSearchParams(r.queryParams);i.push(s.toString())}return r!=null&&r.skipBrowserRedirect&&i.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${i.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;return s?{data:null,error:s}:await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,i;const{data:s,error:o}=n;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:c}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(r=s==null?void 0:s.session)===null||r===void 0?void 0:r.access_token});return c?{data:null,error:c}:(e.factorType==="totp"&&l.type==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(n){if(ue(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?sae(e.webauthn.credential_response):oae(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:l}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:i,error:s}=n;if(s)return{data:null,error:s};const o=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=i==null?void 0:i.session)===null||r===void 0?void 0:r.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:rae(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:iae(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ue(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const i={all:[],phone:[],totp:[],webauthn:[]};for(const s of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])i.all.push(s),s.status==="verified"&&i[s.factor_type].push(s);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var n,r;const{data:{session:i},error:s}=e;if(s)return{data:null,error:s};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=z_(i.access_token);let a=null;o.aal&&(a=o.aal);let l=a;((r=(n=i.user.factors)===null||n===void 0?void 0:n.filter(h=>h.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(l="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:l,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(a=>a.kid===e);if(r)return r;const i=Date.now();if(r=this.jwks.keys.find(a=>a.kid===e),r&&this.jwks_cached_at+moe>i)return r;const{data:s,error:o}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=i,r=s.keys.find(a=>a.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:m,error:v}=await this.getSession();if(v||!m.session)return{data:null,error:v};r=m.session.access_token}const{header:i,payload:s,signature:o,raw:{header:a,payload:l}}=z_(r);n!=null&&n.allowExpired||Moe(s.exp);const c=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!c){const{error:m}=await this.getUser(r);if(m)throw m;return{data:{claims:s,header:i,signature:o},error:null}}const u=Voe(i.alg),h=await crypto.subtle.importKey("jwk",c,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Ioe(`${a}.${l}`)))throw new SE("Invalid JWT signature");return{data:{claims:s,header:i,signature:o},error:null}}catch(r){if(ue(r))return{data:null,error:r};throw r}}}Hh.nextInstanceID=0;const mae=Hh;class gae extends mae{constructor(e){super(e)}}class vae{constructor(e,n,r){var i,s,o;this.supabaseUrl=e,this.supabaseKey=n;const a=uoe(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const l=`sb-${a.hostname.split(".")[0]}-auth-token`,c={db:noe,realtime:ioe,auth:Object.assign(Object.assign({},roe),{storageKey:l}),global:toe},u=coe(r??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=aoe(n,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new dse(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new Xse(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new rse(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,storageKey:o,flowType:a,lock:l,debug:c},u,h){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new gae({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),u),storageKey:o,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:i,userStorage:s,flowType:a,lock:l,debug:c,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Rse(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const yae=(t,e,n)=>new vae(t,e,n);function _ae(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}_ae()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const wae="https://ttctclwuiwfudfzdcaux.supabase.co",Eae="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",bae=yae(wae,Eae),Tae="https://ttctclwuiwfudfzdcaux.supabase.co",H_="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4";async function pe(t,e={}){const{method:n="GET",body:r,headers:i={}}=e,s=`${Tae}/functions/v1/${t}`,o={"Content-Type":"application/json",apikey:H_,...i};try{const{data:{session:l}}=await bae.auth.getSession();l!=null&&l.access_token?o.Authorization=`Bearer ${l.access_token}`:o.Authorization=`Bearer ${H_}`}catch{o.Authorization=`Bearer ${H_}`}const a={method:n,headers:o};r&&(a.body=JSON.stringify(r));try{const l=await fetch(s,a),c=await l.json();if(!l.ok)throw new Error(c.error||c.message||"An error occurred");return c}catch(l){throw console.error(`Error calling edge function ${t}:`,l),l}}const Ee={events:{getAll:(t={})=>pe("events",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>pe("events",{method:"POST",body:{action:"getById",id:t}}),create:t=>pe("events",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>pe("events",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>pe("events",{method:"POST",body:{action:"delete",id:t}})},users:{getAll:(t={})=>pe("users",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>pe("users",{method:"POST",body:{action:"getById",id:t}}),getByFirebaseUid:t=>pe("users",{method:"POST",body:{action:"getByFirebaseUid",firebaseUid:t}}),create:t=>pe("users",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>pe("users",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>pe("users",{method:"POST",body:{action:"delete",id:t}}),getOrganizations:t=>pe("users",{method:"POST",body:{action:"getOrganizations",userId:t}}),addToOrganization:(t,e,n)=>pe("users",{method:"POST",body:{action:"addToOrganization",userId:t,orgId:e,role:n}}),removeFromOrganization:(t,e)=>pe("users",{method:"POST",body:{action:"removeFromOrganization",userId:t,orgId:e}})},organizations:{getAll:(t={})=>pe("organizations",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>pe("organizations",{method:"POST",body:{action:"getById",id:t}}),create:t=>pe("organizations",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>pe("organizations",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>pe("organizations",{method:"POST",body:{action:"delete",id:t}}),getUsers:t=>pe("organizations",{method:"POST",body:{action:"getUsers",orgId:t}}),addUser:(t,e,n)=>pe("organizations",{method:"POST",body:{action:"addUser",orgId:t,userId:e,role:n}}),removeUser:(t,e)=>pe("organizations",{method:"POST",body:{action:"removeUser",orgId:t,userId:e}})},tickets:{getByEventId:t=>pe("tickets",{method:"POST",body:{action:"getByEventId",eventId:t}}),getById:t=>pe("tickets",{method:"POST",body:{action:"getById",id:t}}),create:t=>pe("tickets",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>pe("tickets",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>pe("tickets",{method:"POST",body:{action:"delete",id:t}}),checkAvailability:(t,e)=>pe("tickets",{method:"POST",body:{action:"checkAvailability",ticketTypeId:t,quantity:e}})},orders:{getAll:(t={})=>pe("orders",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>pe("orders",{method:"POST",body:{action:"getById",id:t}}),create:t=>pe("orders",{method:"POST",body:{action:"create",data:t}}),updateStatus:(t,e,n)=>pe("orders",{method:"POST",body:{action:"updateStatus",id:t,status:e,paymentIntentId:n}}),calculateTotal:(t,e)=>pe("orders",{method:"POST",body:{action:"calculateTotal",items:t,discountCodeId:e}})},forms:{getAll:(t={})=>pe("forms",{method:"POST",body:{action:"getAll",filters:t}}),getById:t=>pe("forms",{method:"POST",body:{action:"getById",id:t}}),create:t=>pe("forms",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>pe("forms",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>pe("forms",{method:"POST",body:{action:"delete",id:t}}),publish:t=>pe("forms",{method:"POST",body:{action:"update",id:t,data:{is_published:!0}}}),unpublish:t=>pe("forms",{method:"POST",body:{action:"update",id:t,data:{is_published:!1}}}),submitForm:(t,e,n)=>pe("forms",{method:"POST",body:{action:"submitForm",formId:t,responses:e,email:n}}),getSubmissions:t=>pe("forms",{method:"POST",body:{action:"getSubmissions",formId:t}})},discounts:{getByEventId:t=>pe("discounts",{method:"POST",body:{action:"getByEventId",eventId:t}}),getById:t=>pe("discounts",{method:"POST",body:{action:"getById",id:t}}),create:t=>pe("discounts",{method:"POST",body:{action:"create",data:t}}),update:(t,e)=>pe("discounts",{method:"POST",body:{action:"update",id:t,data:e}}),delete:t=>pe("discounts",{method:"POST",body:{action:"delete",id:t}}),validateCode:(t,e)=>pe("discounts",{method:"POST",body:{action:"validateCode",code:t,eventId:e}}),incrementUsage:t=>pe("discounts",{method:"POST",body:{action:"incrementUsage",id:t}})}},xE={async getAll(t={}){return(await Ee.users.getAll(t)).data},async getById(t){return(await Ee.users.getById(t)).data},async getByFirebaseUid(t){return(await Ee.users.getByFirebaseUid(t)).data},async create(t){return(await Ee.users.create(t)).data},async update(t,e){return(await Ee.users.update(t,e)).data},async delete(t){return await Ee.users.delete(t),!0},async getOrganizations(t){return(await Ee.users.getOrganizations(t)).data},async addToOrganization(t,e,n="member"){return(await Ee.users.addToOrganization(t,e,n)).data},async removeFromOrganization(t,e){return await Ee.users.removeFromOrganization(t,e),!0},async getFullUserWithToken(){const t=Yt.auth().currentUser;if(!t)return null;const e=await this.getByFirebaseUid(t.uid);return e?[e]:[]}};var Iae={VITE_SUPABASE_URL:"https://ttctclwuiwfudfzdcaux.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",VITE_APP_ENV:"development",VITE_FIREBASE_API_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_FIREBASE_AUTH_DOMAIN:"fractal-tickets.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"fractal-tickets",VITE_FIREBASE_STORAGE_BUCKET:"fractal-tickets.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"123289322265",VITE_FIREBASE_APP_ID:"1:123289322265:web:d31675e0df128103083b88",VITE_FIREBASE_PUB_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Sae=Iae.VITE_APP_FIREBASE_TENANT_ID,bu=Zie(Sae),ty=async t=>{var e,n;try{await xE.getByFirebaseUid(t.uid)||await xE.create({email:t.email,first_name:((e=t.displayName)==null?void 0:e.split(" ")[0])||null,last_name:((n=t.displayName)==null?void 0:n.split(" ").slice(1).join(" "))||null,firebase_uid:t.uid})}catch(r){console.error("Error syncing Firebase user to Supabase:",r)}},xae=async(t,e)=>{const n=await bu.signInWithEmailAndPassword(t,e);await ty(n.user)},C4=async()=>{const t=await bu.signInWithPopup(new Yt.auth.GoogleAuthProvider);await ty(t.user)},Aae=async()=>{await bu.signOut()},Rae=async(t,e)=>{const n=await bu.createUserWithEmailAndPassword(t,e);return await n.user.sendEmailVerification(),await ty(n.user),n.user},kae=async t=>{await bu.sendPasswordResetEmail(t)},Cae=async()=>Yt.auth().currentUser,Pae=t=>({authToken:t.multiFactor.user.accessToken}),Oae=async t=>{const{authToken:e}=Pae(t);e&&(aT.update({authToken:e}),gn.update({isSignedIn:!0}))},Nae=async()=>{const t=await Cae();let e=null;return t&&(await ty(t),e=await xE.getByFirebaseUid(t.uid),e&&Jm.update(e)),e},Dae=()=>{bu.signOut(),aT.reset(),gn.reset(),Jm.reset()},jae=()=>{var n;const t=Gr(),e=async()=>{try{await Aae(),aT.reset(),gn.reset(),Jm.reset(),rt.update({message:"Logged out successfully!",variant:"success"}),t("/login")}catch{rt.update({message:"Failed to log out. Please try again.",variant:"danger"})}};return f.jsx(vp,{bg:"light",expand:"lg",className:"mb-4 border-bottom",children:f.jsxs(On,{fluid:!0,children:[f.jsx(vp.Brand,{as:dt,to:"/admin",children:"Ticketing Admin"}),f.jsx(vp.Toggle,{"aria-controls":"admin-navbar-nav"}),f.jsxs(vp.Collapse,{id:"admin-navbar-nav",children:[f.jsxs(Rl,{className:"me-auto",children:[f.jsx(Rl.Link,{as:dt,to:"/admin",children:"Dashboard"}),f.jsx(Rl.Link,{as:dt,to:"/admin/events",children:"Events"}),f.jsx(Rl.Link,{as:dt,to:"/admin/forms",children:"Forms"})]}),f.jsx(Rl,{children:f.jsxs(mp,{align:"end",children:[f.jsxs(mp.Toggle,{variant:"outline-secondary",id:"user-dropdown",children:[f.jsx(Ae,{icon:MH,className:"me-2"}),((n=Jm.value)==null?void 0:n.email)||"Account"]}),f.jsx(mp.Menu,{children:f.jsxs(mp.Item,{onClick:e,children:[f.jsx(Ae,{icon:NH,className:"me-2"}),"Logout"]})})]})})]})]})})},Lae=({children:t,className:e,fluid:n})=>{var r;return(r=gn.value)!=null&&r.isLoading?f.jsx("div",{children:f.jsx("div",{className:"min-vh-100 w-100 d-flex justify-content-center align-items-center flex-grow-1",children:f.jsx(ls,{message:"Loading...",className:"text-center"})})}):f.jsxs("div",{children:[f.jsx(jae,{}),f.jsx(On,{fluid:!!n,className:e,children:t})]})},Mae=()=>!gn.value.isSignedIn&&!gn.value.isLoading?f.jsx(bN,{to:`/login?redirect=${window.location.pathname}`}):f.jsx(Lae,{children:f.jsx(Ob,{})}),Vae="0",Fae="576px",$ae="768px",Uae="992px",Bae="1200px",zae="1400px",qae="1600px",Wae={xs:Vae,sm:Fae,md:$ae,lg:Uae,xl:Bae,xxl:zae,xxxl:qae},G_=ur({windowSize:{breakPoint:null,height:null}}),bd=Object.entries(Wae).reduce((t,[e,n])=>{const r=parseInt(`${n}`.replace("px",""),10),{lastBP:i,...s}=t;return{...s,[e]:{min:r,max:Number.MAX_SAFE_INTEGER},...i&&{[i]:{min:t[i].min,max:r-1}},lastBP:e}},{});function Hae(t){var e;return(e=Object.entries(bd).filter(([,{min:n,max:r}])=>n!=null&&r!=null&&t>=n&&t<=r)[0])==null?void 0:e[0]}const Gae=()=>{const{windowSize:t}=G_.value,e=I.useCallback(()=>{const s=Hae(window.innerWidth);s===t.breakPoint?G_.update({windowSize:t}):G_.update({windowSize:{breakPoint:s,height:window.scrollY}})},[t]),n=I.useCallback(s=>{if(!t.breakPoint)return!1;const o=bd[t.breakPoint],a=bd[s];return t.breakPoint===s||a.max<=o.min},[t]),r=I.useCallback(s=>t.breakPoint===s,[t]),i=I.useCallback(s=>{if(!t.breakPoint)return!1;const o=bd[t.breakPoint],a=bd[s];return t.breakPoint===s||a.min>=o.max},[t]);return I.useEffect(()=>(window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)),[e]),{...t,isBreakpoint:r,isBreakpointUp:n,isBreakpointDown:i}},Kae=({signal:t,animation:e,placeholderType:n,children:r,template:i,className:s})=>{var o;return t?(o=t==null?void 0:t.value)!=null&&o.isLoading?f.jsxs(fA,{as:n||"div",animation:e||"glow",className:"mb-0",children:[!i&&f.jsx("div",{className:"w-100 d-flex justify-content-center text-primary",children:f.jsx("div",{className:"spinner-border"})}),i==="text"&&f.jsx(fA,{xs:12,as:n||"p",className:`${s} text-loadable`}),i==="component"&&f.jsx(ls,{className:"d-flex align-items-center justify-content-center"})]}):f.jsx("div",{children:r}):new Error("SIGNAL REQUIRED FOR LOADABLE")};var Qae={VITE_SUPABASE_URL:"https://ttctclwuiwfudfzdcaux.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR0Y3RjbHd1aXdmdWRmemRjYXV4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1MDc4NDcsImV4cCI6MjA3NzA4Mzg0N30.W40i2tUsnE6TR18f9O3NHYK_O9wnuvXf3RrbLZbiUz4",VITE_APP_ENV:"development",VITE_FIREBASE_API_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",VITE_FIREBASE_AUTH_DOMAIN:"fractal-tickets.firebaseapp.com",VITE_FIREBASE_PROJECT_ID:"fractal-tickets",VITE_FIREBASE_STORAGE_BUCKET:"fractal-tickets.firebasestorage.app",VITE_FIREBASE_MESSAGING_SENDER_ID:"123289322265",VITE_FIREBASE_APP_ID:"1:123289322265:web:d31675e0df128103083b88",VITE_FIREBASE_PUB_KEY:"AIzaSyCpJk3LVwdwe1SalXMXsKhQ2rUj9Vv259M",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Yae=()=>{const{breakPoint:t}=Gae();return vm.onAuthStateChanged(async e=>{gn.update({isLoading:!0}),e?(await Oae(e),await Nae()):gn.value.isSignedIn&&await Dae(),gn.update({isLoading:!1})}),f.jsxs(On,{fluid:!0,className:"p-0",children:[Qae.VITE_DEV_IS_BREAKPOINT_VISABLE==="true"&&f.jsx(lo,{bg:"primary",className:"breakpointBadge",children:t}),f.jsx(Kae,{signal:gn,children:f.jsx(Ob,{})})]})},Jae=({notification:t,onRemoveNotification:e})=>{const[n,r]=I.useState(!1),{timeout:i=6e3,variant:s,displayMessage:o,id:a}=t,l=()=>{r(!0),setTimeout(()=>{e(a)},750)};return I.useEffect(()=>{const c=setTimeout(()=>l(),i);return()=>{clearTimeout(c)}},[]),f.jsx(et,{className:`z-index-9999 mx-auto slide mt-16 d-flex justify-content-center ${n?"slide-out":"slide-in"}`,children:f.jsx(be,{sm:10,md:8,lg:6,xl:4,className:`notification notification-${s} shadow-sm rounded-4 p-16`,children:f.jsxs("div",{className:"d-flex justify-content-center align-items-center",children:[f.jsx("div",{className:"text-center",children:(Array.isArray(o)?o:[o]).map(c=>f.jsx("div",{children:c},c))}),f.jsx("div",{tabIndex:0,role:"button","aria-label":"close",onClick:()=>e(a),className:"ms-auto pe-16",children:f.jsx(Ae,{style:{height:"15px",width:"15px"},icon:WH})})]})})})},Xae=({notification:t,onRemoveNotification:e})=>f.jsx("div",{className:"modal fade show modal-background d-block z-index-10",role:"dialog",children:f.jsx("div",{className:"modal-dialog modal-dialog-centered",children:f.jsxs("div",{className:"modal-content",children:[f.jsx("div",{className:"modal-header bg-danger text-white",children:"An Error has occured!"}),f.jsx("div",{className:"modal-body",children:t.displayMessage}),f.jsx("div",{className:"modal-footer",children:f.jsx(de,{className:"btn btn-dark",onClick:()=>e(t.id),type:"button",children:"Close"})})]})})}),Zae=({onRemoveNotification:t})=>f.jsx("div",{className:"z-index-9999 container-fliud fixed-top",children:rt.value.notificationArray.map(e=>f.jsx(Jae,{notification:e,onRemoveNotification:t},e.id))}),ele=()=>{const{notificationArray:t}=rt.value,e=I.useCallback(i=>{const s=rt.value.notificationArray.filter(o=>o.id!==i);rt.update({notificationArray:s})},[]),n=I.useMemo(()=>{const i={modal:[],toast:[],window:[]};return t==null||t.forEach(s=>{var o;i[s.displayType]&&((o=i[s.displayType])==null||o.push(s))}),i},[t==null?void 0:t.length]),r=t==null?void 0:t.filter(i=>i.displayType==="dev");return r!=null&&r.length&&(r==null||r.forEach(i=>console.error(i))),n.window.length?(window.alert(n.window[0].message),rt.reset(),null):n.modal.length?f.jsx(Xae,{notification:n.modal[0],onRemoveNotification:e}):n.toast.length?f.jsx(Zae,{notifications:n.toast,onRemoveNotification:e}):f.jsx("div",{})},fi={async getAll(t={}){return(await Ee.events.getAll(t)).data},async getById(t){return(await Ee.events.getById(t)).data},async create(t){return(await Ee.events.create(t)).data},async update(t,e){return(await Ee.events.update(t,e)).data},async delete(t){return await Ee.events.delete(t),!0},async publish(t){return this.update(t,{status:"PUBLISHED"})},async unpublish(t){return this.update(t,{status:"DRAFT"})}},Br={async getAll(t={}){return(await Ee.forms.getAll(t)).data},async getById(t){return(await Ee.forms.getById(t)).data},async create(t){return(await Ee.forms.create(t)).data},async update(t,e){return(await Ee.forms.update(t,e)).data},async delete(t){return await Ee.forms.delete(t),!0},async publish(t){return(await Ee.forms.publish(t)).data},async unpublish(t){return(await Ee.forms.unpublish(t)).data},async submitForm(t,e,n=null){return(await Ee.forms.submitForm(t,e,n)).data},async getSubmissions(t){return(await Ee.forms.getSubmissions(t)).data}},P4={async getAll(t={}){return(await Ee.orders.getAll(t)).data},async getById(t){return(await Ee.orders.getById(t)).data},async create(t){return(await Ee.orders.create(t)).data},async updateStatus(t,e,n=null){return(await Ee.orders.updateStatus(t,e,n)).data},async updateTicketInventory(t){return!0},async calculateTotal(t,e=null){return await Ee.orders.calculateTotal(t,e)}};function tle(){const[t,e]=I.useState({events:0,forms:0,orders:0,revenue:0});I.useEffect(()=>{n()},[]);const n=async()=>{try{const[r,i,s]=await Promise.all([fi.getAll(),Br.getAll(),P4.getAll()]),o=s.filter(a=>a.status==="PAID").reduce((a,l)=>a+parseFloat(l.total),0);e({events:r.length,forms:i.length,orders:s.length,revenue:o})}catch(r){console.error("Error loading stats:",r)}};return f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsxs(be,{children:[f.jsx("h2",{children:"Dashboard"}),f.jsx("p",{className:"text-muted",children:"Headless Ticketing Platform"})]})}),f.jsxs(et,{className:"mb-4",children:[f.jsx(be,{md:3,children:f.jsx(ae,{className:"text-center",children:f.jsxs(ae.Body,{children:[f.jsx(Ae,{icon:HH,size:"2x",className:"text-primary mb-3"}),f.jsx("h3",{className:"mb-1",children:t.events}),f.jsx("p",{className:"text-muted mb-0",children:"Events"})]})})}),f.jsx(be,{md:3,children:f.jsx(ae,{className:"text-center",children:f.jsxs(ae.Body,{children:[f.jsx(Ae,{icon:PH,size:"2x",className:"text-success mb-3"}),f.jsx("h3",{className:"mb-1",children:t.forms}),f.jsx("p",{className:"text-muted mb-0",children:"Forms"})]})})}),f.jsx(be,{md:3,children:f.jsx(ae,{className:"text-center",children:f.jsxs(ae.Body,{children:[f.jsx(Ae,{icon:UH,size:"2x",className:"text-info mb-3"}),f.jsx("h3",{className:"mb-1",children:t.orders}),f.jsx("p",{className:"text-muted mb-0",children:"Orders"})]})})}),f.jsx(be,{md:3,children:f.jsx(ae,{className:"text-center",children:f.jsxs(ae.Body,{children:[f.jsx(Ae,{icon:zH,size:"2x",className:"text-warning mb-3"}),f.jsxs("h3",{className:"mb-1",children:["$",t.revenue.toFixed(2)]}),f.jsx("p",{className:"text-muted mb-0",children:"Revenue"})]})})})]}),f.jsxs(et,{children:[f.jsx(be,{md:6,className:"mb-4",children:f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Quick Actions"}),f.jsxs("div",{className:"d-flex flex-column gap-2",children:[f.jsx(dt,{to:"/admin/events/new",children:f.jsx(de,{variant:"outline-primary",className:"w-100",children:"Create New Event"})}),f.jsx(dt,{to:"/admin/forms/new",children:f.jsx(de,{variant:"outline-success",className:"w-100",children:"Create New Form"})}),f.jsx(dt,{to:"/admin/events",children:f.jsx(de,{variant:"outline-secondary",className:"w-100",children:"View All Events"})})]})]})})}),f.jsx(be,{md:6,className:"mb-4",children:f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Getting Started"}),f.jsxs("ol",{className:"mb-0",children:[f.jsx("li",{className:"mb-2",children:"Create your first event"}),f.jsx("li",{className:"mb-2",children:"Add ticket types and pricing"}),f.jsx("li",{className:"mb-2",children:"Build a custom registration form"}),f.jsx("li",{className:"mb-2",children:"Publish and get your embed code"}),f.jsx("li",{children:"Start selling tickets!"})]})]})})})]})]})}const O4=6048e5,nle=864e5,PC=Symbol.for("constructDateFrom");function Io(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&PC in t?t[PC](e):t instanceof Date?new t.constructor(e):new Date(e)}function Kr(t,e){return Io(e||t,t)}let rle={};function ny(){return rle}function Gh(t,e){var a,l,c,u;const n=ny(),r=(e==null?void 0:e.weekStartsOn)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.weekStartsOn)??n.weekStartsOn??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,i=Kr(t,e==null?void 0:e.in),s=i.getDay(),o=(s<r?7:0)+s-r;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function Og(t,e){return Gh(t,{...e,weekStartsOn:1})}function N4(t,e){const n=Kr(t,e==null?void 0:e.in),r=n.getFullYear(),i=Io(n,0);i.setFullYear(r+1,0,4),i.setHours(0,0,0,0);const s=Og(i),o=Io(n,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const a=Og(o);return n.getTime()>=s.getTime()?r+1:n.getTime()>=a.getTime()?r:r-1}function OC(t){const e=Kr(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function ile(t,...e){const n=Io.bind(null,t||e.find(r=>typeof r=="object"));return e.map(n)}function NC(t,e){const n=Kr(t,e==null?void 0:e.in);return n.setHours(0,0,0,0),n}function sle(t,e,n){const[r,i]=ile(n==null?void 0:n.in,t,e),s=NC(r),o=NC(i),a=+s-OC(s),l=+o-OC(o);return Math.round((a-l)/nle)}function ole(t,e){const n=N4(t,e),r=Io((e==null?void 0:e.in)||t,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),Og(r)}function ale(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function lle(t){return!(!ale(t)&&typeof t!="number"||isNaN(+Kr(t)))}function cle(t,e){const n=Kr(t,e==null?void 0:e.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const ule={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},dle=(t,e,n)=>{let r;const i=ule[t];return typeof i=="string"?r=i:e===1?r=i.one:r=i.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function K_(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const hle={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},fle={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ple={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},mle={date:K_({formats:hle,defaultWidth:"full"}),time:K_({formats:fle,defaultWidth:"full"}),dateTime:K_({formats:ple,defaultWidth:"full"})},gle={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vle=(t,e,n,r)=>gle[t];function od(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let i;if(r==="formatting"&&t.formattingValues){const o=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):o;i=t.formattingValues[a]||t.formattingValues[o]}else{const o=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;i=t.values[a]||t.values[o]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const yle={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_le={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wle={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Ele={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ble={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Tle={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Ile=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Sle={ordinalNumber:Ile,era:od({values:yle,defaultWidth:"wide"}),quarter:od({values:_le,defaultWidth:"wide",argumentCallback:t=>t-1}),month:od({values:wle,defaultWidth:"wide"}),day:od({values:Ele,defaultWidth:"wide"}),dayPeriod:od({values:ble,defaultWidth:"wide",formattingValues:Tle,defaultFormattingWidth:"wide"})};function ad(t){return(e,n={})=>{const r=n.width,i=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const o=s[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],l=Array.isArray(a)?Ale(a,h=>h.test(o)):xle(a,h=>h.test(o));let c;c=t.valueCallback?t.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;const u=e.slice(o.length);return{value:c,rest:u}}}function xle(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Ale(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function Rle(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const i=r[0],s=e.match(t.parsePattern);if(!s)return null;let o=t.valueCallback?t.valueCallback(s[0]):s[0];o=n.valueCallback?n.valueCallback(o):o;const a=e.slice(i.length);return{value:o,rest:a}}}const kle=/^(\d+)(th|st|nd|rd)?/i,Cle=/\d+/i,Ple={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Ole={any:[/^b/i,/^(a|c)/i]},Nle={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dle={any:[/1/i,/2/i,/3/i,/4/i]},jle={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Lle={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Mle={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Vle={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Fle={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$le={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Ule={ordinalNumber:Rle({matchPattern:kle,parsePattern:Cle,valueCallback:t=>parseInt(t,10)}),era:ad({matchPatterns:Ple,defaultMatchWidth:"wide",parsePatterns:Ole,defaultParseWidth:"any"}),quarter:ad({matchPatterns:Nle,defaultMatchWidth:"wide",parsePatterns:Dle,defaultParseWidth:"any",valueCallback:t=>t+1}),month:ad({matchPatterns:jle,defaultMatchWidth:"wide",parsePatterns:Lle,defaultParseWidth:"any"}),day:ad({matchPatterns:Mle,defaultMatchWidth:"wide",parsePatterns:Vle,defaultParseWidth:"any"}),dayPeriod:ad({matchPatterns:Fle,defaultMatchWidth:"any",parsePatterns:$le,defaultParseWidth:"any"})},Ble={code:"en-US",formatDistance:dle,formatLong:mle,formatRelative:vle,localize:Sle,match:Ule,options:{weekStartsOn:0,firstWeekContainsDate:1}};function zle(t,e){const n=Kr(t,e==null?void 0:e.in);return sle(n,cle(n))+1}function qle(t,e){const n=Kr(t,e==null?void 0:e.in),r=+Og(n)-+ole(n);return Math.round(r/O4)+1}function D4(t,e){var u,h,p,m;const n=Kr(t,e==null?void 0:e.in),r=n.getFullYear(),i=ny(),s=(e==null?void 0:e.firstWeekContainsDate)??((h=(u=e==null?void 0:e.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??i.firstWeekContainsDate??((m=(p=i.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=Io((e==null?void 0:e.in)||t,0);o.setFullYear(r+1,0,s),o.setHours(0,0,0,0);const a=Gh(o,e),l=Io((e==null?void 0:e.in)||t,0);l.setFullYear(r,0,s),l.setHours(0,0,0,0);const c=Gh(l,e);return+n>=+a?r+1:+n>=+c?r:r-1}function Wle(t,e){var a,l,c,u;const n=ny(),r=(e==null?void 0:e.firstWeekContainsDate)??((l=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:l.firstWeekContainsDate)??n.firstWeekContainsDate??((u=(c=n.locale)==null?void 0:c.options)==null?void 0:u.firstWeekContainsDate)??1,i=D4(t,e),s=Io((e==null?void 0:e.in)||t,0);return s.setFullYear(i,0,r),s.setHours(0,0,0,0),Gh(s,e)}function Hle(t,e){const n=Kr(t,e==null?void 0:e.in),r=+Gh(n,e)-+Wle(n,e);return Math.round(r/O4)+1}function Fe(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Ps={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Fe(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Fe(n+1,2)},d(t,e){return Fe(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Fe(t.getHours()%12||12,e.length)},H(t,e){return Fe(t.getHours(),e.length)},m(t,e){return Fe(t.getMinutes(),e.length)},s(t,e){return Fe(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),i=Math.trunc(r*Math.pow(10,n-3));return Fe(i,e.length)}},xl={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},DC={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),i=r>0?r:1-r;return n.ordinalNumber(i,{unit:"year"})}return Ps.y(t,e)},Y:function(t,e,n,r){const i=D4(t,r),s=i>0?i:1-i;if(e==="YY"){const o=s%100;return Fe(o,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):Fe(s,e.length)},R:function(t,e){const n=N4(t);return Fe(n,e.length)},u:function(t,e){const n=t.getFullYear();return Fe(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Fe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Fe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Ps.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Fe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const i=Hle(t,r);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):Fe(i,e.length)},I:function(t,e,n){const r=qle(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Fe(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Ps.d(t,e)},D:function(t,e,n){const r=zle(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Fe(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return Fe(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const i=t.getDay(),s=(i-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return Fe(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),i=r===0?7:r;switch(e){case"i":return String(i);case"ii":return Fe(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let i;switch(r===12?i=xl.noon:r===0?i=xl.midnight:i=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let i;switch(r>=17?i=xl.evening:r>=12?i=xl.afternoon:r>=4?i=xl.morning:i=xl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Ps.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Ps.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Fe(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Fe(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Ps.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Ps.s(t,e)},S:function(t,e){return Ps.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return LC(r);case"XXXX":case"XX":return Zo(r);case"XXXXX":case"XXX":default:return Zo(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return LC(r);case"xxxx":case"xx":return Zo(r);case"xxxxx":case"xxx":default:return Zo(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+jC(r,":");case"OOOO":default:return"GMT"+Zo(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+jC(r,":");case"zzzz":default:return"GMT"+Zo(r,":")}},t:function(t,e,n){const r=Math.trunc(+t/1e3);return Fe(r,e.length)},T:function(t,e,n){return Fe(+t,e.length)}};function jC(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Math.trunc(r/60),s=r%60;return s===0?n+String(i):n+String(i)+e+Fe(s,2)}function LC(t,e){return t%60===0?(t>0?"-":"+")+Fe(Math.abs(t)/60,2):Zo(t,e)}function Zo(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),i=Fe(Math.trunc(r/60),2),s=Fe(r%60,2);return n+i+e+s}const MC=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},j4=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Gle=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],i=n[2];if(!i)return MC(t,e);let s;switch(r){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",MC(r,e)).replace("{{time}}",j4(i,e))},Kle={p:j4,P:Gle},Qle=/^D+$/,Yle=/^Y+$/,Jle=["D","DD","YY","YYYY"];function Xle(t){return Qle.test(t)}function Zle(t){return Yle.test(t)}function ece(t,e,n){const r=tce(t,e,n);if(console.warn(r),Jle.includes(t))throw new RangeError(r)}function tce(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const nce=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,rce=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ice=/^'([^]*?)'?$/,sce=/''/g,oce=/[a-zA-Z]/;function Kc(t,e,n){var u,h,p,m,v,w,y,T;const r=ny(),i=(n==null?void 0:n.locale)??r.locale??Ble,s=(n==null?void 0:n.firstWeekContainsDate)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.firstWeekContainsDate)??r.firstWeekContainsDate??((m=(p=r.locale)==null?void 0:p.options)==null?void 0:m.firstWeekContainsDate)??1,o=(n==null?void 0:n.weekStartsOn)??((w=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:w.weekStartsOn)??r.weekStartsOn??((T=(y=r.locale)==null?void 0:y.options)==null?void 0:T.weekStartsOn)??0,a=Kr(t,n==null?void 0:n.in);if(!lle(a))throw new RangeError("Invalid time value");let l=e.match(rce).map(E=>{const b=E[0];if(b==="p"||b==="P"){const k=Kle[b];return k(E,i.formatLong)}return E}).join("").match(nce).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const b=E[0];if(b==="'")return{isToken:!1,value:ace(E)};if(DC[b])return{isToken:!0,value:E};if(b.match(oce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:E}});i.localize.preprocessor&&(l=i.localize.preprocessor(a,l));const c={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return l.map(E=>{if(!E.isToken)return E.value;const b=E.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&Zle(b)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&Xle(b))&&ece(b,e,String(t));const k=DC[b[0]];return k(a,b,i.localize,c)}).join("")}function ace(t){const e=t.match(ice);return e?e[1].replace(sce,"'"):t}const Te=(t,e="info")=>{const n=rt.value.notificationArray||[];n.push({id:Date.now(),displayMessage:t,displayType:"toast",variant:e}),rt.update({notificationArray:n})};function lce(){const[t,e]=I.useState([]),[n,r]=I.useState(!0);I.useEffect(()=>{i()},[]);const i=async()=>{try{r(!0);const l=await fi.getAll();e(l)}catch{Te("Error loading events","error")}finally{r(!1)}},s=async l=>{if(window.confirm("Are you sure you want to delete this event?"))try{await fi.delete(l),Te("Event deleted successfully","success"),i()}catch{Te("Error deleting event","error")}},o=async(l,c)=>{try{c==="PUBLISHED"?(await fi.unpublish(l),Te("Event unpublished","success")):(await fi.publish(l),Te("Event published successfully","success")),i()}catch{Te("Error updating event status","error")}},a=l=>{const c={DRAFT:"secondary",PUBLISHED:"success",CANCELLED:"danger"};return f.jsx(lo,{bg:c[l]||"secondary",children:l})};return n?f.jsx(ls,{}):f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsx(be,{children:f.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[f.jsx("h2",{children:"Events"}),f.jsx(dt,{to:"/admin/events/new",children:f.jsxs(de,{variant:"primary",children:[f.jsx(Ae,{icon:uf,className:"me-2"}),"Create Event"]})})]})})}),t.length===0?f.jsx(ae,{children:f.jsxs(ae.Body,{className:"text-center py-5",children:[f.jsx("p",{className:"text-muted mb-3",children:"No events yet"}),f.jsx(dt,{to:"/admin/events/new",children:f.jsx(de,{variant:"primary",children:"Create Your First Event"})})]})}):f.jsx(ae,{children:f.jsx(ae.Body,{children:f.jsxs(nv,{responsive:!0,hover:!0,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Title"}),f.jsx("th",{children:"Date"}),f.jsx("th",{children:"Location"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:t.map(l=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx("strong",{children:l.title})}),f.jsx("td",{children:Kc(new Date(l.start_date),"MMM d, yyyy")}),f.jsx("td",{children:l.location||"-"}),f.jsx("td",{children:a(l.status)}),f.jsx("td",{children:f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(dt,{to:`/admin/events/${l.id}`,children:f.jsx(de,{size:"sm",variant:"outline-primary",children:f.jsx(Ae,{icon:Bj})})}),f.jsx(dt,{to:`/admin/events/${l.id}/edit`,children:f.jsx(de,{size:"sm",variant:"outline-secondary",children:f.jsx(Ae,{icon:lf})})}),f.jsx(de,{size:"sm",variant:l.status==="PUBLISHED"?"outline-warning":"outline-success",onClick:()=>o(l.id,l.status),children:l.status==="PUBLISHED"?"Unpublish":"Publish"}),f.jsx(de,{size:"sm",variant:"outline-danger",onClick:()=>s(l.id),children:f.jsx(Ae,{icon:cf})})]})})]},l.id))})]})})})]})}function VC(){const{id:t}=Zh(),e=Gr(),[n,r]=I.useState(!1),[i,s]=I.useState({title:"",description:"",start_date:"",end_date:"",location:"",image_url:"",capacity:"",status:"DRAFT"});I.useEffect(()=>{t&&o()},[t]);const o=async()=>{try{r(!0);const c=await fi.getById(t);s({title:c.title||"",description:c.description||"",start_date:c.start_date?new Date(c.start_date).toISOString().slice(0,16):"",end_date:c.end_date?new Date(c.end_date).toISOString().slice(0,16):"",location:c.location||"",image_url:c.image_url||"",capacity:c.capacity||"",status:c.status||"DRAFT"})}catch{Te("Error loading event","error")}finally{r(!1)}},a=c=>{const{name:u,value:h}=c.target;s(p=>({...p,[u]:h}))},l=async c=>{if(c.preventDefault(),!i.title||!i.start_date||!i.end_date){Te("Please fill in all required fields","error");return}try{r(!0);const u={...i,capacity:i.capacity?parseInt(i.capacity,10):null};t?(await fi.update(t,u),Te("Event updated successfully","success")):(await fi.create(u),Te("Event created successfully","success")),e("/admin/events")}catch{Te(`Error ${t?"updating":"creating"} event`,"error")}finally{r(!1)}};return n&&t?f.jsx(ls,{}):f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsx(be,{children:f.jsx("h2",{children:t?"Edit Event":"Create Event"})})}),f.jsx(et,{children:f.jsx(be,{lg:8,children:f.jsx(ae,{children:f.jsx(ae.Body,{children:f.jsxs($,{onSubmit:l,children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Title *"}),f.jsx($.Control,{type:"text",name:"title",value:i.title,onChange:a,required:!0})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Description"}),f.jsx($.Control,{as:"textarea",rows:4,name:"description",value:i.description,onChange:a})]}),f.jsxs(et,{children:[f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Start Date *"}),f.jsx($.Control,{type:"datetime-local",name:"start_date",value:i.start_date,onChange:a,required:!0})]})}),f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"End Date *"}),f.jsx($.Control,{type:"datetime-local",name:"end_date",value:i.end_date,onChange:a,required:!0})]})})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Location"}),f.jsx($.Control,{type:"text",name:"location",value:i.location,onChange:a})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Image URL"}),f.jsx($.Control,{type:"url",name:"image_url",value:i.image_url,onChange:a,placeholder:"https://example.com/image.jpg"})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Capacity"}),f.jsx($.Control,{type:"number",name:"capacity",value:i.capacity,onChange:a,min:"1"}),f.jsx($.Text,{className:"text-muted",children:"Leave empty for unlimited capacity"})]}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(de,{type:"submit",variant:"primary",disabled:n,children:n?"Saving...":t?"Update Event":"Create Event"}),f.jsx(de,{type:"button",variant:"outline-secondary",onClick:()=>e("/admin/events"),children:"Cancel"})]})]})})})})})]})}const gc={async getByEventId(t){return(await Ee.tickets.getByEventId(t)).data},async getById(t){return(await Ee.tickets.getById(t)).data},async create(t){return(await Ee.tickets.create(t)).data},async update(t,e){return(await Ee.tickets.update(t,e)).data},async delete(t){return await Ee.tickets.delete(t),!0},async checkAvailability(t,e){return await Ee.tickets.checkAvailability(t,e)}};function cce({eventId:t,tickets:e,onUpdate:n}){const[r,i]=I.useState(!1),[s,o]=I.useState(null),[a,l]=I.useState({name:"",description:"",price:"",quantity:"",sales_start:"",sales_end:""}),c=(v=null)=>{v?(o(v),l({name:v.name,description:v.description||"",price:v.price,quantity:v.quantity,sales_start:new Date(v.sales_start).toISOString().slice(0,16),sales_end:new Date(v.sales_end).toISOString().slice(0,16)})):(o(null),l({name:"",description:"",price:"",quantity:"",sales_start:"",sales_end:""})),i(!0)},u=()=>{i(!1),o(null)},h=v=>{const{name:w,value:y}=v.target;l(T=>({...T,[w]:y}))},p=async v=>{v.preventDefault();try{const w={...a,event_id:t,price:parseFloat(a.price),quantity:parseInt(a.quantity,10)};s?(await gc.update(s.id,w),Te("Ticket updated successfully","success")):(await gc.create(w),Te("Ticket created successfully","success")),u(),n()}catch{Te("Error saving ticket","error")}},m=async v=>{if(window.confirm("Are you sure you want to delete this ticket type?"))try{await gc.delete(v),Te("Ticket deleted successfully","success"),n()}catch{Te("Error deleting ticket","error")}};return f.jsxs(f.Fragment,{children:[f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[f.jsx("h5",{className:"mb-0",children:"Ticket Types"}),f.jsxs(de,{size:"sm",variant:"primary",onClick:()=>c(),children:[f.jsx(Ae,{icon:uf,className:"me-2"}),"Add Ticket"]})]}),e.length===0?f.jsx("div",{className:"text-center py-4 text-muted",children:"No ticket types yet"}):f.jsxs(nv,{responsive:!0,hover:!0,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Name"}),f.jsx("th",{children:"Price"}),f.jsx("th",{children:"Sold / Quantity"}),f.jsx("th",{children:"Sales Period"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:e.map(v=>f.jsxs("tr",{children:[f.jsxs("td",{children:[f.jsx("strong",{children:v.name}),v.description&&f.jsx("div",{className:"small text-muted",children:v.description})]}),f.jsxs("td",{children:["$",parseFloat(v.price).toFixed(2)]}),f.jsxs("td",{children:[v.sold||0," / ",v.quantity]}),f.jsxs("td",{className:"small",children:[Kc(new Date(v.sales_start),"MMM d")," - ",Kc(new Date(v.sales_end),"MMM d")]}),f.jsx("td",{children:f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(de,{size:"sm",variant:"outline-secondary",onClick:()=>c(v),children:f.jsx(Ae,{icon:lf})}),f.jsx(de,{size:"sm",variant:"outline-danger",onClick:()=>m(v.id),children:f.jsx(Ae,{icon:cf})})]})})]},v.id))})]})]})}),f.jsxs(ri,{show:r,onHide:u,size:"lg",children:[f.jsx(ri.Header,{closeButton:!0,children:f.jsx(ri.Title,{children:s?"Edit Ticket":"Add Ticket"})}),f.jsxs($,{onSubmit:p,children:[f.jsxs(ri.Body,{children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Name *"}),f.jsx($.Control,{type:"text",name:"name",value:a.name,onChange:h,required:!0})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Description"}),f.jsx($.Control,{as:"textarea",rows:2,name:"description",value:a.description,onChange:h})]}),f.jsxs(et,{children:[f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Price *"}),f.jsx($.Control,{type:"number",step:"0.01",min:"0",name:"price",value:a.price,onChange:h,required:!0})]})}),f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Quantity *"}),f.jsx($.Control,{type:"number",min:"1",name:"quantity",value:a.quantity,onChange:h,required:!0})]})})]}),f.jsxs(et,{children:[f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Sales Start *"}),f.jsx($.Control,{type:"datetime-local",name:"sales_start",value:a.sales_start,onChange:h,required:!0})]})}),f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Sales End *"}),f.jsx($.Control,{type:"datetime-local",name:"sales_end",value:a.sales_end,onChange:h,required:!0})]})})]})]}),f.jsxs(ri.Footer,{children:[f.jsx(de,{variant:"secondary",onClick:u,children:"Cancel"}),f.jsx(de,{variant:"primary",type:"submit",children:s?"Update":"Create"})]})]})]})]})}const Ll={async getByEventId(t){return(await Ee.discounts.getByEventId(t)).data},async getById(t){return(await Ee.discounts.getById(t)).data},async create(t){return(await Ee.discounts.create(t)).data},async update(t,e){return(await Ee.discounts.update(t,e)).data},async delete(t){return await Ee.discounts.delete(t),!0},async validateCode(t,e){return await Ee.discounts.validateCode(t,e)},async incrementUsage(t){return(await Ee.discounts.incrementUsage(t)).data}};function uce({eventId:t}){const[e,n]=I.useState([]),[r,i]=I.useState(!1),[s,o]=I.useState(null),[a,l]=I.useState({code:"",type:"PERCENT",value:"",max_uses:"",expires_at:"",is_active:!0});I.useEffect(()=>{c()},[t]);const c=async()=>{try{const y=await Ll.getByEventId(t);n(y)}catch{Te("Error loading discounts","error")}},u=(y=null)=>{y?(o(y),l({code:y.code,type:y.type,value:y.value,max_uses:y.max_uses||"",expires_at:y.expires_at?new Date(y.expires_at).toISOString().slice(0,16):"",is_active:y.is_active})):(o(null),l({code:"",type:"PERCENT",value:"",max_uses:"",expires_at:"",is_active:!0})),i(!0)},h=()=>{i(!1),o(null)},p=y=>{const{name:T,value:E,type:b,checked:k}=y.target;l(D=>({...D,[T]:b==="checkbox"?k:E}))},m=async y=>{y.preventDefault();try{const T={...a,event_id:t,code:a.code.toUpperCase(),value:parseFloat(a.value),max_uses:a.max_uses?parseInt(a.max_uses,10):null,expires_at:a.expires_at||null};s?(await Ll.update(s.id,T),Te("Discount updated successfully","success")):(await Ll.create(T),Te("Discount created successfully","success")),h(),c()}catch{Te("Error saving discount","error")}},v=async y=>{if(window.confirm("Are you sure you want to delete this discount code?"))try{await Ll.delete(y),Te("Discount deleted successfully","success"),c()}catch{Te("Error deleting discount","error")}},w=async y=>{try{await Ll.update(y.id,{is_active:!y.is_active}),Te(`Discount ${y.is_active?"deactivated":"activated"}`,"success"),c()}catch{Te("Error updating discount","error")}};return f.jsxs(f.Fragment,{children:[f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[f.jsx("h5",{className:"mb-0",children:"Discount Codes"}),f.jsxs(de,{size:"sm",variant:"primary",onClick:()=>u(),children:[f.jsx(Ae,{icon:uf,className:"me-2"}),"Add Discount"]})]}),e.length===0?f.jsx("div",{className:"text-center py-4 text-muted",children:"No discount codes yet"}):f.jsxs(nv,{responsive:!0,hover:!0,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Code"}),f.jsx("th",{children:"Type"}),f.jsx("th",{children:"Value"}),f.jsx("th",{children:"Usage"}),f.jsx("th",{children:"Expires"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:e.map(y=>f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx("strong",{children:y.code})}),f.jsx("td",{children:f.jsx(lo,{bg:"info",children:y.type})}),f.jsx("td",{children:y.type==="PERCENT"?`${y.value}%`:`$${y.value}`}),f.jsxs("td",{children:[y.used_count||0,y.max_uses?` / ${y.max_uses}`:" / "]}),f.jsx("td",{className:"small",children:y.expires_at?Kc(new Date(y.expires_at),"MMM d, yyyy"):"Never"}),f.jsx("td",{children:f.jsx(lo,{bg:y.is_active?"success":"secondary",children:y.is_active?"Active":"Inactive"})}),f.jsx("td",{children:f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(de,{size:"sm",variant:y.is_active?"outline-warning":"outline-success",onClick:()=>w(y),children:f.jsx(Ae,{icon:y.is_active?DH:VH})}),f.jsx(de,{size:"sm",variant:"outline-secondary",onClick:()=>u(y),children:f.jsx(Ae,{icon:lf})}),f.jsx(de,{size:"sm",variant:"outline-danger",onClick:()=>v(y.id),children:f.jsx(Ae,{icon:cf})})]})})]},y.id))})]})]})}),f.jsxs(ri,{show:r,onHide:h,children:[f.jsx(ri.Header,{closeButton:!0,children:f.jsx(ri.Title,{children:s?"Edit Discount":"Add Discount"})}),f.jsxs($,{onSubmit:m,children:[f.jsxs(ri.Body,{children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Code *"}),f.jsx($.Control,{type:"text",name:"code",value:a.code,onChange:p,style:{textTransform:"uppercase"},required:!0}),f.jsx($.Text,{className:"text-muted",children:"Will be converted to uppercase"})]}),f.jsxs(et,{children:[f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Type *"}),f.jsxs($.Select,{name:"type",value:a.type,onChange:p,required:!0,children:[f.jsx("option",{value:"PERCENT",children:"Percentage"}),f.jsx("option",{value:"AMOUNT",children:"Fixed Amount"})]})]})}),f.jsx(be,{md:6,children:f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Value *"}),f.jsx($.Control,{type:"number",step:"0.01",min:"0",name:"value",value:a.value,onChange:p,required:!0})]})})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Max Uses"}),f.jsx($.Control,{type:"number",min:"1",name:"max_uses",value:a.max_uses,onChange:p}),f.jsx($.Text,{className:"text-muted",children:"Leave empty for unlimited uses"})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Expires At"}),f.jsx($.Control,{type:"datetime-local",name:"expires_at",value:a.expires_at,onChange:p}),f.jsx($.Text,{className:"text-muted",children:"Leave empty for no expiration"})]}),f.jsx($.Group,{className:"mb-3",children:f.jsx($.Check,{type:"checkbox",name:"is_active",label:"Active",checked:a.is_active,onChange:p})})]}),f.jsxs(ri.Footer,{children:[f.jsx(de,{variant:"secondary",onClick:h,children:"Cancel"}),f.jsx(de,{variant:"primary",type:"submit",children:s?"Update":"Create"})]})]})]})]})}function dce(){const{id:t}=Zh(),e=Gr(),[n,r]=I.useState(null),[i,s]=I.useState([]),[o,a]=I.useState(!0);I.useEffect(()=>{l()},[t]);const l=async()=>{try{a(!0);const[u,h]=await Promise.all([fi.getById(t),gc.getByEventId(t)]);r(u),s(h)}catch(u){console.error("Error loading event:",u)}finally{a(!1)}},c=u=>{const h={DRAFT:"secondary",PUBLISHED:"success",CANCELLED:"danger"};return f.jsx(lo,{bg:h[u]||"secondary",children:u})};return o?f.jsx(ls,{}):n?f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsx(be,{children:f.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[f.jsxs("div",{className:"d-flex align-items-center gap-3",children:[f.jsx(de,{variant:"outline-secondary",size:"sm",onClick:()=>e("/admin/events"),children:f.jsx(Ae,{icon:ET})}),f.jsxs("div",{children:[f.jsx("h2",{className:"mb-1",children:n.title}),f.jsx("div",{children:c(n.status)})]})]}),f.jsx(dt,{to:`/admin/events/${t}/edit`,children:f.jsxs(de,{variant:"primary",children:[f.jsx(Ae,{icon:lf,className:"me-2"}),"Edit Event"]})})]})})}),f.jsxs(et,{className:"mb-4",children:[f.jsxs(be,{lg:8,children:[f.jsx(ae,{className:"mb-4",children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Event Details"}),n.description&&f.jsx("p",{className:"text-muted",children:n.description}),f.jsxs(et,{className:"mt-3",children:[f.jsxs(be,{md:6,children:[f.jsx("strong",{children:"Start:"})," ",Kc(new Date(n.start_date),"PPpp")]}),f.jsxs(be,{md:6,children:[f.jsx("strong",{children:"End:"})," ",Kc(new Date(n.end_date),"PPpp")]})]}),n.location&&f.jsxs("div",{className:"mt-2",children:[f.jsx("strong",{children:"Location:"})," ",n.location]}),n.capacity&&f.jsxs("div",{className:"mt-2",children:[f.jsx("strong",{children:"Capacity:"})," ",n.capacity]})]})}),f.jsxs(fq,{defaultActiveKey:"tickets",className:"mb-3",children:[f.jsx(i_,{eventKey:"tickets",title:"Tickets",children:f.jsx(cce,{eventId:t,tickets:i,onUpdate:l})}),f.jsx(i_,{eventKey:"discounts",title:"Discount Codes",children:f.jsx(uce,{eventId:t})}),f.jsx(i_,{eventKey:"forms",title:"Forms",children:f.jsx(ae,{children:f.jsxs(ae.Body,{className:"text-center py-5",children:[f.jsx("p",{className:"text-muted",children:"Form builder coming soon"}),f.jsx(dt,{to:`/admin/forms/new?event=${t}`,children:f.jsx(de,{variant:"primary",children:"Create Form"})})]})})})]})]}),f.jsx(be,{lg:4,children:f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Quick Stats"}),f.jsxs("div",{className:"mb-3",children:[f.jsx("div",{className:"text-muted small",children:"Total Tickets"}),f.jsx("div",{className:"h4 mb-0",children:i.length})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("div",{className:"text-muted small",children:"Tickets Sold"}),f.jsx("div",{className:"h4 mb-0",children:i.reduce((u,h)=>u+(h.sold||0),0)})]}),f.jsxs("div",{children:[f.jsx("div",{className:"text-muted small",children:"Revenue"}),f.jsxs("div",{className:"h4 mb-0",children:["$",i.reduce((u,h)=>u+(h.sold||0)*parseFloat(h.price||0),0).toFixed(2)]})]})]})})})]})]}):f.jsx("div",{children:"Event not found"})}function hce(){const[t,e]=I.useState([]),[n,r]=I.useState(!0);I.useEffect(()=>{i()},[]);const i=async()=>{try{r(!0);const a=await Br.getAll();e(a)}catch{Te("Error loading forms","error")}finally{r(!1)}},s=async a=>{if(window.confirm("Are you sure you want to delete this form?"))try{await Br.delete(a),Te("Form deleted successfully","success"),i()}catch{Te("Error deleting form","error")}},o=async(a,l)=>{try{l?(await Br.unpublish(a),Te("Form unpublished","success")):(await Br.publish(a),Te("Form published successfully","success")),i()}catch{Te("Error updating form status","error")}};return n?f.jsx(ls,{}):f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsx(be,{children:f.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[f.jsx("h2",{children:"Forms"}),f.jsx(dt,{to:"/admin/forms/new",children:f.jsxs(de,{variant:"primary",children:[f.jsx(Ae,{icon:uf,className:"me-2"}),"Create Form"]})})]})})}),t.length===0?f.jsx(ae,{children:f.jsxs(ae.Body,{className:"text-center py-5",children:[f.jsx("p",{className:"text-muted mb-3",children:"No forms yet"}),f.jsx(dt,{to:"/admin/forms/new",children:f.jsx(de,{variant:"primary",children:"Create Your First Form"})})]})}):f.jsx(ae,{children:f.jsx(ae.Body,{children:f.jsxs(nv,{responsive:!0,hover:!0,children:[f.jsx("thead",{children:f.jsxs("tr",{children:[f.jsx("th",{children:"Name"}),f.jsx("th",{children:"Event"}),f.jsx("th",{children:"Fields"}),f.jsx("th",{children:"Status"}),f.jsx("th",{children:"Actions"})]})}),f.jsx("tbody",{children:t.map(a=>{var l,c;return f.jsxs("tr",{children:[f.jsx("td",{children:f.jsx("strong",{children:a.name})}),f.jsx("td",{children:((l=a.events)==null?void 0:l.title)||"-"}),f.jsx("td",{children:((c=a.schema)==null?void 0:c.length)||0}),f.jsx("td",{children:f.jsx(lo,{bg:a.is_published?"success":"secondary",children:a.is_published?"Published":"Draft"})}),f.jsx("td",{children:f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(dt,{to:`/admin/forms/${a.id}/edit`,children:f.jsx(de,{size:"sm",variant:"outline-secondary",children:f.jsx(Ae,{icon:lf})})}),f.jsx(dt,{to:`/admin/forms/${a.id}/submissions`,children:f.jsx(de,{size:"sm",variant:"outline-info",children:"Submissions"})}),f.jsx(dt,{to:`/admin/forms/${a.id}/embed`,children:f.jsx(de,{size:"sm",variant:"outline-primary",children:f.jsx(Ae,{icon:FH})})}),f.jsx(de,{size:"sm",variant:a.is_published?"outline-warning":"outline-success",onClick:()=>o(a.id,a.is_published),children:a.is_published?"Unpublish":"Publish"}),f.jsx(de,{size:"sm",variant:"outline-danger",onClick:()=>s(a.id),children:f.jsx(Ae,{icon:cf})})]})})]},a.id)})})]})})})]})}const L4=I.createContext({dragDropManager:void 0});function gr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var FC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Q_=function(){return Math.random().toString(36).substring(7).split("").join(".")},$C={INIT:"@@redux/INIT"+Q_(),REPLACE:"@@redux/REPLACE"+Q_(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Q_()}};function fce(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function M4(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(gr(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(gr(1));return n(M4)(t,e)}if(typeof t!="function")throw new Error(gr(2));var i=t,s=e,o=[],a=o,l=!1;function c(){a===o&&(a=o.slice())}function u(){if(l)throw new Error(gr(3));return s}function h(w){if(typeof w!="function")throw new Error(gr(4));if(l)throw new Error(gr(5));var y=!0;return c(),a.push(w),function(){if(y){if(l)throw new Error(gr(6));y=!1,c();var E=a.indexOf(w);a.splice(E,1),o=null}}}function p(w){if(!fce(w))throw new Error(gr(7));if(typeof w.type>"u")throw new Error(gr(8));if(l)throw new Error(gr(9));try{l=!0,s=i(s,w)}finally{l=!1}for(var y=o=a,T=0;T<y.length;T++){var E=y[T];E()}return w}function m(w){if(typeof w!="function")throw new Error(gr(10));i=w,p({type:$C.REPLACE})}function v(){var w,y=h;return w={subscribe:function(E){if(typeof E!="object"||E===null)throw new Error(gr(11));function b(){E.next&&E.next(u())}b();var k=y(b);return{unsubscribe:k}}},w[FC]=function(){return this},w}return p({type:$C.INIT}),r={dispatch:p,subscribe:h,getState:u,replaceReducer:m},r[FC]=v,r}function _e(t,e,...n){if(pce()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let r;if(e===void 0)r=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let i=0;r=new Error(e.replace(/%s/g,function(){return n[i++]})),r.name="Invariant Violation"}throw r.framesToPop=1,r}}function pce(){return typeof process<"u"&&!0}function mce(t,e,n){return e.split(".").reduce((r,i)=>r&&r[i]?r[i]:n||null,t)}function gce(t,e){return t.filter(n=>n!==e)}function V4(t){return typeof t=="object"}function vce(t,e){const n=new Map,r=s=>{n.set(s,n.has(s)?n.get(s)+1:1)};t.forEach(r),e.forEach(r);const i=[];return n.forEach((s,o)=>{s===1&&i.push(o)}),i}function yce(t,e){return t.filter(n=>e.indexOf(n)>-1)}const _S="dnd-core/INIT_COORDS",ry="dnd-core/BEGIN_DRAG",wS="dnd-core/PUBLISH_DRAG_SOURCE",iy="dnd-core/HOVER",sy="dnd-core/DROP",oy="dnd-core/END_DRAG";function UC(t,e){return{type:_S,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const _ce={type:_S,payload:{clientOffset:null,sourceClientOffset:null}};function wce(t){return function(n=[],r={publishSource:!0}){const{publishSource:i=!0,clientOffset:s,getSourceClientOffset:o}=r,a=t.getMonitor(),l=t.getRegistry();t.dispatch(UC(s)),Ece(n,a,l);const c=Ice(n,a);if(c==null){t.dispatch(_ce);return}let u=null;if(s){if(!o)throw new Error("getSourceClientOffset must be defined");bce(o),u=o(c)}t.dispatch(UC(s,u));const p=l.getSource(c).beginDrag(a,c);if(p==null)return;Tce(p),l.pinSource(c);const m=l.getSourceType(c);return{type:ry,payload:{itemType:m,item:p,sourceId:c,clientOffset:s||null,sourceClientOffset:u||null,isSourcePublic:!!i}}}}function Ece(t,e,n){_e(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(r){_e(n.getSource(r),"Expected sourceIds to be registered.")})}function bce(t){_e(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Tce(t){_e(V4(t),"Item must be an object.")}function Ice(t,e){let n=null;for(let r=t.length-1;r>=0;r--)if(e.canDragSource(t[r])){n=t[r];break}return n}function Sce(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){Sce(t,i,n[i])})}return t}function Ace(t){return function(n={}){const r=t.getMonitor(),i=t.getRegistry();Rce(r),Pce(r).forEach((o,a)=>{const l=kce(o,a,i,r),c={type:sy,payload:{dropResult:xce({},n,l)}};t.dispatch(c)})}}function Rce(t){_e(t.isDragging(),"Cannot call drop while not dragging."),_e(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function kce(t,e,n,r){const i=n.getTarget(t);let s=i?i.drop(r,t):void 0;return Cce(s),typeof s>"u"&&(s=e===0?{}:r.getDropResult()),s}function Cce(t){_e(typeof t>"u"||V4(t),"Drop result must either be an object or undefined.")}function Pce(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Oce(t){return function(){const n=t.getMonitor(),r=t.getRegistry();Nce(n);const i=n.getSourceId();return i!=null&&(r.getSource(i,!0).endDrag(n,i),r.unpinSource()),{type:oy}}}function Nce(t){_e(t.isDragging(),"Cannot call endDrag while not dragging.")}function AE(t,e){return e===null?t===null:Array.isArray(t)?t.some(n=>n===e):t===e}function Dce(t){return function(n,{clientOffset:r}={}){jce(n);const i=n.slice(0),s=t.getMonitor(),o=t.getRegistry(),a=s.getItemType();return Mce(i,o,a),Lce(i,s,o),Vce(i,s,o),{type:iy,payload:{targetIds:i,clientOffset:r||null}}}}function jce(t){_e(Array.isArray(t),"Expected targetIds to be an array.")}function Lce(t,e,n){_e(e.isDragging(),"Cannot call hover while not dragging."),_e(!e.didDrop(),"Cannot call hover after drop.");for(let r=0;r<t.length;r++){const i=t[r];_e(t.lastIndexOf(i)===r,"Expected targetIds to be unique in the passed array.");const s=n.getTarget(i);_e(s,"Expected targetIds to be registered.")}}function Mce(t,e,n){for(let r=t.length-1;r>=0;r--){const i=t[r],s=e.getTargetType(i);AE(s,n)||t.splice(r,1)}}function Vce(t,e,n){t.forEach(function(r){n.getTarget(r).hover(e,r)})}function Fce(t){return function(){if(t.getMonitor().isDragging())return{type:wS}}}function $ce(t){return{beginDrag:wce(t),publishDragSource:Fce(t),hover:Dce(t),drop:Ace(t),endDrag:Oce(t)}}class Uce{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function r(s){return(...o)=>{const a=s.apply(e,o);typeof a<"u"&&n(a)}}const i=$ce(this);return Object.keys(i).reduce((s,o)=>{const a=i[o];return s[o]=r(a),s},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const r=this.store.getState().refCount>0;this.backend&&(r&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!r&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function Bce(t,e){return{x:t.x+e.x,y:t.y+e.y}}function F4(t,e){return{x:t.x-e.x,y:t.y-e.y}}function zce(t){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:r}=t;return!e||!n||!r?null:F4(Bce(e,r),n)}function qce(t){const{clientOffset:e,initialClientOffset:n}=t;return!e||!n?null:F4(e,n)}const Zd=[],ES=[];Zd.__IS_NONE__=!0;ES.__IS_ALL__=!0;function Wce(t,e){return t===Zd?!1:t===ES||typeof e>"u"?!0:yce(e,t).length>0}class Hce{subscribeToStateChange(e,n={}){const{handlerIds:r}=n;_e(typeof e=="function","listener must be a function."),_e(typeof r>"u"||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let i=this.store.getState().stateId;const s=()=>{const o=this.store.getState(),a=o.stateId;try{a===i||a===i+1&&!Wce(o.dirtyHandlerIds,r)||e()}finally{i=a}};return this.store.subscribe(s)}subscribeToOffsetChange(e){_e(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const r=()=>{const i=this.store.getState().dragOffset;i!==n&&(n=i,e())};return this.store.subscribe(r)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return _e(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(_e(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const r=this.registry.getTargetType(e),i=this.getItemType();return AE(r,i)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(_e(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const r=this.registry.getSourceType(e),i=this.getItemType();return r!==i?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:r}=n;if(!this.isDragging())return!1;const i=this.registry.getTargetType(e),s=this.getItemType();if(s&&!AE(i,s))return!1;const o=this.getTargetIds();if(!o.length)return!1;const a=o.indexOf(e);return r?a===o.length-1:a>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return zce(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return qce(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const BC=typeof global<"u"?global:self,$4=BC.MutationObserver||BC.WebKitMutationObserver;function U4(t){return function(){const n=setTimeout(i,0),r=setInterval(i,50);function i(){clearTimeout(n),clearInterval(r),t()}}}function Gce(t){let e=1;const n=new $4(t),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){e=-e,r.data=e}}const Kce=typeof $4=="function"?Gce:U4;class Qce{enqueueTask(e){const{queue:n,requestFlush:r}=this;n.length||(r(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let r=0,i=e.length-this.index;r<i;r++)e[r]=e[r+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=Kce(this.flush),this.requestErrorThrow=U4(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class Yce{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class Jce{create(e){const n=this.freeTasks,r=n.length?n.pop():new Yce(this.onError,i=>n[n.length]=i);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}const B4=new Qce,Xce=new Jce(B4.registerPendingError);function Zce(t){B4.enqueueTask(Xce.create(t))}const bS="dnd-core/ADD_SOURCE",TS="dnd-core/ADD_TARGET",IS="dnd-core/REMOVE_SOURCE",ay="dnd-core/REMOVE_TARGET";function eue(t){return{type:bS,payload:{sourceId:t}}}function tue(t){return{type:TS,payload:{targetId:t}}}function nue(t){return{type:IS,payload:{sourceId:t}}}function rue(t){return{type:ay,payload:{targetId:t}}}function iue(t){_e(typeof t.canDrag=="function","Expected canDrag to be a function."),_e(typeof t.beginDrag=="function","Expected beginDrag to be a function."),_e(typeof t.endDrag=="function","Expected endDrag to be a function.")}function sue(t){_e(typeof t.canDrop=="function","Expected canDrop to be a function."),_e(typeof t.hover=="function","Expected hover to be a function."),_e(typeof t.drop=="function","Expected beginDrag to be a function.")}function RE(t,e){if(e&&Array.isArray(t)){t.forEach(n=>RE(n,!1));return}_e(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var _r;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(_r||(_r={}));let oue=0;function aue(){return oue++}function lue(t){const e=aue().toString();switch(t){case _r.SOURCE:return`S${e}`;case _r.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function zC(t){switch(t[0]){case"S":return _r.SOURCE;case"T":return _r.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function qC(t,e){const n=t.entries();let r=!1;do{const{done:i,value:[,s]}=n.next();if(s===e)return!0;r=!!i}while(!r);return!1}class cue{addSource(e,n){RE(e),iue(n);const r=this.addHandler(_r.SOURCE,e,n);return this.store.dispatch(eue(r)),r}addTarget(e,n){RE(e,!0),sue(n);const r=this.addHandler(_r.TARGET,e,n);return this.store.dispatch(tue(r)),r}containsHandler(e){return qC(this.dragSources,e)||qC(this.dropTargets,e)}getSource(e,n=!1){return _e(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return _e(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return _e(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return _e(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return zC(e)===_r.SOURCE}isTargetId(e){return zC(e)===_r.TARGET}removeSource(e){_e(this.getSource(e),"Expected an existing source."),this.store.dispatch(nue(e)),Zce(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){_e(this.getTarget(e),"Expected an existing target."),this.store.dispatch(rue(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);_e(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){_e(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,r){const i=lue(e);return this.types.set(i,n),e===_r.SOURCE?this.dragSources.set(i,r):e===_r.TARGET&&this.dropTargets.set(i,r),i}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const uue=(t,e)=>t===e;function due(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function hue(t,e,n=uue){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!n(t[r],e[r]))return!1;return!0}function fue(t=Zd,e){switch(e.type){case iy:break;case bS:case TS:case ay:case IS:return Zd;case ry:case wS:case oy:case sy:default:return ES}const{targetIds:n=[],prevTargetIds:r=[]}=e.payload,i=vce(n,r);if(!(i.length>0||!hue(n,r)))return Zd;const o=r[r.length-1],a=n[n.length-1];return o!==a&&(o&&i.push(o),a&&i.push(a)),i}function pue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){pue(t,i,n[i])})}return t}const WC={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function gue(t=WC,e){const{payload:n}=e;switch(e.type){case _S:case ry:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case iy:return due(t.clientOffset,n.clientOffset)?t:mue({},t,{clientOffset:n.clientOffset});case oy:case sy:return WC;default:return t}}function vue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Al(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){vue(t,i,n[i])})}return t}const yue={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function _ue(t=yue,e){const{payload:n}=e;switch(e.type){case ry:return Al({},t,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case wS:return Al({},t,{isSourcePublic:!0});case iy:return Al({},t,{targetIds:n.targetIds});case ay:return t.targetIds.indexOf(n.targetId)===-1?t:Al({},t,{targetIds:gce(t.targetIds,n.targetId)});case sy:return Al({},t,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case oy:return Al({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function wue(t=0,e){switch(e.type){case bS:case TS:return t+1;case IS:case ay:return t-1;default:return t}}function Eue(t=0){return t+1}function bue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tue(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){bue(t,i,n[i])})}return t}function Iue(t={},e){return{dirtyHandlerIds:fue(t.dirtyHandlerIds,{type:e.type,payload:Tue({},e.payload,{prevTargetIds:mce(t,"dragOperation.targetIds",[])})}),dragOffset:gue(t.dragOffset,e),refCount:wue(t.refCount,e),dragOperation:_ue(t.dragOperation,e),stateId:Eue(t.stateId)}}function Sue(t,e=void 0,n={},r=!1){const i=xue(r),s=new Hce(i,new cue(i)),o=new Uce(i,s),a=t(o,e,n);return o.receiveBackend(a),o}function xue(t){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return M4(Iue,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Aue(t,e){if(t==null)return{};var n=Rue(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Rue(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}let HC=0;const ym=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var kue=I.memo(function(e){var{children:n}=e,r=Aue(e,["children"]);const[i,s]=Cue(r);return I.useEffect(()=>{if(s){const o=z4();return++HC,()=>{--HC===0&&(o[ym]=null)}}},[]),f.jsx(L4.Provider,{value:i,children:n})});function Cue(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Pue(t.backend,t.context,t.options,t.debugMode),n=!t.context;return[e,n]}function Pue(t,e=z4(),n,r){const i=e;return i[ym]||(i[ym]={dragDropManager:Sue(t,e,n,r)}),i[ym]}function z4(){return typeof global<"u"?global:window}var Oue=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n};const Nue=So(Oue),Ka=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Due(t,e,n){const[r,i]=I.useState(()=>e(t)),s=I.useCallback(()=>{const o=e(t);Nue(r,o)||(i(o),n&&n())},[r,t,n]);return Ka(s),[r,s]}function jue(t,e,n){const[r,i]=Due(t,e,n);return Ka(function(){const o=t.getHandlerId();if(o!=null)return t.subscribeToStateChange(i,{handlerIds:[o]})},[t,i]),r}function q4(t,e,n){return jue(e,t||(()=>({})),()=>n.reconnect())}function W4(t,e){const n=[...e||[]];return e==null&&typeof t!="function"&&n.push(t),I.useMemo(()=>typeof t=="function"?t():t,n)}function Lue(t){return I.useMemo(()=>t.hooks.dragSource(),[t])}function Mue(t){return I.useMemo(()=>t.hooks.dragPreview(),[t])}let Y_=!1,J_=!1;class Vue{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){_e(!Y_,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return Y_=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{Y_=!1}}isDragging(){if(!this.sourceId)return!1;_e(!J_,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return J_=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{J_=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let X_=!1;class Fue{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;_e(!X_,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return X_=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{X_=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function $ue(t,e,n){const r=n.getRegistry(),i=r.addTarget(t,e);return[i,()=>r.removeTarget(i)]}function Uue(t,e,n){const r=n.getRegistry(),i=r.addSource(t,e);return[i,()=>r.removeSource(i)]}function kE(t,e,n,r){let i=n?n.call(r,t,e):void 0;if(i!==void 0)return!!i;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const s=Object.keys(t),o=Object.keys(e);if(s.length!==o.length)return!1;const a=Object.prototype.hasOwnProperty.bind(e);for(let l=0;l<s.length;l++){const c=s[l];if(!a(c))return!1;const u=t[c],h=e[c];if(i=n?n.call(r,u,h,c):void 0,i===!1||i===void 0&&u!==h)return!1}return!0}function CE(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Bue(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function zue(t){return(e=null,n=null)=>{if(!I.isValidElement(e)){const s=e;return t(s,n),s}const r=e;return Bue(r),que(r,n?s=>t(s,n):t)}}function H4(t){const e={};return Object.keys(t).forEach(n=>{const r=t[n];if(n.endsWith("Ref"))e[n]=t[n];else{const i=zue(r);e[n]=()=>i}}),e}function GC(t,e){typeof t=="function"?t(e):t.current=e}function que(t,e){const n=t.ref;return _e(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?I.cloneElement(t,{ref:r=>{GC(n,r),GC(e,r)}}):I.cloneElement(t,{ref:e})}class Wue{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!kE(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!kE(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=H4({dragSource:(n,r)=>{this.clearDragSource(),this.dragSourceOptions=r||null,CE(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,r)=>{this.clearDragPreview(),this.dragPreviewOptions=r||null,CE(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class Hue{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!kE(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=H4({dropTarget:(n,r)=>{this.clearDropTarget(),this.dropTargetOptions=r,CE(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Tu(){const{dragDropManager:t}=I.useContext(L4);return _e(t!=null,"Expected drag drop context"),t}function Gue(t,e){const n=Tu(),r=I.useMemo(()=>new Wue(n.getBackend()),[n]);return Ka(()=>(r.dragSourceOptions=t||null,r.reconnect(),()=>r.disconnectDragSource()),[r,t]),Ka(()=>(r.dragPreviewOptions=e||null,r.reconnect(),()=>r.disconnectDragPreview()),[r,e]),r}function Kue(){const t=Tu();return I.useMemo(()=>new Vue(t),[t])}class Que{beginDrag(){const e=this.spec,n=this.monitor;let r=null;return typeof e.item=="object"?r=e.item:typeof e.item=="function"?r=e.item(n):r={},r??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const r=this.spec,i=this.monitor,{isDragging:s}=r;return s?s(i):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,r=this.connector,{end:i}=e;i&&i(n.getItem(),n),r.reconnect()}constructor(e,n,r){this.spec=e,this.monitor=n,this.connector=r}}function Yue(t,e,n){const r=I.useMemo(()=>new Que(t,e,n),[e,n]);return I.useEffect(()=>{r.spec=t},[t]),r}function Jue(t){return I.useMemo(()=>{const e=t.type;return _e(e!=null,"spec.type must be defined"),e},[t])}function Xue(t,e,n){const r=Tu(),i=Yue(t,e,n),s=Jue(t);Ka(function(){if(s!=null){const[a,l]=Uue(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l}},[r,e,n,i,s])}function Zue(t,e){const n=W4(t,e);_e(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const r=Kue(),i=Gue(n.options,n.previewOptions);return Xue(n,r,i),[q4(n.collect,r,i),Lue(i),Mue(i)]}function ede(t){return I.useMemo(()=>t.hooks.dropTarget(),[t])}function tde(t){const e=Tu(),n=I.useMemo(()=>new Hue(e.getBackend()),[e]);return Ka(()=>(n.dropTargetOptions=t||null,n.reconnect(),()=>n.disconnectDropTarget()),[t]),n}function nde(){const t=Tu();return I.useMemo(()=>new Fue(t),[t])}function rde(t){const{accept:e}=t;return I.useMemo(()=>(_e(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class ide{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function sde(t,e){const n=I.useMemo(()=>new ide(t,e),[e]);return I.useEffect(()=>{n.spec=t},[t]),n}function ode(t,e,n){const r=Tu(),i=sde(t,e),s=rde(t);Ka(function(){const[a,l]=$ue(s,i,r);return e.receiveHandlerId(a),n.receiveHandlerId(a),l},[r,e,i,n,s.map(o=>o.toString()).join("|")])}function ade(t,e){const n=W4(t,e),r=nde(),i=tde(n.options);return ode(n,r,i),[q4(n.collect,r,i),ede(i)]}function G4(t){let e=null;return()=>(e==null&&(e=t()),e)}function lde(t,e){return t.filter(n=>n!==e)}function cde(t,e){const n=new Set,r=s=>n.add(s);t.forEach(r),e.forEach(r);const i=[];return n.forEach(s=>i.push(s)),i}class ude{enter(e){const n=this.entered.length,r=i=>this.isNodeInDocument(i)&&(!i.contains||i.contains(e));return this.entered=cde(this.entered.filter(r),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=lde(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class dde{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(r=>{const i=this.config.exposeProperties[r];i!=null&&(n[r]={value:i(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const K4="__NATIVE_FILE__",Q4="__NATIVE_URL__",Y4="__NATIVE_TEXT__",J4="__NATIVE_HTML__",KC=Object.freeze(Object.defineProperty({__proto__:null,FILE:K4,HTML:J4,TEXT:Y4,URL:Q4},Symbol.toStringTag,{value:"Module"}));function Z_(t,e,n){const r=e.reduce((i,s)=>i||t.getData(s),"");return r??n}const PE={[K4]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[J4]:{exposeProperties:{html:(t,e)=>Z_(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Q4]:{exposeProperties:{urls:(t,e)=>Z_(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Y4]:{exposeProperties:{text:(t,e)=>Z_(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function hde(t,e){const n=PE[t];if(!n)throw new Error(`native type ${t} has no configuration`);const r=new dde(n);return r.loadDataTransfer(e),r}function ew(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(PE).filter(n=>{const r=PE[n];return r!=null&&r.matchesTypes?r.matchesTypes.some(i=>e.indexOf(i)>-1):!1})[0]||null}const fde=G4(()=>/firefox/i.test(navigator.userAgent)),X4=G4(()=>!!window.safari);class QC{interpolate(e){const{xs:n,ys:r,c1s:i,c2s:s,c3s:o}=this;let a=n.length-1;if(e===n[a])return r[a];let l=0,c=o.length-1,u;for(;l<=c;){u=Math.floor(.5*(l+c));const m=n[u];if(m<e)l=u+1;else if(m>e)c=u-1;else return r[u]}a=Math.max(0,c);const h=e-n[a],p=h*h;return r[a]+i[a]*h+s[a]*p+o[a]*h*p}constructor(e,n){const{length:r}=e,i=[];for(let m=0;m<r;m++)i.push(m);i.sort((m,v)=>e[m]<e[v]?-1:1);const s=[],o=[];let a,l;for(let m=0;m<r-1;m++)a=e[m+1]-e[m],l=n[m+1]-n[m],s.push(a),o.push(l/a);const c=[o[0]];for(let m=0;m<s.length-1;m++){const v=o[m],w=o[m+1];if(v*w<=0)c.push(0);else{a=s[m];const y=s[m+1],T=a+y;c.push(3*T/((T+y)/v+(T+a)/w))}}c.push(o[o.length-1]);const u=[],h=[];let p;for(let m=0;m<c.length-1;m++){p=o[m];const v=c[m],w=1/s[m],y=v+c[m+1]-p-p;u.push((p-v-y)*w),h.push(y*w*w)}this.xs=e,this.ys=n,this.c1s=c,this.c2s=u,this.c3s=h}}const pde=1;function Z4(t){const e=t.nodeType===pde?t:t.parentElement;if(!e)return null;const{top:n,left:r}=e.getBoundingClientRect();return{x:r,y:n}}function $p(t){return{x:t.clientX,y:t.clientY}}function mde(t){var e;return t.nodeName==="IMG"&&(fde()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function gde(t,e,n,r){let i=t?e.width:n,s=t?e.height:r;return X4()&&t&&(s/=window.devicePixelRatio,i/=window.devicePixelRatio),{dragPreviewWidth:i,dragPreviewHeight:s}}function vde(t,e,n,r,i){const s=mde(e),a=Z4(s?t:e),l={x:n.x-a.x,y:n.y-a.y},{offsetWidth:c,offsetHeight:u}=t,{anchorX:h,anchorY:p}=r,{dragPreviewWidth:m,dragPreviewHeight:v}=gde(s,e,c,u),w=()=>{let N=new QC([0,.5,1],[l.y,l.y/u*v,l.y+v-u]).interpolate(p);return X4()&&s&&(N+=(window.devicePixelRatio-1)*v),N},y=()=>new QC([0,.5,1],[l.x,l.x/c*m,l.x+m-c]).interpolate(h),{offsetX:T,offsetY:E}=i,b=T===0||T,k=E===0||E;return{x:b?T:y(),y:k?E:w()}}class yde{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function _de(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YC(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},r=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable}))),r.forEach(function(i){_de(t,i,n[i])})}return t}class wde{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,r){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,r);const i=o=>this.handleDragStart(o,e),s=o=>this.handleSelectStart(o);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",i),n.addEventListener("selectstart",s),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",i),n.removeEventListener("selectstart",s),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const r=o=>this.handleDragEnter(o,e),i=o=>this.handleDragOver(o,e),s=o=>this.handleDrop(o,e);return n.addEventListener("dragenter",r),n.addEventListener("dragover",i),n.addEventListener("drop",s),()=>{n.removeEventListener("dragenter",r),n.removeEventListener("dragover",i),n.removeEventListener("drop",s)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return YC({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return YC({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(KC).some(n=>KC[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=hde(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var r;return(r=this.rootElement)===null||r===void 0?void 0:r.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=i=>{const s=this.sourceNodes.get(i);return s&&Z4(s)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=i=>!!(i&&this.document&&this.document.body&&this.document.body.contains(i)),this.endDragIfSourceWasRemovedFromDOM=()=>{const i=this.currentDragSourceNode;i==null||this.isNodeInDocument(i)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=i=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(i||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=i=>{if(i.defaultPrevented)return;const{dragStartSourceIds:s}=this;this.dragStartSourceIds=null;const o=$p(i);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(s||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:o});const{dataTransfer:a}=i,l=ew(a);if(this.monitor.isDragging()){if(a&&typeof a.setDragImage=="function"){const u=this.monitor.getSourceId(),h=this.sourceNodes.get(u),p=this.sourcePreviewNodes.get(u)||h;if(p){const{anchorX:m,anchorY:v,offsetX:w,offsetY:y}=this.getCurrentSourcePreviewNodeOptions(),b=vde(h,p,o,{anchorX:m,anchorY:v},{offsetX:w,offsetY:y});a.setDragImage(p,b.x,b.y)}}try{a==null||a.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(i.target);const{captureDraggingState:c}=this.getCurrentSourcePreviewNodeOptions();c?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(l)this.beginDragNativeItem(l);else{if(a&&!a.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=i=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}if(!this.enterLeaveCounter.enter(i.target)||this.monitor.isDragging())return;const{dataTransfer:a}=i,l=ew(a);l&&this.beginDragNativeItem(l,a)},this.handleTopDragEnter=i=>{const{dragEnterTargetIds:s}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=i.altKey,s.length>0&&this.actions.hover(s,{clientOffset:$p(i)}),s.some(a=>this.monitor.canDropOnTarget(a))&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=i=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var s;(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}},this.handleTopDragOver=i=>{const{dragOverTargetIds:s}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}this.altKeyPressed=i.altKey,this.lastClientOffset=$p(i),this.scheduleHover(s),(s||[]).some(a=>this.monitor.canDropOnTarget(a))?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=i=>{this.isDraggingNativeItem()&&i.preventDefault(),this.enterLeaveCounter.leave(i.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=i=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var s;i.preventDefault(),(s=this.currentNativeSource)===null||s===void 0||s.loadDataTransfer(i.dataTransfer)}else ew(i.dataTransfer)&&i.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=i=>{const{dropTargetIds:s}=this;this.dropTargetIds=[],this.actions.hover(s,{clientOffset:$p(i)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=i=>{const s=i.target;typeof s.dragDrop=="function"&&(s.tagName==="INPUT"||s.tagName==="SELECT"||s.tagName==="TEXTAREA"||s.isContentEditable||(i.preventDefault(),s.dragDrop()))},this.options=new yde(n,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new ude(this.isNodeInDocument)}}const Ede=function(e,n,r){return new wde(e,n,r)},bde=[{value:"text",label:"Text"},{value:"email",label:"Email"},{value:"number",label:"Number"},{value:"tel",label:"Phone"},{value:"textarea",label:"Textarea"},{value:"select",label:"Select"},{value:"checkbox",label:"Checkbox"},{value:"radio",label:"Radio"},{value:"date",label:"Date"}];function Tde({field:t,index:e,moveField:n,onEdit:r,onDelete:i}){const[{isDragging:s},o]=Zue({type:"field",item:{index:e},collect:l=>({isDragging:l.isDragging()})}),[,a]=ade({accept:"field",hover:l=>{l.index!==e&&(n(l.index,e),l.index=e)}});return f.jsxs(d2.Item,{ref:l=>o(a(l)),style:{opacity:s?.5:1,cursor:"move"},className:"d-flex align-items-center justify-content-between",children:[f.jsxs("div",{className:"d-flex align-items-center gap-2",children:[f.jsx(Ae,{icon:BH,className:"text-muted"}),f.jsxs("div",{children:[f.jsx("strong",{children:t.label||"Untitled Field"}),f.jsx(lo,{bg:"secondary",className:"ms-2",children:t.type}),t.required&&f.jsx(lo,{bg:"danger",className:"ms-1",children:"Required"})]})]}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(de,{size:"sm",variant:"outline-primary",onClick:()=>r(e),children:"Edit"}),f.jsx(de,{size:"sm",variant:"outline-danger",onClick:()=>i(e),children:f.jsx(Ae,{icon:cf})})]})]})}function JC(){const{id:t}=Zh(),[e]=TN(),n=Gr(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,l]=I.useState({name:"",description:"",event_id:e.get("event")||"",is_published:!1}),[c,u]=I.useState([]),[h,p]=I.useState(null),[m,v]=I.useState({type:"text",label:"",placeholder:"",required:!1,options:[]});I.useEffect(()=>{w(),t&&y()},[t]);const w=async()=>{try{const R=await fi.getAll({status:"PUBLISHED"});o(R)}catch(R){console.error("Error loading events:",R)}},y=async()=>{try{i(!0);const R=await Br.getById(t);l({name:R.name,description:R.description||"",event_id:R.event_id||"",is_published:R.is_published}),u(R.schema||[])}catch{Te("Error loading form","error")}finally{i(!1)}},T=R=>{const{name:O,value:j,type:P,checked:ge}=R.target;l(Re=>({...Re,[O]:P==="checkbox"?ge:j}))},E=R=>{const{name:O,value:j,type:P,checked:ge}=R.target;v(Re=>({...Re,[O]:P==="checkbox"?ge:j}))},b=()=>{if(!m.label){Te("Please enter a field label","error");return}if(h!==null){const R=[...c];R[h]=m,u(R),p(null)}else u([...c,m]);v({type:"text",label:"",placeholder:"",required:!1,options:[]})},k=R=>{v(c[R]),p(R)},D=R=>{u(c.filter((O,j)=>j!==R))},N=(R,O)=>{const j=[...c],[P]=j.splice(R,1);j.splice(O,0,P),u(j)},x=R=>{const O=R.split(`
`).filter(j=>j.trim());v(j=>({...j,options:O}))},S=async(R=!1)=>{if(!a.name){Te("Please enter a form name","error");return}try{i(!0);const O={...a,schema:c,is_published:R||a.is_published};t?(await Br.update(t,O),Te("Form updated successfully","success")):(await Br.create(O),Te("Form created successfully","success")),n("/admin/forms")}catch{Te("Error saving form","error")}finally{i(!1)}},C=["select","radio"].includes(m.type);return r&&t?f.jsx(ls,{}):f.jsx(kue,{backend:Ede,children:f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsx(be,{children:f.jsxs("div",{className:"d-flex align-items-center gap-3",children:[f.jsx(de,{variant:"outline-secondary",size:"sm",onClick:()=>n("/admin/forms"),children:f.jsx(Ae,{icon:ET})}),f.jsx("h2",{children:t?"Edit Form":"Create Form"})]})})}),f.jsxs(et,{children:[f.jsxs(be,{lg:4,children:[f.jsx(ae,{className:"mb-4",children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Form Settings"}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Form Name *"}),f.jsx($.Control,{type:"text",name:"name",value:a.name,onChange:T})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Description"}),f.jsx($.Control,{as:"textarea",rows:3,name:"description",value:a.description,onChange:T})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Linked Event"}),f.jsxs($.Select,{name:"event_id",value:a.event_id,onChange:T,children:[f.jsx("option",{value:"",children:"No event"}),s.map(R=>f.jsx("option",{value:R.id,children:R.title},R.id))]})]}),f.jsxs("div",{className:"d-flex gap-2",children:[f.jsx(de,{variant:"primary",onClick:()=>S(!1),children:"Save Draft"}),f.jsx(de,{variant:"success",onClick:()=>S(!0),children:"Publish"})]})]})}),f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Add Field"}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Field Type"}),f.jsx($.Select,{name:"type",value:m.type,onChange:E,children:bde.map(R=>f.jsx("option",{value:R.value,children:R.label},R.value))})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Label *"}),f.jsx($.Control,{type:"text",name:"label",value:m.label,onChange:E})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Placeholder"}),f.jsx($.Control,{type:"text",name:"placeholder",value:m.placeholder,onChange:E})]}),C&&f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Options (one per line)"}),f.jsx($.Control,{as:"textarea",rows:4,value:m.options.join(`
`),onChange:R=>x(R.target.value),placeholder:`Option 1
Option 2
Option 3`})]}),f.jsx($.Group,{className:"mb-3",children:f.jsx($.Check,{type:"checkbox",name:"required",label:"Required field",checked:m.required,onChange:E})}),f.jsxs(de,{variant:"primary",onClick:b,className:"w-100",children:[f.jsx(Ae,{icon:uf,className:"me-2"}),h!==null?"Update Field":"Add Field"]})]})})]}),f.jsx(be,{lg:8,children:f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsxs("h5",{className:"mb-3",children:["Form Preview (",c.length," fields)"]}),c.length===0?f.jsx("div",{className:"text-center py-5 text-muted",children:"No fields added yet. Add fields using the panel on the left."}):f.jsx(d2,{children:c.map((R,O)=>f.jsx(Tde,{field:R,index:O,moveField:N,onEdit:k,onDelete:D},O))})]})})})]})]})})}function Ide(){const{id:t}=Zh(),e=Gr(),[n,r]=I.useState(null),[i,s]=I.useState(!0);I.useEffect(()=>{o()},[t]);const o=async()=>{try{s(!0);const h=await Br.getById(t);r(h)}catch{Te("Error loading form","error")}finally{s(!1)}},a=h=>{navigator.clipboard.writeText(h),Te("Copied to clipboard","success")};if(i)return f.jsx(ls,{});if(!n)return f.jsx("div",{children:"Form not found"});const l=`${window.location.origin}/embed/form/${t}`,c=`<script src="${window.location.origin}/embed.js" data-form-id="${t}"><\/script>`,u=`<iframe src="${l}" width="100%" height="600" frameborder="0"></iframe>`;return f.jsxs(On,{fluid:!0,className:"py-4",children:[f.jsx(et,{className:"mb-4",children:f.jsx(be,{children:f.jsxs("div",{className:"d-flex align-items-center gap-3",children:[f.jsx(de,{variant:"outline-secondary",size:"sm",onClick:()=>e("/admin/forms"),children:f.jsx(Ae,{icon:ET})}),f.jsxs("h2",{children:["Embed Form: ",n.name]})]})})}),!n.is_published&&f.jsx(Jg,{variant:"warning",className:"mb-4",children:"This form is not published. Publish it to make it available for embedding."}),f.jsxs(et,{children:[f.jsxs(be,{lg:8,children:[f.jsx(ae,{className:"mb-4",children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Direct Link"}),f.jsx("p",{className:"text-muted",children:"Share this link directly or embed it in an iframe"}),f.jsx($.Group,{children:f.jsxs("div",{className:"input-group",children:[f.jsx($.Control,{type:"text",value:l,readOnly:!0}),f.jsx(de,{variant:"outline-secondary",onClick:()=>a(l),children:f.jsx(Ae,{icon:p_})})]})})]})}),f.jsx(ae,{className:"mb-4",children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Script Embed (Recommended)"}),f.jsx("p",{className:"text-muted",children:"Copy this code and paste it anywhere in your website where you want the form to appear"}),f.jsxs($.Group,{children:[f.jsx($.Control,{as:"textarea",rows:3,value:c,readOnly:!0}),f.jsx("div",{className:"mt-2",children:f.jsxs(de,{variant:"primary",size:"sm",onClick:()=>a(c),children:[f.jsx(Ae,{icon:p_,className:"me-2"}),"Copy Code"]})})]})]})}),f.jsx(ae,{className:"mb-4",children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"iFrame Embed"}),f.jsx("p",{className:"text-muted",children:"Alternative method using an iframe (may have styling limitations)"}),f.jsxs($.Group,{children:[f.jsx($.Control,{as:"textarea",rows:2,value:u,readOnly:!0}),f.jsx("div",{className:"mt-2",children:f.jsxs(de,{variant:"primary",size:"sm",onClick:()=>a(u),children:[f.jsx(Ae,{icon:p_,className:"me-2"}),"Copy Code"]})})]})]})}),f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"React Component"}),f.jsx("p",{className:"text-muted",children:"For React applications, you can import and use the EventForm component"}),f.jsx("pre",{className:"bg-light p-3 rounded",children:f.jsx("code",{children:`import { EventForm } from '@/components/embed/EventForm';

<EventForm
  formId="${t}"
  onSubmitSuccess={(data) => {
    console.log('Form submitted:', data);
  }}
/>`})})]})})]}),f.jsx(be,{lg:4,children:f.jsx(ae,{children:f.jsxs(ae.Body,{children:[f.jsx("h5",{className:"mb-3",children:"Configuration Options"}),f.jsx("p",{className:"small text-muted",children:"You can customize the embedded form with these data attributes:"}),f.jsxs("ul",{className:"small",children:[f.jsxs("li",{children:[f.jsx("code",{children:"data-theme"})," - light or dark"]}),f.jsxs("li",{children:[f.jsx("code",{children:"data-primary-color"})," - Custom color"]}),f.jsxs("li",{children:[f.jsx("code",{children:"data-success-url"})," - Redirect URL after submission"]})]}),f.jsx("h6",{className:"mt-4 mb-2",children:"Example:"}),f.jsx("pre",{className:"bg-light p-2 rounded small",children:f.jsx("code",{children:`<script
  src="${window.location.origin}/embed.js"
  data-form-id="${t}"
  data-theme="dark"
><\/script>`})})]})})})]})]})}function Sde({formId:t,eventId:e,onSubmitSuccess:n,theme:r="light"}){var ke;const[i,s]=I.useState(null),[o,a]=I.useState([]),[l,c]=I.useState(!0),[u,h]=I.useState(!1),[p,m]=I.useState(null),[v,w]=I.useState({}),[y,T]=I.useState({}),[E,b]=I.useState(""),[k,D]=I.useState(null),[N,x]=I.useState({subtotal:0,discount_amount:0,total:0});I.useEffect(()=>{S()},[t,e]),I.useEffect(()=>{C()},[y,k]);const S=async()=>{try{if(c(!0),t){const B=await Br.getById(t);if(s(B),B.event_id){const U=await gc.getByEventId(B.event_id);a(U)}}else if(e){const B=await gc.getByEventId(e);a(B)}}catch{m("Error loading form")}finally{c(!1)}},C=()=>{let B=0;Object.entries(y).forEach(([J,fe])=>{if(fe>0){const se=o.find(me=>me.id===J);se&&(B+=parseFloat(se.price)*fe)}});let U=0;k&&(k.type==="PERCENT"?U=B*parseFloat(k.value)/100:U=parseFloat(k.value));const G=Math.max(0,B-U);x({subtotal:parseFloat(B.toFixed(2)),discount_amount:parseFloat(U.toFixed(2)),total:parseFloat(G.toFixed(2))})},R=(B,U)=>{w(G=>({...G,[B]:U}))},O=(B,U)=>{T(G=>({...G,[B]:parseInt(U,10)||0}))},j=async()=>{if(E)try{const B=await Ll.validateCode(E,(i==null?void 0:i.event_id)||e);B.valid?(D(B.discount),m(null)):(m(B.error),D(null))}catch{m("Error validating discount code")}},P=()=>{if(i!=null&&i.schema){for(const U of i.schema)if(U.required&&!v[U.label])return`${U.label} is required`}const B=Object.values(y).some(U=>U>0);return o.length>0&&!B?"Please select at least one ticket":v.email?null:"Email is required"},ge=async B=>{B.preventDefault();const U=P();if(U){m(U);return}h(!0),m(null);try{let G=null;if(i&&(G=(await Br.submitForm(i.id,v,v.email)).id),Object.values(y).some(fe=>fe>0)){const fe=Object.entries(y).filter(([,Ne])=>Ne>0).map(([Ne,Ie])=>{const Ke=o.find(vt=>vt.id===Ne);return{ticket_type_id:Ne,quantity:Ie,unit_price:parseFloat(Ke.price)}}),se={event_id:(i==null?void 0:i.event_id)||e,form_submission_id:G,discount_code_id:(k==null?void 0:k.id)||null,subtotal:N.subtotal,discount_amount:N.discount_amount,total:N.total,status:"PENDING",customer_email:v.email,customer_name:v.name||null,items:fe},me=await P4.create(se);n&&n({order:me,submission:G})}else n&&n({submission:G})}catch{m("Error submitting form. Please try again.")}finally{h(!1)}},Re=(B,U)=>{var J,fe;const G=v[B.label]||"";switch(B.type){case"textarea":return f.jsxs($.Group,{className:"mb-3",children:[f.jsxs($.Label,{children:[B.label," ",B.required&&f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsx($.Control,{as:"textarea",rows:3,placeholder:B.placeholder,value:G,onChange:se=>R(B.label,se.target.value),required:B.required})]},U);case"select":return f.jsxs($.Group,{className:"mb-3",children:[f.jsxs($.Label,{children:[B.label," ",B.required&&f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsxs($.Select,{value:G,onChange:se=>R(B.label,se.target.value),required:B.required,children:[f.jsx("option",{value:"",children:"Select..."}),(J=B.options)==null?void 0:J.map((se,me)=>f.jsx("option",{value:se,children:se},me))]})]},U);case"checkbox":return f.jsx($.Group,{className:"mb-3",children:f.jsx($.Check,{type:"checkbox",label:B.label,checked:!!G,onChange:se=>R(B.label,se.target.checked),required:B.required})},U);case"radio":return f.jsxs($.Group,{className:"mb-3",children:[f.jsxs($.Label,{children:[B.label," ",B.required&&f.jsx("span",{className:"text-danger",children:"*"})]}),(fe=B.options)==null?void 0:fe.map((se,me)=>f.jsx($.Check,{type:"radio",label:se,name:B.label,value:se,checked:G===se,onChange:Ne=>R(B.label,Ne.target.value),required:B.required},me))]},U);default:return f.jsxs($.Group,{className:"mb-3",children:[f.jsxs($.Label,{children:[B.label," ",B.required&&f.jsx("span",{className:"text-danger",children:"*"})]}),f.jsx($.Control,{type:B.type,placeholder:B.placeholder,value:G,onChange:se=>R(B.label,se.target.value),required:B.required})]},U)}};return l?f.jsx(ls,{}):f.jsx(ae,{className:`event-form-embed ${r}`,children:f.jsxs(ae.Body,{children:[i&&f.jsxs("div",{className:"mb-4",children:[f.jsx("h3",{children:i.name}),i.description&&f.jsx("p",{className:"text-muted",children:i.description})]}),p&&f.jsx(Jg,{variant:"danger",children:p}),f.jsxs($,{onSubmit:ge,children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Email *"}),f.jsx($.Control,{type:"email",placeholder:"your@email.com",value:v.email||"",onChange:B=>R("email",B.target.value),required:!0})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Name"}),f.jsx($.Control,{type:"text",placeholder:"Your name",value:v.name||"",onChange:B=>R("name",B.target.value)})]}),(ke=i==null?void 0:i.schema)==null?void 0:ke.map((B,U)=>Re(B,U)),o.length>0&&f.jsxs("div",{className:"mb-4",children:[f.jsx("h5",{className:"mb-3",children:"Select Tickets"}),o.map(B=>{const U=B.quantity-(B.sold||0);return f.jsx(ae,{className:"mb-3",children:f.jsx(ae.Body,{children:f.jsxs(et,{className:"align-items-center",children:[f.jsxs(be,{md:6,children:[f.jsx("h6",{className:"mb-1",children:B.name}),B.description&&f.jsx("p",{className:"text-muted small mb-0",children:B.description}),f.jsxs("strong",{className:"text-primary",children:["$",parseFloat(B.price).toFixed(2)]})]}),f.jsx(be,{md:3,className:"text-muted small",children:U>0?`${U} available`:"Sold out"}),f.jsx(be,{md:3,children:f.jsx($.Control,{type:"number",min:"0",max:U,value:y[B.id]||0,onChange:G=>O(B.id,G.target.value),disabled:U===0})})]})})},B.id)}),f.jsxs("div",{className:"mb-3",children:[f.jsx($.Label,{children:"Discount Code"}),f.jsxs("div",{className:"input-group",children:[f.jsx($.Control,{type:"text",placeholder:"Enter code",value:E,onChange:B=>b(B.target.value.toUpperCase())}),f.jsx(de,{variant:"outline-secondary",onClick:j,children:"Apply"})]}),k&&f.jsxs("small",{className:"text-success",children:["Discount applied: ",k.code]})]}),N.subtotal>0&&f.jsx(ae,{className:"bg-light",children:f.jsxs(ae.Body,{children:[f.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[f.jsx("span",{children:"Subtotal:"}),f.jsxs("strong",{children:["$",N.subtotal.toFixed(2)]})]}),N.discount_amount>0&&f.jsxs("div",{className:"d-flex justify-content-between mb-2 text-success",children:[f.jsx("span",{children:"Discount:"}),f.jsxs("strong",{children:["-$",N.discount_amount.toFixed(2)]})]}),f.jsxs("div",{className:"d-flex justify-content-between pt-2 border-top",children:[f.jsx("strong",{children:"Total:"}),f.jsxs("strong",{className:"text-primary",children:["$",N.total.toFixed(2)]})]})]})})]}),f.jsx(de,{type:"submit",variant:"primary",size:"lg",className:"w-100",disabled:u,children:u?"Submitting...":o.length>0?"Proceed to Payment":"Submit"})]})]})})}function xde(){const{formId:t}=Zh(),e=n=>{n.order?window.location.href=`/checkout/${n.order.id}`:alert("Form submitted successfully!")};return f.jsx(On,{className:"py-5",style:{maxWidth:"800px"},children:f.jsx(Sde,{formId:t,onSubmitSuccess:e,theme:"light"})})}/*!
 * Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */const eU={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},Ade=({name:t,signal:e=iv,variant:n,className:r,isValid:i,isInvalid:s,options:o={},...a})=>{const l=I.useRef([]),c=(o==null?void 0:o.parentContainerClassName)||"",u=(o==null?void 0:o.length)||4;I.useEffect(()=>{var w;(((w=e.value)==null?void 0:w[t])||"").split("").forEach((y,T)=>{l.current[T]&&(l.current[T].value=y)})},[t,e]);const h=(v,w)=>{var E;const{value:y}=v.target;if(y.length>1){v.target.value=y.charAt(0);return}const T=[...((E=e.value)==null?void 0:E[t])||""];T[w]=y,e.update({[t]:T.join("")}),y&&w<l.current.length-1&&l.current[w+1].focus()},p=(v,w)=>{v.key==="Backspace"&&!v.target.value&&w>0&&l.current[w-1].focus()},m=v=>{v.preventDefault();const y=v.clipboardData.getData("text").slice(0,u).split("");y.forEach((T,E)=>{l.current[E]&&(l.current[E].value=T)}),e.update({[t]:y.join("")}),y.length<u&&l.current[y.length].focus()};return f.jsx(et,{className:`${c} input-box-group-container`,children:Array.from({length:u}).map((v,w)=>f.jsx(be,{className:"d-flex justify-content-center p-0",children:f.jsx($.Control,{type:"text",maxLength:1,className:`custom-box-input ${n} ${r||""} shadow-none py-8`,ref:y=>{l.current[w]=y},onChange:y=>h(y,w),onKeyDown:y=>p(y,w),onPaste:m,isValid:i,isInvalid:s,...a})},w))})},Rde=({name:t,signal:e=iv,label:n,className:r,...i})=>{var s;return f.jsx($.Group,{children:f.jsx($.Check,{type:"checkbox",label:n,name:t,className:`${r} small custom-checkbox`,checked:((s=e.value)==null?void 0:s[t])??!1,onChange:()=>{var o;return e.update({[t]:!((o=e.value)!=null&&o[t])})},...i})})},XC=t=>{const e=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;return(t==null?void 0:t.length)&&e.test(t)},kde=t=>{if(!(t!=null&&t.length))return"";const e=t==null?void 0:t.replace(/\D/g,""),n=e==null?void 0:e.length;return n<4?e:n<7?`(${e.slice(0,3)}) ${e.slice(3)}`:`(${e==null?void 0:e.slice(0,3)}) ${e==null?void 0:e.slice(3,6)}-${e==null?void 0:e.slice(6,10)}`},Cde=t=>new Date(t).toISOString().slice(0,10),Pde=t=>{const e=new Date(t),n=e.getHours().toString().padStart(2,"0"),r=e.getMinutes().toString().padStart(2,"0");return`${n}:${r}`},SS=({type:t,name:e,signal:n=iv,variant:r="form-control",className:i,placeholder:s,inputFormatCallback:o,value:a,customOnChange:l,autoComplete:c,isValid:u,isInvalid:h,inputBoxGroupOptions:p={},disabled:m,...v})=>{if((!n||!e)&&!l)return new Error(`Universal Input has no signal or name (Name: ${e})`);if(t==="inputBoxGroup")return f.jsx(Ade,{name:e,signal:n,variant:r,className:i,isValid:u,isInvalid:h,options:p,...v});if(t==="checkbox")return f.jsx(Rde,{name:e,signal:n,className:i,...v});const{[e]:w}=n.value,y={email:{valid:XC(w),invalid:!XC(w)},phone:{valid:(w==null?void 0:w.length)===14,invalid:(w==null?void 0:w.length)<14}},T=()=>t==="phone"?kde(w):t==="date"?Cde(w):t==="time"&&w instanceof Date?Pde(w):w||a||"";return f.jsx($.Control,{type:t||"text",value:T(),placeholder:s,className:`w-100 ${r} ${i||""} ${m?"text-dark-300":""} shadow-none py-8 ps-16`,name:e,autoComplete:c,onChange:l||(E=>n.update({[e]:o?o(E.target.value):E.target.value})),isValid:y[t]?y[t].valid:u,isInvalid:y[t]?w&&y[t].invalid:h,disabled:m,maxLength:t==="phone"?14:"",...v})},ea=as({}),eh=(t,e)=>e?t!==e?"Passwords must match":!1:t?(t==null?void 0:t.length)<8?"Must be at least 8 characters":/[A-Z]/.test(t)?/[a-z]/.test(t)?/\d/.test(t)?/[*@!#%&()^~{}]+/.test(t)?!1:"Must contain a special character":"Must contain a number":"Must contain a lower case letter":"Must contain an upper case letter":!1,Ode=(t,e,n)=>{const{[`${t}Hover`]:r,[`${t}Focus`]:i}=ea.value;return e&&!eh(e,n)?"success":e&&eh(e,n)?"danger":r?"primary":i?"focus":"grey"},OE=({name:t,signal:e=iv,className:n,placeholder:r,value:i,customOnChange:s,inputFormatCallback:o,passwordToMatch:a,...l})=>{const{[`${t}Password`]:c=!1}=ea.value,{[t]:u}=e.value,h=u&&eh(u,a);return f.jsxs(f.Fragment,{children:[f.jsxs(iA,{className:`
          ${n} ${h?"":"mb-16"}
          border border-${Ode(t,u,a)}
        `,onMouseEnter:()=>ea.update({[`${t}Hover`]:!0}),onMouseLeave:()=>ea.update({[`${t}Hover`]:!1}),style:{borderRadius:"0.375rem"},children:[f.jsx($.Control,{name:t,type:c?"text":"password",placeholder:r||"Password",value:i,onChange:s||(p=>e.update({[t]:o?o(p.target.value):p.target.value})),className:"form-control border-0 shadow-none py-8 ps-16",onFocus:()=>ea.update({[`${t}Focus`]:!0}),onBlur:()=>ea.update({[`${t}Focus`]:!1}),isValid:u&&!eh(u,a),isInvalid:u&&eh(u,a),style:{borderRadius:"0.375rem"},...l}),f.jsx(iA.Text,{className:"bg-white border-0 p-0 pe-8",onClick:()=>ea.update({[`${t}Password`]:!c}),style:{cursor:"pointer",borderTopRightRadius:"0.375rem",borderBottomRightRadius:"0.375rem"},children:f.jsx(Ae,{icon:c?Bj:LH,className:"text-dark-400",style:{height:"14px",width:"18px"}})})]}),h&&f.jsx("p",{className:"xsmall text-danger ms-8 mb-0",children:h})]})},tw=ur({email:"",password:""}),Nde=()=>{const t=Gr(),[e]=TN(),[n,r]=I.useState(!1),i=e.get("redirect")||"/admin",s=async a=>{a.preventDefault(),r(!0);try{const{email:l,password:c}=tw.value;if(!l||!c){rt.update({message:"Please enter both email and password",variant:"danger"}),r(!1);return}await xae(l,c),rt.update({message:"Successfully logged in!",variant:"success"}),t(i)}catch(l){rt.update({message:l.message||"Failed to log in. Please check your credentials.",variant:"danger"}),r(!1)}},o=async()=>{r(!0);try{await C4(),rt.update({message:"Successfully logged in with Google!",variant:"success"}),t(i)}catch(a){rt.update({message:a.message||"Failed to log in with Google.",variant:"danger"}),r(!1)}};return f.jsx(On,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:f.jsx(et,{className:"w-100",children:f.jsx(be,{xs:12,md:6,lg:5,xl:4,className:"mx-auto",children:f.jsx(ae,{className:"shadow",children:f.jsxs(ae.Body,{className:"p-4",children:[f.jsx("h2",{className:"text-center mb-4",children:"Login"}),f.jsxs($,{onSubmit:s,children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Email"}),f.jsx(SS,{type:"email",name:"email",signal:tw,placeholder:"Enter your email",autoComplete:"email",disabled:n})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Password"}),f.jsx(OE,{name:"password",signal:tw,placeholder:"Enter your password",autoComplete:"current-password",disabled:n})]}),f.jsx("div",{className:"d-flex justify-content-between align-items-center mb-3",children:f.jsx(dt,{to:"/forgot-password",className:"text-decoration-none small",children:"Forgot Password?"})}),f.jsx(de,{variant:"primary",type:"submit",className:"w-100 mb-3",disabled:n,children:n?"Logging in...":"Login"}),f.jsx("div",{className:"text-center mb-3",children:f.jsx("span",{className:"text-muted",children:"or"})}),f.jsxs(de,{variant:"outline-secondary",className:"w-100 mb-3",onClick:o,disabled:n,children:[f.jsx(Ae,{icon:eU,className:"me-2"}),"Sign in with Google"]}),f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"text-muted",children:"Don't have an account? "}),f.jsx(dt,{to:"/signup",className:"text-decoration-none",children:"Sign up"})]})]})]})})})})})},Go=ur({email:"",password:"",confirmPassword:""}),Dde=()=>{const t=Gr(),[e,n]=I.useState(!1),[r,i]=I.useState(!1),s=()=>{const{email:l,password:c,confirmPassword:u}=Go.value;return!l||!c||!u?(rt.update({message:"Please fill in all fields",variant:"danger"}),!1):c.length<6?(rt.update({message:"Password must be at least 6 characters long",variant:"danger"}),!1):c!==u?(rt.update({message:"Passwords do not match",variant:"danger"}),!1):!0},o=async l=>{if(l.preventDefault(),!!s()){n(!0);try{const{email:c,password:u}=Go.value;await Rae(c,u),i(!0),rt.update({message:"Account created successfully! Please check your email to verify your account.",variant:"success"}),Go.reset(),setTimeout(()=>{t("/login")},3e3)}catch(c){let u="Failed to create account. Please try again.";c.code==="auth/email-already-in-use"?u="This email is already registered. Please login instead.":c.code==="auth/invalid-email"?u="Invalid email address.":c.code==="auth/weak-password"&&(u="Password is too weak. Please use a stronger password."),rt.update({message:u,variant:"danger"}),n(!1)}}},a=async()=>{n(!0);try{await C4(),rt.update({message:"Successfully signed up with Google!",variant:"success"}),t("/admin")}catch(l){rt.update({message:l.message||"Failed to sign up with Google.",variant:"danger"}),n(!1)}};return f.jsx(On,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:f.jsx(et,{className:"w-100",children:f.jsx(be,{xs:12,md:6,lg:5,xl:4,className:"mx-auto",children:f.jsx(ae,{className:"shadow",children:f.jsxs(ae.Body,{className:"p-4",children:[f.jsx("h2",{className:"text-center mb-4",children:"Sign Up"}),r&&f.jsxs(Jg,{variant:"info",className:"mb-3",children:[f.jsx("strong",{children:"Email Verification Sent!"}),f.jsx("p",{className:"mb-0 mt-2 small",children:"We've sent a verification email to your address. Please verify your email before logging in."})]}),f.jsxs($,{onSubmit:o,children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Email"}),f.jsx(SS,{type:"email",name:"email",signal:Go,placeholder:"Enter your email",autoComplete:"email",disabled:e||r})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Password"}),f.jsx(OE,{name:"password",signal:Go,placeholder:"Enter your password",autoComplete:"new-password",disabled:e||r}),f.jsx($.Text,{className:"text-muted small",children:"Password must be at least 6 characters long"})]}),f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Confirm Password"}),f.jsx(OE,{name:"confirmPassword",signal:Go,placeholder:"Confirm your password",passwordToMatch:Go.value.password,autoComplete:"new-password",disabled:e||r})]}),f.jsx(de,{variant:"primary",type:"submit",className:"w-100 mb-3",disabled:e||r,children:e?"Creating Account...":"Sign Up"}),!r&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"text-center mb-3",children:f.jsx("span",{className:"text-muted",children:"or"})}),f.jsxs(de,{variant:"outline-secondary",className:"w-100 mb-3",onClick:a,disabled:e,children:[f.jsx(Ae,{icon:eU,className:"me-2"}),"Sign up with Google"]})]}),f.jsxs("div",{className:"text-center",children:[f.jsx("span",{className:"text-muted",children:"Already have an account? "}),f.jsx(dt,{to:"/login",className:"text-decoration-none",children:"Login"})]})]})]})})})})})},nw=ur({email:""}),jde=()=>{const[t,e]=I.useState(!1),[n,r]=I.useState(!1),i=async s=>{s.preventDefault(),e(!0);try{const{email:o}=nw.value;if(!o){rt.update({message:"Please enter your email address",variant:"danger"}),e(!1);return}await kae(o),r(!0),rt.update({message:"Password reset email sent! Please check your inbox.",variant:"success"}),nw.reset()}catch(o){let a="Failed to send password reset email. Please try again.";o.code==="auth/user-not-found"?a="No account found with this email address.":o.code==="auth/invalid-email"&&(a="Invalid email address."),rt.update({message:a,variant:"danger"})}finally{e(!1)}};return f.jsx(On,{className:"d-flex align-items-center justify-content-center",style:{minHeight:"100vh"},children:f.jsx(et,{className:"w-100",children:f.jsx(be,{xs:12,md:6,lg:5,xl:4,className:"mx-auto",children:f.jsx(ae,{className:"shadow",children:f.jsxs(ae.Body,{className:"p-4",children:[f.jsx("h2",{className:"text-center mb-4",children:"Reset Password"}),n&&f.jsxs(Jg,{variant:"success",className:"mb-3",children:[f.jsx("strong",{children:"Email Sent!"}),f.jsx("p",{className:"mb-0 mt-2 small",children:"We've sent a password reset link to your email address. Please check your inbox and follow the instructions."})]}),f.jsx("p",{className:"text-muted text-center mb-4",children:"Enter your email address and we'll send you a link to reset your password."}),f.jsxs($,{onSubmit:i,children:[f.jsxs($.Group,{className:"mb-3",children:[f.jsx($.Label,{children:"Email"}),f.jsx(SS,{type:"email",name:"email",signal:nw,placeholder:"Enter your email",autoComplete:"email",disabled:t})]}),f.jsx(de,{variant:"primary",type:"submit",className:"w-100 mb-3",disabled:t,children:t?"Sending...":"Send Reset Link"}),f.jsx("div",{className:"text-center",children:f.jsx(dt,{to:"/login",className:"text-decoration-none",children:"Back to Login"})})]})]})})})})})};function Lde(){return f.jsxs(f.Fragment,{children:[f.jsx(ele,{}),f.jsx(X6,{children:f.jsx(W6,{children:f.jsxs(Mt,{element:f.jsx(Yae,{}),children:[f.jsx(Mt,{path:"/",element:f.jsx(Dq,{})}),f.jsxs(Mt,{element:f.jsx(jq,{}),children:[f.jsx(Mt,{path:"/login",element:f.jsx(Nde,{})}),f.jsx(Mt,{path:"/signup",element:f.jsx(Dde,{})}),f.jsx(Mt,{path:"/forgot-password",element:f.jsx(jde,{})}),f.jsx(Mt,{path:"/embed/form/:formId",element:f.jsx(xde,{})})]}),f.jsxs(Mt,{element:f.jsx(Mae,{}),children:[f.jsx(Mt,{path:"/admin",element:f.jsx(tle,{})}),f.jsx(Mt,{path:"/admin/events",element:f.jsx(lce,{})}),f.jsx(Mt,{path:"/admin/events/new",element:f.jsx(VC,{})}),f.jsx(Mt,{path:"/admin/events/:id",element:f.jsx(dce,{})}),f.jsx(Mt,{path:"/admin/events/:id/edit",element:f.jsx(VC,{})}),f.jsx(Mt,{path:"/admin/forms",element:f.jsx(hce,{})}),f.jsx(Mt,{path:"/admin/forms/new",element:f.jsx(JC,{})}),f.jsx(Mt,{path:"/admin/forms/:id/edit",element:f.jsx(JC,{})}),f.jsx(Mt,{path:"/admin/forms/:id/embed",element:f.jsx(Ide,{})})]}),f.jsx(Mt,{path:"*",element:f.jsx(pq,{})})]})})})]})}rw.createRoot(document.getElementById("root")).render(f.jsx(Et.StrictMode,{children:f.jsx(Lde,{})}));
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
